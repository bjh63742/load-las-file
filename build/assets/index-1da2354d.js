var Z6=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var eK=Z6((MK,e2)=>{function X6(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const a in i)if(a!=="default"&&!(a in t)){const l=Object.getOwnPropertyDescriptor(i,a);l&&Object.defineProperty(t,a,l.get?l:{enumerable:!0,get:()=>i[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const f of l.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&i(f)}).observe(document,{childList:!0,subtree:!0});function n(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(a){if(a.ep)return;a.ep=!0;const l=n(a);fetch(a.href,l)}})();function Yl(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var cT={exports:{}},$l={},fT={exports:{}},dt={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var py=Object.getOwnPropertySymbols,H6=Object.prototype.hasOwnProperty,Y6=Object.prototype.propertyIsEnumerable;function $6(t){if(t==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function J6(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de",Object.getOwnPropertyNames(t)[0]==="5")return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;var i=Object.getOwnPropertyNames(e).map(function(l){return e[l]});if(i.join("")!=="0123456789")return!1;var a={};return"abcdefghijklmnopqrst".split("").forEach(function(l){a[l]=l}),Object.keys(Object.assign({},a)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var hT=J6()?Object.assign:function(t,e){for(var n,i=$6(t),a,l=1;l<arguments.length;l++){n=Object(arguments[l]);for(var f in n)H6.call(n,f)&&(i[f]=n[f]);if(py){a=py(n);for(var d=0;d<a.length;d++)Y6.call(n,a[d])&&(i[a[d]]=n[a[d]])}}return i};/** @license React v16.14.0
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t2=hT,di=typeof Symbol=="function"&&Symbol.for,Jl=di?Symbol.for("react.element"):60103,Q6=di?Symbol.for("react.portal"):60106,q6=di?Symbol.for("react.fragment"):60107,K6=di?Symbol.for("react.strict_mode"):60108,eL=di?Symbol.for("react.profiler"):60114,tL=di?Symbol.for("react.provider"):60109,nL=di?Symbol.for("react.context"):60110,rL=di?Symbol.for("react.forward_ref"):60112,iL=di?Symbol.for("react.suspense"):60113,sL=di?Symbol.for("react.memo"):60115,oL=di?Symbol.for("react.lazy"):60116,gy=typeof Symbol=="function"&&Symbol.iterator;function Ql(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var dT={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},pT={};function _u(t,e,n){this.props=t,this.context=e,this.refs=pT,this.updater=n||dT}_u.prototype.isReactComponent={};_u.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error(Ql(85));this.updater.enqueueSetState(this,t,e,"setState")};_u.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function gT(){}gT.prototype=_u.prototype;function n2(t,e,n){this.props=t,this.context=e,this.refs=pT,this.updater=n||dT}var r2=n2.prototype=new gT;r2.constructor=n2;t2(r2,_u.prototype);r2.isPureReactComponent=!0;var i2={current:null},mT=Object.prototype.hasOwnProperty,AT={key:!0,ref:!0,__self:!0,__source:!0};function yT(t,e,n){var i,a={},l=null,f=null;if(e!=null)for(i in e.ref!==void 0&&(f=e.ref),e.key!==void 0&&(l=""+e.key),e)mT.call(e,i)&&!AT.hasOwnProperty(i)&&(a[i]=e[i]);var d=arguments.length-2;if(d===1)a.children=n;else if(1<d){for(var g=Array(d),v=0;v<d;v++)g[v]=arguments[v+2];a.children=g}if(t&&t.defaultProps)for(i in d=t.defaultProps,d)a[i]===void 0&&(a[i]=d[i]);return{$$typeof:Jl,type:t,key:l,ref:f,props:a,_owner:i2.current}}function aL(t,e){return{$$typeof:Jl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function s2(t){return typeof t=="object"&&t!==null&&t.$$typeof===Jl}function uL(t){var e={"=":"=0",":":"=2"};return"$"+(""+t).replace(/[=:]/g,function(n){return e[n]})}var vT=/\/+/g,U0=[];function _T(t,e,n,i){if(U0.length){var a=U0.pop();return a.result=t,a.keyPrefix=e,a.func=n,a.context=i,a.count=0,a}return{result:t,keyPrefix:e,func:n,context:i,count:0}}function wT(t){t.result=null,t.keyPrefix=null,t.func=null,t.context=null,t.count=0,10>U0.length&&U0.push(t)}function Sp(t,e,n,i){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case Jl:case Q6:l=!0}}if(l)return n(i,t,e===""?"."+hd(t,0):e),1;if(l=0,e=e===""?".":e+":",Array.isArray(t))for(var f=0;f<t.length;f++){a=t[f];var d=e+hd(a,f);l+=Sp(a,d,n,i)}else if(t===null||typeof t!="object"?d=null:(d=gy&&t[gy]||t["@@iterator"],d=typeof d=="function"?d:null),typeof d=="function")for(t=d.call(t),f=0;!(a=t.next()).done;)a=a.value,d=e+hd(a,f++),l+=Sp(a,d,n,i);else if(a==="object")throw n=""+t,Error(Ql(31,n==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":n,""));return l}function xp(t,e,n){return t==null?0:Sp(t,"",e,n)}function hd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?uL(t.key):e.toString(36)}function lL(t,e){t.func.call(t.context,e,t.count++)}function cL(t,e,n){var i=t.result,a=t.keyPrefix;t=t.func.call(t.context,e,t.count++),Array.isArray(t)?Rp(t,i,n,function(l){return l}):t!=null&&(s2(t)&&(t=aL(t,a+(!t.key||e&&e.key===t.key?"":(""+t.key).replace(vT,"$&/")+"/")+n)),i.push(t))}function Rp(t,e,n,i,a){var l="";n!=null&&(l=(""+n).replace(vT,"$&/")+"/"),e=_T(e,l,i,a),xp(t,cL,e),wT(e)}var TT={current:null};function ps(){var t=TT.current;if(t===null)throw Error(Ql(321));return t}var fL={ReactCurrentDispatcher:TT,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:i2,IsSomeRendererActing:{current:!1},assign:t2};dt.Children={map:function(t,e,n){if(t==null)return t;var i=[];return Rp(t,i,null,e,n),i},forEach:function(t,e,n){if(t==null)return t;e=_T(null,null,e,n),xp(t,lL,e),wT(e)},count:function(t){return xp(t,function(){return null},null)},toArray:function(t){var e=[];return Rp(t,e,null,function(n){return n}),e},only:function(t){if(!s2(t))throw Error(Ql(143));return t}};dt.Component=_u;dt.Fragment=q6;dt.Profiler=eL;dt.PureComponent=n2;dt.StrictMode=K6;dt.Suspense=iL;dt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fL;dt.cloneElement=function(t,e,n){if(t==null)throw Error(Ql(267,t));var i=t2({},t.props),a=t.key,l=t.ref,f=t._owner;if(e!=null){if(e.ref!==void 0&&(l=e.ref,f=i2.current),e.key!==void 0&&(a=""+e.key),t.type&&t.type.defaultProps)var d=t.type.defaultProps;for(g in e)mT.call(e,g)&&!AT.hasOwnProperty(g)&&(i[g]=e[g]===void 0&&d!==void 0?d[g]:e[g])}var g=arguments.length-2;if(g===1)i.children=n;else if(1<g){d=Array(g);for(var v=0;v<g;v++)d[v]=arguments[v+2];i.children=d}return{$$typeof:Jl,type:t.type,key:a,ref:l,props:i,_owner:f}};dt.createContext=function(t,e){return e===void 0&&(e=null),t={$$typeof:nL,_calculateChangedBits:e,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider={$$typeof:tL,_context:t},t.Consumer=t};dt.createElement=yT;dt.createFactory=function(t){var e=yT.bind(null,t);return e.type=t,e};dt.createRef=function(){return{current:null}};dt.forwardRef=function(t){return{$$typeof:rL,render:t}};dt.isValidElement=s2;dt.lazy=function(t){return{$$typeof:oL,_ctor:t,_status:-1,_result:null}};dt.memo=function(t,e){return{$$typeof:sL,type:t,compare:e===void 0?null:e}};dt.useCallback=function(t,e){return ps().useCallback(t,e)};dt.useContext=function(t,e){return ps().useContext(t,e)};dt.useDebugValue=function(){};dt.useEffect=function(t,e){return ps().useEffect(t,e)};dt.useImperativeHandle=function(t,e,n){return ps().useImperativeHandle(t,e,n)};dt.useLayoutEffect=function(t,e){return ps().useLayoutEffect(t,e)};dt.useMemo=function(t,e){return ps().useMemo(t,e)};dt.useReducer=function(t,e,n){return ps().useReducer(t,e,n)};dt.useRef=function(t){return ps().useRef(t)};dt.useState=function(t){return ps().useState(t)};dt.version="16.14.0";fT.exports=dt;var it=fT.exports;const Js=Yl(it);/** @license React v16.14.0
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hL=it,ET=60103;$l.Fragment=60107;if(typeof Symbol=="function"&&Symbol.for){var my=Symbol.for;ET=my("react.element"),$l.Fragment=my("react.fragment")}var dL=hL.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,pL=Object.prototype.hasOwnProperty,gL={key:!0,ref:!0,__self:!0,__source:!0};function ST(t,e,n){var i,a={},l=null,f=null;n!==void 0&&(l=""+n),e.key!==void 0&&(l=""+e.key),e.ref!==void 0&&(f=e.ref);for(i in e)pL.call(e,i)&&!gL.hasOwnProperty(i)&&(a[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)a[i]===void 0&&(a[i]=e[i]);return{$$typeof:ET,type:t,key:l,ref:f,props:a,_owner:dL.current}}$l.jsx=ST;$l.jsxs=ST;cT.exports=$l;var vn=cT.exports,xT={exports:{}},Jr={},RT={exports:{}},bT={};/** @license React v0.19.1
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){var e,n,i,a,l;if(typeof window>"u"||typeof MessageChannel!="function"){var f=null,d=null,g=function(){if(f!==null)try{var ue=t.unstable_now();f(!0,ue),f=null}catch(Ae){throw setTimeout(g,0),Ae}},v=Date.now();t.unstable_now=function(){return Date.now()-v},e=function(ue){f!==null?setTimeout(e,0,ue):(f=ue,setTimeout(g,0))},n=function(ue,Ae){d=setTimeout(ue,Ae)},i=function(){clearTimeout(d)},a=function(){return!1},l=t.unstable_forceFrameRate=function(){}}else{var T=window.performance,S=window.Date,x=window.setTimeout,M=window.clearTimeout;if(typeof console<"u"){var B=window.cancelAnimationFrame;typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),typeof B!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if(typeof T=="object"&&typeof T.now=="function")t.unstable_now=function(){return T.now()};else{var W=S.now();t.unstable_now=function(){return S.now()-W}}var N=!1,F=null,V=-1,j=5,X=0;a=function(){return t.unstable_now()>=X},l=function(){},t.unstable_forceFrameRate=function(ue){0>ue||125<ue?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):j=0<ue?Math.floor(1e3/ue):5};var Q=new MessageChannel,K=Q.port2;Q.port1.onmessage=function(){if(F!==null){var ue=t.unstable_now();X=ue+j;try{F(!0,ue)?K.postMessage(null):(N=!1,F=null)}catch(Ae){throw K.postMessage(null),Ae}}else N=!1},e=function(ue){F=ue,N||(N=!0,K.postMessage(null))},n=function(ue,Ae){V=x(function(){ue(t.unstable_now())},Ae)},i=function(){M(V),V=-1}}function ae(ue,Ae){var Ve=ue.length;ue.push(Ae);e:for(;;){var Ie=Ve-1>>>1,Ke=ue[Ie];if(Ke!==void 0&&0<_e(Ke,Ae))ue[Ie]=Ae,ue[Ve]=Ke,Ve=Ie;else break e}}function fe(ue){return ue=ue[0],ue===void 0?null:ue}function se(ue){var Ae=ue[0];if(Ae!==void 0){var Ve=ue.pop();if(Ve!==Ae){ue[0]=Ve;e:for(var Ie=0,Ke=ue.length;Ie<Ke;){var je=2*(Ie+1)-1,gt=ue[je],xt=je+1,Yt=ue[xt];if(gt!==void 0&&0>_e(gt,Ve))Yt!==void 0&&0>_e(Yt,gt)?(ue[Ie]=Yt,ue[xt]=Ve,Ie=xt):(ue[Ie]=gt,ue[je]=Ve,Ie=je);else if(Yt!==void 0&&0>_e(Yt,Ve))ue[Ie]=Yt,ue[xt]=Ve,Ie=xt;else break e}}return Ae}return null}function _e(ue,Ae){var Ve=ue.sortIndex-Ae.sortIndex;return Ve!==0?Ve:ue.id-Ae.id}var we=[],qe=[],kt=1,Pe=null,Ee=3,On=!1,mt=!1,Ht=!1;function Bt(ue){for(var Ae=fe(qe);Ae!==null;){if(Ae.callback===null)se(qe);else if(Ae.startTime<=ue)se(qe),Ae.sortIndex=Ae.expirationTime,ae(we,Ae);else break;Ae=fe(qe)}}function En(ue){if(Ht=!1,Bt(ue),!mt)if(fe(we)!==null)mt=!0,e(ct);else{var Ae=fe(qe);Ae!==null&&n(En,Ae.startTime-ue)}}function ct(ue,Ae){mt=!1,Ht&&(Ht=!1,i()),On=!0;var Ve=Ee;try{for(Bt(Ae),Pe=fe(we);Pe!==null&&(!(Pe.expirationTime>Ae)||ue&&!a());){var Ie=Pe.callback;if(Ie!==null){Pe.callback=null,Ee=Pe.priorityLevel;var Ke=Ie(Pe.expirationTime<=Ae);Ae=t.unstable_now(),typeof Ke=="function"?Pe.callback=Ke:Pe===fe(we)&&se(we),Bt(Ae)}else se(we);Pe=fe(we)}if(Pe!==null)var je=!0;else{var gt=fe(qe);gt!==null&&n(En,gt.startTime-Ae),je=!1}return je}finally{Pe=null,Ee=Ve,On=!1}}function Dt(ue){switch(ue){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var rr=l;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ue){ue.callback=null},t.unstable_continueExecution=function(){mt||On||(mt=!0,e(ct))},t.unstable_getCurrentPriorityLevel=function(){return Ee},t.unstable_getFirstCallbackNode=function(){return fe(we)},t.unstable_next=function(ue){switch(Ee){case 1:case 2:case 3:var Ae=3;break;default:Ae=Ee}var Ve=Ee;Ee=Ae;try{return ue()}finally{Ee=Ve}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=rr,t.unstable_runWithPriority=function(ue,Ae){switch(ue){case 1:case 2:case 3:case 4:case 5:break;default:ue=3}var Ve=Ee;Ee=ue;try{return Ae()}finally{Ee=Ve}},t.unstable_scheduleCallback=function(ue,Ae,Ve){var Ie=t.unstable_now();if(typeof Ve=="object"&&Ve!==null){var Ke=Ve.delay;Ke=typeof Ke=="number"&&0<Ke?Ie+Ke:Ie,Ve=typeof Ve.timeout=="number"?Ve.timeout:Dt(ue)}else Ve=Dt(ue),Ke=Ie;return Ve=Ke+Ve,ue={id:kt++,callback:Ae,priorityLevel:ue,startTime:Ke,expirationTime:Ve,sortIndex:-1},Ke>Ie?(ue.sortIndex=Ke,ae(qe,ue),fe(we)===null&&ue===fe(qe)&&(Ht?i():Ht=!0,n(En,Ke-Ie))):(ue.sortIndex=Ve,ae(we,ue),mt||On||(mt=!0,e(ct))),ue},t.unstable_shouldYield=function(){var ue=t.unstable_now();Bt(ue);var Ae=fe(we);return Ae!==Pe&&Pe!==null&&Ae!==null&&Ae.callback!==null&&Ae.startTime<=ue&&Ae.expirationTime<Pe.expirationTime||a()},t.unstable_wrapCallback=function(ue){var Ae=Ee;return function(){var Ve=Ee;Ee=Ae;try{return ue.apply(this,arguments)}finally{Ee=Ve}}}})(bT);RT.exports=bT;var mL=RT.exports;/** @license React v16.14.0
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vf=it,Zn=hT,wn=mL;function le(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!Vf)throw Error(le(227));function AL(t,e,n,i,a,l,f,d,g){var v=Array.prototype.slice.call(arguments,3);try{e.apply(n,v)}catch(T){this.onError(T)}}var ml=!1,B0=null,D0=!1,bp=null,yL={onError:function(t){ml=!0,B0=t}};function vL(t,e,n,i,a,l,f,d,g){ml=!1,B0=null,AL.apply(yL,arguments)}function _L(t,e,n,i,a,l,f,d,g){if(vL.apply(this,arguments),ml){if(ml){var v=B0;ml=!1,B0=null}else throw Error(le(198));D0||(D0=!0,bp=v)}}var o2=null,kT=null,PT=null;function Ay(t,e,n){var i=t.type||"unknown-event";t.currentTarget=PT(n),_L(i,e,void 0,t),t.currentTarget=null}var z0=null,Da={};function MT(){if(z0)for(var t in Da){var e=Da[t],n=z0.indexOf(t);if(!(-1<n))throw Error(le(96,t));if(!j0[n]){if(!e.extractEvents)throw Error(le(97,t));j0[n]=e,n=e.eventTypes;for(var i in n){var a=void 0,l=n[i],f=e,d=i;if(kp.hasOwnProperty(d))throw Error(le(99,d));kp[d]=l;var g=l.phasedRegistrationNames;if(g){for(a in g)g.hasOwnProperty(a)&&yy(g[a],f,d);a=!0}else l.registrationName?(yy(l.registrationName,f,d),a=!0):a=!1;if(!a)throw Error(le(98,i,t))}}}}function yy(t,e,n){if(iu[t])throw Error(le(100,t));iu[t]=e,a2[t]=e.eventTypes[n].dependencies}var j0=[],kp={},iu={},a2={};function CT(t){var e=!1,n;for(n in t)if(t.hasOwnProperty(n)){var i=t[n];if(!Da.hasOwnProperty(n)||Da[n]!==i){if(Da[n])throw Error(le(102,n));Da[n]=i,e=!0}}e&&MT()}var to=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Pp=null,$a=null,Ja=null;function vy(t){if(t=kT(t)){if(typeof Pp!="function")throw Error(le(280));var e=t.stateNode;e&&(e=o2(e),Pp(t.stateNode,t.type,e))}}function IT(t){$a?Ja?Ja.push(t):Ja=[t]:$a=t}function NT(){if($a){var t=$a,e=Ja;if(Ja=$a=null,vy(t),e)for(t=0;t<e.length;t++)vy(e[t])}}function u2(t,e){return t(e)}function FT(t,e,n,i,a){return t(e,n,i,a)}function l2(){}var OT=u2,Lo=!1,dd=!1;function c2(){($a!==null||Ja!==null)&&(l2(),NT())}function LT(t,e,n){if(dd)return t(e,n);dd=!0;try{return OT(t,e,n)}finally{dd=!1,c2()}}var wL=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_y=Object.prototype.hasOwnProperty,wy={},Ty={};function TL(t){return _y.call(Ty,t)?!0:_y.call(wy,t)?!1:wL.test(t)?Ty[t]=!0:(wy[t]=!0,!1)}function EL(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function SL(t,e,n,i){if(e===null||typeof e>"u"||EL(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Xn(t,e,n,i,a,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=l}var Tn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Tn[t]=new Xn(t,0,!1,t,null,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Tn[e]=new Xn(e,1,!1,t[1],null,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Tn[t]=new Xn(t,2,!1,t.toLowerCase(),null,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Tn[t]=new Xn(t,2,!1,t,null,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Tn[t]=new Xn(t,3,!1,t.toLowerCase(),null,!1)});["checked","multiple","muted","selected"].forEach(function(t){Tn[t]=new Xn(t,3,!0,t,null,!1)});["capture","download"].forEach(function(t){Tn[t]=new Xn(t,4,!1,t,null,!1)});["cols","rows","size","span"].forEach(function(t){Tn[t]=new Xn(t,6,!1,t,null,!1)});["rowSpan","start"].forEach(function(t){Tn[t]=new Xn(t,5,!1,t.toLowerCase(),null,!1)});var f2=/[\-:]([a-z])/g;function h2(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(f2,h2);Tn[e]=new Xn(e,1,!1,t,null,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(f2,h2);Tn[e]=new Xn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(f2,h2);Tn[e]=new Xn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1)});["tabIndex","crossOrigin"].forEach(function(t){Tn[t]=new Xn(t,1,!1,t.toLowerCase(),null,!1)});Tn.xlinkHref=new Xn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0);["src","href","action","formAction"].forEach(function(t){Tn[t]=new Xn(t,1,!1,t.toLowerCase(),null,!0)});var li=Vf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;li.hasOwnProperty("ReactCurrentDispatcher")||(li.ReactCurrentDispatcher={current:null});li.hasOwnProperty("ReactCurrentBatchConfig")||(li.ReactCurrentBatchConfig={suspense:null});function d2(t,e,n,i){var a=Tn.hasOwnProperty(e)?Tn[e]:null,l=a!==null?a.type===0:i?!1:!(!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N");l||(SL(e,n,a,i)&&(n=null),i||a===null?TL(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):a.mustUseProperty?t[a.propertyName]=n===null?a.type===3?!1:"":n:(e=a.attributeName,i=a.attributeNamespace,n===null?t.removeAttribute(e):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var xL=/^(.*)[\\\/]/,nr=typeof Symbol=="function"&&Symbol.for,Hc=nr?Symbol.for("react.element"):60103,za=nr?Symbol.for("react.portal"):60106,Oo=nr?Symbol.for("react.fragment"):60107,VT=nr?Symbol.for("react.strict_mode"):60108,A0=nr?Symbol.for("react.profiler"):60114,UT=nr?Symbol.for("react.provider"):60109,BT=nr?Symbol.for("react.context"):60110,RL=nr?Symbol.for("react.concurrent_mode"):60111,p2=nr?Symbol.for("react.forward_ref"):60112,y0=nr?Symbol.for("react.suspense"):60113,Mp=nr?Symbol.for("react.suspense_list"):60120,g2=nr?Symbol.for("react.memo"):60115,DT=nr?Symbol.for("react.lazy"):60116,zT=nr?Symbol.for("react.block"):60121,Ey=typeof Symbol=="function"&&Symbol.iterator;function $u(t){return t===null||typeof t!="object"?null:(t=Ey&&t[Ey]||t["@@iterator"],typeof t=="function"?t:null)}function bL(t){if(t._status===-1){t._status=0;var e=t._ctor;e=e(),t._result=e,e.then(function(n){t._status===0&&(n=n.default,t._status=1,t._result=n)},function(n){t._status===0&&(t._status=2,t._result=n)})}}function us(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Oo:return"Fragment";case za:return"Portal";case A0:return"Profiler";case VT:return"StrictMode";case y0:return"Suspense";case Mp:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case BT:return"Context.Consumer";case UT:return"Context.Provider";case p2:var e=t.render;return e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case g2:return us(t.type);case zT:return us(t.render);case DT:if(t=t._status===1?t._result:null)return us(t)}return null}function m2(t){var e="";do{e:switch(t.tag){case 3:case 4:case 6:case 7:case 10:case 9:var n="";break e;default:var i=t._debugOwner,a=t._debugSource,l=us(t.type);n=null,i&&(n=us(i.type)),i=l,l="",a?l=" (at "+a.fileName.replace(xL,"")+":"+a.lineNumber+")":n&&(l=" (created by "+n+")"),n=`
    in `+(i||"Unknown")+l}e+=n,t=t.return}while(t);return e}function Qs(t){switch(typeof t){case"boolean":case"number":case"object":case"string":case"undefined":return t;default:return""}}function jT(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function kL(t){var e=jT(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,l=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return a.call(this)},set:function(f){i=""+f,l.call(this,f)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(f){i=""+f},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Yc(t){t._valueTracker||(t._valueTracker=kL(t))}function WT(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=jT(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Cp(t,e){var n=e.checked;return Zn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Sy(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=Qs(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function GT(t,e){e=e.checked,e!=null&&d2(t,"checked",e,!1)}function Ip(t,e){GT(t,e);var n=Qs(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Np(t,e.type,n):e.hasOwnProperty("defaultValue")&&Np(t,e.type,Qs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function xy(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Np(t,e,n){(e!=="number"||t.ownerDocument.activeElement!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}function PL(t){var e="";return Vf.Children.forEach(t,function(n){n!=null&&(e+=n)}),e}function Fp(t,e){return t=Zn({children:void 0},e),(e=PL(e.children))&&(t.children=e),t}function Qa(t,e,n,i){if(t=t.options,e){e={};for(var a=0;a<n.length;a++)e["$"+n[a]]=!0;for(n=0;n<t.length;n++)a=e.hasOwnProperty("$"+t[n].value),t[n].selected!==a&&(t[n].selected=a),a&&i&&(t[n].defaultSelected=!0)}else{for(n=""+Qs(n),e=null,a=0;a<t.length;a++){if(t[a].value===n){t[a].selected=!0,i&&(t[a].defaultSelected=!0);return}e!==null||t[a].disabled||(e=t[a])}e!==null&&(e.selected=!0)}}function Op(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(le(91));return Zn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ry(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(le(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(le(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Qs(n)}}function ZT(t,e){var n=Qs(e.value),i=Qs(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function by(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}var XT={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function HT(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Lp(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?HT(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var $c,YT=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,a){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,a)})}:t}(function(t,e){if(t.namespaceURI!==XT.svg||"innerHTML"in t)t.innerHTML=e;else{for($c=$c||document.createElement("div"),$c.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=$c.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Pl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}function Jc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ja={animationend:Jc("Animation","AnimationEnd"),animationiteration:Jc("Animation","AnimationIteration"),animationstart:Jc("Animation","AnimationStart"),transitionend:Jc("Transition","TransitionEnd")},pd={},$T={};to&&($T=document.createElement("div").style,"AnimationEvent"in window||(delete ja.animationend.animation,delete ja.animationiteration.animation,delete ja.animationstart.animation),"TransitionEvent"in window||delete ja.transitionend.transition);function Uf(t){if(pd[t])return pd[t];if(!ja[t])return t;var e=ja[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in $T)return pd[t]=e[n];return t}var JT=Uf("animationend"),QT=Uf("animationiteration"),qT=Uf("animationstart"),KT=Uf("transitionend"),cl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ky=new(typeof WeakMap=="function"?WeakMap:Map);function A2(t){var e=ky.get(t);return e===void 0&&(e=new Map,ky.set(t,e)),e}function ta(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.effectTag&1026&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function eE(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Py(t){if(ta(t)!==t)throw Error(le(188))}function ML(t){var e=t.alternate;if(!e){if(e=ta(t),e===null)throw Error(le(188));return e!==t?null:t}for(var n=t,i=e;;){var a=n.return;if(a===null)break;var l=a.alternate;if(l===null){if(i=a.return,i!==null){n=i;continue}break}if(a.child===l.child){for(l=a.child;l;){if(l===n)return Py(a),t;if(l===i)return Py(a),e;l=l.sibling}throw Error(le(188))}if(n.return!==i.return)n=a,i=l;else{for(var f=!1,d=a.child;d;){if(d===n){f=!0,n=a,i=l;break}if(d===i){f=!0,i=a,n=l;break}d=d.sibling}if(!f){for(d=l.child;d;){if(d===n){f=!0,n=l,i=a;break}if(d===i){f=!0,i=l,n=a;break}d=d.sibling}if(!f)throw Error(le(189))}}if(n.alternate!==i)throw Error(le(190))}if(n.tag!==3)throw Error(le(188));return n.stateNode.current===n?t:e}function tE(t){if(t=ML(t),!t)return null;for(var e=t;;){if(e.tag===5||e.tag===6)return e;if(e.child)e.child.return=e,e=e.child;else{if(e===t)break;for(;!e.sibling;){if(!e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}function su(t,e){if(e==null)throw Error(le(30));return t==null?e:Array.isArray(t)?Array.isArray(e)?(t.push.apply(t,e),t):(t.push(e),t):Array.isArray(e)?[t].concat(e):[t,e]}function y2(t,e,n){Array.isArray(t)?t.forEach(e,n):t&&e.call(n,t)}var Ju=null;function CL(t){if(t){var e=t._dispatchListeners,n=t._dispatchInstances;if(Array.isArray(e))for(var i=0;i<e.length&&!t.isPropagationStopped();i++)Ay(t,e[i],n[i]);else e&&Ay(t,e,n);t._dispatchListeners=null,t._dispatchInstances=null,t.isPersistent()||t.constructor.release(t)}}function Bf(t){if(t!==null&&(Ju=su(Ju,t)),t=Ju,Ju=null,t){if(y2(t,CL),Ju)throw Error(le(95));if(D0)throw t=bp,D0=!1,bp=null,t}}function v2(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}function nE(t){if(!to)return!1;t="on"+t;var e=t in document;return e||(e=document.createElement("div"),e.setAttribute(t,"return;"),e=typeof e[t]=="function"),e}var W0=[];function rE(t){t.topLevelType=null,t.nativeEvent=null,t.targetInst=null,t.ancestors.length=0,10>W0.length&&W0.push(t)}function iE(t,e,n,i){if(W0.length){var a=W0.pop();return a.topLevelType=t,a.eventSystemFlags=i,a.nativeEvent=e,a.targetInst=n,a}return{topLevelType:t,eventSystemFlags:i,nativeEvent:e,targetInst:n,ancestors:[]}}function sE(t){var e=t.targetInst,n=e;do{if(!n){t.ancestors.push(n);break}var i=n;if(i.tag===3)i=i.stateNode.containerInfo;else{for(;i.return;)i=i.return;i=i.tag!==3?null:i.stateNode.containerInfo}if(!i)break;e=n.tag,e!==5&&e!==6||t.ancestors.push(n),n=Kl(i)}while(n);for(n=0;n<t.ancestors.length;n++){e=t.ancestors[n];var a=v2(t.nativeEvent);i=t.topLevelType;var l=t.nativeEvent,f=t.eventSystemFlags;n===0&&(f|=64);for(var d=null,g=0;g<j0.length;g++){var v=j0[g];v&&(v=v.extractEvents(i,e,l,a,f))&&(d=su(d,v))}Bf(d)}}function Vp(t,e,n){if(!n.has(t)){switch(t){case"scroll":fl(e,"scroll",!0);break;case"focus":case"blur":fl(e,"focus",!0),fl(e,"blur",!0),n.set("blur",null),n.set("focus",null);break;case"cancel":case"close":nE(t)&&fl(e,t,!0);break;case"invalid":case"submit":case"reset":break;default:cl.indexOf(t)===-1&&Ut(t,e)}n.set(t,null)}}var oE,_2,aE,Up=!1,Ci=[],js=null,Ws=null,Gs=null,Ml=new Map,Cl=new Map,Qu=[],Bp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),IL="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function NL(t,e){var n=A2(e);Bp.forEach(function(i){Vp(i,e,n)}),IL.forEach(function(i){Vp(i,e,n)})}function Dp(t,e,n,i,a){return{blockedOn:t,topLevelType:e,eventSystemFlags:n|32,nativeEvent:a,container:i}}function My(t,e){switch(t){case"focus":case"blur":js=null;break;case"dragenter":case"dragleave":Ws=null;break;case"mouseover":case"mouseout":Gs=null;break;case"pointerover":case"pointerout":Ml.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Cl.delete(e.pointerId)}}function qu(t,e,n,i,a,l){return t===null||t.nativeEvent!==l?(t=Dp(e,n,i,a,l),e!==null&&(e=ec(e),e!==null&&_2(e)),t):(t.eventSystemFlags|=i,t)}function FL(t,e,n,i,a){switch(e){case"focus":return js=qu(js,t,e,n,i,a),!0;case"dragenter":return Ws=qu(Ws,t,e,n,i,a),!0;case"mouseover":return Gs=qu(Gs,t,e,n,i,a),!0;case"pointerover":var l=a.pointerId;return Ml.set(l,qu(Ml.get(l)||null,t,e,n,i,a)),!0;case"gotpointercapture":return l=a.pointerId,Cl.set(l,qu(Cl.get(l)||null,t,e,n,i,a)),!0}return!1}function OL(t){var e=Kl(t.target);if(e!==null){var n=ta(e);if(n!==null){if(e=n.tag,e===13){if(e=eE(n),e!==null){t.blockedOn=e,wn.unstable_runWithPriority(t.priority,function(){aE(n)});return}}else if(e===3&&n.stateNode.hydrate){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function v0(t){if(t.blockedOn!==null)return!1;var e=E2(t.topLevelType,t.eventSystemFlags,t.container,t.nativeEvent);if(e!==null){var n=ec(e);return n!==null&&_2(n),t.blockedOn=e,!1}return!0}function Cy(t,e,n){v0(t)&&n.delete(e)}function LL(){for(Up=!1;0<Ci.length;){var t=Ci[0];if(t.blockedOn!==null){t=ec(t.blockedOn),t!==null&&oE(t);break}var e=E2(t.topLevelType,t.eventSystemFlags,t.container,t.nativeEvent);e!==null?t.blockedOn=e:Ci.shift()}js!==null&&v0(js)&&(js=null),Ws!==null&&v0(Ws)&&(Ws=null),Gs!==null&&v0(Gs)&&(Gs=null),Ml.forEach(Cy),Cl.forEach(Cy)}function Ku(t,e){t.blockedOn===e&&(t.blockedOn=null,Up||(Up=!0,wn.unstable_scheduleCallback(wn.unstable_NormalPriority,LL)))}function uE(t){function e(a){return Ku(a,t)}if(0<Ci.length){Ku(Ci[0],t);for(var n=1;n<Ci.length;n++){var i=Ci[n];i.blockedOn===t&&(i.blockedOn=null)}}for(js!==null&&Ku(js,t),Ws!==null&&Ku(Ws,t),Gs!==null&&Ku(Gs,t),Ml.forEach(e),Cl.forEach(e),n=0;n<Qu.length;n++)i=Qu[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<Qu.length&&(n=Qu[0],n.blockedOn===null);)OL(n),n.blockedOn===null&&Qu.shift()}var lE={},cE=new Map,w2=new Map,VL=["abort","abort",JT,"animationEnd",QT,"animationIteration",qT,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",KT,"transitionEnd","waiting","waiting"];function T2(t,e){for(var n=0;n<t.length;n+=2){var i=t[n],a=t[n+1],l="on"+(a[0].toUpperCase()+a.slice(1));l={phasedRegistrationNames:{bubbled:l,captured:l+"Capture"},dependencies:[i],eventPriority:e},w2.set(i,e),cE.set(i,l),lE[a]=l}}T2("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0);T2("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);T2(VL,2);for(var Iy="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),gd=0;gd<Iy.length;gd++)w2.set(Iy[gd],0);var UL=wn.unstable_UserBlockingPriority,BL=wn.unstable_runWithPriority,_0=!0;function Ut(t,e){fl(e,t,!1)}function fl(t,e,n){var i=w2.get(e);switch(i===void 0?2:i){case 0:i=DL.bind(null,e,1,t);break;case 1:i=zL.bind(null,e,1,t);break;default:i=Df.bind(null,e,1,t)}n?t.addEventListener(e,i,!0):t.addEventListener(e,i,!1)}function DL(t,e,n,i){Lo||l2();var a=Df,l=Lo;Lo=!0;try{FT(a,t,e,n,i)}finally{(Lo=l)||c2()}}function zL(t,e,n,i){BL(UL,Df.bind(null,t,e,n,i))}function Df(t,e,n,i){if(_0)if(0<Ci.length&&-1<Bp.indexOf(t))t=Dp(null,t,e,n,i),Ci.push(t);else{var a=E2(t,e,n,i);if(a===null)My(t,i);else if(-1<Bp.indexOf(t))t=Dp(a,t,e,n,i),Ci.push(t);else if(!FL(a,t,e,n,i)){My(t,i),t=iE(t,i,null,e);try{LT(sE,t)}finally{rE(t)}}}}function E2(t,e,n,i){if(n=v2(i),n=Kl(n),n!==null){var a=ta(n);if(a===null)n=null;else{var l=a.tag;if(l===13){if(n=eE(a),n!==null)return n;n=null}else if(l===3){if(a.stateNode.hydrate)return a.tag===3?a.stateNode.containerInfo:null;n=null}else a!==n&&(n=null)}}t=iE(t,i,n,e);try{LT(sE,t)}finally{rE(t)}return null}var Al={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},jL=["Webkit","ms","Moz","O"];Object.keys(Al).forEach(function(t){jL.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Al[e]=Al[t]})});function fE(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Al.hasOwnProperty(t)&&Al[t]?(""+e).trim():e+"px"}function hE(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,a=fE(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,a):t[n]=a}}var WL=Zn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function zp(t,e){if(e){if(WL[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(le(137,t,""));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(le(60));if(!(typeof e.dangerouslySetInnerHTML=="object"&&"__html"in e.dangerouslySetInnerHTML))throw Error(le(61))}if(e.style!=null&&typeof e.style!="object")throw Error(le(62,""))}}function jp(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ny=XT.html;function ts(t,e){t=t.nodeType===9||t.nodeType===11?t:t.ownerDocument;var n=A2(t);e=a2[e];for(var i=0;i<e.length;i++)Vp(e[i],t,n)}function G0(){}function Wp(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Fy(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Oy(t,e){var n=Fy(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Fy(n)}}function dE(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?dE(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Ly(){for(var t=window,e=Wp();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Wp(t.document)}return e}function Gp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var pE="$",gE="/$",S2="$?",x2="$!",md=null,Ad=null;function mE(t,e){switch(t){case"button":case"input":case"select":case"textarea":return!!e.autoFocus}return!1}function Zp(t,e){return t==="textarea"||t==="option"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var yd=typeof setTimeout=="function"?setTimeout:void 0,GL=typeof clearTimeout=="function"?clearTimeout:void 0;function qa(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break}return t}function Vy(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n===pE||n===x2||n===S2){if(e===0)return t;e--}else n===gE&&e++}t=t.previousSibling}return null}var R2=Math.random().toString(36).slice(2),Os="__reactInternalInstance$"+R2,Z0="__reactEventHandlers$"+R2,ql="__reactContainere$"+R2;function Kl(t){var e=t[Os];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ql]||n[Os]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Vy(t);t!==null;){if(n=t[Os])return n;t=Vy(t)}return e}t=n,n=t.parentNode}return null}function ec(t){return t=t[Os]||t[ql],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function $o(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(le(33))}function b2(t){return t[Z0]||null}function ns(t){do t=t.return;while(t&&t.tag!==5);return t||null}function AE(t,e){var n=t.stateNode;if(!n)return null;var i=o2(n);if(!i)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(le(231,e,typeof n));return n}function Uy(t,e,n){(e=AE(t,n.dispatchConfig.phasedRegistrationNames[e]))&&(n._dispatchListeners=su(n._dispatchListeners,e),n._dispatchInstances=su(n._dispatchInstances,t))}function ZL(t){if(t&&t.dispatchConfig.phasedRegistrationNames){for(var e=t._targetInst,n=[];e;)n.push(e),e=ns(e);for(e=n.length;0<e--;)Uy(n[e],"captured",t);for(e=0;e<n.length;e++)Uy(n[e],"bubbled",t)}}function Xp(t,e,n){t&&n&&n.dispatchConfig.registrationName&&(e=AE(t,n.dispatchConfig.registrationName))&&(n._dispatchListeners=su(n._dispatchListeners,e),n._dispatchInstances=su(n._dispatchInstances,t))}function XL(t){t&&t.dispatchConfig.registrationName&&Xp(t._targetInst,null,t)}function ou(t){y2(t,ZL)}var Ls=null,k2=null,w0=null;function yE(){if(w0)return w0;var t,e=k2,n=e.length,i,a="value"in Ls?Ls.value:Ls.textContent,l=a.length;for(t=0;t<n&&e[t]===a[t];t++);var f=n-t;for(i=1;i<=f&&e[n-i]===a[l-i];i++);return w0=a.slice(t,1<i?1-i:void 0)}function T0(){return!0}function X0(){return!1}function xr(t,e,n,i){this.dispatchConfig=t,this._targetInst=e,this.nativeEvent=n,t=this.constructor.Interface;for(var a in t)t.hasOwnProperty(a)&&((e=t[a])?this[a]=e(n):a==="target"?this.target=i:this[a]=n[a]);return this.isDefaultPrevented=(n.defaultPrevented!=null?n.defaultPrevented:n.returnValue===!1)?T0:X0,this.isPropagationStopped=X0,this}Zn(xr.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=T0)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=T0)},persist:function(){this.isPersistent=T0},isPersistent:X0,destructor:function(){var t=this.constructor.Interface,e;for(e in t)this[e]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=X0,this._dispatchInstances=this._dispatchListeners=null}});xr.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};xr.extend=function(t){function e(){}function n(){return i.apply(this,arguments)}var i=this;e.prototype=i.prototype;var a=new e;return Zn(a,n.prototype),n.prototype=a,n.prototype.constructor=n,n.Interface=Zn({},i.Interface,t),n.extend=i.extend,vE(n),n};vE(xr);function HL(t,e,n,i){if(this.eventPool.length){var a=this.eventPool.pop();return this.call(a,t,e,n,i),a}return new this(t,e,n,i)}function YL(t){if(!(t instanceof this))throw Error(le(279));t.destructor(),10>this.eventPool.length&&this.eventPool.push(t)}function vE(t){t.eventPool=[],t.getPooled=HL,t.release=YL}var $L=xr.extend({data:null}),JL=xr.extend({data:null}),QL=[9,13,27,32],P2=to&&"CompositionEvent"in window,yl=null;to&&"documentMode"in document&&(yl=document.documentMode);var qL=to&&"TextEvent"in window&&!yl,_E=to&&(!P2||yl&&8<yl&&11>=yl),By=String.fromCharCode(32),Ki={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},Dy=!1;function wE(t,e){switch(t){case"keyup":return QL.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function TE(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Wa=!1;function KL(t,e){switch(t){case"compositionend":return TE(e);case"keypress":return e.which!==32?null:(Dy=!0,By);case"textInput":return t=e.data,t===By&&Dy?null:t;default:return null}}function eV(t,e){if(Wa)return t==="compositionend"||!P2&&wE(t,e)?(t=yE(),w0=k2=Ls=null,Wa=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return _E&&e.locale!=="ko"?null:e.data;default:return null}}var tV={eventTypes:Ki,extractEvents:function(t,e,n,i){var a;if(P2)e:{switch(t){case"compositionstart":var l=Ki.compositionStart;break e;case"compositionend":l=Ki.compositionEnd;break e;case"compositionupdate":l=Ki.compositionUpdate;break e}l=void 0}else Wa?wE(t,n)&&(l=Ki.compositionEnd):t==="keydown"&&n.keyCode===229&&(l=Ki.compositionStart);return l?(_E&&n.locale!=="ko"&&(Wa||l!==Ki.compositionStart?l===Ki.compositionEnd&&Wa&&(a=yE()):(Ls=i,k2="value"in Ls?Ls.value:Ls.textContent,Wa=!0)),l=$L.getPooled(l,e,n,i),a?l.data=a:(a=TE(n),a!==null&&(l.data=a)),ou(l),a=l):a=null,(t=qL?KL(t,n):eV(t,n))?(e=JL.getPooled(Ki.beforeInput,e,n,i),e.data=t,ou(e)):e=null,a===null?e:e===null?a:[a,e]}},nV={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function EE(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!nV[t.type]:e==="textarea"}var SE={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function xE(t,e,n){return t=xr.getPooled(SE.change,t,e,n),t.type="change",IT(n),ou(t),t}var vl=null,Il=null;function rV(t){Bf(t)}function zf(t){var e=$o(t);if(WT(e))return t}function iV(t,e){if(t==="change")return e}var Hp=!1;to&&(Hp=nE("input")&&(!document.documentMode||9<document.documentMode));function zy(){vl&&(vl.detachEvent("onpropertychange",RE),Il=vl=null)}function RE(t){if(t.propertyName==="value"&&zf(Il))if(t=xE(Il,t,v2(t)),Lo)Bf(t);else{Lo=!0;try{u2(rV,t)}finally{Lo=!1,c2()}}}function sV(t,e,n){t==="focus"?(zy(),vl=e,Il=n,vl.attachEvent("onpropertychange",RE)):t==="blur"&&zy()}function oV(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return zf(Il)}function aV(t,e){if(t==="click")return zf(e)}function uV(t,e){if(t==="input"||t==="change")return zf(e)}var lV={eventTypes:SE,_isInputEventSupported:Hp,extractEvents:function(t,e,n,i){var a=e?$o(e):window,l=a.nodeName&&a.nodeName.toLowerCase();if(l==="select"||l==="input"&&a.type==="file")var f=iV;else if(EE(a))if(Hp)f=uV;else{f=oV;var d=sV}else(l=a.nodeName)&&l.toLowerCase()==="input"&&(a.type==="checkbox"||a.type==="radio")&&(f=aV);if(f&&(f=f(t,e)))return xE(f,n,i);d&&d(t,a,e),t==="blur"&&(t=a._wrapperState)&&t.controlled&&a.type==="number"&&Np(a,"number",a.value)}},tc=xr.extend({view:null,detail:null}),cV={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fV(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=cV[t])?!!e[t]:!1}function M2(){return fV}var jy=0,Wy=0,Gy=!1,Zy=!1,nc=tc.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:M2,button:null,buttons:null,relatedTarget:function(t){return t.relatedTarget||(t.fromElement===t.srcElement?t.toElement:t.fromElement)},movementX:function(t){if("movementX"in t)return t.movementX;var e=jy;return jy=t.screenX,Gy?t.type==="mousemove"?t.screenX-e:0:(Gy=!0,0)},movementY:function(t){if("movementY"in t)return t.movementY;var e=Wy;return Wy=t.screenY,Zy?t.type==="mousemove"?t.screenY-e:0:(Zy=!0,0)}}),bE=nc.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),el={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},hV={eventTypes:el,extractEvents:function(t,e,n,i,a){var l=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout";if(l&&!(a&32)&&(n.relatedTarget||n.fromElement)||!f&&!l)return null;if(l=i.window===i?i:(l=i.ownerDocument)?l.defaultView||l.parentWindow:window,f){if(f=e,e=(e=n.relatedTarget||n.toElement)?Kl(e):null,e!==null){var d=ta(e);(e!==d||e.tag!==5&&e.tag!==6)&&(e=null)}}else f=null;if(f===e)return null;if(t==="mouseout"||t==="mouseover")var g=nc,v=el.mouseLeave,T=el.mouseEnter,S="mouse";else(t==="pointerout"||t==="pointerover")&&(g=bE,v=el.pointerLeave,T=el.pointerEnter,S="pointer");if(t=f==null?l:$o(f),l=e==null?l:$o(e),v=g.getPooled(v,f,n,i),v.type=S+"leave",v.target=t,v.relatedTarget=l,n=g.getPooled(T,e,n,i),n.type=S+"enter",n.target=l,n.relatedTarget=t,i=f,S=e,i&&S)e:{for(g=i,T=S,f=0,t=g;t;t=ns(t))f++;for(t=0,e=T;e;e=ns(e))t++;for(;0<f-t;)g=ns(g),f--;for(;0<t-f;)T=ns(T),t--;for(;f--;){if(g===T||g===T.alternate)break e;g=ns(g),T=ns(T)}g=null}else g=null;for(T=g,g=[];i&&i!==T&&(f=i.alternate,!(f!==null&&f===T));)g.push(i),i=ns(i);for(i=[];S&&S!==T&&(f=S.alternate,!(f!==null&&f===T));)i.push(S),S=ns(S);for(S=0;S<g.length;S++)Xp(g[S],"bubbled",v);for(S=i.length;0<S--;)Xp(i[S],"captured",n);return a&64?[v,n]:[v]}};function dV(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Jo=typeof Object.is=="function"?Object.is:dV,pV=Object.prototype.hasOwnProperty;function Nl(t,e){if(Jo(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++)if(!pV.call(e,n[i])||!Jo(t[n[i]],e[n[i]]))return!1;return!0}var gV=to&&"documentMode"in document&&11>=document.documentMode,kE={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},Ga=null,Yp=null,_l=null,$p=!1;function Xy(t,e){var n=e.window===e?e.document:e.nodeType===9?e:e.ownerDocument;return $p||Ga==null||Ga!==Wp(n)?null:(n=Ga,"selectionStart"in n&&Gp(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),_l&&Nl(_l,n)?null:(_l=n,t=xr.getPooled(kE.select,Yp,t,e),t.type="select",t.target=Ga,ou(t),t))}var mV={eventTypes:kE,extractEvents:function(t,e,n,i,a,l){if(a=l||(i.window===i?i.document:i.nodeType===9?i:i.ownerDocument),!(l=!a)){e:{a=A2(a),l=a2.onSelect;for(var f=0;f<l.length;f++)if(!a.has(l[f])){a=!1;break e}a=!0}l=!a}if(l)return null;switch(a=e?$o(e):window,t){case"focus":(EE(a)||a.contentEditable==="true")&&(Ga=a,Yp=e,_l=null);break;case"blur":_l=Yp=Ga=null;break;case"mousedown":$p=!0;break;case"contextmenu":case"mouseup":case"dragend":return $p=!1,Xy(n,i);case"selectionchange":if(gV)break;case"keydown":case"keyup":return Xy(n,i)}return null}},AV=xr.extend({animationName:null,elapsedTime:null,pseudoElement:null}),yV=xr.extend({clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),vV=tc.extend({relatedTarget:null});function E0(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}var _V={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wV={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},TV=tc.extend({key:function(t){if(t.key){var e=_V[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=E0(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?wV[t.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:M2,charCode:function(t){return t.type==="keypress"?E0(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?E0(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),EV=nc.extend({dataTransfer:null}),SV=tc.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:M2}),xV=xr.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),RV=nc.extend({deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:null,deltaMode:null}),bV={eventTypes:lE,extractEvents:function(t,e,n,i){var a=cE.get(t);if(!a)return null;switch(t){case"keypress":if(E0(n)===0)return null;case"keydown":case"keyup":t=TV;break;case"blur":case"focus":t=vV;break;case"click":if(n.button===2)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":t=nc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":t=EV;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":t=SV;break;case JT:case QT:case qT:t=AV;break;case KT:t=xV;break;case"scroll":t=tc;break;case"wheel":t=RV;break;case"copy":case"cut":case"paste":t=yV;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":t=bE;break;default:t=xr}return e=t.getPooled(a,e,n,i),ou(e),e}};if(z0)throw Error(le(101));z0=Array.prototype.slice.call("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" "));MT();var kV=ec;o2=b2;kT=kV;PT=$o;CT({SimpleEventPlugin:bV,EnterLeaveEventPlugin:hV,ChangeEventPlugin:lV,SelectEventPlugin:mV,BeforeInputEventPlugin:tV});var Jp=[],Za=-1;function Nt(t){0>Za||(t.current=Jp[Za],Jp[Za]=null,Za--)}function Xt(t,e){Za++,Jp[Za]=t.current,t.current=e}var qs={},Fn={current:qs},Kn={current:!1},Qo=qs;function au(t,e){var n=t.type.contextTypes;if(!n)return qs;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var a={},l;for(l in n)a[l]=e[l];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=a),a}function er(t){return t=t.childContextTypes,t!=null}function H0(){Nt(Kn),Nt(Fn)}function Hy(t,e,n){if(Fn.current!==qs)throw Error(le(168));Xt(Fn,e),Xt(Kn,n)}function PE(t,e,n){var i=t.stateNode;if(t=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var a in i)if(!(a in t))throw Error(le(108,us(e)||"Unknown",a));return Zn({},n,{},i)}function S0(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||qs,Qo=Fn.current,Xt(Fn,t),Xt(Kn,Kn.current),!0}function Yy(t,e,n){var i=t.stateNode;if(!i)throw Error(le(169));n?(t=PE(t,e,Qo),i.__reactInternalMemoizedMergedChildContext=t,Nt(Kn),Nt(Fn),Xt(Fn,t)):Nt(Kn),Xt(Kn,n)}var PV=wn.unstable_runWithPriority,C2=wn.unstable_scheduleCallback,ME=wn.unstable_cancelCallback,$y=wn.unstable_requestPaint,Qp=wn.unstable_now,MV=wn.unstable_getCurrentPriorityLevel,jf=wn.unstable_ImmediatePriority,CE=wn.unstable_UserBlockingPriority,IE=wn.unstable_NormalPriority,NE=wn.unstable_LowPriority,FE=wn.unstable_IdlePriority,OE={},CV=wn.unstable_shouldYield,IV=$y!==void 0?$y:function(){},rs=null,x0=null,vd=!1,Jy=Qp(),Gr=1e4>Jy?Qp:function(){return Qp()-Jy};function Wf(){switch(MV()){case jf:return 99;case CE:return 98;case IE:return 97;case NE:return 96;case FE:return 95;default:throw Error(le(332))}}function LE(t){switch(t){case 99:return jf;case 98:return CE;case 97:return IE;case 96:return NE;case 95:return FE;default:throw Error(le(332))}}function Ks(t,e){return t=LE(t),PV(t,e)}function VE(t,e,n){return t=LE(t),C2(t,e,n)}function Qy(t){return rs===null?(rs=[t],x0=C2(jf,UE)):rs.push(t),OE}function Di(){if(x0!==null){var t=x0;x0=null,ME(t)}UE()}function UE(){if(!vd&&rs!==null){vd=!0;var t=0;try{var e=rs;Ks(99,function(){for(;t<e.length;t++){var n=e[t];do n=n(!0);while(n!==null)}}),rs=null}catch(n){throw rs!==null&&(rs=rs.slice(t+1)),C2(jf,Di),n}finally{vd=!1}}}function R0(t,e,n){return n/=10,1073741821-(((1073741821-t+e/10)/n|0)+1)*n}function oi(t,e){if(t&&t.defaultProps){e=Zn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n])}return e}var Y0={current:null},$0=null,Xa=null,J0=null;function I2(){J0=Xa=$0=null}function N2(t){var e=Y0.current;Nt(Y0),t.type._context._currentValue=e}function BE(t,e){for(;t!==null;){var n=t.alternate;if(t.childExpirationTime<e)t.childExpirationTime=e,n!==null&&n.childExpirationTime<e&&(n.childExpirationTime=e);else if(n!==null&&n.childExpirationTime<e)n.childExpirationTime=e;else break;t=t.return}}function Ka(t,e){$0=t,J0=Xa=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.expirationTime>=e&&(Ii=!0),t.firstContext=null)}function $r(t,e){if(J0!==t&&e!==!1&&e!==0)if((typeof e!="number"||e===1073741823)&&(J0=t,e=1073741823),e={context:t,observedBits:e,next:null},Xa===null){if($0===null)throw Error(le(308));Xa=e,$0.dependencies={expirationTime:0,firstContext:e,responders:null}}else Xa=Xa.next=e;return t._currentValue}var Fs=!1;function F2(t){t.updateQueue={baseState:t.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function O2(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,baseQueue:t.baseQueue,shared:t.shared,effects:t.effects})}function Zs(t,e){return t={expirationTime:t,suspenseConfig:e,tag:0,payload:null,callback:null,next:null},t.next=t}function Xs(t,e){if(t=t.updateQueue,t!==null){t=t.shared;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}}function qy(t,e){var n=t.alternate;n!==null&&O2(n,t),t=t.updateQueue,n=t.baseQueue,n===null?(t.baseQueue=e.next=e,e.next=e):(e.next=n.next,n.next=e)}function Fl(t,e,n,i){var a=t.updateQueue;Fs=!1;var l=a.baseQueue,f=a.shared.pending;if(f!==null){if(l!==null){var d=l.next;l.next=f.next,f.next=d}l=f,a.shared.pending=null,d=t.alternate,d!==null&&(d=d.updateQueue,d!==null&&(d.baseQueue=f))}if(l!==null){d=l.next;var g=a.baseState,v=0,T=null,S=null,x=null;if(d!==null){var M=d;do{if(f=M.expirationTime,f<i){var B={expirationTime:M.expirationTime,suspenseConfig:M.suspenseConfig,tag:M.tag,payload:M.payload,callback:M.callback,next:null};x===null?(S=x=B,T=g):x=x.next=B,f>v&&(v=f)}else{x!==null&&(x=x.next={expirationTime:1073741823,suspenseConfig:M.suspenseConfig,tag:M.tag,payload:M.payload,callback:M.callback,next:null}),g3(f,M.suspenseConfig);e:{var W=t,N=M;switch(f=e,B=n,N.tag){case 1:if(W=N.payload,typeof W=="function"){g=W.call(B,g,f);break e}g=W;break e;case 3:W.effectTag=W.effectTag&-4097|64;case 0:if(W=N.payload,f=typeof W=="function"?W.call(B,g,f):W,f==null)break e;g=Zn({},g,f);break e;case 2:Fs=!0}}M.callback!==null&&(t.effectTag|=32,f=a.effects,f===null?a.effects=[M]:f.push(M))}if(M=M.next,M===null||M===d){if(f=a.shared.pending,f===null)break;M=l.next=f.next,f.next=d,a.baseQueue=l=f,a.shared.pending=null}}while(1)}x===null?T=g:x.next=S,a.baseState=T,a.baseQueue=x,Yf(v),t.expirationTime=v,t.memoizedState=g}}function Ky(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],a=i.callback;if(a!==null){if(i.callback=null,i=a,a=n,typeof i!="function")throw Error(le(191,i));i.call(a)}}}var wl=li.ReactCurrentBatchConfig,DE=new Vf.Component().refs;function Q0(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Zn({},e,n),t.memoizedState=n,t.expirationTime===0&&(t.updateQueue.baseState=n)}var Gf={isMounted:function(t){return(t=t._reactInternalFiber)?ta(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternalFiber;var i=Vi(),a=wl.suspense;i=Zo(i,t,a),a=Zs(i,a),a.payload=e,n!=null&&(a.callback=n),Xs(t,a),Ys(t,i)},enqueueReplaceState:function(t,e,n){t=t._reactInternalFiber;var i=Vi(),a=wl.suspense;i=Zo(i,t,a),a=Zs(i,a),a.tag=1,a.payload=e,n!=null&&(a.callback=n),Xs(t,a),Ys(t,i)},enqueueForceUpdate:function(t,e){t=t._reactInternalFiber;var n=Vi(),i=wl.suspense;n=Zo(n,t,i),i=Zs(n,i),i.tag=2,e!=null&&(i.callback=e),Xs(t,i),Ys(t,n)}};function ev(t,e,n,i,a,l,f){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,l,f):e.prototype&&e.prototype.isPureReactComponent?!Nl(n,i)||!Nl(a,l):!0}function zE(t,e,n){var i=!1,a=qs,l=e.contextType;return typeof l=="object"&&l!==null?l=$r(l):(a=er(e)?Qo:Fn.current,i=e.contextTypes,l=(i=i!=null)?au(t,a):qs),e=new e(n,l),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Gf,t.stateNode=e,e._reactInternalFiber=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=a,t.__reactInternalMemoizedMaskedChildContext=l),e}function tv(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Gf.enqueueReplaceState(e,e.state,null)}function qp(t,e,n,i){var a=t.stateNode;a.props=n,a.state=t.memoizedState,a.refs=DE,F2(t);var l=e.contextType;typeof l=="object"&&l!==null?a.context=$r(l):(l=er(e)?Qo:Fn.current,a.context=au(t,l)),Fl(t,n,a,i),a.state=t.memoizedState,l=e.getDerivedStateFromProps,typeof l=="function"&&(Q0(t,e,l,n),a.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(e=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),e!==a.state&&Gf.enqueueReplaceState(a,a.state,null),Fl(t,n,a,i),a.state=t.memoizedState),typeof a.componentDidMount=="function"&&(t.effectTag|=4)}var Qc=Array.isArray;function tl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(le(309));var i=n.stateNode}if(!i)throw Error(le(147,t));var a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(l){var f=i.refs;f===DE&&(f=i.refs={}),l===null?delete f[a]:f[a]=l},e._stringRef=a,e)}if(typeof t!="string")throw Error(le(284));if(!n._owner)throw Error(le(290,t))}return t}function qc(t,e){if(t.type!=="textarea")throw Error(le(31,Object.prototype.toString.call(e)==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":e,""))}function jE(t){function e(N,F){if(t){var V=N.lastEffect;V!==null?(V.nextEffect=F,N.lastEffect=F):N.firstEffect=N.lastEffect=F,F.nextEffect=null,F.effectTag=8}}function n(N,F){if(!t)return null;for(;F!==null;)e(N,F),F=F.sibling;return null}function i(N,F){for(N=new Map;F!==null;)F.key!==null?N.set(F.key,F):N.set(F.index,F),F=F.sibling;return N}function a(N,F){return N=qo(N,F),N.index=0,N.sibling=null,N}function l(N,F,V){return N.index=V,t?(V=N.alternate,V!==null?(V=V.index,V<F?(N.effectTag=2,F):V):(N.effectTag=2,F)):F}function f(N){return t&&N.alternate===null&&(N.effectTag=2),N}function d(N,F,V,j){return F===null||F.tag!==6?(F=xd(V,N.mode,j),F.return=N,F):(F=a(F,V),F.return=N,F)}function g(N,F,V,j){return F!==null&&F.elementType===V.type?(j=a(F,V.props),j.ref=tl(N,F,V),j.return=N,j):(j=M0(V.type,V.key,V.props,null,N.mode,j),j.ref=tl(N,F,V),j.return=N,j)}function v(N,F,V,j){return F===null||F.tag!==4||F.stateNode.containerInfo!==V.containerInfo||F.stateNode.implementation!==V.implementation?(F=Rd(V,N.mode,j),F.return=N,F):(F=a(F,V.children||[]),F.return=N,F)}function T(N,F,V,j,X){return F===null||F.tag!==7?(F=Bs(V,N.mode,j,X),F.return=N,F):(F=a(F,V),F.return=N,F)}function S(N,F,V){if(typeof F=="string"||typeof F=="number")return F=xd(""+F,N.mode,V),F.return=N,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case Hc:return V=M0(F.type,F.key,F.props,null,N.mode,V),V.ref=tl(N,null,F),V.return=N,V;case za:return F=Rd(F,N.mode,V),F.return=N,F}if(Qc(F)||$u(F))return F=Bs(F,N.mode,V,null),F.return=N,F;qc(N,F)}return null}function x(N,F,V,j){var X=F!==null?F.key:null;if(typeof V=="string"||typeof V=="number")return X!==null?null:d(N,F,""+V,j);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case Hc:return V.key===X?V.type===Oo?T(N,F,V.props.children,j,X):g(N,F,V,j):null;case za:return V.key===X?v(N,F,V,j):null}if(Qc(V)||$u(V))return X!==null?null:T(N,F,V,j,null);qc(N,V)}return null}function M(N,F,V,j,X){if(typeof j=="string"||typeof j=="number")return N=N.get(V)||null,d(F,N,""+j,X);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Hc:return N=N.get(j.key===null?V:j.key)||null,j.type===Oo?T(F,N,j.props.children,X,j.key):g(F,N,j,X);case za:return N=N.get(j.key===null?V:j.key)||null,v(F,N,j,X)}if(Qc(j)||$u(j))return N=N.get(V)||null,T(F,N,j,X,null);qc(F,j)}return null}function B(N,F,V,j){for(var X=null,Q=null,K=F,ae=F=0,fe=null;K!==null&&ae<V.length;ae++){K.index>ae?(fe=K,K=null):fe=K.sibling;var se=x(N,K,V[ae],j);if(se===null){K===null&&(K=fe);break}t&&K&&se.alternate===null&&e(N,K),F=l(se,F,ae),Q===null?X=se:Q.sibling=se,Q=se,K=fe}if(ae===V.length)return n(N,K),X;if(K===null){for(;ae<V.length;ae++)K=S(N,V[ae],j),K!==null&&(F=l(K,F,ae),Q===null?X=K:Q.sibling=K,Q=K);return X}for(K=i(N,K);ae<V.length;ae++)fe=M(K,N,ae,V[ae],j),fe!==null&&(t&&fe.alternate!==null&&K.delete(fe.key===null?ae:fe.key),F=l(fe,F,ae),Q===null?X=fe:Q.sibling=fe,Q=fe);return t&&K.forEach(function(_e){return e(N,_e)}),X}function W(N,F,V,j){var X=$u(V);if(typeof X!="function")throw Error(le(150));if(V=X.call(V),V==null)throw Error(le(151));for(var Q=X=null,K=F,ae=F=0,fe=null,se=V.next();K!==null&&!se.done;ae++,se=V.next()){K.index>ae?(fe=K,K=null):fe=K.sibling;var _e=x(N,K,se.value,j);if(_e===null){K===null&&(K=fe);break}t&&K&&_e.alternate===null&&e(N,K),F=l(_e,F,ae),Q===null?X=_e:Q.sibling=_e,Q=_e,K=fe}if(se.done)return n(N,K),X;if(K===null){for(;!se.done;ae++,se=V.next())se=S(N,se.value,j),se!==null&&(F=l(se,F,ae),Q===null?X=se:Q.sibling=se,Q=se);return X}for(K=i(N,K);!se.done;ae++,se=V.next())se=M(K,N,ae,se.value,j),se!==null&&(t&&se.alternate!==null&&K.delete(se.key===null?ae:se.key),F=l(se,F,ae),Q===null?X=se:Q.sibling=se,Q=se);return t&&K.forEach(function(we){return e(N,we)}),X}return function(N,F,V,j){var X=typeof V=="object"&&V!==null&&V.type===Oo&&V.key===null;X&&(V=V.props.children);var Q=typeof V=="object"&&V!==null;if(Q)switch(V.$$typeof){case Hc:e:{for(Q=V.key,X=F;X!==null;){if(X.key===Q){switch(X.tag){case 7:if(V.type===Oo){n(N,X.sibling),F=a(X,V.props.children),F.return=N,N=F;break e}break;default:if(X.elementType===V.type){n(N,X.sibling),F=a(X,V.props),F.ref=tl(N,X,V),F.return=N,N=F;break e}}n(N,X);break}else e(N,X);X=X.sibling}V.type===Oo?(F=Bs(V.props.children,N.mode,j,V.key),F.return=N,N=F):(j=M0(V.type,V.key,V.props,null,N.mode,j),j.ref=tl(N,F,V),j.return=N,N=j)}return f(N);case za:e:{for(X=V.key;F!==null;){if(F.key===X)if(F.tag===4&&F.stateNode.containerInfo===V.containerInfo&&F.stateNode.implementation===V.implementation){n(N,F.sibling),F=a(F,V.children||[]),F.return=N,N=F;break e}else{n(N,F);break}else e(N,F);F=F.sibling}F=Rd(V,N.mode,j),F.return=N,N=F}return f(N)}if(typeof V=="string"||typeof V=="number")return V=""+V,F!==null&&F.tag===6?(n(N,F.sibling),F=a(F,V),F.return=N,N=F):(n(N,F),F=xd(V,N.mode,j),F.return=N,N=F),f(N);if(Qc(V))return B(N,F,V,j);if($u(V))return W(N,F,V,j);if(Q&&qc(N,V),typeof V>"u"&&!X)switch(N.tag){case 1:case 0:throw N=N.type,Error(le(152,N.displayName||N.name||"Component"))}return n(N,F)}}var uu=jE(!0),L2=jE(!1),rc={},Li={current:rc},Ol={current:rc},Ll={current:rc};function Vo(t){if(t===rc)throw Error(le(174));return t}function Kp(t,e){switch(Xt(Ll,e),Xt(Ol,t),Xt(Li,rc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Lp(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Lp(e,t)}Nt(Li),Xt(Li,e)}function lu(){Nt(Li),Nt(Ol),Nt(Ll)}function nv(t){Vo(Ll.current);var e=Vo(Li.current),n=Lp(e,t.type);e!==n&&(Xt(Ol,t),Xt(Li,n))}function V2(t){Ol.current===t&&(Nt(Li),Nt(Ol))}var Gt={current:0};function q0(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data===S2||n.data===x2))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.effectTag&64)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}function U2(t,e){return{responder:t,props:e}}var b0=li.ReactCurrentDispatcher,Zr=li.ReactCurrentBatchConfig,Vs=0,Kt=null,Cn=null,In=null,K0=!1;function dr(){throw Error(le(321))}function B2(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Jo(t[n],e[n]))return!1;return!0}function D2(t,e,n,i,a,l){if(Vs=l,Kt=e,e.memoizedState=null,e.updateQueue=null,e.expirationTime=0,b0.current=t===null||t.memoizedState===null?NV:FV,t=n(i,a),e.expirationTime===Vs){l=0;do{if(e.expirationTime=0,!(25>l))throw Error(le(301));l+=1,In=Cn=null,e.updateQueue=null,b0.current=OV,t=n(i,a)}while(e.expirationTime===Vs)}if(b0.current=nf,e=Cn!==null&&Cn.next!==null,Vs=0,In=Cn=Kt=null,K0=!1,e)throw Error(le(300));return t}function eu(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return In===null?Kt.memoizedState=In=t:In=In.next=t,In}function wu(){if(Cn===null){var t=Kt.alternate;t=t!==null?t.memoizedState:null}else t=Cn.next;var e=In===null?Kt.memoizedState:In.next;if(e!==null)In=e,Cn=t;else{if(t===null)throw Error(le(310));Cn=t,t={memoizedState:Cn.memoizedState,baseState:Cn.baseState,baseQueue:Cn.baseQueue,queue:Cn.queue,next:null},In===null?Kt.memoizedState=In=t:In=In.next=t}return In}function jo(t,e){return typeof e=="function"?e(t):e}function Kc(t){var e=wu(),n=e.queue;if(n===null)throw Error(le(311));n.lastRenderedReducer=t;var i=Cn,a=i.baseQueue,l=n.pending;if(l!==null){if(a!==null){var f=a.next;a.next=l.next,l.next=f}i.baseQueue=a=l,n.pending=null}if(a!==null){a=a.next,i=i.baseState;var d=f=l=null,g=a;do{var v=g.expirationTime;if(v<Vs){var T={expirationTime:g.expirationTime,suspenseConfig:g.suspenseConfig,action:g.action,eagerReducer:g.eagerReducer,eagerState:g.eagerState,next:null};d===null?(f=d=T,l=i):d=d.next=T,v>Kt.expirationTime&&(Kt.expirationTime=v,Yf(v))}else d!==null&&(d=d.next={expirationTime:1073741823,suspenseConfig:g.suspenseConfig,action:g.action,eagerReducer:g.eagerReducer,eagerState:g.eagerState,next:null}),g3(v,g.suspenseConfig),i=g.eagerReducer===t?g.eagerState:t(i,g.action);g=g.next}while(g!==null&&g!==a);d===null?l=i:d.next=f,Jo(i,e.memoizedState)||(Ii=!0),e.memoizedState=i,e.baseState=l,e.baseQueue=d,n.lastRenderedState=i}return[e.memoizedState,n.dispatch]}function e0(t){var e=wu(),n=e.queue;if(n===null)throw Error(le(311));n.lastRenderedReducer=t;var i=n.dispatch,a=n.pending,l=e.memoizedState;if(a!==null){n.pending=null;var f=a=a.next;do l=t(l,f.action),f=f.next;while(f!==a);Jo(l,e.memoizedState)||(Ii=!0),e.memoizedState=l,e.baseQueue===null&&(e.baseState=l),n.lastRenderedState=l}return[l,i]}function _d(t){var e=eu();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t=e.queue={pending:null,dispatch:null,lastRenderedReducer:jo,lastRenderedState:t},t=t.dispatch=YE.bind(null,Kt,t),[e.memoizedState,t]}function eg(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=Kt.updateQueue,e===null?(e={lastEffect:null},Kt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function WE(){return wu().memoizedState}function tg(t,e,n,i){var a=eu();Kt.effectTag|=t,a.memoizedState=eg(1|e,n,void 0,i===void 0?null:i)}function z2(t,e,n,i){var a=wu();i=i===void 0?null:i;var l=void 0;if(Cn!==null){var f=Cn.memoizedState;if(l=f.destroy,i!==null&&B2(i,f.deps)){eg(e,n,l,i);return}}Kt.effectTag|=t,a.memoizedState=eg(1|e,n,l,i)}function rv(t,e){return tg(516,4,t,e)}function ef(t,e){return z2(516,4,t,e)}function GE(t,e){return z2(4,2,t,e)}function ZE(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function XE(t,e,n){return n=n!=null?n.concat([t]):null,z2(4,2,ZE.bind(null,e,t),n)}function j2(){}function iv(t,e){return eu().memoizedState=[t,e===void 0?null:e],t}function tf(t,e){var n=wu();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&B2(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function HE(t,e){var n=wu();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&B2(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function W2(t,e,n){var i=Wf();Ks(98>i?98:i,function(){t(!0)}),Ks(97<i?97:i,function(){var a=Zr.suspense;Zr.suspense=e===void 0?null:e;try{t(!1),n()}finally{Zr.suspense=a}})}function YE(t,e,n){var i=Vi(),a=wl.suspense;i=Zo(i,t,a),a={expirationTime:i,suspenseConfig:a,action:n,eagerReducer:null,eagerState:null,next:null};var l=e.pending;if(l===null?a.next=a:(a.next=l.next,l.next=a),e.pending=a,l=t.alternate,t===Kt||l!==null&&l===Kt)K0=!0,a.expirationTime=Vs,Kt.expirationTime=Vs;else{if(t.expirationTime===0&&(l===null||l.expirationTime===0)&&(l=e.lastRenderedReducer,l!==null))try{var f=e.lastRenderedState,d=l(f,n);if(a.eagerReducer=l,a.eagerState=d,Jo(d,f))return}catch{}finally{}Ys(t,i)}}var nf={readContext:$r,useCallback:dr,useContext:dr,useEffect:dr,useImperativeHandle:dr,useLayoutEffect:dr,useMemo:dr,useReducer:dr,useRef:dr,useState:dr,useDebugValue:dr,useResponder:dr,useDeferredValue:dr,useTransition:dr},NV={readContext:$r,useCallback:iv,useContext:$r,useEffect:rv,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,tg(4,2,ZE.bind(null,e,t),n)},useLayoutEffect:function(t,e){return tg(4,2,t,e)},useMemo:function(t,e){var n=eu();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=eu();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t=i.queue={pending:null,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},t=t.dispatch=YE.bind(null,Kt,t),[i.memoizedState,t]},useRef:function(t){var e=eu();return t={current:t},e.memoizedState=t},useState:_d,useDebugValue:j2,useResponder:U2,useDeferredValue:function(t,e){var n=_d(t),i=n[0],a=n[1];return rv(function(){var l=Zr.suspense;Zr.suspense=e===void 0?null:e;try{a(t)}finally{Zr.suspense=l}},[t,e]),i},useTransition:function(t){var e=_d(!1),n=e[0];return e=e[1],[iv(W2.bind(null,e,t),[e,t]),n]}},FV={readContext:$r,useCallback:tf,useContext:$r,useEffect:ef,useImperativeHandle:XE,useLayoutEffect:GE,useMemo:HE,useReducer:Kc,useRef:WE,useState:function(){return Kc(jo)},useDebugValue:j2,useResponder:U2,useDeferredValue:function(t,e){var n=Kc(jo),i=n[0],a=n[1];return ef(function(){var l=Zr.suspense;Zr.suspense=e===void 0?null:e;try{a(t)}finally{Zr.suspense=l}},[t,e]),i},useTransition:function(t){var e=Kc(jo),n=e[0];return e=e[1],[tf(W2.bind(null,e,t),[e,t]),n]}},OV={readContext:$r,useCallback:tf,useContext:$r,useEffect:ef,useImperativeHandle:XE,useLayoutEffect:GE,useMemo:HE,useReducer:e0,useRef:WE,useState:function(){return e0(jo)},useDebugValue:j2,useResponder:U2,useDeferredValue:function(t,e){var n=e0(jo),i=n[0],a=n[1];return ef(function(){var l=Zr.suspense;Zr.suspense=e===void 0?null:e;try{a(t)}finally{Zr.suspense=l}},[t,e]),i},useTransition:function(t){var e=e0(jo),n=e[0];return e=e[1],[tf(W2.bind(null,e,t),[e,t]),n]}},os=null,Us=null,Wo=!1;function $E(t,e){var n=Ni(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=e,n.return=t,n.effectTag=8,t.lastEffect!==null?(t.lastEffect.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n}function sv(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,!0):!1;case 13:return!1;default:return!1}}function ng(t){if(Wo){var e=Us;if(e){var n=e;if(!sv(t,e)){if(e=qa(n.nextSibling),!e||!sv(t,e)){t.effectTag=t.effectTag&-1025|2,Wo=!1,os=t;return}$E(os,n)}os=t,Us=qa(e.firstChild)}else t.effectTag=t.effectTag&-1025|2,Wo=!1,os=t}}function ov(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;os=t}function t0(t){if(t!==os)return!1;if(!Wo)return ov(t),Wo=!0,!1;var e=t.type;if(t.tag!==5||e!=="head"&&e!=="body"&&!Zp(e,t.memoizedProps))for(e=Us;e;)$E(t,e),e=qa(e.nextSibling);if(ov(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(le(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n===gE){if(e===0){Us=qa(t.nextSibling);break e}e--}else n!==pE&&n!==x2&&n!==S2||e++}t=t.nextSibling}Us=null}}else Us=os?qa(t.stateNode.nextSibling):null;return!0}function wd(){Us=os=null,Wo=!1}var LV=li.ReactCurrentOwner,Ii=!1;function mr(t,e,n,i){e.child=t===null?L2(e,null,n,i):uu(e,t.child,n,i)}function av(t,e,n,i,a){n=n.render;var l=e.ref;return Ka(e,a),i=D2(t,e,n,i,l,a),t!==null&&!Ii?(e.updateQueue=t.updateQueue,e.effectTag&=-517,t.expirationTime<=a&&(t.expirationTime=0),as(t,e,a)):(e.effectTag|=1,mr(t,e,i,a),e.child)}function uv(t,e,n,i,a,l){if(t===null){var f=n.type;return typeof f=="function"&&!Y2(f)&&f.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=f,JE(t,e,f,i,a,l)):(t=M0(n.type,null,i,null,e.mode,l),t.ref=e.ref,t.return=e,e.child=t)}return f=t.child,a<l&&(a=f.memoizedProps,n=n.compare,n=n!==null?n:Nl,n(a,i)&&t.ref===e.ref)?as(t,e,l):(e.effectTag|=1,t=qo(f,i),t.ref=e.ref,t.return=e,e.child=t)}function JE(t,e,n,i,a,l){return t!==null&&Nl(t.memoizedProps,i)&&t.ref===e.ref&&(Ii=!1,a<l)?(e.expirationTime=t.expirationTime,as(t,e,l)):rg(t,e,n,i,l)}function QE(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.effectTag|=128)}function rg(t,e,n,i,a){var l=er(n)?Qo:Fn.current;return l=au(e,l),Ka(e,a),n=D2(t,e,n,i,l,a),t!==null&&!Ii?(e.updateQueue=t.updateQueue,e.effectTag&=-517,t.expirationTime<=a&&(t.expirationTime=0),as(t,e,a)):(e.effectTag|=1,mr(t,e,n,a),e.child)}function lv(t,e,n,i,a){if(er(n)){var l=!0;S0(e)}else l=!1;if(Ka(e,a),e.stateNode===null)t!==null&&(t.alternate=null,e.alternate=null,e.effectTag|=2),zE(e,n,i),qp(e,n,i,a),i=!0;else if(t===null){var f=e.stateNode,d=e.memoizedProps;f.props=d;var g=f.context,v=n.contextType;typeof v=="object"&&v!==null?v=$r(v):(v=er(n)?Qo:Fn.current,v=au(e,v));var T=n.getDerivedStateFromProps,S=typeof T=="function"||typeof f.getSnapshotBeforeUpdate=="function";S||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(d!==i||g!==v)&&tv(e,f,i,v),Fs=!1;var x=e.memoizedState;f.state=x,Fl(e,i,f,a),g=e.memoizedState,d!==i||x!==g||Kn.current||Fs?(typeof T=="function"&&(Q0(e,n,T,i),g=e.memoizedState),(d=Fs||ev(e,n,d,i,x,g,v))?(S||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(e.effectTag|=4)):(typeof f.componentDidMount=="function"&&(e.effectTag|=4),e.memoizedProps=i,e.memoizedState=g),f.props=i,f.state=g,f.context=v,i=d):(typeof f.componentDidMount=="function"&&(e.effectTag|=4),i=!1)}else f=e.stateNode,O2(t,e),d=e.memoizedProps,f.props=e.type===e.elementType?d:oi(e.type,d),g=f.context,v=n.contextType,typeof v=="object"&&v!==null?v=$r(v):(v=er(n)?Qo:Fn.current,v=au(e,v)),T=n.getDerivedStateFromProps,(S=typeof T=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(d!==i||g!==v)&&tv(e,f,i,v),Fs=!1,g=e.memoizedState,f.state=g,Fl(e,i,f,a),x=e.memoizedState,d!==i||g!==x||Kn.current||Fs?(typeof T=="function"&&(Q0(e,n,T,i),x=e.memoizedState),(T=Fs||ev(e,n,d,i,g,x,v))?(S||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(i,x,v),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(i,x,v)),typeof f.componentDidUpdate=="function"&&(e.effectTag|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(e.effectTag|=256)):(typeof f.componentDidUpdate!="function"||d===t.memoizedProps&&g===t.memoizedState||(e.effectTag|=4),typeof f.getSnapshotBeforeUpdate!="function"||d===t.memoizedProps&&g===t.memoizedState||(e.effectTag|=256),e.memoizedProps=i,e.memoizedState=x),f.props=i,f.state=x,f.context=v,i=T):(typeof f.componentDidUpdate!="function"||d===t.memoizedProps&&g===t.memoizedState||(e.effectTag|=4),typeof f.getSnapshotBeforeUpdate!="function"||d===t.memoizedProps&&g===t.memoizedState||(e.effectTag|=256),i=!1);return ig(t,e,n,i,l,a)}function ig(t,e,n,i,a,l){QE(t,e);var f=(e.effectTag&64)!==0;if(!i&&!f)return a&&Yy(e,n,!1),as(t,e,l);i=e.stateNode,LV.current=e;var d=f&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.effectTag|=1,t!==null&&f?(e.child=uu(e,t.child,null,l),e.child=uu(e,null,d,l)):mr(t,e,d,l),e.memoizedState=i.state,a&&Yy(e,n,!0),e.child}function cv(t){var e=t.stateNode;e.pendingContext?Hy(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Hy(t,e.context,!1),Kp(t,e.containerInfo)}var Td={dehydrated:null,retryTime:0};function fv(t,e,n){var i=e.mode,a=e.pendingProps,l=Gt.current,f=!1,d;if((d=(e.effectTag&64)!==0)||(d=(l&2)!==0&&(t===null||t.memoizedState!==null)),d?(f=!0,e.effectTag&=-65):t!==null&&t.memoizedState===null||a.fallback===void 0||a.unstable_avoidThisFallback===!0||(l|=1),Xt(Gt,l&1),t===null){if(a.fallback!==void 0&&ng(e),f){if(f=a.fallback,a=Bs(null,i,0,null),a.return=e,!(e.mode&2))for(t=e.memoizedState!==null?e.child.child:e.child,a.child=t;t!==null;)t.return=a,t=t.sibling;return n=Bs(f,i,n,null),n.return=e,a.sibling=n,e.memoizedState=Td,e.child=a,n}return i=a.children,e.memoizedState=null,e.child=L2(e,null,i,n)}if(t.memoizedState!==null){if(t=t.child,i=t.sibling,f){if(a=a.fallback,n=qo(t,t.pendingProps),n.return=e,!(e.mode&2)&&(f=e.memoizedState!==null?e.child.child:e.child,f!==t.child))for(n.child=f;f!==null;)f.return=n,f=f.sibling;return i=qo(i,a),i.return=e,n.sibling=i,n.childExpirationTime=0,e.memoizedState=Td,e.child=n,i}return n=uu(e,t.child,a.children,n),e.memoizedState=null,e.child=n}if(t=t.child,f){if(f=a.fallback,a=Bs(null,i,0,null),a.return=e,a.child=t,t!==null&&(t.return=a),!(e.mode&2))for(t=e.memoizedState!==null?e.child.child:e.child,a.child=t;t!==null;)t.return=a,t=t.sibling;return n=Bs(f,i,n,null),n.return=e,a.sibling=n,n.effectTag|=2,a.childExpirationTime=0,e.memoizedState=Td,e.child=a,n}return e.memoizedState=null,e.child=uu(e,t,a.children,n)}function hv(t,e){t.expirationTime<e&&(t.expirationTime=e);var n=t.alternate;n!==null&&n.expirationTime<e&&(n.expirationTime=e),BE(t.return,e)}function Ed(t,e,n,i,a,l){var f=t.memoizedState;f===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailExpiration:0,tailMode:a,lastEffect:l}:(f.isBackwards=e,f.rendering=null,f.renderingStartTime=0,f.last=i,f.tail=n,f.tailExpiration=0,f.tailMode=a,f.lastEffect=l)}function dv(t,e,n){var i=e.pendingProps,a=i.revealOrder,l=i.tail;if(mr(t,e,i.children,n),i=Gt.current,i&2)i=i&1|2,e.effectTag|=64;else{if(t!==null&&t.effectTag&64)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&hv(t,n);else if(t.tag===19)hv(t,n);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(Xt(Gt,i),!(e.mode&2))e.memoizedState=null;else switch(a){case"forwards":for(n=e.child,a=null;n!==null;)t=n.alternate,t!==null&&q0(t)===null&&(a=n),n=n.sibling;n=a,n===null?(a=e.child,e.child=null):(a=n.sibling,n.sibling=null),Ed(e,!1,a,n,l,e.lastEffect);break;case"backwards":for(n=null,a=e.child,e.child=null;a!==null;){if(t=a.alternate,t!==null&&q0(t)===null){e.child=a;break}t=a.sibling,a.sibling=n,n=a,a=t}Ed(e,!0,n,null,l,e.lastEffect);break;case"together":Ed(e,!1,null,null,void 0,e.lastEffect);break;default:e.memoizedState=null}return e.child}function as(t,e,n){t!==null&&(e.dependencies=t.dependencies);var i=e.expirationTime;if(i!==0&&Yf(i),e.childExpirationTime<n)return null;if(t!==null&&e.child!==t.child)throw Error(le(153));if(e.child!==null){for(t=e.child,n=qo(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=qo(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}var qE,sg,KE,e3;qE=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};sg=function(){};KE=function(t,e,n,i,a){var l=t.memoizedProps;if(l!==i){var f=e.stateNode;switch(Vo(Li.current),t=null,n){case"input":l=Cp(f,l),i=Cp(f,i),t=[];break;case"option":l=Fp(f,l),i=Fp(f,i),t=[];break;case"select":l=Zn({},l,{value:void 0}),i=Zn({},i,{value:void 0}),t=[];break;case"textarea":l=Op(f,l),i=Op(f,i),t=[];break;default:typeof l.onClick!="function"&&typeof i.onClick=="function"&&(f.onclick=G0)}zp(n,i);var d,g;n=null;for(d in l)if(!i.hasOwnProperty(d)&&l.hasOwnProperty(d)&&l[d]!=null)if(d==="style")for(g in f=l[d],f)f.hasOwnProperty(g)&&(n||(n={}),n[g]="");else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(iu.hasOwnProperty(d)?t||(t=[]):(t=t||[]).push(d,null));for(d in i){var v=i[d];if(f=l!=null?l[d]:void 0,i.hasOwnProperty(d)&&v!==f&&(v!=null||f!=null))if(d==="style")if(f){for(g in f)!f.hasOwnProperty(g)||v&&v.hasOwnProperty(g)||(n||(n={}),n[g]="");for(g in v)v.hasOwnProperty(g)&&f[g]!==v[g]&&(n||(n={}),n[g]=v[g])}else n||(t||(t=[]),t.push(d,n)),n=v;else d==="dangerouslySetInnerHTML"?(v=v?v.__html:void 0,f=f?f.__html:void 0,v!=null&&f!==v&&(t=t||[]).push(d,v)):d==="children"?f===v||typeof v!="string"&&typeof v!="number"||(t=t||[]).push(d,""+v):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(iu.hasOwnProperty(d)?(v!=null&&ts(a,d),t||f===v||(t=[])):(t=t||[]).push(d,v))}n&&(t=t||[]).push("style",n),a=t,(e.updateQueue=a)&&(e.effectTag|=4)}};e3=function(t,e,n,i){n!==i&&(e.effectTag|=4)};function n0(t,e){switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function VV(t,e,n){var i=e.pendingProps;switch(e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return er(e.type)&&H0(),null;case 3:return lu(),Nt(Kn),Nt(Fn),n=e.stateNode,n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),t!==null&&t.child!==null||!t0(e)||(e.effectTag|=4),sg(e),null;case 5:V2(e),n=Vo(Ll.current);var a=e.type;if(t!==null&&e.stateNode!=null)KE(t,e,a,i,n),t.ref!==e.ref&&(e.effectTag|=128);else{if(!i){if(e.stateNode===null)throw Error(le(166));return null}if(t=Vo(Li.current),t0(e)){i=e.stateNode,a=e.type;var l=e.memoizedProps;switch(i[Os]=e,i[Z0]=l,a){case"iframe":case"object":case"embed":Ut("load",i);break;case"video":case"audio":for(t=0;t<cl.length;t++)Ut(cl[t],i);break;case"source":Ut("error",i);break;case"img":case"image":case"link":Ut("error",i),Ut("load",i);break;case"form":Ut("reset",i),Ut("submit",i);break;case"details":Ut("toggle",i);break;case"input":Sy(i,l),Ut("invalid",i),ts(n,"onChange");break;case"select":i._wrapperState={wasMultiple:!!l.multiple},Ut("invalid",i),ts(n,"onChange");break;case"textarea":Ry(i,l),Ut("invalid",i),ts(n,"onChange")}zp(a,l),t=null;for(var f in l)if(l.hasOwnProperty(f)){var d=l[f];f==="children"?typeof d=="string"?i.textContent!==d&&(t=["children",d]):typeof d=="number"&&i.textContent!==""+d&&(t=["children",""+d]):iu.hasOwnProperty(f)&&d!=null&&ts(n,f)}switch(a){case"input":Yc(i),xy(i,l,!0);break;case"textarea":Yc(i),by(i);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(i.onclick=G0)}n=t,e.updateQueue=n,n!==null&&(e.effectTag|=4)}else{switch(f=n.nodeType===9?n:n.ownerDocument,t===Ny&&(t=HT(a)),t===Ny?a==="script"?(t=f.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=f.createElement(a,{is:i.is}):(t=f.createElement(a),a==="select"&&(f=t,i.multiple?f.multiple=!0:i.size&&(f.size=i.size))):t=f.createElementNS(t,a),t[Os]=e,t[Z0]=i,qE(t,e,!1,!1),e.stateNode=t,f=jp(a,i),a){case"iframe":case"object":case"embed":Ut("load",t),d=i;break;case"video":case"audio":for(d=0;d<cl.length;d++)Ut(cl[d],t);d=i;break;case"source":Ut("error",t),d=i;break;case"img":case"image":case"link":Ut("error",t),Ut("load",t),d=i;break;case"form":Ut("reset",t),Ut("submit",t),d=i;break;case"details":Ut("toggle",t),d=i;break;case"input":Sy(t,i),d=Cp(t,i),Ut("invalid",t),ts(n,"onChange");break;case"option":d=Fp(t,i);break;case"select":t._wrapperState={wasMultiple:!!i.multiple},d=Zn({},i,{value:void 0}),Ut("invalid",t),ts(n,"onChange");break;case"textarea":Ry(t,i),d=Op(t,i),Ut("invalid",t),ts(n,"onChange");break;default:d=i}zp(a,d);var g=d;for(l in g)if(g.hasOwnProperty(l)){var v=g[l];l==="style"?hE(t,v):l==="dangerouslySetInnerHTML"?(v=v?v.__html:void 0,v!=null&&YT(t,v)):l==="children"?typeof v=="string"?(a!=="textarea"||v!=="")&&Pl(t,v):typeof v=="number"&&Pl(t,""+v):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(iu.hasOwnProperty(l)?v!=null&&ts(n,l):v!=null&&d2(t,l,v,f))}switch(a){case"input":Yc(t),xy(t,i,!1);break;case"textarea":Yc(t),by(t);break;case"option":i.value!=null&&t.setAttribute("value",""+Qs(i.value));break;case"select":t.multiple=!!i.multiple,n=i.value,n!=null?Qa(t,!!i.multiple,n,!1):i.defaultValue!=null&&Qa(t,!!i.multiple,i.defaultValue,!0);break;default:typeof d.onClick=="function"&&(t.onclick=G0)}mE(a,i)&&(e.effectTag|=4)}e.ref!==null&&(e.effectTag|=128)}return null;case 6:if(t&&e.stateNode!=null)e3(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(le(166));n=Vo(Ll.current),Vo(Li.current),t0(e)?(n=e.stateNode,i=e.memoizedProps,n[Os]=e,n.nodeValue!==i&&(e.effectTag|=4)):(n=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),n[Os]=e,e.stateNode=n)}return null;case 13:return Nt(Gt),i=e.memoizedState,e.effectTag&64?(e.expirationTime=n,e):(n=i!==null,i=!1,t===null?e.memoizedProps.fallback!==void 0&&t0(e):(a=t.memoizedState,i=a!==null,n||a===null||(a=t.child.sibling,a!==null&&(l=e.firstEffect,l!==null?(e.firstEffect=a,a.nextEffect=l):(e.firstEffect=e.lastEffect=a,a.nextEffect=null),a.effectTag=8))),n&&!i&&e.mode&2&&(t===null&&e.memoizedProps.unstable_avoidThisFallback!==!0||Gt.current&1?cn===Go&&(cn=of):((cn===Go||cn===of)&&(cn=Zf),Ul!==0&&Tr!==null&&(Do(Tr,tr),_3(Tr,Ul)))),(n||i)&&(e.effectTag|=4),null);case 4:return lu(),sg(e),null;case 10:return N2(e),null;case 17:return er(e.type)&&H0(),null;case 19:if(Nt(Gt),i=e.memoizedState,i===null)return null;if(a=(e.effectTag&64)!==0,l=i.rendering,l===null){if(a)n0(i,!1);else if(cn!==Go||t!==null&&t.effectTag&64)for(l=e.child;l!==null;){if(t=q0(l),t!==null){for(e.effectTag|=64,n0(i,!1),a=t.updateQueue,a!==null&&(e.updateQueue=a,e.effectTag|=4),i.lastEffect===null&&(e.firstEffect=null),e.lastEffect=i.lastEffect,i=e.child;i!==null;)a=i,l=n,a.effectTag&=2,a.nextEffect=null,a.firstEffect=null,a.lastEffect=null,t=a.alternate,t===null?(a.childExpirationTime=0,a.expirationTime=l,a.child=null,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null):(a.childExpirationTime=t.childExpirationTime,a.expirationTime=t.expirationTime,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,l=t.dependencies,a.dependencies=l===null?null:{expirationTime:l.expirationTime,firstContext:l.firstContext,responders:l.responders}),i=i.sibling;return Xt(Gt,Gt.current&1|2),e.child}l=l.sibling}}else{if(!a)if(t=q0(l),t!==null){if(e.effectTag|=64,a=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.effectTag|=4),n0(i,!0),i.tail===null&&i.tailMode==="hidden"&&!l.alternate)return e=e.lastEffect=i.lastEffect,e!==null&&(e.nextEffect=null),null}else 2*Gr()-i.renderingStartTime>i.tailExpiration&&1<n&&(e.effectTag|=64,a=!0,n0(i,!1),e.expirationTime=e.childExpirationTime=n-1);i.isBackwards?(l.sibling=e.child,e.child=l):(n=i.last,n!==null?n.sibling=l:e.child=l,i.last=l)}return i.tail!==null?(i.tailExpiration===0&&(i.tailExpiration=Gr()+500),n=i.tail,i.rendering=n,i.tail=n.sibling,i.lastEffect=e.lastEffect,i.renderingStartTime=Gr(),n.sibling=null,e=Gt.current,Xt(Gt,a?e&1|2:e&1),n):null}throw Error(le(156,e.tag))}function UV(t){switch(t.tag){case 1:er(t.type)&&H0();var e=t.effectTag;return e&4096?(t.effectTag=e&-4097|64,t):null;case 3:if(lu(),Nt(Kn),Nt(Fn),e=t.effectTag,e&64)throw Error(le(285));return t.effectTag=e&-4097|64,t;case 5:return V2(t),null;case 13:return Nt(Gt),e=t.effectTag,e&4096?(t.effectTag=e&-4097|64,t):null;case 19:return Nt(Gt),null;case 4:return lu(),null;case 10:return N2(t),null;default:return null}}function G2(t,e){return{value:t,source:e,stack:m2(e)}}var BV=typeof WeakSet=="function"?WeakSet:Set;function og(t,e){var n=e.source,i=e.stack;i===null&&n!==null&&(i=m2(n)),n!==null&&us(n.type),e=e.value,t!==null&&t.tag===1&&us(t.type);try{console.error(e)}catch(a){setTimeout(function(){throw a})}}function DV(t,e){try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(n){Xo(t,n)}}function pv(t){var e=t.ref;if(e!==null)if(typeof e=="function")try{e(null)}catch(n){Xo(t,n)}else e.current=null}function zV(t,e){switch(e.tag){case 0:case 11:case 15:case 22:return;case 1:if(e.effectTag&256&&t!==null){var n=t.memoizedProps,i=t.memoizedState;t=e.stateNode,e=t.getSnapshotBeforeUpdate(e.elementType===e.type?n:oi(e.type,n),i),t.__reactInternalSnapshotBeforeUpdate=e}return;case 3:case 5:case 6:case 4:case 17:return}throw Error(le(163))}function t3(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.destroy;n.destroy=void 0,i!==void 0&&i()}n=n.next}while(n!==e)}}function n3(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function jV(t,e,n){switch(n.tag){case 0:case 11:case 15:case 22:n3(3,n);return;case 1:if(t=n.stateNode,n.effectTag&4)if(e===null)t.componentDidMount();else{var i=n.elementType===n.type?e.memoizedProps:oi(n.type,e.memoizedProps);t.componentDidUpdate(i,e.memoizedState,t.__reactInternalSnapshotBeforeUpdate)}e=n.updateQueue,e!==null&&Ky(n,e,t);return;case 3:if(e=n.updateQueue,e!==null){if(t=null,n.child!==null)switch(n.child.tag){case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}Ky(n,e,t)}return;case 5:t=n.stateNode,e===null&&n.effectTag&4&&mE(n.type,n.memoizedProps)&&t.focus();return;case 6:return;case 4:return;case 12:return;case 13:n.memoizedState===null&&(n=n.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&uE(n))));return;case 19:case 17:case 20:case 21:return}throw Error(le(163))}function gv(t,e,n){switch(typeof pg=="function"&&pg(e),e.tag){case 0:case 11:case 14:case 15:case 22:if(t=e.updateQueue,t!==null&&(t=t.lastEffect,t!==null)){var i=t.next;Ks(97<n?97:n,function(){var a=i;do{var l=a.destroy;if(l!==void 0){var f=e;try{l()}catch(d){Xo(f,d)}}a=a.next}while(a!==i)})}break;case 1:pv(e),n=e.stateNode,typeof n.componentWillUnmount=="function"&&DV(e,n);break;case 5:pv(e);break;case 4:i3(t,e,n)}}function r3(t){var e=t.alternate;t.return=null,t.child=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.alternate=null,t.firstEffect=null,t.lastEffect=null,t.pendingProps=null,t.memoizedProps=null,t.stateNode=null,e!==null&&r3(e)}function mv(t){return t.tag===5||t.tag===3||t.tag===4}function Av(t){e:{for(var e=t.return;e!==null;){if(mv(e)){var n=e;break e}e=e.return}throw Error(le(160))}switch(e=n.stateNode,n.tag){case 5:var i=!1;break;case 3:e=e.containerInfo,i=!0;break;case 4:e=e.containerInfo,i=!0;break;default:throw Error(le(161))}n.effectTag&16&&(Pl(e,""),n.effectTag&=-17);e:t:for(n=t;;){for(;n.sibling===null;){if(n.return===null||mv(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.effectTag&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.effectTag&2)){n=n.stateNode;break e}}i?ag(t,n,e):ug(t,n,e)}function ag(t,e,n){var i=t.tag,a=i===5||i===6;if(a)t=a?t.stateNode:t.stateNode.instance,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=G0));else if(i!==4&&(t=t.child,t!==null))for(ag(t,e,n),t=t.sibling;t!==null;)ag(t,e,n),t=t.sibling}function ug(t,e,n){var i=t.tag,a=i===5||i===6;if(a)t=a?t.stateNode:t.stateNode.instance,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(ug(t,e,n),t=t.sibling;t!==null;)ug(t,e,n),t=t.sibling}function i3(t,e,n){for(var i=e,a=!1,l,f;;){if(!a){a=i.return;e:for(;;){if(a===null)throw Error(le(160));switch(l=a.stateNode,a.tag){case 5:f=!1;break e;case 3:l=l.containerInfo,f=!0;break e;case 4:l=l.containerInfo,f=!0;break e}a=a.return}a=!0}if(i.tag===5||i.tag===6){e:for(var d=t,g=i,v=n,T=g;;)if(gv(d,T,v),T.child!==null&&T.tag!==4)T.child.return=T,T=T.child;else{if(T===g)break e;for(;T.sibling===null;){if(T.return===null||T.return===g)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}f?(d=l,g=i.stateNode,d.nodeType===8?d.parentNode.removeChild(g):d.removeChild(g)):l.removeChild(i.stateNode)}else if(i.tag===4){if(i.child!==null){l=i.stateNode.containerInfo,f=!0,i.child.return=i,i=i.child;continue}}else if(gv(t,i,n),i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return;i=i.return,i.tag===4&&(a=!1)}i.sibling.return=i.return,i=i.sibling}}function Sd(t,e){switch(e.tag){case 0:case 11:case 14:case 15:case 22:t3(3,e);return;case 1:return;case 5:var n=e.stateNode;if(n!=null){var i=e.memoizedProps,a=t!==null?t.memoizedProps:i;t=e.type;var l=e.updateQueue;if(e.updateQueue=null,l!==null){for(n[Z0]=i,t==="input"&&i.type==="radio"&&i.name!=null&&GT(n,i),jp(t,a),e=jp(t,i),a=0;a<l.length;a+=2){var f=l[a],d=l[a+1];f==="style"?hE(n,d):f==="dangerouslySetInnerHTML"?YT(n,d):f==="children"?Pl(n,d):d2(n,f,d,e)}switch(t){case"input":Ip(n,i);break;case"textarea":ZT(n,i);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!i.multiple,t=i.value,t!=null?Qa(n,!!i.multiple,t,!1):e!==!!i.multiple&&(i.defaultValue!=null?Qa(n,!!i.multiple,i.defaultValue,!0):Qa(n,!!i.multiple,i.multiple?[]:"",!1))}}}return;case 6:if(e.stateNode===null)throw Error(le(162));e.stateNode.nodeValue=e.memoizedProps;return;case 3:e=e.stateNode,e.hydrate&&(e.hydrate=!1,uE(e.containerInfo));return;case 12:return;case 13:if(n=e,e.memoizedState===null?i=!1:(i=!0,n=e.child,H2=Gr()),n!==null)e:for(t=n;;){if(t.tag===5)l=t.stateNode,i?(l=l.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(l=t.stateNode,a=t.memoizedProps.style,a=a!=null&&a.hasOwnProperty("display")?a.display:null,l.style.display=fE("display",a));else if(t.tag===6)t.stateNode.nodeValue=i?"":t.memoizedProps;else if(t.tag===13&&t.memoizedState!==null&&t.memoizedState.dehydrated===null){l=t.child.sibling,l.return=t,t=l;continue}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break;for(;t.sibling===null;){if(t.return===null||t.return===n)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}yv(e);return;case 19:yv(e);return;case 17:return}throw Error(le(163))}function yv(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new BV),e.forEach(function(i){var a=qV.bind(null,t,i);n.has(i)||(n.add(i),i.then(a,a))})}}var WV=typeof WeakMap=="function"?WeakMap:Map;function s3(t,e,n){n=Zs(n,null),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){lf||(lf=!0,lg=i),og(t,e)},n}function o3(t,e,n){n=Zs(n,null),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var a=e.value;n.payload=function(){return og(t,e),i(a)}}var l=t.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(n.callback=function(){typeof i!="function"&&(Hs===null?Hs=new Set([this]):Hs.add(this),og(t,e));var f=e.stack;this.componentDidCatch(e.value,{componentStack:f!==null?f:""})}),n}var GV=Math.ceil,rf=li.ReactCurrentDispatcher,a3=li.ReactCurrentOwner,fn=0,Z2=8,ci=16,Ui=32,Go=0,sf=1,u3=2,of=3,Zf=4,X2=5,De=fn,Tr=null,Ze=null,tr=0,cn=Go,Xf=null,is=1073741823,Vl=1073741823,af=null,Ul=0,uf=!1,H2=0,l3=500,Se=null,lf=!1,lg=null,Hs=null,cf=!1,Tl=null,hl=90,Uo=null,El=0,cg=null,k0=0;function Vi(){return(De&(ci|Ui))!==fn?1073741821-(Gr()/10|0):k0!==0?k0:k0=1073741821-(Gr()/10|0)}function Zo(t,e,n){if(e=e.mode,!(e&2))return 1073741823;var i=Wf();if(!(e&4))return i===99?1073741823:1073741822;if((De&ci)!==fn)return tr;if(n!==null)t=R0(t,n.timeoutMs|0||5e3,250);else switch(i){case 99:t=1073741823;break;case 98:t=R0(t,150,100);break;case 97:case 96:t=R0(t,5e3,250);break;case 95:t=2;break;default:throw Error(le(326))}return Tr!==null&&t===tr&&--t,t}function Ys(t,e){if(50<El)throw El=0,cg=null,Error(le(185));if(t=Hf(t,e),t!==null){var n=Wf();e===1073741823?(De&Z2)!==fn&&(De&(ci|Ui))===fn?fg(t):(Er(t),De===fn&&Di()):Er(t),(De&4)===fn||n!==98&&n!==99||(Uo===null?Uo=new Map([[t,e]]):(n=Uo.get(t),(n===void 0||n>e)&&Uo.set(t,e)))}}function Hf(t,e){t.expirationTime<e&&(t.expirationTime=e);var n=t.alternate;n!==null&&n.expirationTime<e&&(n.expirationTime=e);var i=t.return,a=null;if(i===null&&t.tag===3)a=t.stateNode;else for(;i!==null;){if(n=i.alternate,i.childExpirationTime<e&&(i.childExpirationTime=e),n!==null&&n.childExpirationTime<e&&(n.childExpirationTime=e),i.return===null&&i.tag===3){a=i.stateNode;break}i=i.return}return a!==null&&(Tr===a&&(Yf(e),cn===Zf&&Do(a,tr)),_3(a,e)),a}function P0(t){var e=t.lastExpiredTime;if(e!==0||(e=t.firstPendingTime,!v3(t,e)))return e;var n=t.lastPingedTime;return t=t.nextKnownPendingLevel,t=n>t?n:t,2>=t&&e!==t?0:t}function Er(t){if(t.lastExpiredTime!==0)t.callbackExpirationTime=1073741823,t.callbackPriority=99,t.callbackNode=Qy(fg.bind(null,t));else{var e=P0(t),n=t.callbackNode;if(e===0)n!==null&&(t.callbackNode=null,t.callbackExpirationTime=0,t.callbackPriority=90);else{var i=Vi();if(e===1073741823?i=99:e===1||e===2?i=95:(i=10*(1073741821-e)-10*(1073741821-i),i=0>=i?99:250>=i?98:5250>=i?97:95),n!==null){var a=t.callbackPriority;if(t.callbackExpirationTime===e&&a>=i)return;n!==OE&&ME(n)}t.callbackExpirationTime=e,t.callbackPriority=i,e=e===1073741823?Qy(fg.bind(null,t)):VE(i,c3.bind(null,t),{timeout:10*(1073741821-e)-Gr()}),t.callbackNode=e}}}function c3(t,e){if(k0=0,e)return e=Vi(),gg(t,e),Er(t),null;var n=P0(t);if(n!==0){if(e=t.callbackNode,(De&(ci|Ui))!==fn)throw Error(le(327));if(Tu(),t===Tr&&n===tr||Bo(t,n),Ze!==null){var i=De;De|=ci;var a=p3();do try{HV();break}catch(d){d3(t,d)}while(1);if(I2(),De=i,rf.current=a,cn===sf)throw e=Xf,Bo(t,n),Do(t,n),Er(t),e;if(Ze===null)switch(a=t.finishedWork=t.current.alternate,t.finishedExpirationTime=n,i=cn,Tr=null,i){case Go:case sf:throw Error(le(345));case u3:gg(t,2<n?2:n);break;case of:if(Do(t,n),i=t.lastSuspendedTime,n===i&&(t.nextKnownPendingLevel=hg(a)),is===1073741823&&(a=H2+l3-Gr(),10<a)){if(uf){var l=t.lastPingedTime;if(l===0||l>=n){t.lastPingedTime=n,Bo(t,n);break}}if(l=P0(t),l!==0&&l!==n)break;if(i!==0&&i!==n){t.lastPingedTime=i;break}t.timeoutHandle=yd(No.bind(null,t),a);break}No(t);break;case Zf:if(Do(t,n),i=t.lastSuspendedTime,n===i&&(t.nextKnownPendingLevel=hg(a)),uf&&(a=t.lastPingedTime,a===0||a>=n)){t.lastPingedTime=n,Bo(t,n);break}if(a=P0(t),a!==0&&a!==n)break;if(i!==0&&i!==n){t.lastPingedTime=i;break}if(Vl!==1073741823?i=10*(1073741821-Vl)-Gr():is===1073741823?i=0:(i=10*(1073741821-is)-5e3,a=Gr(),n=10*(1073741821-n)-a,i=a-i,0>i&&(i=0),i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*GV(i/1960))-i,n<i&&(i=n)),10<i){t.timeoutHandle=yd(No.bind(null,t),i);break}No(t);break;case X2:if(is!==1073741823&&af!==null){l=is;var f=af;if(i=f.busyMinDurationMs|0,0>=i?i=0:(a=f.busyDelayMs|0,l=Gr()-(10*(1073741821-l)-(f.timeoutMs|0||5e3)),i=l<=a?0:a+i-l),10<i){Do(t,n),t.timeoutHandle=yd(No.bind(null,t),i);break}}No(t);break;default:throw Error(le(329))}if(Er(t),t.callbackNode===e)return c3.bind(null,t)}}return null}function fg(t){var e=t.lastExpiredTime;if(e=e!==0?e:1073741823,(De&(ci|Ui))!==fn)throw Error(le(327));if(Tu(),t===Tr&&e===tr||Bo(t,e),Ze!==null){var n=De;De|=ci;var i=p3();do try{XV();break}catch(a){d3(t,a)}while(1);if(I2(),De=n,rf.current=i,cn===sf)throw n=Xf,Bo(t,e),Do(t,e),Er(t),n;if(Ze!==null)throw Error(le(261));t.finishedWork=t.current.alternate,t.finishedExpirationTime=e,Tr=null,No(t),Er(t)}return null}function ZV(){if(Uo!==null){var t=Uo;Uo=null,t.forEach(function(e,n){gg(n,e),Er(n)}),Di()}}function f3(t,e){var n=De;De|=1;try{return t(e)}finally{De=n,De===fn&&Di()}}function h3(t,e){var n=De;De&=-2,De|=Z2;try{return t(e)}finally{De=n,De===fn&&Di()}}function Bo(t,e){t.finishedWork=null,t.finishedExpirationTime=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,GL(n)),Ze!==null)for(n=Ze.return;n!==null;){var i=n;switch(i.tag){case 1:i=i.type.childContextTypes,i!=null&&H0();break;case 3:lu(),Nt(Kn),Nt(Fn);break;case 5:V2(i);break;case 4:lu();break;case 13:Nt(Gt);break;case 19:Nt(Gt);break;case 10:N2(i)}n=n.return}Tr=t,Ze=qo(t.current,null),tr=e,cn=Go,Xf=null,Vl=is=1073741823,af=null,Ul=0,uf=!1}function d3(t,e){do{try{if(I2(),b0.current=nf,K0)for(var n=Kt.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}if(Vs=0,In=Cn=Kt=null,K0=!1,Ze===null||Ze.return===null)return cn=sf,Xf=e,Ze=null;e:{var a=t,l=Ze.return,f=Ze,d=e;if(e=tr,f.effectTag|=2048,f.firstEffect=f.lastEffect=null,d!==null&&typeof d=="object"&&typeof d.then=="function"){var g=d;if(!(f.mode&2)){var v=f.alternate;v?(f.updateQueue=v.updateQueue,f.memoizedState=v.memoizedState,f.expirationTime=v.expirationTime):(f.updateQueue=null,f.memoizedState=null)}var T=(Gt.current&1)!==0,S=l;do{var x;if(x=S.tag===13){var M=S.memoizedState;if(M!==null)x=M.dehydrated!==null;else{var B=S.memoizedProps;x=B.fallback===void 0?!1:B.unstable_avoidThisFallback!==!0?!0:!T}}if(x){var W=S.updateQueue;if(W===null){var N=new Set;N.add(g),S.updateQueue=N}else W.add(g);if(!(S.mode&2)){if(S.effectTag|=64,f.effectTag&=-2981,f.tag===1)if(f.alternate===null)f.tag=17;else{var F=Zs(1073741823,null);F.tag=2,Xs(f,F)}f.expirationTime=1073741823;break e}d=void 0,f=e;var V=a.pingCache;if(V===null?(V=a.pingCache=new WV,d=new Set,V.set(g,d)):(d=V.get(g),d===void 0&&(d=new Set,V.set(g,d))),!d.has(f)){d.add(f);var j=QV.bind(null,a,g,f);g.then(j,j)}S.effectTag|=4096,S.expirationTime=e;break e}S=S.return}while(S!==null);d=Error((us(f.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`+m2(f))}cn!==X2&&(cn=u3),d=G2(d,f),S=l;do{switch(S.tag){case 3:g=d,S.effectTag|=4096,S.expirationTime=e;var X=s3(S,g,e);qy(S,X);break e;case 1:g=d;var Q=S.type,K=S.stateNode;if(!(S.effectTag&64)&&(typeof Q.getDerivedStateFromError=="function"||K!==null&&typeof K.componentDidCatch=="function"&&(Hs===null||!Hs.has(K)))){S.effectTag|=4096,S.expirationTime=e;var ae=o3(S,g,e);qy(S,ae);break e}}S=S.return}while(S!==null)}Ze=A3(Ze)}catch(fe){e=fe;continue}break}while(1)}function p3(){var t=rf.current;return rf.current=nf,t===null?nf:t}function g3(t,e){t<is&&2<t&&(is=t),e!==null&&t<Vl&&2<t&&(Vl=t,af=e)}function Yf(t){t>Ul&&(Ul=t)}function XV(){for(;Ze!==null;)Ze=m3(Ze)}function HV(){for(;Ze!==null&&!CV();)Ze=m3(Ze)}function m3(t){var e=y3(t.alternate,t,tr);return t.memoizedProps=t.pendingProps,e===null&&(e=A3(t)),a3.current=null,e}function A3(t){Ze=t;do{var e=Ze.alternate;if(t=Ze.return,Ze.effectTag&2048){if(e=UV(Ze),e!==null)return e.effectTag&=2047,e;t!==null&&(t.firstEffect=t.lastEffect=null,t.effectTag|=2048)}else{if(e=VV(e,Ze,tr),tr===1||Ze.childExpirationTime!==1){for(var n=0,i=Ze.child;i!==null;){var a=i.expirationTime,l=i.childExpirationTime;a>n&&(n=a),l>n&&(n=l),i=i.sibling}Ze.childExpirationTime=n}if(e!==null)return e;t!==null&&!(t.effectTag&2048)&&(t.firstEffect===null&&(t.firstEffect=Ze.firstEffect),Ze.lastEffect!==null&&(t.lastEffect!==null&&(t.lastEffect.nextEffect=Ze.firstEffect),t.lastEffect=Ze.lastEffect),1<Ze.effectTag&&(t.lastEffect!==null?t.lastEffect.nextEffect=Ze:t.firstEffect=Ze,t.lastEffect=Ze))}if(e=Ze.sibling,e!==null)return e;Ze=t}while(Ze!==null);return cn===Go&&(cn=X2),null}function hg(t){var e=t.expirationTime;return t=t.childExpirationTime,e>t?e:t}function No(t){var e=Wf();return Ks(99,YV.bind(null,t,e)),null}function YV(t,e){do Tu();while(Tl!==null);if((De&(ci|Ui))!==fn)throw Error(le(327));var n=t.finishedWork,i=t.finishedExpirationTime;if(n===null)return null;if(t.finishedWork=null,t.finishedExpirationTime=0,n===t.current)throw Error(le(177));t.callbackNode=null,t.callbackExpirationTime=0,t.callbackPriority=90,t.nextKnownPendingLevel=0;var a=hg(n);if(t.firstPendingTime=a,i<=t.lastSuspendedTime?t.firstSuspendedTime=t.lastSuspendedTime=t.nextKnownPendingLevel=0:i<=t.firstSuspendedTime&&(t.firstSuspendedTime=i-1),i<=t.lastPingedTime&&(t.lastPingedTime=0),i<=t.lastExpiredTime&&(t.lastExpiredTime=0),t===Tr&&(Ze=Tr=null,tr=0),1<n.effectTag?n.lastEffect!==null?(n.lastEffect.nextEffect=n,a=n.firstEffect):a=n:a=n.firstEffect,a!==null){var l=De;De|=Ui,a3.current=null,md=_0;var f=Ly();if(Gp(f)){if("selectionStart"in f)var d={start:f.selectionStart,end:f.selectionEnd};else e:{d=(d=f.ownerDocument)&&d.defaultView||window;var g=d.getSelection&&d.getSelection();if(g&&g.rangeCount!==0){d=g.anchorNode;var v=g.anchorOffset,T=g.focusNode;g=g.focusOffset;try{d.nodeType,T.nodeType}catch{d=null;break e}var S=0,x=-1,M=-1,B=0,W=0,N=f,F=null;t:for(;;){for(var V;N!==d||v!==0&&N.nodeType!==3||(x=S+v),N!==T||g!==0&&N.nodeType!==3||(M=S+g),N.nodeType===3&&(S+=N.nodeValue.length),(V=N.firstChild)!==null;)F=N,N=V;for(;;){if(N===f)break t;if(F===d&&++B===v&&(x=S),F===T&&++W===g&&(M=S),(V=N.nextSibling)!==null)break;N=F,F=N.parentNode}N=V}d=x===-1||M===-1?null:{start:x,end:M}}else d=null}d=d||{start:0,end:0}}else d=null;Ad={activeElementDetached:null,focusedElem:f,selectionRange:d},_0=!1,Se=a;do try{$V()}catch(se){if(Se===null)throw Error(le(330));Xo(Se,se),Se=Se.nextEffect}while(Se!==null);Se=a;do try{for(f=t,d=e;Se!==null;){var j=Se.effectTag;if(j&16&&Pl(Se.stateNode,""),j&128){var X=Se.alternate;if(X!==null){var Q=X.ref;Q!==null&&(typeof Q=="function"?Q(null):Q.current=null)}}switch(j&1038){case 2:Av(Se),Se.effectTag&=-3;break;case 6:Av(Se),Se.effectTag&=-3,Sd(Se.alternate,Se);break;case 1024:Se.effectTag&=-1025;break;case 1028:Se.effectTag&=-1025,Sd(Se.alternate,Se);break;case 4:Sd(Se.alternate,Se);break;case 8:v=Se,i3(f,v,d),r3(v)}Se=Se.nextEffect}}catch(se){if(Se===null)throw Error(le(330));Xo(Se,se),Se=Se.nextEffect}while(Se!==null);if(Q=Ad,X=Ly(),j=Q.focusedElem,d=Q.selectionRange,X!==j&&j&&j.ownerDocument&&dE(j.ownerDocument.documentElement,j)){for(d!==null&&Gp(j)&&(X=d.start,Q=d.end,Q===void 0&&(Q=X),"selectionStart"in j?(j.selectionStart=X,j.selectionEnd=Math.min(Q,j.value.length)):(Q=(X=j.ownerDocument||document)&&X.defaultView||window,Q.getSelection&&(Q=Q.getSelection(),v=j.textContent.length,f=Math.min(d.start,v),d=d.end===void 0?f:Math.min(d.end,v),!Q.extend&&f>d&&(v=d,d=f,f=v),v=Oy(j,f),T=Oy(j,d),v&&T&&(Q.rangeCount!==1||Q.anchorNode!==v.node||Q.anchorOffset!==v.offset||Q.focusNode!==T.node||Q.focusOffset!==T.offset)&&(X=X.createRange(),X.setStart(v.node,v.offset),Q.removeAllRanges(),f>d?(Q.addRange(X),Q.extend(T.node,T.offset)):(X.setEnd(T.node,T.offset),Q.addRange(X)))))),X=[],Q=j;Q=Q.parentNode;)Q.nodeType===1&&X.push({element:Q,left:Q.scrollLeft,top:Q.scrollTop});for(typeof j.focus=="function"&&j.focus(),j=0;j<X.length;j++)Q=X[j],Q.element.scrollLeft=Q.left,Q.element.scrollTop=Q.top}_0=!!md,Ad=md=null,t.current=n,Se=a;do try{for(j=t;Se!==null;){var K=Se.effectTag;if(K&36&&jV(j,Se.alternate,Se),K&128){X=void 0;var ae=Se.ref;if(ae!==null){var fe=Se.stateNode;switch(Se.tag){case 5:X=fe;break;default:X=fe}typeof ae=="function"?ae(X):ae.current=X}}Se=Se.nextEffect}}catch(se){if(Se===null)throw Error(le(330));Xo(Se,se),Se=Se.nextEffect}while(Se!==null);Se=null,IV(),De=l}else t.current=n;if(cf)cf=!1,Tl=t,hl=e;else for(Se=a;Se!==null;)e=Se.nextEffect,Se.nextEffect=null,Se=e;if(e=t.firstPendingTime,e===0&&(Hs=null),e===1073741823?t===cg?El++:(El=0,cg=t):El=0,typeof dg=="function"&&dg(n.stateNode,i),Er(t),lf)throw lf=!1,t=lg,lg=null,t;return(De&Z2)!==fn||Di(),null}function $V(){for(;Se!==null;){var t=Se.effectTag;t&256&&zV(Se.alternate,Se),!(t&512)||cf||(cf=!0,VE(97,function(){return Tu(),null})),Se=Se.nextEffect}}function Tu(){if(hl!==90){var t=97<hl?97:hl;return hl=90,Ks(t,JV)}}function JV(){if(Tl===null)return!1;var t=Tl;if(Tl=null,(De&(ci|Ui))!==fn)throw Error(le(331));var e=De;for(De|=Ui,t=t.current.firstEffect;t!==null;){try{var n=t;if(n.effectTag&512)switch(n.tag){case 0:case 11:case 15:case 22:t3(5,n),n3(5,n)}}catch(i){if(t===null)throw Error(le(330));Xo(t,i)}n=t.nextEffect,t.nextEffect=null,t=n}return De=e,Di(),!0}function vv(t,e,n){e=G2(n,e),e=s3(t,e,1073741823),Xs(t,e),t=Hf(t,1073741823),t!==null&&Er(t)}function Xo(t,e){if(t.tag===3)vv(t,t,e);else for(var n=t.return;n!==null;){if(n.tag===3){vv(n,t,e);break}else if(n.tag===1){var i=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Hs===null||!Hs.has(i))){t=G2(e,t),t=o3(n,t,1073741823),Xs(n,t),n=Hf(n,1073741823),n!==null&&Er(n);break}}n=n.return}}function QV(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),Tr===t&&tr===n?cn===Zf||cn===of&&is===1073741823&&Gr()-H2<l3?Bo(t,tr):uf=!0:v3(t,n)&&(e=t.lastPingedTime,e!==0&&e<n||(t.lastPingedTime=n,Er(t)))}function qV(t,e){var n=t.stateNode;n!==null&&n.delete(e),e=0,e===0&&(e=Vi(),e=Zo(e,t,null)),t=Hf(t,e),t!==null&&Er(t)}var y3;y3=function(t,e,n){var i=e.expirationTime;if(t!==null){var a=e.pendingProps;if(t.memoizedProps!==a||Kn.current)Ii=!0;else{if(i<n){switch(Ii=!1,e.tag){case 3:cv(e),wd();break;case 5:if(nv(e),e.mode&4&&n!==1&&a.hidden)return e.expirationTime=e.childExpirationTime=1,null;break;case 1:er(e.type)&&S0(e);break;case 4:Kp(e,e.stateNode.containerInfo);break;case 10:i=e.memoizedProps.value,a=e.type._context,Xt(Y0,a._currentValue),a._currentValue=i;break;case 13:if(e.memoizedState!==null)return i=e.child.childExpirationTime,i!==0&&i>=n?fv(t,e,n):(Xt(Gt,Gt.current&1),e=as(t,e,n),e!==null?e.sibling:null);Xt(Gt,Gt.current&1);break;case 19:if(i=e.childExpirationTime>=n,t.effectTag&64){if(i)return dv(t,e,n);e.effectTag|=64}if(a=e.memoizedState,a!==null&&(a.rendering=null,a.tail=null),Xt(Gt,Gt.current),!i)return null}return as(t,e,n)}Ii=!1}}else Ii=!1;switch(e.expirationTime=0,e.tag){case 2:if(i=e.type,t!==null&&(t.alternate=null,e.alternate=null,e.effectTag|=2),t=e.pendingProps,a=au(e,Fn.current),Ka(e,n),a=D2(null,e,i,t,a,n),e.effectTag|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0){if(e.tag=1,e.memoizedState=null,e.updateQueue=null,er(i)){var l=!0;S0(e)}else l=!1;e.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,F2(e);var f=i.getDerivedStateFromProps;typeof f=="function"&&Q0(e,i,f,t),a.updater=Gf,e.stateNode=a,a._reactInternalFiber=e,qp(e,i,t,n),e=ig(null,e,i,!0,l,n)}else e.tag=0,mr(null,e,a,n),e=e.child;return e;case 16:e:{if(a=e.elementType,t!==null&&(t.alternate=null,e.alternate=null,e.effectTag|=2),t=e.pendingProps,bL(a),a._status!==1)throw a._result;switch(a=a._result,e.type=a,l=e.tag=tU(a),t=oi(a,t),l){case 0:e=rg(null,e,a,t,n);break e;case 1:e=lv(null,e,a,t,n);break e;case 11:e=av(null,e,a,t,n);break e;case 14:e=uv(null,e,a,oi(a.type,t),i,n);break e}throw Error(le(306,a,""))}return e;case 0:return i=e.type,a=e.pendingProps,a=e.elementType===i?a:oi(i,a),rg(t,e,i,a,n);case 1:return i=e.type,a=e.pendingProps,a=e.elementType===i?a:oi(i,a),lv(t,e,i,a,n);case 3:if(cv(e),i=e.updateQueue,t===null||i===null)throw Error(le(282));if(i=e.pendingProps,a=e.memoizedState,a=a!==null?a.element:null,O2(t,e),Fl(e,i,null,n),i=e.memoizedState.element,i===a)wd(),e=as(t,e,n);else{if((a=e.stateNode.hydrate)&&(Us=qa(e.stateNode.containerInfo.firstChild),os=e,a=Wo=!0),a)for(n=L2(e,null,i,n),e.child=n;n;)n.effectTag=n.effectTag&-3|1024,n=n.sibling;else mr(t,e,i,n),wd();e=e.child}return e;case 5:return nv(e),t===null&&ng(e),i=e.type,a=e.pendingProps,l=t!==null?t.memoizedProps:null,f=a.children,Zp(i,a)?f=null:l!==null&&Zp(i,l)&&(e.effectTag|=16),QE(t,e),e.mode&4&&n!==1&&a.hidden?(e.expirationTime=e.childExpirationTime=1,e=null):(mr(t,e,f,n),e=e.child),e;case 6:return t===null&&ng(e),null;case 13:return fv(t,e,n);case 4:return Kp(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=uu(e,null,i,n):mr(t,e,i,n),e.child;case 11:return i=e.type,a=e.pendingProps,a=e.elementType===i?a:oi(i,a),av(t,e,i,a,n);case 7:return mr(t,e,e.pendingProps,n),e.child;case 8:return mr(t,e,e.pendingProps.children,n),e.child;case 12:return mr(t,e,e.pendingProps.children,n),e.child;case 10:e:{i=e.type._context,a=e.pendingProps,f=e.memoizedProps,l=a.value;var d=e.type._context;if(Xt(Y0,d._currentValue),d._currentValue=l,f!==null)if(d=f.value,l=Jo(d,l)?0:(typeof i._calculateChangedBits=="function"?i._calculateChangedBits(d,l):1073741823)|0,l===0){if(f.children===a.children&&!Kn.current){e=as(t,e,n);break e}}else for(d=e.child,d!==null&&(d.return=e);d!==null;){var g=d.dependencies;if(g!==null){f=d.child;for(var v=g.firstContext;v!==null;){if(v.context===i&&v.observedBits&l){d.tag===1&&(v=Zs(n,null),v.tag=2,Xs(d,v)),d.expirationTime<n&&(d.expirationTime=n),v=d.alternate,v!==null&&v.expirationTime<n&&(v.expirationTime=n),BE(d.return,n),g.expirationTime<n&&(g.expirationTime=n);break}v=v.next}}else f=d.tag===10&&d.type===e.type?null:d.child;if(f!==null)f.return=d;else for(f=d;f!==null;){if(f===e){f=null;break}if(d=f.sibling,d!==null){d.return=f.return,f=d;break}f=f.return}d=f}mr(t,e,a.children,n),e=e.child}return e;case 9:return a=e.type,l=e.pendingProps,i=l.children,Ka(e,n),a=$r(a,l.unstable_observedBits),i=i(a),e.effectTag|=1,mr(t,e,i,n),e.child;case 14:return a=e.type,l=oi(a,e.pendingProps),l=oi(a.type,l),uv(t,e,a,l,i,n);case 15:return JE(t,e,e.type,e.pendingProps,i,n);case 17:return i=e.type,a=e.pendingProps,a=e.elementType===i?a:oi(i,a),t!==null&&(t.alternate=null,e.alternate=null,e.effectTag|=2),e.tag=1,er(i)?(t=!0,S0(e)):t=!1,Ka(e,n),zE(e,i,a),qp(e,i,a,n),ig(null,e,i,!0,t,n);case 19:return dv(t,e,n)}throw Error(le(156,e.tag))};var dg=null,pg=null;function KV(t){if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")return!1;var e=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(e.isDisabled||!e.supportsFiber)return!0;try{var n=e.inject(t);dg=function(i){try{e.onCommitFiberRoot(n,i,void 0,(i.current.effectTag&64)===64)}catch{}},pg=function(i){try{e.onCommitFiberUnmount(n,i)}catch{}}}catch{}return!0}function eU(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function Ni(t,e,n,i){return new eU(t,e,n,i)}function Y2(t){return t=t.prototype,!(!t||!t.isReactComponent)}function tU(t){if(typeof t=="function")return Y2(t)?1:0;if(t!=null){if(t=t.$$typeof,t===p2)return 11;if(t===g2)return 14}return 2}function qo(t,e){var n=t.alternate;return n===null?(n=Ni(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=t.childExpirationTime,n.expirationTime=t.expirationTime,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{expirationTime:e.expirationTime,firstContext:e.firstContext,responders:e.responders},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function M0(t,e,n,i,a,l){var f=2;if(i=t,typeof t=="function")Y2(t)&&(f=1);else if(typeof t=="string")f=5;else e:switch(t){case Oo:return Bs(n.children,a,l,e);case RL:f=8,a|=7;break;case VT:f=8,a|=1;break;case A0:return t=Ni(12,n,e,a|8),t.elementType=A0,t.type=A0,t.expirationTime=l,t;case y0:return t=Ni(13,n,e,a),t.type=y0,t.elementType=y0,t.expirationTime=l,t;case Mp:return t=Ni(19,n,e,a),t.elementType=Mp,t.expirationTime=l,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case UT:f=10;break e;case BT:f=9;break e;case p2:f=11;break e;case g2:f=14;break e;case DT:f=16,i=null;break e;case zT:f=22;break e}throw Error(le(130,t==null?t:typeof t,""))}return e=Ni(f,n,e,a),e.elementType=t,e.type=i,e.expirationTime=l,e}function Bs(t,e,n,i){return t=Ni(7,t,i,e),t.expirationTime=n,t}function xd(t,e,n){return t=Ni(6,t,null,e),t.expirationTime=n,t}function Rd(t,e,n){return e=Ni(4,t.children!==null?t.children:[],t.key,e),e.expirationTime=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function nU(t,e,n){this.tag=e,this.current=null,this.containerInfo=t,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function v3(t,e){var n=t.firstSuspendedTime;return t=t.lastSuspendedTime,n!==0&&n>=e&&t<=e}function Do(t,e){var n=t.firstSuspendedTime,i=t.lastSuspendedTime;n<e&&(t.firstSuspendedTime=e),(i>e||n===0)&&(t.lastSuspendedTime=e),e<=t.lastPingedTime&&(t.lastPingedTime=0),e<=t.lastExpiredTime&&(t.lastExpiredTime=0)}function _3(t,e){e>t.firstPendingTime&&(t.firstPendingTime=e);var n=t.firstSuspendedTime;n!==0&&(e>=n?t.firstSuspendedTime=t.lastSuspendedTime=t.nextKnownPendingLevel=0:e>=t.lastSuspendedTime&&(t.lastSuspendedTime=e+1),e>t.nextKnownPendingLevel&&(t.nextKnownPendingLevel=e))}function gg(t,e){var n=t.lastExpiredTime;(n===0||n>e)&&(t.lastExpiredTime=e)}function ff(t,e,n,i){var a=e.current,l=Vi(),f=wl.suspense;l=Zo(l,a,f);e:if(n){n=n._reactInternalFiber;t:{if(ta(n)!==n||n.tag!==1)throw Error(le(170));var d=n;do{switch(d.tag){case 3:d=d.stateNode.context;break t;case 1:if(er(d.type)){d=d.stateNode.__reactInternalMemoizedMergedChildContext;break t}}d=d.return}while(d!==null);throw Error(le(171))}if(n.tag===1){var g=n.type;if(er(g)){n=PE(n,g,d);break e}}n=d}else n=qs;return e.context===null?e.context=n:e.pendingContext=n,e=Zs(l,f),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),Xs(a,e),Ys(a,l),l}function bd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function _v(t,e){t=t.memoizedState,t!==null&&t.dehydrated!==null&&t.retryTime<e&&(t.retryTime=e)}function $2(t,e){_v(t,e),(t=t.alternate)&&_v(t,e)}function J2(t,e,n){n=n!=null&&n.hydrate===!0;var i=new nU(t,e,n),a=Ni(3,null,null,e===2?7:e===1?3:0);i.current=a,a.stateNode=i,F2(a),t[ql]=i.current,n&&e!==0&&NL(t,t.nodeType===9?t:t.ownerDocument),this._internalRoot=i}J2.prototype.render=function(t){ff(t,this._internalRoot,null,null)};J2.prototype.unmount=function(){var t=this._internalRoot,e=t.containerInfo;ff(null,t,null,function(){e[ql]=null})};function ic(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function rU(t,e){if(e||(e=t?t.nodeType===9?t.documentElement:t.firstChild:null,e=!(!e||e.nodeType!==1||!e.hasAttribute("data-reactroot"))),!e)for(var n;n=t.lastChild;)t.removeChild(n);return new J2(t,0,e?{hydrate:!0}:void 0)}function $f(t,e,n,i,a){var l=n._reactRootContainer;if(l){var f=l._internalRoot;if(typeof a=="function"){var d=a;a=function(){var v=bd(f);d.call(v)}}ff(e,f,t,a)}else{if(l=n._reactRootContainer=rU(n,i),f=l._internalRoot,typeof a=="function"){var g=a;a=function(){var v=bd(f);g.call(v)}}h3(function(){ff(e,f,t,a)})}return bd(f)}function iU(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:za,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}oE=function(t){if(t.tag===13){var e=R0(Vi(),150,100);Ys(t,e),$2(t,e)}};_2=function(t){t.tag===13&&(Ys(t,3),$2(t,3))};aE=function(t){if(t.tag===13){var e=Vi();e=Zo(e,t,null),Ys(t,e),$2(t,e)}};Pp=function(t,e,n){switch(e){case"input":if(Ip(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var a=b2(i);if(!a)throw Error(le(90));WT(i),Ip(i,a)}}}break;case"textarea":ZT(t,n);break;case"select":e=n.value,e!=null&&Qa(t,!!n.multiple,e,!1)}};u2=f3;FT=function(t,e,n,i,a){var l=De;De|=4;try{return Ks(98,t.bind(null,e,n,i,a))}finally{De=l,De===fn&&Di()}};l2=function(){(De&(1|ci|Ui))===fn&&(ZV(),Tu())};OT=function(t,e){var n=De;De|=2;try{return t(e)}finally{De=n,De===fn&&Di()}};function w3(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ic(e))throw Error(le(200));return iU(t,e,null,n)}var sU={Events:[ec,$o,b2,CT,kp,ou,function(t){y2(t,XL)},IT,NT,Df,Bf,Tu,{current:!1}]};(function(t){var e=t.findFiberByHostInstance;return KV(Zn({},t,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:li.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=tE(n),n===null?null:n.stateNode},findFiberByHostInstance:function(n){return e?e(n):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))})({findFiberByHostInstance:Kl,bundleType:0,version:"16.14.0",rendererPackageName:"react-dom"});Jr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sU;Jr.createPortal=w3;Jr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternalFiber;if(e===void 0)throw typeof t.render=="function"?Error(le(188)):Error(le(268,Object.keys(t)));return t=tE(e),t=t===null?null:t.stateNode,t};Jr.flushSync=function(t,e){if((De&(ci|Ui))!==fn)throw Error(le(187));var n=De;De|=1;try{return Ks(99,t.bind(null,e))}finally{De=n,Di()}};Jr.hydrate=function(t,e,n){if(!ic(e))throw Error(le(200));return $f(null,t,e,!0,n)};Jr.render=function(t,e,n){if(!ic(e))throw Error(le(200));return $f(null,t,e,!1,n)};Jr.unmountComponentAtNode=function(t){if(!ic(t))throw Error(le(40));return t._reactRootContainer?(h3(function(){$f(null,null,t,!1,function(){t._reactRootContainer=null,t[ql]=null})}),!0):!1};Jr.unstable_batchedUpdates=f3;Jr.unstable_createPortal=function(t,e){return w3(t,e,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)};Jr.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!ic(n))throw Error(le(200));if(t==null||t._reactInternalFiber===void 0)throw Error(le(38));return $f(t,e,n,!1,i)};Jr.version="16.14.0";function T3(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(T3)}catch(t){console.error(t)}}T3(),xT.exports=Jr;var oU=xT.exports;function wv(t,e){if(!t)throw new Error(e||"loader assertion failed.")}const E3=!!(typeof process!="object"||String(process)!=="[object process]"||process.browser),Tv=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);Tv&&parseFloat(Tv[1]);const aU="3.4.14";function ls(t,e){if(!t)throw new Error(e||"loaders.gl assertion failed.")}const C0=typeof process!="object"||String(process)!=="[object process]"||process.browser,uU=typeof window<"u"&&typeof window.orientation<"u",Ev=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);Ev&&parseFloat(Ev[1]);function Bl(t){"@babel/helpers - typeof";return Bl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bl(t)}function lU(t,e){if(Bl(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e||"default");if(Bl(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function cU(t){var e=lU(t,"string");return Bl(e)==="symbol"?e:String(e)}function C(t,e,n){return e=cU(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}let fU=class{constructor(e,n){C(this,"name",void 0),C(this,"workerThread",void 0),C(this,"isRunning",!0),C(this,"result",void 0),C(this,"_resolve",()=>{}),C(this,"_reject",()=>{}),this.name=e,this.workerThread=n,this.result=new Promise((i,a)=>{this._resolve=i,this._reject=a})}postMessage(e,n){this.workerThread.postMessage({source:"loaders.gl",type:e,payload:n})}done(e){ls(this.isRunning),this.isRunning=!1,this._resolve(e)}error(e){ls(this.isRunning),this.isRunning=!1,this._reject(e)}},kd=class{terminate(){}};const Pd=new Map;function hU(t){ls(t.source&&!t.url||!t.source&&t.url);let e=Pd.get(t.source||t.url);return e||(t.url&&(e=dU(t.url),Pd.set(t.url,e)),t.source&&(e=S3(t.source),Pd.set(t.source,e))),ls(e),e}function dU(t){if(!t.startsWith("http"))return t;const e=pU(t);return S3(e)}function S3(t){const e=new Blob([t],{type:"application/javascript"});return URL.createObjectURL(e)}function pU(t){return`try {
  importScripts('`.concat(t,`');
} catch (error) {
  console.error(error);
  throw error;
}`)}function x3(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=arguments.length>2?arguments[2]:void 0;const i=n||new Set;if(t){if(Sv(t))i.add(t);else if(Sv(t.buffer))i.add(t.buffer);else if(!ArrayBuffer.isView(t)){if(e&&typeof t=="object")for(const a in t)x3(t[a],e,i)}}return n===void 0?Array.from(i):[]}function Sv(t){return t?t instanceof ArrayBuffer||typeof MessagePort<"u"&&t instanceof MessagePort||typeof ImageBitmap<"u"&&t instanceof ImageBitmap||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas:!1}const Md=()=>{};let mg=class{static isSupported(){return typeof Worker<"u"&&C0||typeof kd<"u"&&!C0}constructor(e){C(this,"name",void 0),C(this,"source",void 0),C(this,"url",void 0),C(this,"terminated",!1),C(this,"worker",void 0),C(this,"onMessage",void 0),C(this,"onError",void 0),C(this,"_loadableURL","");const{name:n,source:i,url:a}=e;ls(i||a),this.name=n,this.source=i,this.url=a,this.onMessage=Md,this.onError=l=>console.log(l),this.worker=C0?this._createBrowserWorker():this._createNodeWorker()}destroy(){this.onMessage=Md,this.onError=Md,this.worker.terminate(),this.terminated=!0}get isRunning(){return!!this.onMessage}postMessage(e,n){n=n||x3(e),this.worker.postMessage(e,n)}_getErrorFromErrorEvent(e){let n="Failed to load ";return n+="worker ".concat(this.name," from ").concat(this.url,". "),e.message&&(n+="".concat(e.message," in ")),e.lineno&&(n+=":".concat(e.lineno,":").concat(e.colno)),new Error(n)}_createBrowserWorker(){this._loadableURL=hU({source:this.source,url:this.url});const e=new Worker(this._loadableURL,{name:this.name});return e.onmessage=n=>{n.data?this.onMessage(n.data):this.onError(new Error("No data received"))},e.onerror=n=>{this.onError(this._getErrorFromErrorEvent(n)),this.terminated=!0},e.onmessageerror=n=>console.error(n),e}_createNodeWorker(){let e;if(this.url){const i=this.url.includes(":/")||this.url.startsWith("/")?this.url:"./".concat(this.url);e=new kd(i,{eval:!1})}else if(this.source)e=new kd(this.source,{eval:!0});else throw new Error("no worker");return e.on("message",n=>{this.onMessage(n)}),e.on("error",n=>{this.onError(n)}),e.on("exit",n=>{}),e}},gU=class{static isSupported(){return mg.isSupported()}constructor(e){C(this,"name","unnamed"),C(this,"source",void 0),C(this,"url",void 0),C(this,"maxConcurrency",1),C(this,"maxMobileConcurrency",1),C(this,"onDebug",()=>{}),C(this,"reuseWorkers",!0),C(this,"props",{}),C(this,"jobQueue",[]),C(this,"idleQueue",[]),C(this,"count",0),C(this,"isDestroyed",!1),this.source=e.source,this.url=e.url,this.setProps(e)}destroy(){this.idleQueue.forEach(e=>e.destroy()),this.isDestroyed=!0}setProps(e){this.props={...this.props,...e},e.name!==void 0&&(this.name=e.name),e.maxConcurrency!==void 0&&(this.maxConcurrency=e.maxConcurrency),e.maxMobileConcurrency!==void 0&&(this.maxMobileConcurrency=e.maxMobileConcurrency),e.reuseWorkers!==void 0&&(this.reuseWorkers=e.reuseWorkers),e.onDebug!==void 0&&(this.onDebug=e.onDebug)}async startJob(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:(l,f,d)=>l.done(d),i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:(l,f)=>l.error(f);const a=new Promise(l=>(this.jobQueue.push({name:e,onMessage:n,onError:i,onStart:l}),this));return this._startQueuedJob(),await a}async _startQueuedJob(){if(!this.jobQueue.length)return;const e=this._getAvailableWorker();if(!e)return;const n=this.jobQueue.shift();if(n){this.onDebug({message:"Starting job",name:n.name,workerThread:e,backlog:this.jobQueue.length});const i=new fU(n.name,e);e.onMessage=a=>n.onMessage(i,a.type,a.payload),e.onError=a=>n.onError(i,a),n.onStart(i);try{await i.result}finally{this.returnWorkerToQueue(e)}}}returnWorkerToQueue(e){this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(e.destroy(),this.count--):this.idleQueue.push(e),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const e="".concat(this.name.toLowerCase()," (#").concat(this.count," of ").concat(this.maxConcurrency,")");return new mg({name:e,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return uU?this.maxMobileConcurrency:this.maxConcurrency}};const mU={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:()=>{}};let Q2=class Ua{static isSupported(){return mg.isSupported()}static getWorkerFarm(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Ua._workerFarm=Ua._workerFarm||new Ua({}),Ua._workerFarm.setProps(e),Ua._workerFarm}constructor(e){C(this,"props",void 0),C(this,"workerPools",new Map),this.props={...mU},this.setProps(e),this.workerPools=new Map}destroy(){for(const e of this.workerPools.values())e.destroy();this.workerPools=new Map}setProps(e){this.props={...this.props,...e};for(const n of this.workerPools.values())n.setProps(this._getWorkerPoolProps())}getWorkerPool(e){const{name:n,source:i,url:a}=e;let l=this.workerPools.get(n);return l||(l=new gU({name:n,source:i,url:a}),l.setProps(this._getWorkerPoolProps()),this.workerPools.set(n,l)),l}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}};C(Q2,"_workerFarm",void 0);const AU="latest";function yU(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=e[t.id]||{},i="".concat(t.id,"-worker.js");let a=n.workerUrl;if(!a&&t.id==="compression"&&(a=e.workerUrl),e._workerType==="test"&&(a="modules/".concat(t.module,"/dist/").concat(i)),!a){let l=t.version;l==="latest"&&(l=AU);const f=l?"@".concat(l):"";a="https://unpkg.com/@loaders.gl/".concat(t.module).concat(f,"/dist/").concat(i)}return ls(a),a}function vU(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:aU;ls(t,"no worker provided");const n=t.version;return!(!e||!n)}const _U={},wU=Object.freeze(Object.defineProperty({__proto__:null,default:_U},Symbol.toStringTag,{value:"Module"}));function TU(t,e){return!Q2.isSupported()||!C0&&!(e!=null&&e._nodeWorkers)?!1:t.worker&&(e==null?void 0:e.worker)}async function EU(t,e,n,i,a){const l=t.id,f=yU(t,n),g=Q2.getWorkerFarm(n).getWorkerPool({name:l,url:f});n=JSON.parse(JSON.stringify(n)),i=JSON.parse(JSON.stringify(i||{}));const v=await g.startJob("process-on-worker",SU.bind(null,a));return v.postMessage("process",{input:e,options:n,context:i}),await(await v.result).result}async function SU(t,e,n,i){switch(n){case"done":e.done(i);break;case"error":e.error(new Error(i.error));break;case"process":const{id:a,input:l,options:f}=i;try{const d=await t(l,f);e.postMessage("done",{id:a,result:d})}catch(d){const g=d instanceof Error?d.message:"unknown error";e.postMessage("error",{id:a,error:g})}break;default:console.warn("parse-with-worker unknown message ".concat(n))}}function xU(t,e,n){if(n=n||t.byteLength,t.byteLength<n||e.byteLength<n)return!1;const i=new Uint8Array(t),a=new Uint8Array(e);for(let l=0;l<i.length;++l)if(i[l]!==a[l])return!1;return!0}function RU(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];const i=e.map(d=>d instanceof ArrayBuffer?new Uint8Array(d):d),a=i.reduce((d,g)=>d+g.byteLength,0),l=new Uint8Array(a);let f=0;for(const d of i)l.set(d,f),f+=d.byteLength;return l.buffer}async function bU(t){const e=[];for await(const n of t)e.push(n);return RU(...e)}let kU="";const xv={};function PU(t){for(const e in xv)if(t.startsWith(e)){const n=xv[e];t=t.replace(e,n)}return!t.startsWith("http://")&&!t.startsWith("https://")&&(t="".concat(kU).concat(t)),t}function MU(t){return t&&typeof t=="object"&&t.isBuffer}function R3(t){if(MU(t))return t;if(t instanceof ArrayBuffer)return t;if(ArrayBuffer.isView(t))return t.byteOffset===0&&t.byteLength===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength);if(typeof t=="string"){const e=t;return new TextEncoder().encode(e).buffer}if(t&&typeof t=="object"&&t._toArrayBuffer)return t._toArrayBuffer();throw new Error("toArrayBuffer")}function b3(t){const e=t?t.lastIndexOf("/"):-1;return e>=0?t.substr(e+1):""}function CU(t){const e=t?t.lastIndexOf("/"):-1;return e>=0?t.substr(0,e):""}const IU=t=>typeof t=="boolean",Sl=t=>typeof t=="function",sc=t=>t!==null&&typeof t=="object",Rv=t=>sc(t)&&t.constructor==={}.constructor,NU=t=>t&&typeof t[Symbol.iterator]=="function",FU=t=>t&&typeof t[Symbol.asyncIterator]=="function",na=t=>typeof Response<"u"&&t instanceof Response||t&&t.arrayBuffer&&t.text&&t.json,ra=t=>typeof Blob<"u"&&t instanceof Blob,OU=t=>t&&typeof t=="object"&&t.isBuffer,LU=t=>typeof ReadableStream<"u"&&t instanceof ReadableStream||sc(t)&&Sl(t.tee)&&Sl(t.cancel)&&Sl(t.getReader),VU=t=>sc(t)&&Sl(t.read)&&Sl(t.pipe)&&IU(t.readable),k3=t=>LU(t)||VU(t),UU=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,BU=/^([-\w.]+\/[-\w.+]+)/;function DU(t){const e=BU.exec(t);return e?e[1]:t}function bv(t){const e=UU.exec(t);return e?e[1]:""}const P3=/\?.*/;function zU(t){const e=t.match(P3);return e&&e[0]}function q2(t){return t.replace(P3,"")}function Jf(t){return na(t)?t.url:ra(t)?t.name||"":typeof t=="string"?t:""}function K2(t){if(na(t)){const e=t,n=e.headers.get("content-type")||"",i=q2(e.url);return DU(n)||bv(i)}return ra(t)?t.type||"":typeof t=="string"?bv(t):""}function jU(t){return na(t)?t.headers["content-length"]||-1:ra(t)?t.size:typeof t=="string"?t.length:t instanceof ArrayBuffer||ArrayBuffer.isView(t)?t.byteLength:-1}async function M3(t){if(na(t))return t;const e={},n=jU(t);n>=0&&(e["content-length"]=String(n));const i=Jf(t),a=K2(t);a&&(e["content-type"]=a);const l=await ZU(t);l&&(e["x-first-bytes"]=l),typeof t=="string"&&(t=new TextEncoder().encode(t));const f=new Response(t,{headers:e});return Object.defineProperty(f,"url",{value:i}),f}async function WU(t){if(!t.ok){const e=await GU(t);throw new Error(e)}}async function GU(t){let e="Failed to fetch resource ".concat(t.url," (").concat(t.status,"): ");try{const n=t.headers.get("Content-Type");let i=t.statusText;n.includes("application/json")&&(i+=" ".concat(await t.text())),e+=i,e=e.length>60?"".concat(e.slice(0,60),"..."):e}catch{}return e}async function ZU(t){if(typeof t=="string")return"data:,".concat(t.slice(0,5));if(t instanceof Blob){const n=t.slice(0,5);return await new Promise(i=>{const a=new FileReader;a.onload=l=>{var f;return i(l==null||(f=l.target)===null||f===void 0?void 0:f.result)},a.readAsDataURL(n)})}if(t instanceof ArrayBuffer){const n=t.slice(0,5),i=XU(n);return"data:base64,".concat(i)}return null}function XU(t){let e="";const n=new Uint8Array(t);for(let i=0;i<n.byteLength;i++)e+=String.fromCharCode(n[i]);return btoa(e)}async function kv(t,e){if(typeof t=="string"){t=PU(t);let n=e;return e!=null&&e.fetch&&typeof(e==null?void 0:e.fetch)!="function"&&(n=e.fetch),await fetch(t,n)}return await M3(t)}function HU(t){if(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&process.versions.electron)return!0;const e=typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent,n=t||e;return!!(n&&n.indexOf("Electron")>=0)}function oc(){return!(typeof process=="object"&&String(process)==="[object process]"&&!process.browser)||HU()}const r0=globalThis.window||globalThis.self||globalThis.global,nl=globalThis.process||{},C3=typeof __VERSION__<"u"?__VERSION__:"untranspiled source";oc();function YU(t){try{const e=window[t],n="__storage_test__";return e.setItem(n,n),e.removeItem(n),e}catch{return null}}let $U=class{constructor(e,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"sessionStorage";this.storage=void 0,this.id=void 0,this.config=void 0,this.storage=YU(i),this.id=e,this.config=n,this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(e){if(Object.assign(this.config,e),this.storage){const n=JSON.stringify(this.config);this.storage.setItem(this.id,n)}}_loadConfiguration(){let e={};if(this.storage){const n=this.storage.getItem(this.id);e=n?JSON.parse(n):{}}return Object.assign(this.config,e),this}};function JU(t){let e;return t<10?e="".concat(t.toFixed(2),"ms"):t<100?e="".concat(t.toFixed(1),"ms"):t<1e3?e="".concat(t.toFixed(0),"ms"):e="".concat((t/1e3).toFixed(2),"s"),e}function QU(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:8;const n=Math.max(e-t.length,0);return"".concat(" ".repeat(n)).concat(t)}function Cd(t,e,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:600;const a=t.src.replace(/\(/g,"%28").replace(/\)/g,"%29");t.width>i&&(n=Math.min(n,i/t.width));const l=t.width*n,f=t.height*n,d=["font-size:1px;","padding:".concat(Math.floor(f/2),"px ").concat(Math.floor(l/2),"px;"),"line-height:".concat(f,"px;"),"background:url(".concat(a,");"),"background-size:".concat(l,"px ").concat(f,"px;"),"color:transparent;"].join("");return["".concat(e," %c+"),d]}let hf;(function(t){t[t.BLACK=30]="BLACK",t[t.RED=31]="RED",t[t.GREEN=32]="GREEN",t[t.YELLOW=33]="YELLOW",t[t.BLUE=34]="BLUE",t[t.MAGENTA=35]="MAGENTA",t[t.CYAN=36]="CYAN",t[t.WHITE=37]="WHITE",t[t.BRIGHT_BLACK=90]="BRIGHT_BLACK",t[t.BRIGHT_RED=91]="BRIGHT_RED",t[t.BRIGHT_GREEN=92]="BRIGHT_GREEN",t[t.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",t[t.BRIGHT_BLUE=94]="BRIGHT_BLUE",t[t.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",t[t.BRIGHT_CYAN=96]="BRIGHT_CYAN",t[t.BRIGHT_WHITE=97]="BRIGHT_WHITE"})(hf||(hf={}));const qU=10;function Pv(t){return typeof t!="string"?t:(t=t.toUpperCase(),hf[t]||hf.WHITE)}function KU(t,e,n){if(!oc&&typeof t=="string"){if(e){const i=Pv(e);t="\x1B[".concat(i,"m").concat(t,"\x1B[39m")}if(n){const i=Pv(n);t="\x1B[".concat(i+qU,"m").concat(t,"\x1B[49m")}}return t}function eB(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:["constructor"];const n=Object.getPrototypeOf(t),i=Object.getOwnPropertyNames(n),a=t;for(const l of i){const f=a[l];typeof f=="function"&&(e.find(d=>l===d)||(a[l]=f.bind(t)))}}function df(t,e){if(!t)throw new Error(e||"Assertion failed")}function Sa(){let t;if(oc()&&r0.performance){var e,n;t=r0==null||(e=r0.performance)===null||e===void 0||(n=e.now)===null||n===void 0?void 0:n.call(e)}else if("hrtime"in nl){var i;const a=nl==null||(i=nl.hrtime)===null||i===void 0?void 0:i.call(nl);t=a[0]*1e3+a[1]/1e6}else t=Date.now();return t}const xa={debug:oc()&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},tB={enabled:!0,level:0};function Dr(){}const Mv={},Cv={once:!0};let em=class{constructor(){let{id:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{id:""};this.id=void 0,this.VERSION=C3,this._startTs=Sa(),this._deltaTs=Sa(),this._storage=void 0,this.userData={},this.LOG_THROTTLE_TIMEOUT=0,this.id=e,this.userData={},this._storage=new $U("__probe-".concat(this.id,"__"),tB),this.timeStamp("".concat(this.id," started")),eB(this),Object.seal(this)}set level(e){this.setLevel(e)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((Sa()-this._startTs).toPrecision(10))}getDelta(){return Number((Sa()-this._deltaTs).toPrecision(10))}set priority(e){this.level=e}get priority(){return this.level}getPriority(){return this.level}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return this._storage.setConfiguration({enabled:e}),this}setLevel(e){return this._storage.setConfiguration({level:e}),this}get(e){return this._storage.config[e]}set(e,n){this._storage.setConfiguration({[e]:n})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(e,n){df(e,n)}warn(e){return this._getLogFunction(0,e,xa.warn,arguments,Cv)}error(e){return this._getLogFunction(0,e,xa.error,arguments)}deprecated(e,n){return this.warn("`".concat(e,"` is deprecated and will be removed in a later version. Use `").concat(n,"` instead"))}removed(e,n){return this.error("`".concat(e,"` has been removed. Use `").concat(n,"` instead"))}probe(e,n){return this._getLogFunction(e,n,xa.log,arguments,{time:!0,once:!0})}log(e,n){return this._getLogFunction(e,n,xa.debug,arguments)}info(e,n){return this._getLogFunction(e,n,console.info,arguments)}once(e,n){return this._getLogFunction(e,n,xa.debug||xa.info,arguments,Cv)}table(e,n,i){return n?this._getLogFunction(e,n,console.table||Dr,i&&[i],{tag:sB(n)}):Dr}image(e){let{logLevel:n,priority:i,image:a,message:l="",scale:f=1}=e;return this._shouldLog(n||i)?oc()?iB({image:a,message:l,scale:f}):rB():Dr}time(e,n){return this._getLogFunction(e,n,console.time?console.time:console.info)}timeEnd(e,n){return this._getLogFunction(e,n,console.timeEnd?console.timeEnd:console.info)}timeStamp(e,n){return this._getLogFunction(e,n,console.timeStamp||Dr)}group(e,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{collapsed:!1};const a=Iv({logLevel:e,message:n,opts:i}),{collapsed:l}=i;return a.method=(l?console.groupCollapsed:console.group)||console.info,this._getLogFunction(a)}groupCollapsed(e,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.group(e,n,Object.assign({},i,{collapsed:!0}))}groupEnd(e){return this._getLogFunction(e,"",console.groupEnd||Dr)}withGroup(e,n,i){this.group(e,n)();try{i()}finally{this.groupEnd(e)()}}trace(){console.trace&&console.trace()}_shouldLog(e){return this.isEnabled()&&this.getLevel()>=I3(e)}_getLogFunction(e,n,i,a,l){if(this._shouldLog(e)){l=Iv({logLevel:e,message:n,args:a,opts:l}),i=i||l.method,df(i),l.total=this.getTotal(),l.delta=this.getDelta(),this._deltaTs=Sa();const f=l.tag||l.message;if(l.once&&f)if(!Mv[f])Mv[f]=Sa();else return Dr;return n=nB(this.id,l.message,l),i.bind(console,n,...l.args)}return Dr}};em.VERSION=C3;function I3(t){if(!t)return 0;let e;switch(typeof t){case"number":e=t;break;case"object":e=t.logLevel||t.priority||0;break;default:return 0}return df(Number.isFinite(e)&&e>=0),e}function Iv(t){const{logLevel:e,message:n}=t;t.logLevel=I3(e);const i=t.args?Array.from(t.args):[];for(;i.length&&i.shift()!==n;);switch(typeof e){case"string":case"function":n!==void 0&&i.unshift(n),t.message=e;break;case"object":Object.assign(t,e);break}typeof t.message=="function"&&(t.message=t.message());const a=typeof t.message;return df(a==="string"||a==="object"),Object.assign(t,{args:i},t.opts)}function nB(t,e,n){if(typeof e=="string"){const i=n.time?QU(JU(n.total)):"";e=n.time?"".concat(t,": ").concat(i,"  ").concat(e):"".concat(t,": ").concat(e),e=KU(e,n.color,n.background)}return e}function rB(t){return console.warn("removed"),Dr}function iB(t){let{image:e,message:n="",scale:i=1}=t;if(typeof e=="string"){const l=new Image;return l.onload=()=>{const f=Cd(l,n,i);console.log(...f)},l.src=e,Dr}const a=e.nodeName||"";if(a.toLowerCase()==="img")return console.log(...Cd(e,n,i)),Dr;if(a.toLowerCase()==="canvas"){const l=new Image;return l.onload=()=>console.log(...Cd(l,n,i)),l.src=e.toDataURL(),Dr}return Dr}function sB(t){for(const e in t)for(const n in t[e])return n||"untitled";return"empty"}const Nv=new em({id:"loaders.gl"});let oB=class{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}},aB=class{constructor(){C(this,"console",void 0),this.console=console}log(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return this.console.log.bind(this.console,...n)}info(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return this.console.info.bind(this.console,...n)}warn(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return this.console.warn.bind(this.console,...n)}error(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return this.console.error.bind(this.console,...n)}};const N3={fetch:null,mimeType:void 0,nothrow:!1,log:new aB,CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:E3,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]},uB={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function F3(){globalThis.loaders=globalThis.loaders||{};const{loaders:t}=globalThis;return t._state=t._state||{},t._state}const O3=()=>{const t=F3();return t.globalOptions=t.globalOptions||{...N3},t.globalOptions};function lB(t,e,n,i){return n=n||[],n=Array.isArray(n)?n:[n],cB(t,n),hB(e,t,i)}function cB(t,e){Fv(t,null,N3,uB,e);for(const n of e){const i=t&&t[n.id]||{},a=n.options&&n.options[n.id]||{},l=n.deprecatedOptions&&n.deprecatedOptions[n.id]||{};Fv(i,n.id,a,l,e)}}function Fv(t,e,n,i,a){const l=e||"Top level",f=e?"".concat(e,"."):"";for(const d in t){const g=!e&&sc(t[d]),v=d==="baseUri"&&!e,T=d==="workerUrl"&&e;if(!(d in n)&&!v&&!T){if(d in i)Nv.warn("".concat(l," loader option '").concat(f).concat(d,"' no longer supported, use '").concat(i[d],"'"))();else if(!g){const S=fB(d,a);Nv.warn("".concat(l," loader option '").concat(f).concat(d,"' not recognized. ").concat(S))()}}}}function fB(t,e){const n=t.toLowerCase();let i="";for(const a of e)for(const l in a.options){if(t===l)return"Did you mean '".concat(a.id,".").concat(l,"'?");const f=l.toLowerCase();(n.startsWith(f)||f.startsWith(n))&&(i=i||"Did you mean '".concat(a.id,".").concat(l,"'?"))}return i}function hB(t,e,n){const a={...t.options||{}};return dB(a,n),a.log===null&&(a.log=new oB),Ov(a,O3()),Ov(a,e),a}function Ov(t,e){for(const n in e)if(n in e){const i=e[n];Rv(i)&&Rv(t[n])?t[n]={...t[n],...e[n]}:t[n]=e[n]}}function dB(t,e){e&&!("baseUri"in t)&&(t.baseUri=e)}function tm(t){var e;return t?(Array.isArray(t)&&(t=t[0]),Array.isArray((e=t)===null||e===void 0?void 0:e.extensions)):!1}function nm(t){var e,n;wv(t,"null loader"),wv(tm(t),"invalid loader");let i;return Array.isArray(t)&&(i=t[1],t=t[0],t={...t,options:{...t.options,...i}}),((e=t)!==null&&e!==void 0&&e.parseTextSync||(n=t)!==null&&n!==void 0&&n.parseText)&&(t.text=!0),t.text||(t.binary=!0),t}const L3=()=>{const t=F3();return t.loaderRegistry=t.loaderRegistry||[],t.loaderRegistry};function pB(t){const e=L3();t=Array.isArray(t)?t:[t];for(const n of t){const i=nm(n);e.find(a=>i===a)||e.unshift(i)}}function gB(){return L3()}const mB=new em({id:"loaders.gl"}),AB=/\.([^.]+)$/;async function yB(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;if(!V3(t))return null;let a=Lv(t,e,{...n,nothrow:!0},i);if(a)return a;if(ra(t)&&(t=await t.slice(0,10).arrayBuffer(),a=Lv(t,e,n,i)),!a&&!(n!=null&&n.nothrow))throw new Error(U3(t));return a}function Lv(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;if(!V3(t))return null;if(e&&!Array.isArray(e))return nm(e);let a=[];e&&(a=a.concat(e)),n!=null&&n.ignoreRegisteredLoaders||a.push(...gB()),_B(a);const l=vB(t,a,n,i);if(!l&&!(n!=null&&n.nothrow))throw new Error(U3(t));return l}function vB(t,e,n,i){const a=Jf(t),l=K2(t),f=q2(a)||(i==null?void 0:i.url);let d=null,g="";if(n!=null&&n.mimeType&&(d=Id(e,n==null?void 0:n.mimeType),g="match forced by supplied MIME type ".concat(n==null?void 0:n.mimeType)),d=d||wB(e,f),g=g||(d?"matched url ".concat(f):""),d=d||Id(e,l),g=g||(d?"matched MIME type ".concat(l):""),d=d||EB(e,t),g=g||(d?"matched initial data ".concat(B3(t)):""),d=d||Id(e,n==null?void 0:n.fallbackMimeType),g=g||(d?"matched fallback MIME type ".concat(l):""),g){var v;mB.log(1,"selectLoader selected ".concat((v=d)===null||v===void 0?void 0:v.name,": ").concat(g,"."))}return d}function V3(t){return!(t instanceof Response&&t.status===204)}function U3(t){const e=Jf(t),n=K2(t);let i="No valid loader found (";i+=e?"".concat(b3(e),", "):"no url provided, ",i+="MIME type: ".concat(n?'"'.concat(n,'"'):"not provided",", ");const a=t?B3(t):"";return i+=a?' first bytes: "'.concat(a,'"'):"first bytes: not available",i+=")",i}function _B(t){for(const e of t)nm(e)}function wB(t,e){const n=e&&AB.exec(e),i=n&&n[1];return i?TB(t,i):null}function TB(t,e){e=e.toLowerCase();for(const n of t)for(const i of n.extensions)if(i.toLowerCase()===e)return n;return null}function Id(t,e){for(const n of t)if(n.mimeTypes&&n.mimeTypes.includes(e)||e==="application/x.".concat(n.id))return n;return null}function EB(t,e){if(!e)return null;for(const n of t)if(typeof e=="string"){if(SB(e,n))return n}else if(ArrayBuffer.isView(e)){if(Vv(e.buffer,e.byteOffset,n))return n}else if(e instanceof ArrayBuffer&&Vv(e,0,n))return n;return null}function SB(t,e){return e.testText?e.testText(t):(Array.isArray(e.tests)?e.tests:[e.tests]).some(i=>t.startsWith(i))}function Vv(t,e,n){return(Array.isArray(n.tests)?n.tests:[n.tests]).some(a=>xB(t,e,n,a))}function xB(t,e,n,i){if(i instanceof ArrayBuffer)return xU(i,t,i.byteLength);switch(typeof i){case"function":return i(t,n);case"string":const a=Ag(t,e,i.length);return i===a;default:return!1}}function B3(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5;return typeof t=="string"?t.slice(0,e):ArrayBuffer.isView(t)?Ag(t.buffer,t.byteOffset,e):t instanceof ArrayBuffer?Ag(t,0,e):""}function Ag(t,e,n){if(t.byteLength<e+n)return"";const i=new DataView(t);let a="";for(let l=0;l<n;l++)a+=String.fromCharCode(i.getUint8(e+l));return a}const RB=256*1024;function*bB(t,e){const n=(e==null?void 0:e.chunkSize)||RB;let i=0;const a=new TextEncoder;for(;i<t.length;){const l=Math.min(t.length-i,n),f=t.slice(i,i+l);i+=l,yield a.encode(f)}}const kB=256*1024;function PB(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){const{chunkSize:n=kB}=e;let i=0;for(;i<t.byteLength;){const a=Math.min(t.byteLength-i,n),l=new ArrayBuffer(a),f=new Uint8Array(t,i,a);new Uint8Array(l).set(f),i+=a,yield l}}()}const MB=1024*1024;async function*CB(t,e){const n=(e==null?void 0:e.chunkSize)||MB;let i=0;for(;i<t.size;){const a=i+n,l=await t.slice(i,a).arrayBuffer();i=a,yield l}}function Uv(t,e){return E3?IB(t,e):NB(t)}async function*IB(t,e){const n=t.getReader();let i;try{for(;;){const a=i||n.read();e!=null&&e._streamReadAhead&&(i=n.read());const{done:l,value:f}=await a;if(l)return;yield R3(f)}}catch{n.releaseLock()}}async function*NB(t,e){for await(const n of t)yield R3(n)}function FB(t,e){if(typeof t=="string")return bB(t,e);if(t instanceof ArrayBuffer)return PB(t,e);if(ra(t))return CB(t,e);if(k3(t))return Uv(t,e);if(na(t))return Uv(t.body,e);throw new Error("makeIterator")}const D3="Cannot convert supplied data type";function OB(t,e,n){if(e.text&&typeof t=="string")return t;if(OU(t)&&(t=t.buffer),t instanceof ArrayBuffer){const i=t;return e.text&&!e.binary?new TextDecoder("utf8").decode(i):i}if(ArrayBuffer.isView(t)){if(e.text&&!e.binary)return new TextDecoder("utf8").decode(t);let i=t.buffer;const a=t.byteLength||t.length;return(t.byteOffset!==0||a!==i.byteLength)&&(i=i.slice(t.byteOffset,t.byteOffset+a)),i}throw new Error(D3)}async function LB(t,e,n){const i=t instanceof ArrayBuffer||ArrayBuffer.isView(t);if(typeof t=="string"||i)return OB(t,e);if(ra(t)&&(t=await M3(t)),na(t)){const a=t;return await WU(a),e.binary?await a.arrayBuffer():await a.text()}if(k3(t)&&(t=FB(t,n)),NU(t)||FU(t))return bU(t);throw new Error(D3)}function z3(t,e){const n=O3(),i=t||n;return typeof i.fetch=="function"?i.fetch:sc(i.fetch)?a=>kv(a,i):e!=null&&e.fetch?e==null?void 0:e.fetch:kv}function VB(t,e,n){if(n)return n;const i={fetch:z3(e,t),...t};if(i.url){const a=q2(i.url);i.baseUrl=a,i.queryString=zU(i.url),i.filename=b3(a),i.baseUrl=CU(a)}return Array.isArray(i.loaders)||(i.loaders=null),i}function UB(t,e){if(!e&&t&&!Array.isArray(t))return t;let n;if(t&&(n=Array.isArray(t)?t:[t]),e&&e.loaders){const i=Array.isArray(e.loaders)?e.loaders:[e.loaders];n=n?[...n,...i]:i}return n&&n.length?n:null}async function rm(t,e,n,i){ls(!i||typeof i=="object"),e&&!Array.isArray(e)&&!tm(e)&&(i=void 0,n=e,e=void 0),t=await t,n=n||{};const a=Jf(t),f=UB(e,i),d=await yB(t,f,n);return d?(n=lB(n,d,f,a),i=VB({url:a,parse:rm,loaders:f},n,i||null),await BB(d,t,n,i)):null}async function BB(t,e,n,i){if(vU(t),na(e)){const a=e,{ok:l,redirected:f,status:d,statusText:g,type:v,url:T}=a,S=Object.fromEntries(a.headers.entries());i.response={headers:S,ok:l,redirected:f,status:d,statusText:g,type:v,url:T}}if(e=await LB(e,t,n),t.parseTextSync&&typeof e=="string")return n.dataType="text",t.parseTextSync(e,n,i,t);if(TU(t,n))return await EU(t,e,n,i,rm);if(t.parseText&&typeof e=="string")return await t.parseText(e,n,i,t);if(t.parse)return await t.parse(e,n,i,t);throw ls(!t.parseSync),new Error("".concat(t.id," loader - no parser found and worker is disabled"))}async function yg(t,e,n,i){!Array.isArray(e)&&!tm(e)&&(n=e,e=void 0);const a=z3(n);let l=t;return typeof t=="string"&&(l=await a(t)),ra(t)&&(l=await a(t)),await rm(l,e,n)}const DB="3.4.14";function j3(t,e){if(!t)throw new Error(e||"loader assertion failed.")}const zB=!!(typeof process!="object"||String(process)!=="[object process]"||process.browser),Bv=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);Bv&&parseFloat(Bv[1]);const{_parseImageNode:jB}=globalThis,vg=typeof Image<"u",_g=typeof ImageBitmap<"u",WB=!!jB,wg=zB?!0:WB;function GB(t){switch(t){case"auto":return _g||vg||wg;case"imagebitmap":return _g;case"image":return vg;case"data":return wg;default:throw new Error("@loaders.gl/images: image ".concat(t," not supported in this environment"))}}function ZB(){if(_g)return"imagebitmap";if(vg)return"image";if(wg)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}function XB(t){const e=YB(t);if(!e)throw new Error("Not an image");return e}function HB(t){switch(XB(t)){case"data":return t;case"image":case"imagebitmap":const e=document.createElement("canvas"),n=e.getContext("2d");if(!n)throw new Error("getImageData");return e.width=t.width,e.height=t.height,n.drawImage(t,0,0),n.getImageData(0,0,t.width,t.height);default:throw new Error("getImageData")}}function YB(t){return typeof ImageBitmap<"u"&&t instanceof ImageBitmap?"imagebitmap":typeof Image<"u"&&t instanceof Image?"image":t&&typeof t=="object"&&t.data&&t.width&&t.height?"data":null}const $B=/^data:image\/svg\+xml/,JB=/\.svg((\?|#).*)?$/;function im(t){return t&&($B.test(t)||JB.test(t))}function QB(t,e){if(im(e)){let i=new TextDecoder().decode(t);try{typeof unescape=="function"&&typeof encodeURIComponent=="function"&&(i=unescape(encodeURIComponent(i)))}catch(l){throw new Error(l.message)}return"data:image/svg+xml;base64,".concat(btoa(i))}return W3(t,e)}function W3(t,e){if(im(e))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(t)])}async function G3(t,e,n){const i=QB(t,n),a=self.URL||self.webkitURL,l=typeof i!="string"&&a.createObjectURL(i);try{return await qB(l||i,e)}finally{l&&a.revokeObjectURL(l)}}async function qB(t,e){const n=new Image;return n.src=t,e.image&&e.image.decode&&n.decode?(await n.decode(),n):await new Promise((i,a)=>{try{n.onload=()=>i(n),n.onerror=l=>a(new Error("Could not load image ".concat(t,": ").concat(l)))}catch(l){a(l)}})}const KB={};let Dv=!0;async function eD(t,e,n){let i;im(n)?i=await G3(t,e,n):i=W3(t,n);const a=e&&e.imagebitmap;return await tD(i,a)}async function tD(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if((nD(e)||!Dv)&&(e=null),e)try{return await createImageBitmap(t,e)}catch(n){console.warn(n),Dv=!1}return await createImageBitmap(t)}function nD(t){for(const e in t||KB)return!1;return!0}function rD(t){return!aD(t,"ftyp",4)||!(t[8]&96)?null:iD(t)}function iD(t){switch(sD(t,8,12).replace("\0"," ").trim()){case"avif":case"avis":return{extension:"avif",mimeType:"image/avif"};default:return null}}function sD(t,e,n){return String.fromCharCode(...t.slice(e,n))}function oD(t){return[...t].map(e=>e.charCodeAt(0))}function aD(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;const i=oD(e);for(let a=0;a<i.length;++a)if(i[a]!==t[a+n])return!1;return!0}const Pi=!1,xl=!0;function Z3(t){const e=ac(t);return lD(e)||hD(e)||cD(e)||fD(e)||uD(e)}function uD(t){const e=new Uint8Array(t instanceof DataView?t.buffer:t),n=rD(e);return n?{mimeType:n.mimeType,width:0,height:0}:null}function lD(t){const e=ac(t);return e.byteLength>=24&&e.getUint32(0,Pi)===2303741511?{mimeType:"image/png",width:e.getUint32(16,Pi),height:e.getUint32(20,Pi)}:null}function cD(t){const e=ac(t);return e.byteLength>=10&&e.getUint32(0,Pi)===1195984440?{mimeType:"image/gif",width:e.getUint16(6,xl),height:e.getUint16(8,xl)}:null}function fD(t){const e=ac(t);return e.byteLength>=14&&e.getUint16(0,Pi)===16973&&e.getUint32(2,xl)===e.byteLength?{mimeType:"image/bmp",width:e.getUint32(18,xl),height:e.getUint32(22,xl)}:null}function hD(t){const e=ac(t);if(!(e.byteLength>=3&&e.getUint16(0,Pi)===65496&&e.getUint8(2)===255))return null;const{tableMarkers:i,sofMarkers:a}=dD();let l=2;for(;l+9<e.byteLength;){const f=e.getUint16(l,Pi);if(a.has(f))return{mimeType:"image/jpeg",height:e.getUint16(l+5,Pi),width:e.getUint16(l+7,Pi)};if(!i.has(f))return null;l+=2,l+=e.getUint16(l,Pi)}return null}function dD(){const t=new Set([65499,65476,65484,65501,65534]);for(let n=65504;n<65520;++n)t.add(n);return{tableMarkers:t,sofMarkers:new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502])}}function ac(t){if(t instanceof DataView)return t;if(ArrayBuffer.isView(t))return new DataView(t.buffer);if(t instanceof ArrayBuffer)return new DataView(t);throw new Error("toDataView")}async function pD(t,e){const{mimeType:n}=Z3(t)||{},i=globalThis._parseImageNode;return j3(i),await i(t,n)}async function gD(t,e,n){e=e||{};const a=(e.image||{}).type||"auto",{url:l}=n||{},f=mD(a);let d;switch(f){case"imagebitmap":d=await eD(t,e,l);break;case"image":d=await G3(t,e,l);break;case"data":d=await pD(t);break;default:j3(!1)}return a==="data"&&(d=HB(d)),d}function mD(t){switch(t){case"auto":case"data":return ZB();default:return GB(t),t}}const AD=["png","jpg","jpeg","gif","webp","bmp","ico","svg","avif"],yD=["image/png","image/jpeg","image/gif","image/webp","image/avif","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],vD={image:{type:"auto",decode:!0}},_D={id:"image",module:"images",name:"Images",version:DB,mimeTypes:yD,extensions:AD,parse:gD,tests:[t=>!!Z3(new DataView(t))],options:vD};function X3(t){if(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&process.versions.electron)return!0;const e=typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent,n=t||e;return!!(n&&n.indexOf("Electron")>=0)}function Rr(){return!(typeof process=="object"&&String(process)==="[object process]"&&!process.browser)||X3()}const I0={self:typeof self<"u"&&self,window:typeof window<"u"&&window,global:typeof global<"u"&&global,document:typeof document<"u"&&document,process:typeof process=="object"&&process},Ds=I0.window||I0.self||I0.global,Mi=I0.process||{},Qf=typeof __VERSION__<"u"?__VERSION__:"untranspiled source";Rr();const Nd=globalThis;function H3(t){if(!t&&!Rr())return"Node";if(X3(t))return"Electron";const n=t||(typeof navigator<"u"?navigator:{}).userAgent||"";if(n.indexOf("Edge")>-1)return"Edge";const i=n.indexOf("MSIE ")!==-1,a=n.indexOf("Trident/")!==-1;return i||a?"IE":Nd.chrome?"Chrome":Nd.safari?"Safari":Nd.mozInnerScreenX?"Firefox":"Unknown"}function wD(t){try{const e=window[t],n="__storage_test__";return e.setItem(n,n),e.removeItem(n),e}catch{return null}}let TD=class{constructor(e,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"sessionStorage";C(this,"storage",void 0),C(this,"id",void 0),C(this,"config",void 0),this.storage=wD(i),this.id=e,this.config=n,this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(e){if(Object.assign(this.config,e),this.storage){const n=JSON.stringify(this.config);this.storage.setItem(this.id,n)}}_loadConfiguration(){let e={};if(this.storage){const n=this.storage.getItem(this.id);e=n?JSON.parse(n):{}}return Object.assign(this.config,e),this}};function ED(t){let e;return t<10?e="".concat(t.toFixed(2),"ms"):t<100?e="".concat(t.toFixed(1),"ms"):t<1e3?e="".concat(t.toFixed(0),"ms"):e="".concat((t/1e3).toFixed(2),"s"),e}function SD(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:8;const n=Math.max(e-t.length,0);return"".concat(" ".repeat(n)).concat(t)}function Fd(t,e,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:600;const a=t.src.replace(/\(/g,"%28").replace(/\)/g,"%29");t.width>i&&(n=Math.min(n,i/t.width));const l=t.width*n,f=t.height*n,d=["font-size:1px;","padding:".concat(Math.floor(f/2),"px ").concat(Math.floor(l/2),"px;"),"line-height:".concat(f,"px;"),"background:url(".concat(a,");"),"background-size:".concat(l,"px ").concat(f,"px;"),"color:transparent;"].join("");return["".concat(e," %c+"),d]}let pf;(function(t){t[t.BLACK=30]="BLACK",t[t.RED=31]="RED",t[t.GREEN=32]="GREEN",t[t.YELLOW=33]="YELLOW",t[t.BLUE=34]="BLUE",t[t.MAGENTA=35]="MAGENTA",t[t.CYAN=36]="CYAN",t[t.WHITE=37]="WHITE",t[t.BRIGHT_BLACK=90]="BRIGHT_BLACK",t[t.BRIGHT_RED=91]="BRIGHT_RED",t[t.BRIGHT_GREEN=92]="BRIGHT_GREEN",t[t.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",t[t.BRIGHT_BLUE=94]="BRIGHT_BLUE",t[t.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",t[t.BRIGHT_CYAN=96]="BRIGHT_CYAN",t[t.BRIGHT_WHITE=97]="BRIGHT_WHITE"})(pf||(pf={}));function zv(t){return typeof t=="string"?pf[t.toUpperCase()]||pf.WHITE:t}function xD(t,e,n){return!Rr&&typeof t=="string"&&(e&&(e=zv(e),t="\x1B[".concat(e,"m").concat(t,"\x1B[39m")),n&&(e=zv(n),t="\x1B[".concat(n+10,"m").concat(t,"\x1B[49m"))),t}function RD(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:["constructor"];const n=Object.getPrototypeOf(t),i=Object.getOwnPropertyNames(n);for(const a of i)typeof t[a]=="function"&&(e.find(l=>a===l)||(t[a]=t[a].bind(t)))}function gf(t,e){if(!t)throw new Error(e||"Assertion failed")}function Ra(){let t;if(Rr&&"performance"in Ds){var e,n;t=Ds==null||(e=Ds.performance)===null||e===void 0||(n=e.now)===null||n===void 0?void 0:n.call(e)}else if("hrtime"in Mi){var i;const a=Mi==null||(i=Mi.hrtime)===null||i===void 0?void 0:i.call(Mi);t=a[0]*1e3+a[1]/1e6}else t=Date.now();return t}const ba={debug:Rr&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},bD={enabled:!0,level:0};function zr(){}const jv={},Wv={once:!0};let Y3=class{constructor(){let{id:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{id:""};C(this,"id",void 0),C(this,"VERSION",Qf),C(this,"_startTs",Ra()),C(this,"_deltaTs",Ra()),C(this,"_storage",void 0),C(this,"userData",{}),C(this,"LOG_THROTTLE_TIMEOUT",0),this.id=e,this.userData={},this._storage=new TD("__probe-".concat(this.id,"__"),bD),this.timeStamp("".concat(this.id," started")),RD(this),Object.seal(this)}set level(e){this.setLevel(e)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((Ra()-this._startTs).toPrecision(10))}getDelta(){return Number((Ra()-this._deltaTs).toPrecision(10))}set priority(e){this.level=e}get priority(){return this.level}getPriority(){return this.level}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return this._storage.setConfiguration({enabled:e}),this}setLevel(e){return this._storage.setConfiguration({level:e}),this}get(e){return this._storage.config[e]}set(e,n){this._storage.setConfiguration({[e]:n})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(e,n){gf(e,n)}warn(e){return this._getLogFunction(0,e,ba.warn,arguments,Wv)}error(e){return this._getLogFunction(0,e,ba.error,arguments)}deprecated(e,n){return this.warn("`".concat(e,"` is deprecated and will be removed in a later version. Use `").concat(n,"` instead"))}removed(e,n){return this.error("`".concat(e,"` has been removed. Use `").concat(n,"` instead"))}probe(e,n){return this._getLogFunction(e,n,ba.log,arguments,{time:!0,once:!0})}log(e,n){return this._getLogFunction(e,n,ba.debug,arguments)}info(e,n){return this._getLogFunction(e,n,console.info,arguments)}once(e,n){for(var i=arguments.length,a=new Array(i>2?i-2:0),l=2;l<i;l++)a[l-2]=arguments[l];return this._getLogFunction(e,n,ba.debug||ba.info,arguments,Wv)}table(e,n,i){return n?this._getLogFunction(e,n,console.table||zr,i&&[i],{tag:CD(n)}):zr}image(e){let{logLevel:n,priority:i,image:a,message:l="",scale:f=1}=e;return this._shouldLog(n||i)?Rr?MD({image:a,message:l,scale:f}):PD():zr}time(e,n){return this._getLogFunction(e,n,console.time?console.time:console.info)}timeEnd(e,n){return this._getLogFunction(e,n,console.timeEnd?console.timeEnd:console.info)}timeStamp(e,n){return this._getLogFunction(e,n,console.timeStamp||zr)}group(e,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{collapsed:!1};const a=Gv({logLevel:e,message:n,opts:i}),{collapsed:l}=i;return a.method=(l?console.groupCollapsed:console.group)||console.info,this._getLogFunction(a)}groupCollapsed(e,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.group(e,n,Object.assign({},i,{collapsed:!0}))}groupEnd(e){return this._getLogFunction(e,"",console.groupEnd||zr)}withGroup(e,n,i){this.group(e,n)();try{i()}finally{this.groupEnd(e)()}}trace(){console.trace&&console.trace()}_shouldLog(e){return this.isEnabled()&&this.getLevel()>=$3(e)}_getLogFunction(e,n,i,a,l){if(this._shouldLog(e)){l=Gv({logLevel:e,message:n,args:a,opts:l}),i=i||l.method,gf(i),l.total=this.getTotal(),l.delta=this.getDelta(),this._deltaTs=Ra();const f=l.tag||l.message;if(l.once)if(!jv[f])jv[f]=Ra();else return zr;return n=kD(this.id,l.message,l),i.bind(console,n,...l.args)}return zr}};C(Y3,"VERSION",Qf);function $3(t){if(!t)return 0;let e;switch(typeof t){case"number":e=t;break;case"object":e=t.logLevel||t.priority||0;break;default:return 0}return gf(Number.isFinite(e)&&e>=0),e}function Gv(t){const{logLevel:e,message:n}=t;t.logLevel=$3(e);const i=t.args?Array.from(t.args):[];for(;i.length&&i.shift()!==n;);switch(typeof e){case"string":case"function":n!==void 0&&i.unshift(n),t.message=e;break;case"object":Object.assign(t,e);break}typeof t.message=="function"&&(t.message=t.message());const a=typeof t.message;return gf(a==="string"||a==="object"),Object.assign(t,{args:i},t.opts)}function kD(t,e,n){if(typeof e=="string"){const i=n.time?SD(ED(n.total)):"";e=n.time?"".concat(t,": ").concat(i,"  ").concat(e):"".concat(t,": ").concat(e),e=xD(e,n.color,n.background)}return e}function PD(t){return console.warn("removed"),zr}function MD(t){let{image:e,message:n="",scale:i=1}=t;if(typeof e=="string"){const l=new Image;return l.onload=()=>{const f=Fd(l,n,i);console.log(...f)},l.src=e,zr}const a=e.nodeName||"";if(a.toLowerCase()==="img")return console.log(...Fd(e,n,i)),zr;if(a.toLowerCase()==="canvas"){const l=new Image;return l.onload=()=>console.log(...Fd(l,n,i)),l.src=e.toDataURL(),zr}return zr}function CD(t){for(const e in t)for(const n in t[e])return n||"untitled";return"empty"}const Et=new Y3({id:"deck"});let Tg={};function ID(t){Tg=t}function jn(t,e,n,i){Et.level>0&&Tg[t]&&Tg[t].call(null,e,n,i)}function ND(t){const e=t[0],n=t[t.length-1];return e==="{"&&n==="}"||e==="["&&n==="]"}const FD={id:"JSON",name:"JSON",module:"",version:"",options:{},extensions:["json","geojson"],mimeTypes:["application/json","application/geo+json"],testText:ND,parseTextSync:JSON.parse};function OD(){const t="8.9.32",e=globalThis.deck&&globalThis.deck.VERSION;if(e&&e!==t)throw new Error("deck.gl - multiple versions detected: ".concat(e," vs ").concat(t));return e||(Et.log(1,"deck.gl ".concat(t))(),globalThis.deck={...globalThis.deck,VERSION:t,version:t,log:Et,_registerLoggers:ID},pB([FD,[_D,{imagebitmap:{premultiplyAlpha:"none"}}]])),t}const LD=OD(),lt={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};Object.defineProperty(lt,"IDENTITY",{get:()=>(Et.deprecated("COORDINATE_SYSTEM.IDENTITY","COORDINATE_SYSTEM.CARTESIAN")(),0)});const Fi={WEB_MERCATOR:1,GLOBE:2,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0},Eg={common:0,meters:1,pixels:2},Zv={click:{handler:"onClick"},panstart:{handler:"onDragStart"},panmove:{handler:"onDrag"},panend:{handler:"onDragEnd"}};function VD(t){try{const e=window[t],n="__storage_test__";return e.setItem(n,n),e.removeItem(n),e}catch{return null}}let UD=class{constructor(e,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"sessionStorage";C(this,"storage",void 0),C(this,"id",void 0),C(this,"config",void 0),this.storage=VD(i),this.id=e,this.config=n,this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(e){if(Object.assign(this.config,e),this.storage){const n=JSON.stringify(this.config);this.storage.setItem(this.id,n)}}_loadConfiguration(){let e={};if(this.storage){const n=this.storage.getItem(this.id);e=n?JSON.parse(n):{}}return Object.assign(this.config,e),this}};function BD(t){let e;return t<10?e="".concat(t.toFixed(2),"ms"):t<100?e="".concat(t.toFixed(1),"ms"):t<1e3?e="".concat(t.toFixed(0),"ms"):e="".concat((t/1e3).toFixed(2),"s"),e}function DD(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:8;const n=Math.max(e-t.length,0);return"".concat(" ".repeat(n)).concat(t)}function Od(t,e,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:600;const a=t.src.replace(/\(/g,"%28").replace(/\)/g,"%29");t.width>i&&(n=Math.min(n,i/t.width));const l=t.width*n,f=t.height*n,d=["font-size:1px;","padding:".concat(Math.floor(f/2),"px ").concat(Math.floor(l/2),"px;"),"line-height:".concat(f,"px;"),"background:url(".concat(a,");"),"background-size:".concat(l,"px ").concat(f,"px;"),"color:transparent;"].join("");return["".concat(e," %c+"),d]}let mf;(function(t){t[t.BLACK=30]="BLACK",t[t.RED=31]="RED",t[t.GREEN=32]="GREEN",t[t.YELLOW=33]="YELLOW",t[t.BLUE=34]="BLUE",t[t.MAGENTA=35]="MAGENTA",t[t.CYAN=36]="CYAN",t[t.WHITE=37]="WHITE",t[t.BRIGHT_BLACK=90]="BRIGHT_BLACK",t[t.BRIGHT_RED=91]="BRIGHT_RED",t[t.BRIGHT_GREEN=92]="BRIGHT_GREEN",t[t.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",t[t.BRIGHT_BLUE=94]="BRIGHT_BLUE",t[t.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",t[t.BRIGHT_CYAN=96]="BRIGHT_CYAN",t[t.BRIGHT_WHITE=97]="BRIGHT_WHITE"})(mf||(mf={}));function Xv(t){return typeof t=="string"?mf[t.toUpperCase()]||mf.WHITE:t}function zD(t,e,n){return!Rr&&typeof t=="string"&&(e&&(e=Xv(e),t="\x1B[".concat(e,"m").concat(t,"\x1B[39m")),n&&(e=Xv(n),t="\x1B[".concat(n+10,"m").concat(t,"\x1B[49m"))),t}function jD(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:["constructor"];const n=Object.getPrototypeOf(t),i=Object.getOwnPropertyNames(n);for(const a of i)typeof t[a]=="function"&&(e.find(l=>a===l)||(t[a]=t[a].bind(t)))}function Af(t,e){if(!t)throw new Error(e||"Assertion failed")}function ka(){let t;if(Rr&&"performance"in Ds){var e,n;t=Ds==null||(e=Ds.performance)===null||e===void 0||(n=e.now)===null||n===void 0?void 0:n.call(e)}else if("hrtime"in Mi){var i;const a=Mi==null||(i=Mi.hrtime)===null||i===void 0?void 0:i.call(Mi);t=a[0]*1e3+a[1]/1e6}else t=Date.now();return t}const Pa={debug:Rr&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},WD={enabled:!0,level:0};function jr(){}const Hv={},Yv={once:!0};let J3=class{constructor(){let{id:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{id:""};C(this,"id",void 0),C(this,"VERSION",Qf),C(this,"_startTs",ka()),C(this,"_deltaTs",ka()),C(this,"_storage",void 0),C(this,"userData",{}),C(this,"LOG_THROTTLE_TIMEOUT",0),this.id=e,this.userData={},this._storage=new UD("__probe-".concat(this.id,"__"),WD),this.timeStamp("".concat(this.id," started")),jD(this),Object.seal(this)}set level(e){this.setLevel(e)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((ka()-this._startTs).toPrecision(10))}getDelta(){return Number((ka()-this._deltaTs).toPrecision(10))}set priority(e){this.level=e}get priority(){return this.level}getPriority(){return this.level}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return this._storage.setConfiguration({enabled:e}),this}setLevel(e){return this._storage.setConfiguration({level:e}),this}get(e){return this._storage.config[e]}set(e,n){this._storage.setConfiguration({[e]:n})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(e,n){Af(e,n)}warn(e){return this._getLogFunction(0,e,Pa.warn,arguments,Yv)}error(e){return this._getLogFunction(0,e,Pa.error,arguments)}deprecated(e,n){return this.warn("`".concat(e,"` is deprecated and will be removed in a later version. Use `").concat(n,"` instead"))}removed(e,n){return this.error("`".concat(e,"` has been removed. Use `").concat(n,"` instead"))}probe(e,n){return this._getLogFunction(e,n,Pa.log,arguments,{time:!0,once:!0})}log(e,n){return this._getLogFunction(e,n,Pa.debug,arguments)}info(e,n){return this._getLogFunction(e,n,console.info,arguments)}once(e,n){for(var i=arguments.length,a=new Array(i>2?i-2:0),l=2;l<i;l++)a[l-2]=arguments[l];return this._getLogFunction(e,n,Pa.debug||Pa.info,arguments,Yv)}table(e,n,i){return n?this._getLogFunction(e,n,console.table||jr,i&&[i],{tag:HD(n)}):jr}image(e){let{logLevel:n,priority:i,image:a,message:l="",scale:f=1}=e;return this._shouldLog(n||i)?Rr?XD({image:a,message:l,scale:f}):ZD():jr}time(e,n){return this._getLogFunction(e,n,console.time?console.time:console.info)}timeEnd(e,n){return this._getLogFunction(e,n,console.timeEnd?console.timeEnd:console.info)}timeStamp(e,n){return this._getLogFunction(e,n,console.timeStamp||jr)}group(e,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{collapsed:!1};const a=$v({logLevel:e,message:n,opts:i}),{collapsed:l}=i;return a.method=(l?console.groupCollapsed:console.group)||console.info,this._getLogFunction(a)}groupCollapsed(e,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.group(e,n,Object.assign({},i,{collapsed:!0}))}groupEnd(e){return this._getLogFunction(e,"",console.groupEnd||jr)}withGroup(e,n,i){this.group(e,n)();try{i()}finally{this.groupEnd(e)()}}trace(){console.trace&&console.trace()}_shouldLog(e){return this.isEnabled()&&this.getLevel()>=Q3(e)}_getLogFunction(e,n,i,a,l){if(this._shouldLog(e)){l=$v({logLevel:e,message:n,args:a,opts:l}),i=i||l.method,Af(i),l.total=this.getTotal(),l.delta=this.getDelta(),this._deltaTs=ka();const f=l.tag||l.message;if(l.once)if(!Hv[f])Hv[f]=ka();else return jr;return n=GD(this.id,l.message,l),i.bind(console,n,...l.args)}return jr}};C(J3,"VERSION",Qf);function Q3(t){if(!t)return 0;let e;switch(typeof t){case"number":e=t;break;case"object":e=t.logLevel||t.priority||0;break;default:return 0}return Af(Number.isFinite(e)&&e>=0),e}function $v(t){const{logLevel:e,message:n}=t;t.logLevel=Q3(e);const i=t.args?Array.from(t.args):[];for(;i.length&&i.shift()!==n;);switch(typeof e){case"string":case"function":n!==void 0&&i.unshift(n),t.message=e;break;case"object":Object.assign(t,e);break}typeof t.message=="function"&&(t.message=t.message());const a=typeof t.message;return Af(a==="string"||a==="object"),Object.assign(t,{args:i},t.opts)}function GD(t,e,n){if(typeof e=="string"){const i=n.time?DD(BD(n.total)):"";e=n.time?"".concat(t,": ").concat(i,"  ").concat(e):"".concat(t,": ").concat(e),e=zD(e,n.color,n.background)}return e}function ZD(t){return console.warn("removed"),jr}function XD(t){let{image:e,message:n="",scale:i=1}=t;if(typeof e=="string"){const l=new Image;return l.onload=()=>{const f=Od(l,n,i);console.log(...f)},l.src=e,jr}const a=e.nodeName||"";if(a.toLowerCase()==="img")return console.log(...Od(e,n,i)),jr;if(a.toLowerCase()==="canvas"){const l=new Image;return l.onload=()=>console.log(...Od(l,n,i)),l.src=e.toDataURL(),jr}return jr}function HD(t){for(const e in t)for(const n in t[e])return n||"untitled";return"empty"}const xe=new J3({id:"luma.gl"});function Wn(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}const YD="Invalid WebGLRenderingContext",$D="Requires WebGL2";function qf(t){return typeof WebGLRenderingContext<"u"&&t instanceof WebGLRenderingContext||typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?!0:!!(t&&Number.isFinite(t._version))}function Qe(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?!0:!!(t&&t._version===2)}function JD(t){return Qe(t)?t:null}function Kf(t){return Wn(qf(t),YD),t}function Gn(t){return Wn(Qe(t),$D),t}const dl={};function QD(t){globalThis.console&&globalThis.console.error&&globalThis.console.error(t)}function qD(t){globalThis.console&&globalThis.console.log&&globalThis.console.log(t)}function KD(t,e){dl[t]=!0,e!==void 0&&QD(e)}function ez(t){const e=t.getError;t.getError=function(){let i;do i=e.apply(t),i!==0&&(dl[i]=!0);while(i!==0);for(i in dl)if(dl[i])return delete dl[i],parseInt(i,10);return 0}}const uc=function t(e){const n=e.gl;this.ext=e,this.isAlive=!0,this.hasBeenBound=!1,this.elementArrayBuffer=null,this.attribs=new Array(e.maxVertexAttribs);for(let i=0;i<this.attribs.length;i++){const a=new t.VertexAttrib(n);this.attribs[i]=a}this.maxAttrib=0};uc.VertexAttrib=function(e){this.enabled=!1,this.buffer=null,this.size=4,this.type=5126,this.normalized=!1,this.stride=16,this.offset=0,this.cached="",this.recache()};uc.VertexAttrib.prototype.recache=function(){this.cached=[this.size,this.type,this.normalized,this.stride,this.offset].join(":")};const ia=function(e){const n=this;this.gl=e,ez(e);const i=this.original={getParameter:e.getParameter,enableVertexAttribArray:e.enableVertexAttribArray,disableVertexAttribArray:e.disableVertexAttribArray,bindBuffer:e.bindBuffer,getVertexAttrib:e.getVertexAttrib,vertexAttribPointer:e.vertexAttribPointer};e.getParameter=function(l){return l===n.VERTEX_ARRAY_BINDING_OES?n.currentVertexArrayObject===n.defaultVertexArrayObject?null:n.currentVertexArrayObject:i.getParameter.apply(this,arguments)},e.enableVertexAttribArray=function(l){const f=n.currentVertexArrayObject;f.maxAttrib=Math.max(f.maxAttrib,l);const d=f.attribs[l];return d.enabled=!0,i.enableVertexAttribArray.apply(this,arguments)},e.disableVertexAttribArray=function(l){const f=n.currentVertexArrayObject;f.maxAttrib=Math.max(f.maxAttrib,l);const d=f.attribs[l];return d.enabled=!1,i.disableVertexAttribArray.apply(this,arguments)},e.bindBuffer=function(l,f){switch(l){case 34962:n.currentArrayBuffer=f;break;case 34963:n.currentVertexArrayObject.elementArrayBuffer=f;break}return i.bindBuffer.apply(this,arguments)},e.getVertexAttrib=function(l,f){const g=n.currentVertexArrayObject.attribs[l];switch(f){case 34975:return g.buffer;case 34338:return g.enabled;case 34339:return g.size;case 34340:return g.stride;case 34341:return g.type;case 34922:return g.normalized;default:return i.getVertexAttrib.apply(this,arguments)}},e.vertexAttribPointer=function(l,f,d,g,v,T){const S=n.currentVertexArrayObject;S.maxAttrib=Math.max(S.maxAttrib,l);const x=S.attribs[l];return x.buffer=n.currentArrayBuffer,x.size=f,x.type=d,x.normalized=g,x.stride=v,x.offset=T,x.recache(),i.vertexAttribPointer.apply(this,arguments)},e.instrumentExtension&&e.instrumentExtension(this,"OES_vertex_array_object"),e.canvas&&e.canvas.addEventListener("webglcontextrestored",()=>{qD("OESVertexArrayObject emulation library context restored"),n.reset_()},!0),this.reset_()};ia.prototype.VERTEX_ARRAY_BINDING_OES=34229;ia.prototype.reset_=function(){if(this.vertexArrayObjects!==void 0)for(let i=0;i<this.vertexArrayObjects.length;++i)this.vertexArrayObjects.isAlive=!1;const n=this.gl;this.maxVertexAttribs=n.getParameter(34921),this.defaultVertexArrayObject=new uc(this),this.currentVertexArrayObject=null,this.currentArrayBuffer=null,this.vertexArrayObjects=[this.defaultVertexArrayObject],this.bindVertexArrayOES(null)};ia.prototype.createVertexArrayOES=function(){const e=new uc(this);return this.vertexArrayObjects.push(e),e};ia.prototype.deleteVertexArrayOES=function(e){e.isAlive=!1,this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(e),1),this.currentVertexArrayObject===e&&this.bindVertexArrayOES(null)};ia.prototype.isVertexArrayOES=function(e){return!!(e&&e instanceof uc&&e.hasBeenBound&&e.ext===this)};ia.prototype.bindVertexArrayOES=function(e){const n=this.gl;if(e&&!e.isAlive){KD(1282,"bindVertexArrayOES: attempt to bind deleted arrayObject");return}const i=this.original,a=this.currentVertexArrayObject;this.currentVertexArrayObject=e||this.defaultVertexArrayObject,this.currentVertexArrayObject.hasBeenBound=!0;const l=this.currentVertexArrayObject;if(a===l)return;(!a||l.elementArrayBuffer!==a.elementArrayBuffer)&&i.bindBuffer.call(n,34963,l.elementArrayBuffer);let f=this.currentArrayBuffer;const d=Math.max(a?a.maxAttrib:0,l.maxAttrib);for(let g=0;g<=d;g++){const v=l.attribs[g],T=a?a.attribs[g]:null;if((!a||v.enabled!==T.enabled)&&(v.enabled?i.enableVertexAttribArray.call(n,g):i.disableVertexAttribArray.call(n,g)),v.enabled){let S=!1;(!a||v.buffer!==T.buffer)&&(f!==v.buffer&&(i.bindBuffer.call(n,34962,v.buffer),f=v.buffer),S=!0),(S||v.cached!==T.cached)&&i.vertexAttribPointer.call(n,g,v.size,v.type,v.normalized,v.stride,v.offset)}}this.currentArrayBuffer!==f&&i.bindBuffer.call(n,34962,this.currentArrayBuffer)};function tz(t){if(typeof t.createVertexArray=="function")return;const e=t.getSupportedExtensions;t.getSupportedExtensions=function(){const a=e.call(this)||[];return a.indexOf("OES_vertex_array_object")<0&&a.push("OES_vertex_array_object"),a};const n=t.getExtension;t.getExtension=function(a){const l=n.call(this,a);return l||(a!=="OES_vertex_array_object"?null:(t.__OESVertexArrayObject||(this.__OESVertexArrayObject=new ia(this)),this.__OESVertexArrayObject))}}const Jv="OES_element_index",Qv="WEBGL_draw_buffers",nz="EXT_disjoint_timer_query",rz="EXT_disjoint_timer_query_webgl2",iz="EXT_texture_filter_anisotropic",qv="WEBGL_debug_renderer_info",sz=35723,oz=4352,az=36795,uz=34047,lz=37445,cz=37446,St=t=>Qe(t)?void 0:0,fz={3074:t=>Qe(t)?void 0:36064,[sz]:t=>Qe(t)?void 0:oz,35977:St,32937:St,[az]:(t,e)=>{const n=Qe(t)?t.getExtension(rz):t.getExtension(nz);return n&&n.GPU_DISJOINT_EXT?e(n.GPU_DISJOINT_EXT):0},[lz]:(t,e)=>{const n=t.getExtension(qv);return e(n&&n.UNMASKED_VENDOR_WEBGL||7936)},[cz]:(t,e)=>{const n=t.getExtension(qv);return e(n&&n.UNMASKED_RENDERER_WEBGL||7937)},[uz]:(t,e)=>{const n=t.luma.extensions[iz];return n?e(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1},32883:St,35071:St,37447:St,36063:(t,e)=>{if(!Qe(t)){const n=t.getExtension(Qv);return n?e(n.MAX_COLOR_ATTACHMENTS_WEBGL):0}},35379:St,35374:St,35377:St,34852:t=>{if(!Qe(t)){const e=t.getExtension(Qv);return e?e.MAX_DRAW_BUFFERS_WEBGL:0}},36203:t=>t.getExtension(Jv)?2147483647:65535,33001:t=>t.getExtension(Jv)?16777216:65535,33e3:t=>16777216,37157:St,35373:St,35657:St,36183:St,37137:St,34045:St,35978:St,35979:St,35968:St,35376:St,35375:St,35659:St,37154:St,35371:St,35658:St,35076:St,35077:St,35380:St};function hz(t,e,n){const i=fz[n],a=typeof i=="function"?i(t,e,n):i;return a!==void 0?a:e(n)}const dz="OES_vertex_array_object",q3="ANGLE_instanced_arrays",pz="WEBGL_draw_buffers",gz="EXT_disjoint_timer_query",mz="EXT_texture_filter_anisotropic",Az="VertexArray requires WebGL2 or OES_vertex_array_object extension";function yz(t,e){return{webgl2:Qe(t),ext:t.getExtension(e)}}const K3={[dz]:{meta:{suffix:"OES"},createVertexArray:()=>{Wn(!1,Az)},deleteVertexArray:()=>{},bindVertexArray:()=>{},isVertexArray:()=>!1},[q3]:{meta:{suffix:"ANGLE"},vertexAttribDivisor(t,e){Wn(e===0,"WebGL instanced rendering not supported")},drawElementsInstanced:()=>{},drawArraysInstanced:()=>{}},[pz]:{meta:{suffix:"WEBGL"},drawBuffers:()=>{Wn(!1)}},[gz]:{meta:{suffix:"EXT"},createQuery:()=>{Wn(!1)},deleteQuery:()=>{Wn(!1)},beginQuery:()=>{Wn(!1)},endQuery:()=>{},getQuery(t,e){return this.getQueryObject(t,e)},getQueryParameter(t,e){return this.getQueryObject(t,e)},getQueryObject:()=>{}}},Ld={readBuffer:(t,e,n)=>{Qe(t)&&e(n)},getVertexAttrib:(t,e,n,i)=>{const{webgl2:a,ext:l}=yz(t,q3);let f;switch(i){case 35069:f=a?void 0:!1;break;case 35070:f=!a&&!l?0:void 0;break}return f!==void 0?f:e(n,i)},getProgramParameter:(t,e,n,i)=>{if(!Qe(t))switch(i){case 35967:return 35981;case 35971:return 0;case 35382:return 0}return e(n,i)},getInternalformatParameter:(t,e,n,i,a)=>{if(!Qe(t))switch(a){case 32937:return new Int32Array([0])}return t.getInternalformatParameter(n,i,a)},getTexParameter(t,e,n,i){switch(i){case 34046:const{extensions:a}=t.luma,l=a[mz];i=l&&l.TEXTURE_MAX_ANISOTROPY_EXT||34046;break}return e(n,i)},getParameter:hz,hint(t,e,n,i){return e(n,i)}};function vz(t){t.luma=t.luma||{};const{luma:e}=t;return e.polyfilled||(tz(t),_z(t),Tz(t,K3),wz(t,{target:e,target2:t}),e.polyfilled=!0),t}globalThis.polyfillContext=vz;function _z(t){t.luma.extensions={};const e=t.getSupportedExtensions()||[];for(const n of e)t.luma[n]=t.getExtension(n)}function wz(t,e){let{target:n,target2:i}=e;Object.keys(Ld).forEach(a=>{if(typeof Ld[a]=="function"){const l=t[a]?t[a].bind(t):()=>{},f=Ld[a].bind(null,t,l);n[a]=f,i[a]=f}})}function Tz(t,e){for(const n of Object.getOwnPropertyNames(e))n!=="overrides"&&Ez(t,{extension:n,target:t.luma,target2:t})}function Ez(t,e){let{extension:n,target:i,target2:a}=e;const l=K3[n];Wn(l);const{meta:f={}}=l,{suffix:d=""}=f,g=t.getExtension(n);for(const v of Object.keys(l)){const T="".concat(v).concat(d);let S=null;v==="meta"||typeof t[v]=="function"||(g&&typeof g[T]=="function"?S=function(){return g[T](...arguments)}:typeof l[v]=="function"&&(S=l[v].bind(i))),S&&(i[v]=S,a[v]=S)}}const sm={3042:!1,32773:new Float32Array([0,0,0,0]),32777:32774,34877:32774,32969:1,32968:0,32971:1,32970:0,3106:new Float32Array([0,0,0,0]),3107:[!0,!0,!0,!0],2884:!1,2885:1029,2929:!1,2931:1,2932:513,2928:new Float32Array([0,1]),2930:!0,3024:!0,36006:null,2886:2305,33170:4352,2849:1,32823:!1,32824:0,10752:0,32938:1,32939:!1,3089:!1,3088:new Int32Array([0,0,1024,1024]),2960:!1,2961:0,2968:4294967295,36005:4294967295,2962:519,2967:0,2963:4294967295,34816:519,36003:0,36004:4294967295,2964:7680,2965:7680,2966:7680,34817:7680,34818:7680,34819:7680,2978:[0,0,1024,1024],3333:4,3317:4,37440:!1,37441:!1,37443:37444,35723:4352,36010:null,35977:!1,3330:0,3332:0,3331:0,3314:0,32878:0,3316:0,3315:0,32877:0},ks=(t,e,n)=>e?t.enable(n):t.disable(n),Kv=(t,e,n)=>t.hint(n,e),pr=(t,e,n)=>t.pixelStorei(n,e),Sz=(t,e)=>{const n=Qe(t)?36009:36160;return t.bindFramebuffer(n,e)},xz=(t,e)=>t.bindFramebuffer(36008,e);function rl(t){return Array.isArray(t)||ArrayBuffer.isView(t)}const Rz={3042:ks,32773:(t,e)=>t.blendColor(...e),32777:"blendEquation",34877:"blendEquation",32969:"blendFunc",32968:"blendFunc",32971:"blendFunc",32970:"blendFunc",3106:(t,e)=>t.clearColor(...e),3107:(t,e)=>t.colorMask(...e),2884:ks,2885:(t,e)=>t.cullFace(e),2929:ks,2931:(t,e)=>t.clearDepth(e),2932:(t,e)=>t.depthFunc(e),2928:(t,e)=>t.depthRange(...e),2930:(t,e)=>t.depthMask(e),3024:ks,35723:Kv,36006:Sz,2886:(t,e)=>t.frontFace(e),33170:Kv,2849:(t,e)=>t.lineWidth(e),32823:ks,32824:"polygonOffset",10752:"polygonOffset",35977:ks,32938:"sampleCoverage",32939:"sampleCoverage",3089:ks,3088:(t,e)=>t.scissor(...e),2960:ks,2961:(t,e)=>t.clearStencil(e),2968:(t,e)=>t.stencilMaskSeparate(1028,e),36005:(t,e)=>t.stencilMaskSeparate(1029,e),2962:"stencilFuncFront",2967:"stencilFuncFront",2963:"stencilFuncFront",34816:"stencilFuncBack",36003:"stencilFuncBack",36004:"stencilFuncBack",2964:"stencilOpFront",2965:"stencilOpFront",2966:"stencilOpFront",34817:"stencilOpBack",34818:"stencilOpBack",34819:"stencilOpBack",2978:(t,e)=>t.viewport(...e),3333:pr,3317:pr,37440:pr,37441:pr,37443:pr,3330:pr,3332:pr,3331:pr,36010:xz,3314:pr,32878:pr,3316:pr,3315:pr,32877:pr,framebuffer:(t,e)=>{const n=e&&"handle"in e?e.handle:e;return t.bindFramebuffer(36160,n)},blend:(t,e)=>e?t.enable(3042):t.disable(3042),blendColor:(t,e)=>t.blendColor(...e),blendEquation:(t,e)=>{e=rl(e)?e:[e,e],t.blendEquationSeparate(...e)},blendFunc:(t,e)=>{e=rl(e)&&e.length===2?[...e,...e]:e,t.blendFuncSeparate(...e)},clearColor:(t,e)=>t.clearColor(...e),clearDepth:(t,e)=>t.clearDepth(e),clearStencil:(t,e)=>t.clearStencil(e),colorMask:(t,e)=>t.colorMask(...e),cull:(t,e)=>e?t.enable(2884):t.disable(2884),cullFace:(t,e)=>t.cullFace(e),depthTest:(t,e)=>e?t.enable(2929):t.disable(2929),depthFunc:(t,e)=>t.depthFunc(e),depthMask:(t,e)=>t.depthMask(e),depthRange:(t,e)=>t.depthRange(...e),dither:(t,e)=>e?t.enable(3024):t.disable(3024),derivativeHint:(t,e)=>{t.hint(35723,e)},frontFace:(t,e)=>t.frontFace(e),mipmapHint:(t,e)=>t.hint(33170,e),lineWidth:(t,e)=>t.lineWidth(e),polygonOffsetFill:(t,e)=>e?t.enable(32823):t.disable(32823),polygonOffset:(t,e)=>t.polygonOffset(...e),sampleCoverage:(t,e)=>t.sampleCoverage(...e),scissorTest:(t,e)=>e?t.enable(3089):t.disable(3089),scissor:(t,e)=>t.scissor(...e),stencilTest:(t,e)=>e?t.enable(2960):t.disable(2960),stencilMask:(t,e)=>{e=rl(e)?e:[e,e];const[n,i]=e;t.stencilMaskSeparate(1028,n),t.stencilMaskSeparate(1029,i)},stencilFunc:(t,e)=>{e=rl(e)&&e.length===3?[...e,...e]:e;const[n,i,a,l,f,d]=e;t.stencilFuncSeparate(1028,n,i,a),t.stencilFuncSeparate(1029,l,f,d)},stencilOp:(t,e)=>{e=rl(e)&&e.length===3?[...e,...e]:e;const[n,i,a,l,f,d]=e;t.stencilOpSeparate(1028,n,i,a),t.stencilOpSeparate(1029,l,f,d)},viewport:(t,e)=>t.viewport(...e)};function Wt(t,e,n){return e[t]!==void 0?e[t]:n[t]}const bz={blendEquation:(t,e,n)=>t.blendEquationSeparate(Wt(32777,e,n),Wt(34877,e,n)),blendFunc:(t,e,n)=>t.blendFuncSeparate(Wt(32969,e,n),Wt(32968,e,n),Wt(32971,e,n),Wt(32970,e,n)),polygonOffset:(t,e,n)=>t.polygonOffset(Wt(32824,e,n),Wt(10752,e,n)),sampleCoverage:(t,e,n)=>t.sampleCoverage(Wt(32938,e,n),Wt(32939,e,n)),stencilFuncFront:(t,e,n)=>t.stencilFuncSeparate(1028,Wt(2962,e,n),Wt(2967,e,n),Wt(2963,e,n)),stencilFuncBack:(t,e,n)=>t.stencilFuncSeparate(1029,Wt(34816,e,n),Wt(36003,e,n),Wt(36004,e,n)),stencilOpFront:(t,e,n)=>t.stencilOpSeparate(1028,Wt(2964,e,n),Wt(2965,e,n),Wt(2966,e,n)),stencilOpBack:(t,e,n)=>t.stencilOpSeparate(1029,Wt(34817,e,n),Wt(34818,e,n),Wt(34819,e,n))},e_={enable:(t,e)=>t({[e]:!0}),disable:(t,e)=>t({[e]:!1}),pixelStorei:(t,e,n)=>t({[e]:n}),hint:(t,e,n)=>t({[e]:n}),bindFramebuffer:(t,e,n)=>{switch(e){case 36160:return t({36006:n,36010:n});case 36009:return t({36006:n});case 36008:return t({36010:n});default:return null}},blendColor:(t,e,n,i,a)=>t({32773:new Float32Array([e,n,i,a])}),blendEquation:(t,e)=>t({32777:e,34877:e}),blendEquationSeparate:(t,e,n)=>t({32777:e,34877:n}),blendFunc:(t,e,n)=>t({32969:e,32968:n,32971:e,32970:n}),blendFuncSeparate:(t,e,n,i,a)=>t({32969:e,32968:n,32971:i,32970:a}),clearColor:(t,e,n,i,a)=>t({3106:new Float32Array([e,n,i,a])}),clearDepth:(t,e)=>t({2931:e}),clearStencil:(t,e)=>t({2961:e}),colorMask:(t,e,n,i,a)=>t({3107:[e,n,i,a]}),cullFace:(t,e)=>t({2885:e}),depthFunc:(t,e)=>t({2932:e}),depthRange:(t,e,n)=>t({2928:new Float32Array([e,n])}),depthMask:(t,e)=>t({2930:e}),frontFace:(t,e)=>t({2886:e}),lineWidth:(t,e)=>t({2849:e}),polygonOffset:(t,e,n)=>t({32824:e,10752:n}),sampleCoverage:(t,e,n)=>t({32938:e,32939:n}),scissor:(t,e,n,i,a)=>t({3088:new Int32Array([e,n,i,a])}),stencilMask:(t,e)=>t({2968:e,36005:e}),stencilMaskSeparate:(t,e,n)=>t({[e===1028?2968:36005]:n}),stencilFunc:(t,e,n,i)=>t({2962:e,2967:n,2963:i,34816:e,36003:n,36004:i}),stencilFuncSeparate:(t,e,n,i,a)=>t({[e===1028?2962:34816]:n,[e===1028?2967:36003]:i,[e===1028?2963:36004]:a}),stencilOp:(t,e,n,i)=>t({2964:e,2965:n,2966:i,34817:e,34818:n,34819:i}),stencilOpSeparate:(t,e,n,i,a)=>t({[e===1028?2964:34817]:n,[e===1028?2965:34818]:i,[e===1028?2966:34819]:a}),viewport:(t,e,n,i,a)=>t({2978:[e,n,i,a]})},Ri=(t,e)=>t.isEnabled(e),t_={3042:Ri,2884:Ri,2929:Ri,3024:Ri,32823:Ri,32926:Ri,32928:Ri,3089:Ri,2960:Ri,35977:Ri};function e4(t){for(const e in t)return!1;return!0}function kz(t,e){if(t===e)return!0;const n=Array.isArray(t)||ArrayBuffer.isView(t),i=Array.isArray(e)||ArrayBuffer.isView(e);if(n&&i&&t.length===e.length){for(let a=0;a<t.length;++a)if(t[a]!==e[a])return!1;return!0}return!1}function n_(t,e){const n=t[e].bind(t);t[e]=function(){const a=arguments.length<=0?void 0:arguments[0];return a in t.state.cache?t.state.enable?t.state.cache[a]:n(...arguments):n(...arguments)},Object.defineProperty(t[e],"name",{value:"".concat(e,"-from-cache"),configurable:!1})}function Pz(t,e,n){const i=t[e].bind(t);t[e]=function(){for(var l=arguments.length,f=new Array(l),d=0;d<l;d++)f[d]=arguments[d];const{valueChanged:g,oldValue:v}=n(t.state._updateCache,...f);return g&&i(...f),v},Object.defineProperty(t[e],"name",{value:"".concat(e,"-to-cache"),configurable:!1})}function Mz(t){const e=t.useProgram.bind(t);t.useProgram=function(i){t.state.program!==i&&(e(i),t.state.program=i)}}class Cz{constructor(e){let{copyState:n=!1,log:i=()=>{}}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=e,this.program=null,this.stateStack=[],this.enable=!0,this.cache=n?Nz(e):Object.assign({},sm),this.log=i,this._updateCache=this._updateCache.bind(this),Object.seal(this)}push(){this.stateStack.push({})}pop(){Wn(this.stateStack.length>0);const e=this.stateStack[this.stateStack.length-1];cs(this.gl,e),this.stateStack.pop()}_updateCache(e){let n=!1,i;const a=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(const l in e){Wn(l!==void 0);const f=e[l],d=this.cache[l];kz(f,d)||(n=!0,i=d,a&&!(l in a)&&(a[l]=d),this.cache[l]=f)}return{valueChanged:n,oldValue:i}}}function t4(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{enable:n=!0,copyState:i}=e;if(Wn(i!==void 0),!t.state){const{polyfillContext:a}=globalThis;a&&a(t),t.state=new Cz(t,{copyState:i}),Mz(t);for(const l in e_){const f=e_[l];Pz(t,l,f)}n_(t,"getParameter"),n_(t,"isEnabled")}return t.state.enable=n,t}function Iz(t){t.state||t4(t,{copyState:!1}),t.state.push()}function r_(t){Wn(t.state),t.state.pop()}function cs(t,e){if(Wn(qf(t),"setParameters requires a WebGL context"),e4(e))return;const n={};for(const a in e){const l=Number(a),f=Rz[a];f&&(typeof f=="string"?n[f]=!0:f(t,e[a],l))}const i=t.state&&t.state.cache;if(i)for(const a in n){const l=bz[a];l(t,e,i)}}function Nz(t,e){if(e=e||sm,typeof e=="number"){const a=e,l=t_[a];return l?l(t,a):t.getParameter(a)}const n=Array.isArray(e)?e:Object.keys(e),i={};for(const a of n){const l=t_[a];i[a]=l?l(t,Number(a)):t.getParameter(Number(a))}return i}function Fz(t){cs(t,sm)}function ui(t,e,n){if(e4(e))return n(t);const{nocatch:i=!0}=e;Iz(t),cs(t,e);let a;if(i)a=n(t),r_(t);else try{a=n(t)}finally{r_(t)}return a}function cu(t){const{luma:e}=t;if(t.canvas&&e){const n=e.canvasSizeInfo,i="clientWidth"in n?n.clientWidth:t.canvas.clientWidth;return i?t.drawingBufferWidth/i:1}return 1}function Vd(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const i=cu(t),a=t.drawingBufferWidth,l=t.drawingBufferHeight;return Lz(e,i,a,l,n)}function Oz(t){const e=typeof window>"u"?1:window.devicePixelRatio||1;return Number.isFinite(t)?t<=0?1:t:t?e:1}function Lz(t,e,n,i,a){const l=i_(t[0],e,n);let f=s_(t[1],e,i,a),d=i_(t[0]+1,e,n);const g=d===n-1?d:d-1;d=s_(t[1]+1,e,i,a);let v;return a?(d=d===0?d:d+1,v=f,f=d):v=d===i-1?d:d-1,{x:l,y:f,width:Math.max(g-l+1,1),height:Math.max(v-f+1,1)}}function i_(t,e,n){return Math.min(Math.round(t*e),n-1)}function s_(t,e,n,i){return i?Math.max(0,n-1-Math.round(t*e)):Math.min(Math.round(t*e),n-1)}const om=Rr(),Vz=om&&typeof document<"u",n4={webgl2:!0,webgl1:!0,throwOnError:!0,manageState:!0,canvas:null,debug:!1,width:800,height:600};function r4(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Wn(om,`createGLContext only available in the browser.
Create your own headless context or use 'createHeadlessContext' from @luma.gl/test-utils`),t=Object.assign({},n4,t);const{width:e,height:n}=t;function i(d){if(t.throwOnError)throw new Error(d);return console.error(d),null}t.onError=i;let a;const{canvas:l}=t,f=zz({canvas:l,width:e,height:n,onError:i});return a=Dz(f,t),a?(a=am(a,t),jz(a),a):null}function am(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!t||t._instrumented)return t;t._version=t._version||Wz(t),t.luma=t.luma||{},t.luma.canvasSizeInfo=t.luma.canvasSizeInfo||{},e=Object.assign({},n4,e);const{manageState:n,debug:i}=e;return n&&t4(t,{copyState:!1,log:function(){for(var a=arguments.length,l=new Array(a),f=0;f<a;f++)l[f]=arguments[f];return xe.log(1,...l)()}}),om&&i&&(globalThis.makeDebugContext?(t=globalThis.makeDebugContext(t,e),xe.level=Math.max(xe.level,1)):xe.warn('WebGL debug mode not activated. import "@luma.gl/debug" to enable.')()),t._instrumented=!0,t}function Uz(t){const e=t.getParameter(7936),n=t.getParameter(7937),i=t.getExtension("WEBGL_debug_renderer_info"),a=i&&t.getParameter(i.UNMASKED_VENDOR_WEBGL||7936),l=i&&t.getParameter(i.UNMASKED_RENDERER_WEBGL||7937);return{vendor:a||e,renderer:l||n,vendorMasked:e,rendererMasked:n,version:t.getParameter(7938),shadingLanguageVersion:t.getParameter(35724)}}function Bz(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t.canvas){const i=Oz(e.useDevicePixels);Gz(t,i,e);return}const n=t.getExtension("STACKGL_resize_drawingbuffer");n&&"width"in e&&"height"in e&&n.resize(e.width,e.height)}function Dz(t,e){const{onError:n}=e;let i=null;const a=g=>i=g.statusMessage||i;t.addEventListener("webglcontextcreationerror",a,!1);const{webgl1:l=!0,webgl2:f=!0}=e;let d=null;return f&&(d=d||t.getContext("webgl2",e),d=d||t.getContext("experimental-webgl2",e)),l&&(d=d||t.getContext("webgl",e),d=d||t.getContext("experimental-webgl",e)),t.removeEventListener("webglcontextcreationerror",a,!1),d?(e.onContextLost&&t.addEventListener("webglcontextlost",e.onContextLost,!1),e.onContextRestored&&t.addEventListener("webglcontextrestored",e.onContextRestored,!1),d):n("Failed to create ".concat(f&&!l?"WebGL2":"WebGL"," context: ").concat(i||"Unknown error"))}function zz(t){let{canvas:e,width:n=800,height:i=600,onError:a}=t,l;return typeof e=="string"?(Vz&&document.readyState==="complete"||a("createGLContext called on canvas '".concat(e,"' before page was loaded")),l=document.getElementById(e)):e?l=e:(l=document.createElement("canvas"),l.id="lumagl-canvas",l.style.width=Number.isFinite(n)?"".concat(n,"px"):"100%",l.style.height=Number.isFinite(i)?"".concat(i,"px"):"100%",document.body.insertBefore(l,document.body.firstChild)),l}function jz(t){const e=Qe(t)?"WebGL2":"WebGL1",n=Uz(t),i=n?"(".concat(n.vendor,",").concat(n.renderer,")"):"",a=t.debug?" debug":"";xe.info(1,"".concat(e).concat(a," context ").concat(i))()}function Wz(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?2:1}function Gz(t,e,n){let i="width"in n?n.width:t.canvas.clientWidth,a="height"in n?n.height:t.canvas.clientHeight;(!i||!a)&&(xe.log(1,"Canvas clientWidth/clientHeight is 0")(),e=1,i=t.canvas.width||1,a=t.canvas.height||1),t.luma=t.luma||{},t.luma.canvasSizeInfo=t.luma.canvasSizeInfo||{};const l=t.luma.canvasSizeInfo;if(l.clientWidth!==i||l.clientHeight!==a||l.devicePixelRatio!==e){let f=e;const d=Math.floor(i*f),g=Math.floor(a*f);t.canvas.width=d,t.canvas.height=g,(t.drawingBufferWidth!==d||t.drawingBufferHeight!==g)&&(xe.warn("Device pixel ratio clamped")(),f=Math.min(t.drawingBufferWidth/i,t.drawingBufferHeight/a),t.canvas.width=Math.floor(i*f),t.canvas.height=Math.floor(a*f)),Object.assign(t.luma.canvasSizeInfo,{clientWidth:i,clientHeight:a,devicePixelRatio:e})}}function o_(){let t;if(typeof window<"u"&&window.performance)t=window.performance.now();else if(typeof process<"u"&&process.hrtime){const e=process.hrtime();t=e[0]*1e3+e[1]/1e6}else t=Date.now();return t}class a_{constructor(e,n){C(this,"name",void 0),C(this,"type",void 0),C(this,"sampleSize",1),C(this,"time",void 0),C(this,"count",void 0),C(this,"samples",void 0),C(this,"lastTiming",void 0),C(this,"lastSampleTime",void 0),C(this,"lastSampleCount",void 0),C(this,"_count",0),C(this,"_time",0),C(this,"_samples",0),C(this,"_startTime",0),C(this,"_timerPending",!1),this.name=e,this.type=n,this.reset()}setSampleSize(e){return this.sampleSize=e,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(e){return this._count+=e,this._samples++,this._checkSampling(),this}subtractCount(e){return this._count-=e,this._samples++,this._checkSampling(),this}addTime(e){return this._time+=e,this.lastTiming=e,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=o_(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime(o_()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}class um{constructor(e){C(this,"id",void 0),C(this,"stats",{}),this.id=e.id,this.stats={},this._initializeStats(e.stats),Object.seal(this)}get(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"count";return this._getOrCreate({name:e,type:n})}get size(){return Object.keys(this.stats).length}reset(){for(const e in this.stats)this.stats[e].reset();return this}forEach(e){for(const n in this.stats)e(this.stats[n])}getTable(){const e={};return this.forEach(n=>{e[n.name]={time:n.time||0,count:n.count||0,average:n.getAverageTime()||0,hz:n.getHz()||0}}),e}_initializeStats(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).forEach(n=>this._getOrCreate(n))}_getOrCreate(e){if(!e||!e.name)return null;const{name:n,type:i}=e;return this.stats[n]||(e instanceof a_?this.stats[n]=e:this.stats[n]=new a_(n,i)),this.stats[n]}}const Rl="8.5.21",Zz="set luma.log.level=1 (or higher) to trace rendering";class Xz{constructor(){this.stats=new Map}get(e){return this.stats.has(e)||this.stats.set(e,new um({id:e})),this.stats.get(e)}}const zo=new Xz;if(globalThis.luma&&globalThis.luma.VERSION!==Rl)throw new Error("luma.gl - multiple VERSIONs detected: ".concat(globalThis.luma.VERSION," vs ").concat(Rl));globalThis.luma||(Rr()&&xe.log(1,"luma.gl ".concat(Rl," - ").concat(Zz))(),globalThis.luma=globalThis.luma||{VERSION:Rl,version:Rl,log:xe,stats:zo,globals:{modules:{},nodeIO:{}}});function Hz(t){return typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame(t):setTimeout(t,1e3/60)}function Yz(t){return typeof window<"u"&&window.cancelAnimationFrame?window.cancelAnimationFrame(t):clearTimeout(t)}function ve(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}function Ud(t,e){if(typeof e!="string")return e;const n=Number(e);if(!isNaN(n))return n;e=e.replace(/^.*\./,"");const i=t[e];return ve(i!==void 0,"Accessing undefined constant GL.".concat(e)),i}function $s(t,e){e=Number(e);for(const n in t)if(t[n]===e)return"GL.".concat(n);return String(e)}const Bd={};function eo(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"id";Bd[t]=Bd[t]||1;const e=Bd[t]++;return"".concat(t,"-").concat(e)}function u_(t){return ve(typeof t=="number","Input must be a number"),t&&(t&t-1)===0}function fu(t){let e=!0;for(const n in t){e=!1;break}return e}function i4(t,e,n,i){const a="See luma.gl ".concat(n," Upgrade Guide at https://luma.gl/docs/upgrade-guide"),l=Object.getPrototypeOf(t);i.forEach(f=>{l.methodName||(l[f]=()=>{throw xe.removed("Calling removed method ".concat(e,".").concat(f,": "),a)(),new Error(f)})})}const Ma="Resource subclass must define virtual methods";let gs=class{get[Symbol.toStringTag](){return"Resource"}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Kf(e);const{id:i,userData:a={}}=n;this.gl=e,this.gl2=e,this.id=i||eo(this[Symbol.toStringTag]),this.userData=a,this._bound=!1,this._handle=n.handle,this._handle===void 0&&(this._handle=this._createHandle()),this.byteLength=0,this._addStats()}toString(){return"".concat(this[Symbol.toStringTag]||this.constructor.name,"(").concat(this.id,")")}get handle(){return this._handle}delete(){let{deleteChildren:e=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=this._handle&&this._deleteHandle(this._handle);return this._handle&&this._removeStats(),this._handle=null,n&&e&&n.filter(Boolean).forEach(i=>i.delete()),this}bind(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.handle;if(typeof e!="function")return this._bindHandle(e),this;let n;return this._bound?n=e():(this._bindHandle(this.handle),this._bound=!0,n=e(),this._bound=!1,this._bindHandle(null)),n}unbind(){this.bind(null)}getParameter(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};e=Ud(this.gl,e),ve(e);const a=(this.constructor.PARAMETERS||{})[e];if(a){const l=Qe(this.gl);if(!((!("webgl2"in a)||l)&&(!("extension"in a)||this.gl.getExtension(a.extension)))){const d=a.webgl1,g="webgl2"in a?a.webgl2:a.webgl1;return l?g:d}}return this._getParameter(e,n)}getParameters(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{parameters:n,keys:i}=e,a=this.constructor.PARAMETERS||{},l=Qe(this.gl),f={},d=n||Object.keys(a);for(const g of d){const v=a[g];if(v&&(!("webgl2"in v)||l)&&(!("extension"in v)||this.gl.getExtension(v.extension))){const S=i?$s(this.gl,g):g;f[S]=this.getParameter(g,e),i&&v.type==="GLenum"&&(f[S]=$s(this.gl,f[S]))}}return f}setParameter(e,n){e=Ud(this.gl,e),ve(e);const a=(this.constructor.PARAMETERS||{})[e];if(a){const l=Qe(this.gl);if(!((!("webgl2"in a)||l)&&(!("extension"in a)||this.gl.getExtension(a.extension))))throw new Error("Parameter not available on this platform");a.type==="GLenum"&&(n=Ud(n))}return this._setParameter(e,n),this}setParameters(e){for(const n in e)this.setParameter(n,e[n]);return this}stubRemovedMethods(e,n,i){return i4(this,e,n,i)}initialize(e){}_createHandle(){throw new Error(Ma)}_deleteHandle(){throw new Error(Ma)}_bindHandle(e){throw new Error(Ma)}_getOptsFromHandle(){throw new Error(Ma)}_getParameter(e,n){throw new Error(Ma)}_setParameter(e,n){throw new Error(Ma)}_context(){return this.gl.luma=this.gl.luma||{},this.gl.luma}_addStats(){const e=this[Symbol.toStringTag],n=zo.get("Resource Counts");n.get("Resources Created").incrementCount(),n.get("".concat(e,"s Created")).incrementCount(),n.get("".concat(e,"s Active")).incrementCount()}_removeStats(){const e=this[Symbol.toStringTag];zo.get("Resource Counts").get("".concat(e,"s Active")).decrementCount()}_trackAllocatedMemory(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this[Symbol.toStringTag];this._trackAllocatedMemoryForContext(e,n),this._trackAllocatedMemoryForContext(e,n,this.gl.canvas&&this.gl.canvas.id),this.byteLength=e}_trackAllocatedMemoryForContext(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this[Symbol.toStringTag],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";const a=zo.get("Memory Usage".concat(i));a.get("GPU Memory").addCount(e),a.get("".concat(n," Memory")).addCount(e)}_trackDeallocatedMemory(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this[Symbol.toStringTag];this._trackDeallocatedMemoryForContext(e),this._trackDeallocatedMemoryForContext(e,this.gl.canvas&&this.gl.canvas.id),this.byteLength=0}_trackDeallocatedMemoryForContext(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this[Symbol.toStringTag],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const i=zo.get("Memory Usage".concat(n));i.get("GPU Memory").subtractCount(this.byteLength),i.get("".concat(e," Memory")).subtractCount(this.byteLength)}};const $z="Failed to deduce GL constant from typed array";function Sg(t){switch(ArrayBuffer.isView(t)?t.constructor:t){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:return 5121;case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error($z)}}function Dl(t){let{clamped:e=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};switch(t){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return e?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function Jz(t){let{data:e,width:n,height:i,bytesPerPixel:a=4,temp:l}=t;const f=n*a;l=l||new Uint8Array(f);for(let d=0;d<i/2;++d){const g=d*f,v=(i-d-1)*f;l.set(e.subarray(g,g+f)),e.copyWithin(g,v,v+f),e.set(l,v)}}function Qz(t){let{data:e,width:n,height:i}=t;const a=Math.round(n/2),l=Math.round(i/2),f=new Uint8Array(a*l*4);for(let d=0;d<l;d++)for(let g=0;g<a;g++)for(let v=0;v<4;v++)f[(d*a+g)*4+v]=e[(d*2*n+g*2)*4+v];return{data:f,width:a,height:l}}function xg(t,e,n){const{removedProps:i={},deprecatedProps:a={},replacedProps:l={}}=n;for(const d in i)if(d in e){const v=i[d]?"".concat(t,".").concat(i[d]):"N/A";xe.removed("".concat(t,".").concat(d),v)()}for(const d in a)if(d in e){const g=a[d];xe.deprecated("".concat(t,".").concat(d),"".concat(t,".").concat(g))()}let f=null;for(const d in l)if(d in e){const g=l[d];xe.deprecated("".concat(t,".").concat(d),"".concat(t,".").concat(g))(),f=f||Object.assign({},e),f[g]=e[d],delete f[d]}return f||e}const qz={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},Kz={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}};class vr{static getBytesPerElement(e){return Dl(e.type||5126).BYTES_PER_ELEMENT}static getBytesPerVertex(e){return ve(e.size),Dl(e.type||5126).BYTES_PER_ELEMENT*e.size}static resolve(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return new vr(qz,...n)}constructor(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];n.forEach(a=>this._assign(a)),Object.freeze(this)}toString(){return JSON.stringify(this)}get BYTES_PER_ELEMENT(){return vr.getBytesPerElement(this)}get BYTES_PER_VERTEX(){return vr.getBytesPerVertex(this)}_assign(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e=xg("Accessor",e,Kz),e.type!==void 0&&(this.type=e.type,(e.type===5124||e.type===5125)&&(this.integer=!0)),e.size!==void 0&&(this.size=e.size),e.offset!==void 0&&(this.offset=e.offset),e.stride!==void 0&&(this.stride=e.stride),e.normalized!==void 0&&(this.normalized=e.normalized),e.integer!==void 0&&(this.integer=e.integer),e.divisor!==void 0&&(this.divisor=e.divisor),e.buffer!==void 0&&(this.buffer=e.buffer),e.index!==void 0&&(typeof e.index=="boolean"?this.index=e.index?1:0:this.index=e.index),e.instanced!==void 0&&(this.divisor=e.instanced?1:0),e.isInstanced!==void 0&&(this.divisor=e.isInstanced?1:0),this}}const l_=10,s4={offset:"accessor.offset",stride:"accessor.stride",type:"accessor.type",size:"accessor.size",divisor:"accessor.divisor",normalized:"accessor.normalized",integer:"accessor.integer",instanced:"accessor.divisor",isInstanced:"accessor.divisor"},ej={removedProps:{},replacedProps:{bytes:"byteLength"},deprecatedProps:s4},tj={removedProps:s4};let Tt=class extends gs{get[Symbol.toStringTag](){return"Buffer"}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,n),this.stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),this.target=n.target||(this.gl.webgl2?36662:34962),this.initialize(n),Object.seal(this)}getElementCount(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.accessor;return Math.round(this.byteLength/vr.getBytesPerElement(e))}getVertexCount(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.accessor;return Math.round(this.byteLength/vr.getBytesPerVertex(e))}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return ArrayBuffer.isView(e)&&(e={data:e}),Number.isFinite(e)&&(e={byteLength:e}),e=xg("Buffer",e,ej),this.usage=e.usage||35044,this.debugData=null,this.setAccessor(Object.assign({},e,e.accessor)),e.data?this._setData(e.data,e.offset,e.byteLength):this._setByteLength(e.byteLength||0),this}setProps(e){return e=xg("Buffer",e,tj),"accessor"in e&&this.setAccessor(e.accessor),this}setAccessor(e){return e=Object.assign({},e),delete e.buffer,this.accessor=new vr(e),this}reallocate(e){return e>this.byteLength?(this._setByteLength(e),!0):(this.bytesUsed=e,!1)}setData(e){return this.initialize(e)}subData(e){ArrayBuffer.isView(e)&&(e={data:e});const{data:n,offset:i=0,srcOffset:a=0}=e,l=e.byteLength||e.length;ve(n);const f=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(f,this.handle),a!==0||l!==void 0?(Gn(this.gl),this.gl.bufferSubData(this.target,i,n,a,l)):this.gl.bufferSubData(f,i,n),this.gl.bindBuffer(f,null),this.debugData=null,this._inferType(n),this}copyData(e){let{sourceBuffer:n,readOffset:i=0,writeOffset:a=0,size:l}=e;const{gl:f}=this;return Gn(f),f.bindBuffer(36662,n.handle),f.bindBuffer(36663,this.handle),f.copyBufferSubData(36662,36663,i,a,l),f.bindBuffer(36662,null),f.bindBuffer(36663,null),this.debugData=null,this}getData(){let{dstData:e=null,srcByteOffset:n=0,dstOffset:i=0,length:a=0}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Gn(this.gl);const l=Dl(this.accessor.type||5126,{clamped:!1}),f=this._getAvailableElementCount(n),d=i;let g,v;e?(v=e.length,g=v-d):(g=Math.min(f,a||f),v=d+g);const T=Math.min(f,g);return a=a||T,ve(a<=T),e=e||new l(v),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,n,e,i,a),this.gl.bindBuffer(36662,null),e}bind(){let{target:e=this.target,index:n=this.accessor&&this.accessor.index,offset:i=0,size:a}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e===35345||e===35982?a!==void 0?this.gl.bindBufferRange(e,n,this.handle,i,a):(ve(i===0),this.gl.bindBufferBase(e,n,this.handle)):this.gl.bindBuffer(e,this.handle),this}unbind(){let{target:e=this.target,index:n=this.accessor&&this.accessor.index}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e===35345||e===35982?this.gl.bindBufferBase(e,n,null):this.gl.bindBuffer(e,null),this}getDebugData(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:Math.min(l_,this.byteLength)}),{data:this.debugData,changed:!0})}invalidateDebugData(){this.debugData=null}_setData(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.byteLength+n;ve(ArrayBuffer.isView(e)),this._trackDeallocatedMemory();const a=this._getTarget();this.gl.bindBuffer(a,this.handle),this.gl.bufferData(a,i,this.usage),this.gl.bufferSubData(a,n,e),this.gl.bindBuffer(a,null),this.debugData=e.slice(0,l_),this.bytesUsed=i,this._trackAllocatedMemory(i);const l=Sg(e);return ve(l),this.setAccessor(new vr(this.accessor,{type:l})),this}_setByteLength(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.usage;ve(e>=0),this._trackDeallocatedMemory();let i=e;e===0&&(i=new Float32Array(0));const a=this._getTarget();return this.gl.bindBuffer(a,this.handle),this.gl.bufferData(a,i,n),this.gl.bindBuffer(a,null),this.usage=n,this.debugData=null,this.bytesUsed=e,this._trackAllocatedMemory(e),this}_getTarget(){return this.gl.webgl2?36663:this.target}_getAvailableElementCount(e){const n=Dl(this.accessor.type||5126,{clamped:!1}),i=e/n.BYTES_PER_ELEMENT;return this.getElementCount()-i}_inferType(e){this.accessor.type||this.setAccessor(new vr(this.accessor,{type:Sg(e)}))}_createHandle(){return this.gl.createBuffer()}_deleteHandle(){this.gl.deleteBuffer(this.handle),this._trackDeallocatedMemory()}_getParameter(e){this.gl.bindBuffer(this.target,this.handle);const n=this.gl.getBufferParameter(this.target,e);return this.gl.bindBuffer(this.target,null),n}get type(){return xe.deprecated("Buffer.type","Buffer.accessor.type")(),this.accessor.type}get bytes(){return xe.deprecated("Buffer.bytes","Buffer.byteLength")(),this.byteLength}setByteLength(e){return xe.deprecated("setByteLength","reallocate")(),this.reallocate(e)}updateAccessor(e){return xe.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)")(),this.accessor=new vr(this.accessor,e),this}};const lm={6407:{dataFormat:6407,types:[5121,33635]},6408:{dataFormat:6408,types:[5121,32819,32820]},6406:{dataFormat:6406,types:[5121]},6409:{dataFormat:6409,types:[5121]},6410:{dataFormat:6410,types:[5121]},33326:{dataFormat:6403,types:[5126],gl2:!0},33328:{dataFormat:33319,types:[5126],gl2:!0},34837:{dataFormat:6407,types:[5126],gl2:!0},34836:{dataFormat:6408,types:[5126],gl2:!0}},o4={6403:1,36244:1,33319:2,33320:2,6407:3,36248:3,6408:4,36249:4,6402:1,34041:1,6406:1,6409:1,6410:2},a4={5126:4,5125:4,5124:4,5123:2,5122:2,5131:2,5120:1,5121:1};function nj(t,e){const n=lm[e];if(!n)return!1;if(n.gl1===void 0&&n.gl2===void 0)return!0;const i=Qe(t)&&n.gl2||n.gl1;return typeof i=="string"?t.getExtension(i):i}function rj(t,e){const n=lm[e];switch(n&&n.types[0]){case 5126:return t.getExtension("OES_texture_float_linear");case 5131:return t.getExtension("OES_texture_half_float_linear");default:return!0}}const ij=[9729,9728],c_=globalThis.WebGLBuffer||function(){};class hu extends gs{get[Symbol.toStringTag](){return"Texture"}static isSupported(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{format:i,linearFiltering:a}=n;let l=!0;return i&&(l=l&&nj(e,i),l=l&&(!a||rj(e,i))),l}constructor(e,n){const{id:i=eo("texture"),handle:a,target:l}=n;super(e,{id:i,handle:a}),this.target=l,this.textureUnit=void 0,this.loaded=!1,this.width=void 0,this.height=void 0,this.depth=void 0,this.format=void 0,this.type=void 0,this.dataFormat=void 0,this.border=void 0,this.textureUnit=void 0,this.mipmaps=void 0}toString(){return"Texture(".concat(this.id,",").concat(this.width,"x").concat(this.height,")")}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.data;if(n instanceof Promise)return n.then(V=>this.initialize(Object.assign({},e,{pixels:V,data:V}))),this;const i=typeof HTMLVideoElement<"u"&&n instanceof HTMLVideoElement;if(i&&n.readyState<HTMLVideoElement.HAVE_METADATA)return this._video=null,n.addEventListener("loadeddata",()=>this.initialize(e)),this;const{pixels:a=null,format:l=6408,border:f=0,recreate:d=!1,parameters:g={},pixelStore:v={},textureUnit:T=void 0}=e;n||(n=a);let{width:S,height:x,dataFormat:M,type:B,compressed:W=!1,mipmaps:N=!0}=e;const{depth:F=0}=e;return{width:S,height:x,compressed:W,dataFormat:M,type:B}=this._deduceParameters({format:l,type:B,dataFormat:M,compressed:W,data:n,width:S,height:x}),this.width=S,this.height=x,this.depth=F,this.format=l,this.type=B,this.dataFormat=M,this.border=f,this.textureUnit=T,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),N&&this._isNPOT()&&(xe.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),N=!1,this._updateForNPOT(g)),this.mipmaps=N,this.setImageData({data:n,width:S,height:x,depth:F,format:l,type:B,dataFormat:M,border:f,mipmaps:N,parameters:v,compressed:W}),N&&this.generateMipmap(),this.setParameters(g),d&&(this.data=n),i&&(this._video={video:n,parameters:g,lastTime:n.readyState>=HTMLVideoElement.HAVE_CURRENT_DATA?n.currentTime:-1}),this}update(){if(this._video){const{video:e,parameters:n,lastTime:i}=this._video;if(i===e.currentTime||e.readyState<HTMLVideoElement.HAVE_CURRENT_DATA)return;this.setSubImageData({data:e,parameters:n}),this.mipmaps&&this.generateMipmap(),this._video.lastTime=e.currentTime}}resize(e){let{height:n,width:i,mipmaps:a=!1}=e;return i!==this.width||n!==this.height?this.initialize({width:i,height:n,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:a}):this}generateMipmap(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._isNPOT()?(xe.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),this):(this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),ui(this.gl,e,()=>{this.gl.generateMipmap(this.target)}),this.gl.bindTexture(this.target,null),this)}setImageData(e){this._trackDeallocatedMemory("Texture");const{target:n=this.target,pixels:i=null,level:a=0,format:l=this.format,border:f=this.border,offset:d=0,parameters:g={}}=e;let{data:v=null,type:T=this.type,width:S=this.width,height:x=this.height,dataFormat:M=this.dataFormat,compressed:B=!1}=e;v||(v=i),{type:T,dataFormat:M,compressed:B,width:S,height:x}=this._deduceParameters({format:l,type:T,dataFormat:M,compressed:B,data:v,width:S,height:x});const{gl:W}=this;W.bindTexture(this.target,this.handle);let N=null;({data:v,dataType:N}=this._getDataType({data:v,compressed:B}));let F,V=0;if(ui(this.gl,g,()=>{switch(N){case"null":W.texImage2D(n,a,l,S,x,f,M,T,v);break;case"typed-array":W.texImage2D(n,a,l,S,x,f,M,T,v,d);break;case"buffer":F=Gn(W),F.bindBuffer(35052,v.handle||v),F.texImage2D(n,a,l,S,x,f,M,T,d),F.bindBuffer(35052,null);break;case"browser-object":Qe(W)?W.texImage2D(n,a,l,S,x,f,M,T,v):W.texImage2D(n,a,l,M,T,v);break;case"compressed":for(const[j,X]of v.entries())W.compressedTexImage2D(n,j,X.format,X.width,X.height,f,X.data),V+=X.levelSize;break;default:ve(!1,"Unknown image data type")}}),N==="compressed")this._trackAllocatedMemory(V,"Texture");else if(v&&v.byteLength)this._trackAllocatedMemory(v.byteLength,"Texture");else{const j=o4[this.dataFormat]||4,X=a4[this.type]||1;this._trackAllocatedMemory(this.width*this.height*j*X,"Texture")}return this.loaded=!0,this}setSubImageData(e){let{target:n=this.target,pixels:i=null,data:a=null,x:l=0,y:f=0,width:d=this.width,height:g=this.height,level:v=0,format:T=this.format,type:S=this.type,dataFormat:x=this.dataFormat,compressed:M=!1,offset:B=0,border:W=this.border,parameters:N={}}=e;if({type:S,dataFormat:x,compressed:M,width:d,height:g}=this._deduceParameters({format:T,type:S,dataFormat:x,compressed:M,data:a,width:d,height:g}),ve(this.depth===0,"texSubImage not supported for 3D textures"),a||(a=i),a&&a.data){const F=a;a=F.data,d=F.shape[0],g=F.shape[1]}a instanceof Tt&&(a=a.handle),this.gl.bindTexture(this.target,this.handle),ui(this.gl,N,()=>{if(M)this.gl.compressedTexSubImage2D(n,v,l,f,d,g,T,a);else if(a===null)this.gl.texSubImage2D(n,v,l,f,d,g,x,S,null);else if(ArrayBuffer.isView(a))this.gl.texSubImage2D(n,v,l,f,d,g,x,S,a,B);else if(a instanceof c_){const F=Gn(this.gl);F.bindBuffer(35052,a),F.texSubImage2D(n,v,l,f,d,g,x,S,B),F.bindBuffer(35052,null)}else Qe(this.gl)?Gn(this.gl).texSubImage2D(n,v,l,f,d,g,x,S,a):this.gl.texSubImage2D(n,v,l,f,x,S,a)}),this.gl.bindTexture(this.target,null)}copyFramebuffer(){return xe.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}getActiveUnit(){return this.gl.getParameter(34016)-33984}bind(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.textureUnit;const{gl:n}=this;return e!==void 0&&(this.textureUnit=e,n.activeTexture(33984+e)),n.bindTexture(this.target,this.handle),e}unbind(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.textureUnit;const{gl:n}=this;return e!==void 0&&(this.textureUnit=e,n.activeTexture(33984+e)),n.bindTexture(this.target,null),e}_getDataType(e){let{data:n,compressed:i=!1}=e;return i?{data:n,dataType:"compressed"}:n===null?{data:n,dataType:"null"}:ArrayBuffer.isView(n)?{data:n,dataType:"typed-array"}:n instanceof Tt?{data:n.handle,dataType:"buffer"}:n instanceof c_?{data:n,dataType:"buffer"}:{data:n,dataType:"browser-object"}}_deduceParameters(e){const{format:n,data:i}=e;let{width:a,height:l,dataFormat:f,type:d,compressed:g}=e;const v=lm[n];return f=f||v&&v.dataFormat,d=d||v&&v.types[0],g=g||v&&v.compressed,{width:a,height:l}=this._deduceImageSize(i,a,l),{dataFormat:f,type:d,compressed:g,width:a,height:l,format:n,data:i}}_deduceImageSize(e,n,i){let a;return typeof ImageData<"u"&&e instanceof ImageData?a={width:e.width,height:e.height}:typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement?a={width:e.naturalWidth,height:e.naturalHeight}:typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement?a={width:e.width,height:e.height}:typeof ImageBitmap<"u"&&e instanceof ImageBitmap?a={width:e.width,height:e.height}:typeof HTMLVideoElement<"u"&&e instanceof HTMLVideoElement?a={width:e.videoWidth,height:e.videoHeight}:e?a={width:n,height:i}:a={width:n>=0?n:1,height:i>=0?i:1},ve(a,"Could not deduced texture size"),ve(n===void 0||a.width===n,"Deduced texture width does not match supplied width"),ve(i===void 0||a.height===i,"Deduced texture height does not match supplied height"),a}_createHandle(){return this.gl.createTexture()}_deleteHandle(){this.gl.deleteTexture(this.handle),this._trackDeallocatedMemory("Texture")}_getParameter(e){switch(e){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);const n=this.gl.getTexParameter(this.target,e);return this.gl.bindTexture(this.target,null),n}}_setParameter(e,n){switch(this.gl.bindTexture(this.target,this.handle),n=this._getNPOTParam(e,n),e){case 33082:case 33083:this.gl.texParameterf(this.handle,e,n);break;case 4096:case 4097:ve(!1);break;default:this.gl.texParameteri(this.target,e,n);break}return this.gl.bindTexture(this.target,null),this}_isNPOT(){return Qe(this.gl)||!this.width||!this.height?!1:!u_(this.width)||!u_(this.height)}_updateForNPOT(e){e[this.gl.TEXTURE_MIN_FILTER]===void 0&&(e[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),e[this.gl.TEXTURE_WRAP_S]===void 0&&(e[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),e[this.gl.TEXTURE_WRAP_T]===void 0&&(e[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}_getNPOTParam(e,n){if(this._isNPOT())switch(e){case 10241:ij.indexOf(n)===-1&&(n=9729);break;case 10242:case 10243:n!==33071&&(n=33071);break}return n}}let sj="";function oj(t,e){return ve(typeof t=="string"),t=sj+t,new Promise((n,i)=>{try{const a=new Image;a.onload=()=>n(a),a.onerror=()=>i(new Error("Could not load image ".concat(t,"."))),a.crossOrigin=e&&e.crossOrigin||"anonymous",a.src=t}catch(a){i(a)}})}class fi extends hu{get[Symbol.toStringTag](){return"Texture2D"}static isSupported(e,n){return hu.isSupported(e,n)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Kf(e),(n instanceof Promise||typeof n=="string")&&(n={data:n}),typeof n.data=="string"&&(n=Object.assign({},n,{data:oj(n.data)})),super(e,Object.assign({},n,{target:3553})),this.initialize(n),Object.seal(this)}}const Rg=[34069,34070,34071,34072,34073,34074];class u4 extends hu{get[Symbol.toStringTag](){return"TextureCube"}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Kf(e),super(e,Object.assign({},n,{target:34067})),this.initialize(n),Object.seal(this)}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{mipmaps:n=!0,parameters:i={}}=e;return this.opts=e,this.setCubeMapImageData(e).then(()=>{this.loaded=!0,n&&this.generateMipmap(e),this.setParameters(i)}),this}subImage(e){let{face:n,data:i,x:a=0,y:l=0,mipmapLevel:f=0}=e;return this._subImage({target:n,data:i,x:a,y:l,mipmapLevel:f})}async setCubeMapImageData(e){let{width:n,height:i,pixels:a,data:l,border:f=0,format:d=6408,type:g=5121}=e;const{gl:v}=this,T=a||l,S=await Promise.all(Rg.map(x=>{const M=T[x];return Promise.all(Array.isArray(M)?M:[M])}));this.bind(),Rg.forEach((x,M)=>{S[M].length>1&&this.opts.mipmaps!==!1&&xe.warn("".concat(this.id," has mipmap and multiple LODs."))(),S[M].forEach((B,W)=>{n&&i?v.texImage2D(x,W,d,n,i,f,d,g,B):v.texImage2D(x,W,d,d,g,B)})}),this.unbind()}setImageDataForFace(e){const{face:n,width:i,height:a,pixels:l,data:f,border:d=0,format:g=6408,type:v=5121}=e,{gl:T}=this,S=l||f;return this.bind(),S instanceof Promise?S.then(x=>this.setImageDataForFace(Object.assign({},e,{face:n,data:x,pixels:x}))):this.width||this.height?T.texImage2D(n,0,g,i,a,d,g,v,S):T.texImage2D(n,0,g,g,v,S),this}}u4.FACES=Rg;class aj extends hu{get[Symbol.toStringTag](){return"Texture3D"}static isSupported(e){return Qe(e)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Gn(e),n=Object.assign({depth:1},n,{target:32879,unpackFlipY:!1}),super(e,n),this.initialize(n),Object.seal(this)}setImageData(e){let{level:n=0,dataFormat:i=6408,width:a,height:l,depth:f=1,border:d=0,format:g,type:v=5121,offset:T=0,data:S,parameters:x={}}=e;if(this._trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle),ui(this.gl,x,()=>{ArrayBuffer.isView(S)&&this.gl.texImage3D(this.target,n,i,a,l,f,d,g,v,S),S instanceof Tt&&(this.gl.bindBuffer(35052,S.handle),this.gl.texImage3D(this.target,n,i,a,l,f,d,g,v,T))}),S&&S.byteLength)this._trackAllocatedMemory(S.byteLength,"Texture");else{const M=o4[this.dataFormat]||4,B=a4[this.type]||1;this._trackAllocatedMemory(this.width*this.height*this.depth*M*B,"Texture")}return this.loaded=!0,this}}const Po="EXT_color_buffer_float",f_={33189:{bpp:2},33190:{gl2:!0,bpp:3},36012:{gl2:!0,bpp:4},36168:{bpp:1},34041:{bpp:4},35056:{gl2:!0,bpp:4},36013:{gl2:!0,bpp:5},32854:{bpp:2},36194:{bpp:2},32855:{bpp:2},33321:{gl2:!0,bpp:1},33330:{gl2:!0,bpp:1},33329:{gl2:!0,bpp:1},33332:{gl2:!0,bpp:2},33331:{gl2:!0,bpp:2},33334:{gl2:!0,bpp:4},33333:{gl2:!0,bpp:4},33323:{gl2:!0,bpp:2},33336:{gl2:!0,bpp:2},33335:{gl2:!0,bpp:2},33338:{gl2:!0,bpp:4},33337:{gl2:!0,bpp:4},33340:{gl2:!0,bpp:8},33339:{gl2:!0,bpp:8},32849:{gl2:!0,bpp:3},32856:{gl2:!0,bpp:4},32857:{gl2:!0,bpp:4},36220:{gl2:!0,bpp:4},36238:{gl2:!0,bpp:4},36975:{gl2:!0,bpp:4},36214:{gl2:!0,bpp:8},36232:{gl2:!0,bpp:8},36226:{gl2:!0,bpp:16},36208:{gl2:!0,bpp:16},33325:{gl2:Po,bpp:2},33327:{gl2:Po,bpp:4},34842:{gl2:Po,bpp:8},33326:{gl2:Po,bpp:4},33328:{gl2:Po,bpp:8},34836:{gl2:Po,bpp:16},35898:{gl2:Po,bpp:4}};function uj(t,e,n){const i=n[e];if(!i)return!1;const a=Qe(t)&&i.gl2||i.gl1;return typeof a=="string"?t.getExtension(a):a}class Ha extends gs{get[Symbol.toStringTag](){return"Renderbuffer"}static isSupported(e){let{format:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{format:null};return!n||uj(e,n,f_)}static getSamplesForFormat(e,n){let{format:i}=n;return e.getInternalformatParameter(36161,i,32937)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,n),this.initialize(n),Object.seal(this)}initialize(e){let{format:n,width:i=1,height:a=1,samples:l=0}=e;return ve(n,"Needs format"),this._trackDeallocatedMemory(),this.gl.bindRenderbuffer(36161,this.handle),l!==0&&Qe(this.gl)?this.gl.renderbufferStorageMultisample(36161,l,n,i,a):this.gl.renderbufferStorage(36161,n,i,a),this.format=n,this.width=i,this.height=a,this.samples=l,this._trackAllocatedMemory(this.width*this.height*(this.samples||1)*f_[this.format].bpp),this}resize(e){let{width:n,height:i}=e;return n!==this.width||i!==this.height?this.initialize({width:n,height:i,format:this.format,samples:this.samples}):this}_createHandle(){return this.gl.createRenderbuffer()}_deleteHandle(){this.gl.deleteRenderbuffer(this.handle),this._trackDeallocatedMemory()}_bindHandle(e){this.gl.bindRenderbuffer(36161,e)}_syncHandle(e){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}_getParameter(e){return this.gl.bindRenderbuffer(36161,this.handle),this.gl.getRenderbufferParameter(36161,e)}}const lj=256,cj=1024,fj=16384,h_=6144,d_=6145,p_=6146,g_=34041,l4="clear: bad arguments";function cm(t){let{framebuffer:e=null,color:n=null,depth:i=null,stencil:a=null}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const l={};e&&(l.framebuffer=e);let f=0;n&&(f|=fj,n!==!0&&(l.clearColor=n)),i&&(f|=lj,i!==!0&&(l.clearDepth=i)),a&&(f|=cj,i!==!0&&(l.clearStencil=i)),ve(f!==0,l4),ui(t,l,()=>{t.clear(f)})}function hj(t){let{framebuffer:e=null,buffer:n=h_,drawBuffer:i=0,value:a=[0,0,0,0]}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Gn(t),ui(t,{framebuffer:e},()=>{switch(n){case h_:switch(a.constructor){case Int32Array:t.clearBufferiv(n,i,a);break;case Uint32Array:t.clearBufferuiv(n,i,a);break;case Float32Array:default:t.clearBufferfv(n,i,a)}break;case d_:t.clearBufferfv(d_,0,[a]);break;case p_:t.clearBufferiv(p_,0,[a]);break;case g_:const[l,f]=a;t.clearBufferfi(g_,0,l,f);break;default:ve(!1,l4)}})}function dj(t){switch(t){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return ve(!1),0}}function eh(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{sourceX:n=0,sourceY:i=0,sourceFormat:a=6408}=e;let{sourceAttachment:l=36064,target:f=null,sourceWidth:d,sourceHeight:g,sourceType:v}=e;const{framebuffer:T,deleteFramebuffer:S}=pj(t);ve(T);const{gl:x,handle:M,attachments:B}=T;d=d||T.width,g=g||T.height,l===36064&&M===null&&(l=1028),ve(B[l]),v=v||B[l].type,f=gj(f,v,a,d,g),v=v||Sg(f);const W=x.bindFramebuffer(36160,M);return x.readPixels(n,i,d,g,a,v,f),x.bindFramebuffer(36160,W||null),S&&T.delete(),f}function m_(t){let{sourceAttachment:e=36064,targetMaxHeight:n=Number.MAX_SAFE_INTEGER}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=eh(t,{sourceAttachment:e}),{width:a,height:l}=t;for(;l>n;)({data:i,width:a,height:l}=Qz({data:i,width:a,height:l}));Jz({data:i,width:a,height:l});const f=document.createElement("canvas");f.width=a,f.height=l;const d=f.getContext("2d"),g=d.createImageData(a,l);return g.data.set(i),d.putImageData(g,0,0),f.toDataURL()}function pj(t){return t instanceof en?{framebuffer:t,deleteFramebuffer:!1}:{framebuffer:xj(t),deleteFramebuffer:!0}}function gj(t,e,n,i,a){if(t)return t;e=e||5121;const l=Dl(e,{clamped:!1}),f=dj(n);return new l(i*a*f)}const It={WEBGL2:"WEBGL2",VERTEX_ARRAY_OBJECT:"VERTEX_ARRAY_OBJECT",TIMER_QUERY:"TIMER_QUERY",INSTANCED_RENDERING:"INSTANCED_RENDERING",MULTIPLE_RENDER_TARGETS:"MULTIPLE_RENDER_TARGETS",ELEMENT_INDEX_UINT32:"ELEMENT_INDEX_UINT32",BLEND_EQUATION_MINMAX:"BLEND_EQUATION_MINMAX",FLOAT_BLEND:"FLOAT_BLEND",COLOR_ENCODING_SRGB:"COLOR_ENCODING_SRGB",TEXTURE_DEPTH:"TEXTURE_DEPTH",TEXTURE_FLOAT:"TEXTURE_FLOAT",TEXTURE_HALF_FLOAT:"TEXTURE_HALF_FLOAT",TEXTURE_FILTER_LINEAR_FLOAT:"TEXTURE_FILTER_LINEAR_FLOAT",TEXTURE_FILTER_LINEAR_HALF_FLOAT:"TEXTURE_FILTER_LINEAR_HALF_FLOAT",TEXTURE_FILTER_ANISOTROPIC:"TEXTURE_FILTER_ANISOTROPIC",COLOR_ATTACHMENT_RGBA32F:"COLOR_ATTACHMENT_RGBA32F",COLOR_ATTACHMENT_FLOAT:"COLOR_ATTACHMENT_FLOAT",COLOR_ATTACHMENT_HALF_FLOAT:"COLOR_ATTACHMENT_HALF_FLOAT",GLSL_FRAG_DATA:"GLSL_FRAG_DATA",GLSL_FRAG_DEPTH:"GLSL_FRAG_DEPTH",GLSL_DERIVATIVES:"GLSL_DERIVATIVES",GLSL_TEXTURE_LOD:"GLSL_TEXTURE_LOD"};function mj(t){const e=new fi(t,{format:6408,type:5126,dataFormat:6408}),n=new en(t,{id:"test-framebuffer",check:!1,attachments:{36064:e}}),i=n.getStatus();return e.delete(),n.delete(),i===36053}const c4={[It.WEBGL2]:[!1,!0],[It.VERTEX_ARRAY_OBJECT]:["OES_vertex_array_object",!0],[It.TIMER_QUERY]:["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"],[It.INSTANCED_RENDERING]:["ANGLE_instanced_arrays",!0],[It.MULTIPLE_RENDER_TARGETS]:["WEBGL_draw_buffers",!0],[It.ELEMENT_INDEX_UINT32]:["OES_element_index_uint",!0],[It.BLEND_EQUATION_MINMAX]:["EXT_blend_minmax",!0],[It.FLOAT_BLEND]:["EXT_float_blend"],[It.COLOR_ENCODING_SRGB]:["EXT_sRGB",!0],[It.TEXTURE_DEPTH]:["WEBGL_depth_texture",!0],[It.TEXTURE_FLOAT]:["OES_texture_float",!0],[It.TEXTURE_HALF_FLOAT]:["OES_texture_half_float",!0],[It.TEXTURE_FILTER_LINEAR_FLOAT]:["OES_texture_float_linear"],[It.TEXTURE_FILTER_LINEAR_HALF_FLOAT]:["OES_texture_half_float_linear"],[It.TEXTURE_FILTER_ANISOTROPIC]:["EXT_texture_filter_anisotropic"],[It.COLOR_ATTACHMENT_RGBA32F]:[mj,"EXT_color_buffer_float"],[It.COLOR_ATTACHMENT_FLOAT]:[!1,"EXT_color_buffer_float"],[It.COLOR_ATTACHMENT_HALF_FLOAT]:["EXT_color_buffer_half_float"],[It.GLSL_FRAG_DATA]:["WEBGL_draw_buffers",!0],[It.GLSL_FRAG_DEPTH]:["EXT_frag_depth",!0],[It.GLSL_DERIVATIVES]:["OES_standard_derivatives",!0],[It.GLSL_TEXTURE_LOD]:["EXT_shader_texture_lod",!0]},Aj=2;function yj(t,e){return f4(t,e)}function f4(t,e){return e=Array.isArray(e)?e:[e],e.every(n=>h4(t,n))}function vj(t){t.luma=t.luma||{},t.luma.caps=t.luma.caps||{};for(const e in c4)t.luma.caps[e]===void 0&&(t.luma.caps[e]=h4(t,e));return t.luma.caps}function h4(t,e){return t.luma=t.luma||{},t.luma.caps=t.luma.caps||{},t.luma.caps[e]===void 0&&(t.luma.caps[e]=_j(t,e)),t.luma.caps[e]||xe.log(Aj,"Feature: ".concat(e," not supported"))(),t.luma.caps[e]}function _j(t,e){const n=c4[e];ve(n,e);let i;const a=Qe(t)&&n[1]||n[0];if(typeof a=="function")i=a(t);else if(Array.isArray(a)){i=!0;for(const l of a)i=i&&!!t.getExtension(l)}else typeof a=="string"?i=!!t.getExtension(a):typeof a=="boolean"?i=a:ve(!1);return i}const A_="Multiple render targets not supported";class en extends gs{get[Symbol.toStringTag](){return"Framebuffer"}static isSupported(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{colorBufferFloat:i,colorBufferHalfFloat:a}=n;let l=!0;return i&&(l=!!(e.getExtension("EXT_color_buffer_float")||e.getExtension("WEBGL_color_buffer_float")||e.getExtension("OES_texture_float"))),a&&(l=l&&!!(e.getExtension("EXT_color_buffer_float")||e.getExtension("EXT_color_buffer_half_float"))),l}static getDefaultFramebuffer(e){return e.luma=e.luma||{},e.luma.defaultFramebuffer=e.luma.defaultFramebuffer||new en(e,{id:"default-framebuffer",handle:null,attachments:{}}),e.luma.defaultFramebuffer}get MAX_COLOR_ATTACHMENTS(){const e=Gn(this.gl);return e.getParameter(e.MAX_COLOR_ATTACHMENTS)}get MAX_DRAW_BUFFERS(){const e=Gn(this.gl);return e.getParameter(e.MAX_DRAW_BUFFERS)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,n),this.width=null,this.height=null,this.attachments={},this.readBuffer=36064,this.drawBuffers=[36064],this.ownResources=[],this.initialize(n),Object.seal(this)}get color(){return this.attachments[36064]||null}get texture(){return this.attachments[36064]||null}get depth(){return this.attachments[36096]||this.attachments[33306]||null}get stencil(){return this.attachments[36128]||this.attachments[33306]||null}initialize(e){let{width:n=1,height:i=1,attachments:a=null,color:l=!0,depth:f=!0,stencil:d=!1,check:g=!0,readBuffer:v=void 0,drawBuffers:T=void 0}=e;if(ve(n>=0&&i>=0,"Width and height need to be integers"),this.width=n,this.height=i,a)for(const S in a){const x=a[S];(Array.isArray(x)?x[0]:x).resize({width:n,height:i})}else a=this._createDefaultAttachments(l,f,d,n,i);this.update({clearAttachments:!0,attachments:a,readBuffer:v,drawBuffers:T}),a&&g&&this.checkStatus()}delete(){for(const e of this.ownResources)e.delete();return super.delete(),this}update(e){let{attachments:n={},readBuffer:i,drawBuffers:a,clearAttachments:l=!1,resizeAttachments:f=!0}=e;this.attach(n,{clearAttachments:l,resizeAttachments:f});const{gl:d}=this,g=d.bindFramebuffer(36160,this.handle);return i&&this._setReadBuffer(i),a&&this._setDrawBuffers(a),d.bindFramebuffer(36160,g||null),this}resize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{width:n,height:i}=e;if(this.handle===null)return ve(n===void 0&&i===void 0),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;n===void 0&&(n=this.gl.drawingBufferWidth),i===void 0&&(i=this.gl.drawingBufferHeight),n!==this.width&&i!==this.height&&xe.log(2,"Resizing framebuffer ".concat(this.id," to ").concat(n,"x").concat(i))();for(const a in this.attachments)this.attachments[a].resize({width:n,height:i});return this.width=n,this.height=i,this}attach(e){let{clearAttachments:n=!1,resizeAttachments:i=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const a={};n&&Object.keys(this.attachments).forEach(f=>{a[f]=null}),Object.assign(a,e);const l=this.gl.bindFramebuffer(36160,this.handle);for(const f in a){ve(f!==void 0,"Misspelled framebuffer binding point?");const d=Number(f),g=a[d];let v=g;if(!v)this._unattach(d);else if(v instanceof Ha)this._attachRenderbuffer({attachment:d,renderbuffer:v});else if(Array.isArray(g)){const[T,S=0,x=0]=g;v=T,this._attachTexture({attachment:d,texture:T,layer:S,level:x})}else this._attachTexture({attachment:d,texture:v,layer:0,level:0});i&&v&&v.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,l||null),Object.assign(this.attachments,e),Object.keys(this.attachments).filter(f=>!this.attachments[f]).forEach(f=>{delete this.attachments[f]})}checkStatus(){const e=this.getStatus();if(e!==36053)throw new Error(Tj(e));return this}getStatus(){const{gl:e}=this,n=e.bindFramebuffer(36160,this.handle),i=e.checkFramebufferStatus(36160);return e.bindFramebuffer(36160,n||null),i}clear(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{color:n,depth:i,stencil:a,drawBuffers:l=[]}=e,f=this.gl.bindFramebuffer(36160,this.handle);return(n||i||a)&&cm(this.gl,{color:n,depth:i,stencil:a}),l.forEach((d,g)=>{hj(this.gl,{drawBuffer:g,value:d})}),this.gl.bindFramebuffer(36160,f||null),this}readPixels(){return xe.error("Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)")(),null}readPixelsToBuffer(){return xe.error("Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)")(),null}copyToDataUrl(){return xe.error("Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)")(),null}copyToImage(){return xe.error("Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)")(),null}copyToTexture(){return xe.error("Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}blit(){return xe.error("Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)")(),null}invalidate(e){let{attachments:n=[],x:i=0,y:a=0,width:l,height:f}=e;const d=Gn(this.gl),g=d.bindFramebuffer(36008,this.handle);return i===0&&a===0&&l===void 0&&f===void 0?d.invalidateFramebuffer(36008,n):d.invalidateFramebuffer(36008,n,i,a,l,f),d.bindFramebuffer(36008,g),this}getAttachmentParameter(e,n,i){let a=this._getAttachmentParameterFallback(n);return a===null&&(this.gl.bindFramebuffer(36160,this.handle),a=this.gl.getFramebufferAttachmentParameter(36160,e,n),this.gl.bindFramebuffer(36160,null)),i&&a>1e3&&(a=$s(this.gl,a)),a}getAttachmentParameters(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:36064,n=arguments.length>1?arguments[1]:void 0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.constructor.ATTACHMENT_PARAMETERS||[];const a={};for(const l of i){const f=n?$s(this.gl,l):l;a[f]=this.getAttachmentParameter(e,l,n)}return a}getParameters(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;const n=Object.keys(this.attachments),i={};for(const a of n){const l=Number(a),f=e?$s(this.gl,l):l;i[f]=this.getAttachmentParameters(l,e)}return i}show(){return typeof window<"u"&&window.open(m_(this),"luma-debug-texture"),this}log(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(e>xe.level||typeof window>"u")return this;n=n||"Framebuffer ".concat(this.id);const i=m_(this,{targetMaxHeight:100});return xe.image({logLevel:e,message:n,image:i},n)(),this}bind(){let{target:e=36160}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.gl.bindFramebuffer(e,this.handle),this}unbind(){let{target:e=36160}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.gl.bindFramebuffer(e,null),this}_createDefaultAttachments(e,n,i,a,l){let f=null;return e&&(f=f||{},f[36064]=new fi(this.gl,{id:"".concat(this.id,"-color0"),pixels:null,format:6408,type:5121,width:a,height:l,mipmaps:!1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.ownResources.push(f[36064])),n&&i?(f=f||{},f[33306]=new Ha(this.gl,{id:"".concat(this.id,"-depth-stencil"),format:35056,width:a,height:111}),this.ownResources.push(f[33306])):n?(f=f||{},f[36096]=new Ha(this.gl,{id:"".concat(this.id,"-depth"),format:33189,width:a,height:l}),this.ownResources.push(f[36096])):i&&ve(!1),f}_unattach(e){const n=this.attachments[e];n&&(n instanceof Ha?this.gl.framebufferRenderbuffer(36160,e,36161,null):this.gl.framebufferTexture2D(36160,e,3553,null,0),delete this.attachments[e])}_attachRenderbuffer(e){let{attachment:n=36064,renderbuffer:i}=e;const{gl:a}=this;a.framebufferRenderbuffer(36160,n,36161,i.handle),this.attachments[n]=i}_attachTexture(e){let{attachment:n=36064,texture:i,layer:a,level:l}=e;const{gl:f}=this;switch(f.bindTexture(i.target,i.handle),i.target){case 35866:case 32879:Gn(f).framebufferTextureLayer(36160,n,i.target,l,a);break;case 34067:const g=wj(a);f.framebufferTexture2D(36160,n,g,i.handle,l);break;case 3553:f.framebufferTexture2D(36160,n,3553,i.handle,l);break;default:ve(!1,"Illegal texture type")}f.bindTexture(i.target,null),this.attachments[n]=i}_setReadBuffer(e){const n=JD(this.gl);n?n.readBuffer(e):ve(e===36064||e===1029,A_),this.readBuffer=e}_setDrawBuffers(e){const{gl:n}=this,i=Gn(n);if(i)i.drawBuffers(e);else{const a=n.getExtension("WEBGL_draw_buffers");a?a.drawBuffersWEBGL(e):ve(e.length===1&&(e[0]===36064||e[0]===1029),A_)}this.drawBuffers=e}_getAttachmentParameterFallback(e){const n=vj(this.gl);switch(e){case 36052:return n.WEBGL2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return n.WEBGL2?null:8;case 33297:return n.WEBGL2?null:5125;case 33296:return!n.WEBGL2&&!n.EXT_sRGB?9729:null;default:return null}}_createHandle(){return this.gl.createFramebuffer()}_deleteHandle(){this.gl.deleteFramebuffer(this.handle)}_bindHandle(e){return this.gl.bindFramebuffer(36160,e)}}function wj(t){return t<34069?t+34069:t}function Tj(t){return(en.STATUS||{})[t]||"Framebuffer error ".concat(t)}const Ej=[36049,36048,33296,33298,33299,33300,33301,33302,33303];en.ATTACHMENT_PARAMETERS=Ej;function Sj(t,e){ve(t instanceof fi||t instanceof u4||t instanceof aj);const n=t.constructor,{gl:i,width:a,height:l,format:f,type:d,dataFormat:g,border:v,mipmaps:T}=t,S=Object.assign({width:a,height:l,format:f,type:d,dataFormat:g,border:v,mipmaps:T},e);return new n(i,S)}function xj(t,e){const{gl:n,width:i,height:a,id:l}=t;return new en(n,Object.assign({},e,{id:"framebuffer-for-".concat(l),width:i,height:a,attachments:{36064:t}}))}function N0(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"unnamed";const n=/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/,i=t.match(n);return i?i[1]:e}const Rj=35632,bj=35633;function kj(t){switch(t){case Rj:return"fragment";case bj:return"vertex";default:return"unknown type"}}function Pj(t,e,n,i){const a=t.split(/\r?\n/),l={},f={},d=i||N0(e)||"(unnamed)",g="".concat(kj(n)," shader ").concat(d);for(let T=0;T<a.length;T++){const S=a[T];if(S.length<=1)continue;const x=S.split(":"),M=x[0],B=parseInt(x[2],10);if(isNaN(B))throw new Error("GLSL compilation error in ".concat(g,": ").concat(t));M!=="WARNING"?l[B]=S:f[B]=S}const v=Mj(e);return{shaderName:g,errors:y_(l,v),warnings:y_(f,v)}}function y_(t,e){let n="";for(let i=0;i<e.length;i++){const a=e[i];if(!(!t[i+3]&&!t[i+2]&&!t[i+1])&&(n+="".concat(a,`
`),t[i+1])){const l=t[i+1],f=l.split(":",3),d=f[0],g=parseInt(f[1],10)||0,v=l.substring(f.join(":").length+1).trim();n+=d4("^^^ ".concat(d,": ").concat(v,`

`),g)}}return n}function Mj(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:": ";const i=t.split(/\r?\n/),a=String(i.length+e-1).length;return i.map((l,f)=>{const d=String(f+e),g=d.length;return d4(d,a-g)+n+l})}function d4(t,e){let n="";for(let i=0;i<e;++i)n+=" ";return"".concat(n).concat(t)}function p4(t){let e=100;const n=t.match(/[^\s]+/g);if(n.length>=2&&n[0]==="#version"){const i=parseInt(n[1],10);Number.isFinite(i)&&(e=i)}return e}const Cj="Shader: GLSL source code must be a JavaScript string";class zl extends gs{get[Symbol.toStringTag](){return"Shader"}static getTypeName(e){switch(e){case 35633:return"vertex-shader";case 35632:return"fragment-shader";default:return ve(!1),"unknown"}}constructor(e,n){Kf(e),ve(typeof n.source=="string",Cj);const i=N0(n.source,null)||n.id||eo("unnamed ".concat(zl.getTypeName(n.shaderType)));super(e,{id:i}),this.shaderType=n.shaderType,this.source=n.source,this.initialize(n)}initialize(e){let{source:n}=e;const i=N0(n,null);i&&(this.id=eo(i)),this._compile(n)}getParameter(e){return this.gl.getShaderParameter(this.handle,e)}toString(){return"".concat(zl.getTypeName(this.shaderType),":").concat(this.id)}getName(){return N0(this.source)||"unnamed-shader"}getSource(){return this.gl.getShaderSource(this.handle)}getTranslatedSource(){const e=this.gl.getExtension("WEBGL_debug_shaders");return e?e.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL_debug_shaders not implemented"}_compile(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.source;if(e.startsWith("#version ")||(e=`#version 100
`.concat(e)),this.source=e,this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle),!this.getParameter(35713)){const i=this.gl.getShaderInfoLog(this.handle),{shaderName:a,errors:l,warnings:f}=Pj(i,this.source,this.shaderType,this.id);throw xe.error("GLSL compilation errors in ".concat(a,`
`).concat(l))(),xe.warn("GLSL compilation warnings in ".concat(a,`
`).concat(f))(),new Error("GLSL compilation errors in ".concat(a))}}_deleteHandle(){this.gl.deleteShader(this.handle)}_getOptsFromHandle(){return{type:this.getParameter(35663),source:this.getSource()}}}class Dd extends zl{get[Symbol.toStringTag](){return"VertexShader"}constructor(e,n){typeof n=="string"&&(n={source:n}),super(e,Object.assign({},n,{shaderType:35633}))}_createHandle(){return this.gl.createShader(35633)}}class zd extends zl{get[Symbol.toStringTag](){return"FragmentShader"}constructor(e,n){typeof n=="string"&&(n={source:n}),super(e,Object.assign({},n,{shaderType:35632}))}_createHandle(){return this.gl.createShader(35632)}}const Ij={5126:bt.bind(null,"uniform1fv",gr,1,Mn),35664:bt.bind(null,"uniform2fv",gr,2,Mn),35665:bt.bind(null,"uniform3fv",gr,3,Mn),35666:bt.bind(null,"uniform4fv",gr,4,Mn),5124:bt.bind(null,"uniform1iv",Ps,1,Mn),35667:bt.bind(null,"uniform2iv",Ps,2,Mn),35668:bt.bind(null,"uniform3iv",Ps,3,Mn),35669:bt.bind(null,"uniform4iv",Ps,4,Mn),35670:bt.bind(null,"uniform1iv",Ps,1,Mn),35671:bt.bind(null,"uniform2iv",Ps,2,Mn),35672:bt.bind(null,"uniform3iv",Ps,3,Mn),35673:bt.bind(null,"uniform4iv",Ps,4,Mn),35674:bt.bind(null,"uniformMatrix2fv",gr,4,es),35675:bt.bind(null,"uniformMatrix3fv",gr,9,es),35676:bt.bind(null,"uniformMatrix4fv",gr,16,es),35678:yn,35680:yn,5125:bt.bind(null,"uniform1uiv",i0,1,Mn),36294:bt.bind(null,"uniform2uiv",i0,2,Mn),36295:bt.bind(null,"uniform3uiv",i0,3,Mn),36296:bt.bind(null,"uniform4uiv",i0,4,Mn),35685:bt.bind(null,"uniformMatrix2x3fv",gr,6,es),35686:bt.bind(null,"uniformMatrix2x4fv",gr,8,es),35687:bt.bind(null,"uniformMatrix3x2fv",gr,6,es),35688:bt.bind(null,"uniformMatrix3x4fv",gr,12,es),35689:bt.bind(null,"uniformMatrix4x2fv",gr,8,es),35690:bt.bind(null,"uniformMatrix4x3fv",gr,12,es),35678:yn,35680:yn,35679:yn,35682:yn,36289:yn,36292:yn,36293:yn,36298:yn,36299:yn,36300:yn,36303:yn,36306:yn,36307:yn,36308:yn,36311:yn},Nj={},Fj={},Oj={},v_=[0];function fm(t,e,n,i){e===1&&typeof t=="boolean"&&(t=t?1:0),Number.isFinite(t)&&(v_[0]=t,t=v_);const a=t.length;if(a%e&&xe.warn("Uniform size should be multiples of ".concat(e),t)(),t instanceof n)return t;let l=i[a];l||(l=new n(a),i[a]=l);for(let f=0;f<a;f++)l[f]=t[f];return l}function gr(t,e){return fm(t,e,Float32Array,Nj)}function Ps(t,e){return fm(t,e,Int32Array,Fj)}function i0(t,e){return fm(t,e,Uint32Array,Oj)}function __(t,e,n){const i=Ij[n.type];if(!i)throw new Error("Unknown GLSL uniform type ".concat(n.type));return i().bind(null,t,e)}function Lj(t){if(t[t.length-1]!=="]")return{name:t,length:1,isArray:!1};const e=/([^[]*)(\[[0-9]+\])?/,n=t.match(e);if(!n||n.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(t));return{name:n[1],length:n[2]||1,isArray:!!n[2]}}function Vj(t,e,n){for(const i in t){const a=t[i];if((!n||!!n[i])&&!Uj(a))throw e=e?"".concat(e," "):"",console.error("".concat(e," Bad uniform ").concat(i),a),new Error("".concat(e," Bad uniform ").concat(i))}return!0}function Uj(t){return Array.isArray(t)||ArrayBuffer.isView(t)?Dj(t):isFinite(t)||t===!0||t===!1||t instanceof hu||t instanceof Ha?!0:t instanceof en?!!t.texture:!1}function Bj(t,e,n){if(Array.isArray(n)||ArrayBuffer.isView(n))if(t[e]){const i=t[e];for(let a=0,l=n.length;a<l;++a)i[a]=n[a]}else t[e]=n.slice();else t[e]=n}function Dj(t){if(t.length===0)return!1;const e=Math.min(t.length,16);for(let n=0;n<e;++n)if(!Number.isFinite(t[n]))return!1;return!0}function yn(){let t=null;return(e,n,i)=>{const a=t!==i;return a&&(e.uniform1i(n,i),t=i),a}}function bt(t,e,n,i){let a=null,l=null;return(f,d,g)=>{const v=e(g,n),T=v.length;let S=!1;if(a===null)a=new Float32Array(T),l=T,S=!0;else{ve(l===T,"Uniform length cannot change.");for(let x=0;x<T;++x)if(v[x]!==a[x]){S=!0;break}}return S&&(i(f,t,d,v),a.set(v)),S}}function Mn(t,e,n,i){t[e](n,i)}function es(t,e,n,i){t[e](n,!1,i)}const zj=5120,jj=5121,Wj=5122,Gj=5123,w_=0,s0=1,Zj=2,Xj=3,o0=4,Hj=5,Yj=6,qt=5126,$j=35664,Jj=35665,Qj=35666,il=5124,qj=35667,Kj=35668,e9=35669,sl=5125,t9=36294,n9=36295,r9=36296,i9=35670,s9=35671,o9=35672,a9=35673,u9=35674,l9=35675,c9=35676,f9=35685,h9=35686,d9=35687,p9=35688,g9=35689,m9=35690,bg={[qt]:[qt,1,"float"],[$j]:[qt,2,"vec2"],[Jj]:[qt,3,"vec3"],[Qj]:[qt,4,"vec4"],[il]:[il,1,"int"],[qj]:[il,2,"ivec2"],[Kj]:[il,3,"ivec3"],[e9]:[il,4,"ivec4"],[sl]:[sl,1,"uint"],[t9]:[sl,2,"uvec2"],[n9]:[sl,3,"uvec3"],[r9]:[sl,4,"uvec4"],[i9]:[qt,1,"bool"],[s9]:[qt,2,"bvec2"],[o9]:[qt,3,"bvec3"],[a9]:[qt,4,"bvec4"],[u9]:[qt,8,"mat2"],[f9]:[qt,8,"mat2x3"],[h9]:[qt,8,"mat2x4"],[l9]:[qt,12,"mat3"],[d9]:[qt,12,"mat3x2"],[p9]:[qt,12,"mat3x4"],[c9]:[qt,16,"mat4"],[g9]:[qt,16,"mat4x2"],[m9]:[qt,16,"mat4x3"]};function A9(t){switch(t){case w_:return w_;case s0:return s0;case Xj:return s0;case Zj:return s0;case o0:return o0;case Hj:return o0;case Yj:return o0;default:return ve(!1),0}}function T_(t){const e=bg[t];if(!e)return null;const[n,i]=e;return{type:n,components:i}}function g4(t,e){switch(t){case zj:case jj:case Wj:case Gj:t=qt;break}for(const n in bg){const[i,a,l]=bg[n];if(i===t&&a===e)return{glType:n,name:l}}return null}class y9{constructor(e){this.id=e.id,this.attributeInfos=[],this.attributeInfosByName={},this.attributeInfosByLocation=[],this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(e),this._readVaryingsFromProgram(e)}getAttributeInfo(e){const n=Number(e);return Number.isFinite(n)?this.attributeInfosByLocation[n]:this.attributeInfosByName[e]||null}getAttributeLocation(e){const n=this.getAttributeInfo(e);return n?n.location:-1}getAttributeAccessor(e){const n=this.getAttributeInfo(e);return n?n.accessor:null}getVaryingInfo(e){const n=Number(e);return Number.isFinite(n)?this.varyingInfos[n]:this.varyingInfosByName[e]||null}getVaryingIndex(e){const n=this.getVaryingInfo();return n?n.location:-1}getVaryingAccessor(e){const n=this.getVaryingInfo();return n?n.accessor:null}_readAttributesFromProgram(e){const{gl:n}=e,i=n.getProgramParameter(e.handle,35721);for(let a=0;a<i;a++){const{name:l,type:f,size:d}=n.getActiveAttrib(e.handle,a),g=n.getAttribLocation(e.handle,l);g>=0&&this._addAttribute(g,l,f,d)}this.attributeInfos.sort((a,l)=>a.location-l.location)}_readVaryingsFromProgram(e){const{gl:n}=e;if(!Qe(n))return;const i=n.getProgramParameter(e.handle,35971);for(let a=0;a<i;a++){const{name:l,type:f,size:d}=n.getTransformFeedbackVarying(e.handle,a);this._addVarying(a,l,f,d)}this.varyingInfos.sort((a,l)=>a.location-l.location)}_addAttribute(e,n,i,a){const{type:l,components:f}=T_(i),d={type:l,size:a*f};this._inferProperties(e,n,d);const g={location:e,name:n,accessor:new vr(d)};this.attributeInfos.push(g),this.attributeInfosByLocation[e]=g,this.attributeInfosByName[g.name]=g}_inferProperties(e,n,i){/instance/i.test(n)&&(i.divisor=1)}_addVarying(e,n,i,a){const{type:l,components:f}=T_(i),d=new vr({type:l,size:a*f}),g={location:e,name:n,accessor:d};this.varyingInfos.push(g),this.varyingInfosByName[g.name]=g}}const E_=4,v9=35981,_9=["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"];class m4 extends gs{get[Symbol.toStringTag](){return"Program"}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,n),this.stubRemovedMethods("Program","v6.0",_9),this._isCached=!1,this.initialize(n),Object.seal(this),this._setId(n.id)}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{hash:n,vs:i,fs:a,varyings:l,bufferMode:f=v9}=e;return this.hash=n||"",this.vs=typeof i=="string"?new Dd(this.gl,{id:"".concat(e.id,"-vs"),source:i}):i,this.fs=typeof a=="string"?new zd(this.gl,{id:"".concat(e.id,"-fs"),source:a}):a,ve(this.vs instanceof Dd),ve(this.fs instanceof zd),this.uniforms={},this._textureUniforms={},l&&l.length>0&&(Gn(this.gl),this.varyings=l,this.gl2.transformFeedbackVaryings(this.handle,l,f)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new y9(this),this.setProps(e)}delete(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._isCached?this:super.delete(e)}setProps(e){return"uniforms"in e&&this.setUniforms(e.uniforms),this}draw(e){let{logPriority:n,drawMode:i=4,vertexCount:a,offset:l=0,start:f,end:d,isIndexed:g=!1,indexType:v=5123,instanceCount:T=0,isInstanced:S=T>0,vertexArray:x=null,transformFeedback:M,framebuffer:B,parameters:W={},uniforms:N,samplers:F}=e;if((N||F)&&(xe.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)")(),this.setUniforms(N||{})),xe.priority>=n){const V=B?B.id:"default",j="mode=".concat($s(this.gl,i)," verts=").concat(a," ")+"instances=".concat(T," indexType=").concat($s(this.gl,v)," ")+"isInstanced=".concat(S," isIndexed=").concat(g," ")+"Framebuffer=".concat(V);xe.log(n,j)()}return ve(x),this.gl.useProgram(this.handle),!this._areTexturesRenderable()||a===0||S&&T===0?!1:(x.bindForDraw(a,T,()=>{if(B!==void 0&&(W=Object.assign({},W,{framebuffer:B})),M){const V=A9(i);M.begin(V)}this._bindTextures(),ui(this.gl,W,()=>{g&&S?this.gl2.drawElementsInstanced(i,a,v,l,T):g&&Qe(this.gl)&&!isNaN(f)&&!isNaN(d)?this.gl2.drawRangeElements(i,f,d,a,v,l):g?this.gl.drawElements(i,a,v,l):S?this.gl2.drawArraysInstanced(i,l,a,T):this.gl.drawArrays(i,l,a)}),M&&M.end()}),!0)}setUniforms(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};xe.priority>=2&&Vj(e,this.id,this._uniformSetters),this.gl.useProgram(this.handle);for(const n in e){const i=e[n],a=this._uniformSetters[n];if(a){let l=i,f=!1;if(l instanceof en&&(l=l.texture),l instanceof hu)if(f=this.uniforms[n]!==i,f){a.textureIndex===void 0&&(a.textureIndex=this._textureIndexCounter++);const d=l,{textureIndex:g}=a;d.bind(g),l=g,this._textureUniforms[n]=d}else l=a.textureIndex;else this._textureUniforms[n]&&delete this._textureUniforms[n];(a(l)||f)&&Bj(this.uniforms,n,i)}}return this}_areTexturesRenderable(){let e=!0;for(const n in this._textureUniforms){const i=this._textureUniforms[n];i.update(),e=e&&i.loaded}return e}_bindTextures(){for(const e in this._textureUniforms){const n=this._uniformSetters[e].textureIndex;this._textureUniforms[e].bind(n)}}_createHandle(){return this.gl.createProgram()}_deleteHandle(){this.gl.deleteProgram(this.handle)}_getOptionsFromHandle(e){const n=this.gl.getAttachedShaders(e),i={};for(const a of n)switch(this.gl.getShaderParameter(this.handle,35663)){case 35633:i.vs=new Dd({handle:a});break;case 35632:i.fs=new zd({handle:a});break}return i}_getParameter(e){return this.gl.getProgramParameter(this.handle,e)}_setId(e){if(!e){const n=this._getName();this.id=eo(n)}}_getName(){let e=this.vs.getName()||this.fs.getName();return e=e.replace(/shader/i,""),e=e?"".concat(e,"-program"):"program",e}_compileAndLink(){const{gl:e}=this;if(e.attachShader(this.handle,this.vs.handle),e.attachShader(this.handle,this.fs.handle),xe.time(E_,"linkProgram for ".concat(this._getName()))(),e.linkProgram(this.handle),xe.timeEnd(E_,"linkProgram for ".concat(this._getName()))(),e.debug||xe.level>0){if(!e.getProgramParameter(this.handle,35714))throw new Error("Error linking: ".concat(e.getProgramInfoLog(this.handle)));if(e.validateProgram(this.handle),!e.getProgramParameter(this.handle,35715))throw new Error("Error validating: ".concat(e.getProgramInfoLog(this.handle)))}}_readUniformLocationsFromLinkedProgram(){const{gl:e}=this;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(let n=0;n<this._uniformCount;n++){const i=this.gl.getActiveUniform(this.handle,n),{name:a}=Lj(i.name);let l=e.getUniformLocation(this.handle,a);if(this._uniformSetters[a]=__(e,l,i),i.size>1)for(let f=0;f<i.size;f++)l=e.getUniformLocation(this.handle,"".concat(a,"[").concat(f,"]")),this._uniformSetters["".concat(a,"[").concat(f,"]")]=__(e,l,i)}this._textureIndexCounter=0}getActiveUniforms(e,n){return this.gl2.getActiveUniforms(this.handle,e,n)}getUniformBlockIndex(e){return this.gl2.getUniformBlockIndex(this.handle,e)}getActiveUniformBlockParameter(e,n){return this.gl2.getActiveUniformBlockParameter(this.handle,e,n)}uniformBlockBinding(e,n){this.gl2.uniformBlockBinding(this.handle,e,n)}}const w9=34918,T9=34919,E9=35007,S9=36795,x9=35976,R9=35887,b9=36202;class yf extends gs{get[Symbol.toStringTag](){return"Query"}static isSupported(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];const i=Qe(e),a=f4(e,It.TIMER_QUERY);let l=i||a;for(const f of n)switch(f){case"queries":l=l&&i;break;case"timers":l=l&&a;break;default:ve(!1)}return l}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,n),this.target=null,this._queryPending=!1,this._pollingPromise=null,Object.seal(this)}beginTimeElapsedQuery(){return this.begin(E9)}beginOcclusionQuery(){let{conservative:e=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.begin(e?b9:R9)}beginTransformFeedbackQuery(){return this.begin(x9)}begin(e){return this._queryPending?this:(this.target=e,this.gl2.beginQuery(this.target,this.handle),this)}end(){return this._queryPending?this:(this.target&&(this.gl2.endQuery(this.target),this.target=null,this._queryPending=!0),this)}isResultAvailable(){if(!this._queryPending)return!1;const e=this.gl2.getQueryParameter(this.handle,T9);return e&&(this._queryPending=!1),e}isTimerDisjoint(){return this.gl2.getParameter(S9)}getResult(){return this.gl2.getQueryParameter(this.handle,w9)}getTimerMilliseconds(){return this.getResult()/1e6}createPoll(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Number.POSITIVE_INFINITY;if(this._pollingPromise)return this._pollingPromise;let n=0;return this._pollingPromise=new Promise((i,a)=>{const l=()=>{this.isResultAvailable()?(i(this.getResult()),this._pollingPromise=null):n++>e?(a("Timed out"),this._pollingPromise=null):requestAnimationFrame(l)};requestAnimationFrame(l)}),this._pollingPromise}_createHandle(){return yf.isSupported(this.gl)?this.gl2.createQuery():null}_deleteHandle(){this.gl2.deleteQuery(this.handle)}}class A4 extends gs{get[Symbol.toStringTag](){return"TransformFeedback"}static isSupported(e){return Qe(e)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Gn(e),super(e,n),this.initialize(n),this.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal(this)}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,fu(this.buffers)||this.bind(()=>this._unbindBuffers()),this.setProps(e),this}setProps(e){"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"bindOnUse"in e&&(e=e.bindOnUse),"buffers"in e&&this.setBuffers(e.buffers)}setBuffers(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.bind(()=>{for(const n in e)this.setBuffer(n,e[n])}),this}setBuffer(e,n){const i=this._getVaryingIndex(e),{buffer:a,byteSize:l,byteOffset:f}=this._getBufferParams(n);return i<0?(this.unused[e]=a,xe.warn("".concat(this.id," unused varying buffer ").concat(e))(),this):(this.buffers[i]=n,this.bindOnUse||this._bindBuffer(i,a,f,l),this)}begin(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(e),this}end(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}_getBufferParams(e){let n,i,a;return e instanceof Tt?a=e:(a=e.buffer,i=e.byteSize,n=e.byteOffset),(n!==void 0||i!==void 0)&&(n=n||0,i=i||a.byteLength-n),{buffer:a,byteOffset:n,byteSize:i}}_getVaryingInfo(e){return this.configuration&&this.configuration.getVaryingInfo(e)}_getVaryingIndex(e){if(this.configuration)return this.configuration.getVaryingInfo(e).location;const n=Number(e);return Number.isFinite(n)?n:-1}_bindBuffers(){if(this.bindOnUse)for(const e in this.buffers){const{buffer:n,byteSize:i,byteOffset:a}=this._getBufferParams(this.buffers[e]);this._bindBuffer(e,n,a,i)}}_unbindBuffers(){if(this.bindOnUse)for(const e in this.buffers)this._bindBuffer(e,null)}_bindBuffer(e,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3?arguments[3]:void 0;const l=n&&n.handle;return!l||a===void 0?this.gl.bindBufferBase(35982,e,l):this.gl.bindBufferRange(35982,e,l,i,a),this}_createHandle(){return this.gl.createTransformFeedback()}_deleteHandle(){this.gl.deleteTransformFeedback(this.handle)}_bindHandle(e){this.gl.bindTransformFeedback(36386,this.handle)}}let a0=null;function k9(t){return(!a0||a0.byteLength<t)&&(a0=new ArrayBuffer(t)),a0}function P9(t,e){const n=k9(t.BYTES_PER_ELEMENT*e);return new t(n,0,e)}function M9(t){let{target:e,source:n,start:i=0,count:a=1}=t;const l=n.length,f=a*l;let d=0;for(let g=i;d<l;d++)e[g++]=n[d];for(;d<f;)d<f-d?(e.copyWithin(i+d,i,i+d),d*=2):(e.copyWithin(i+d,i,i+f-d),d=f);return e}const C9="elements must be GL.ELEMENT_ARRAY_BUFFER";class Ar extends gs{get[Symbol.toStringTag](){return"VertexArrayObject"}static isSupported(e){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}).constantAttributeZero?Qe(e)||H3()==="Chrome":!0}static getDefaultArray(e){return e.luma=e.luma||{},e.luma.defaultVertexArray||(e.luma.defaultVertexArray=new Ar(e,{handle:null,isDefaultArray:!0})),e.luma.defaultVertexArray}static getMaxAttributes(e){return Ar.MAX_ATTRIBUTES=Ar.MAX_ATTRIBUTES||e.getParameter(34921),Ar.MAX_ATTRIBUTES}static setConstant(e,n,i){switch(i.constructor){case Float32Array:Ar._setConstantFloatArray(e,n,i);break;case Int32Array:Ar._setConstantIntArray(e,n,i);break;case Uint32Array:Ar._setConstantUintArray(e,n,i);break;default:ve(!1)}}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=n.id||n.program&&n.program.id;super(e,Object.assign({},n,{id:i})),this.buffer=null,this.bufferValue=null,this.isDefaultArray=n.isDefaultArray||!1,this.gl2=e,this.initialize(n),Object.seal(this)}delete(){return super.delete(),this.buffer&&this.buffer.delete(),this}get MAX_ATTRIBUTES(){return Ar.getMaxAttributes(this.gl)}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.setProps(e)}setProps(e){return this}setElementBuffer(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return ve(!e||e.target===34963,C9),this.bind(()=>{this.gl.bindBuffer(34963,e?e.handle:null)}),this}setBuffer(e,n,i){if(n.target===34963)return this.setElementBuffer(n,i);const{size:a,type:l,stride:f,offset:d,normalized:g,integer:v,divisor:T}=i,{gl:S,gl2:x}=this;return e=Number(e),this.bind(()=>{S.bindBuffer(34962,n.handle),v?(ve(Qe(S)),x.vertexAttribIPointer(e,a,l,f,d)):S.vertexAttribPointer(e,a,l,g,f,d),S.enableVertexAttribArray(e),x.vertexAttribDivisor(e,T||0)}),this}enable(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return!n&&e===0&&!Ar.isSupported(this.gl,{constantAttributeZero:!0})||(e=Number(e),this.bind(()=>n?this.gl.enableVertexAttribArray(e):this.gl.disableVertexAttribArray(e))),this}getConstantBuffer(e,n){const i=this._normalizeConstantArrayValue(n),a=i.byteLength*e,l=i.length*e;let f=!this.buffer;if(this.buffer=this.buffer||new Tt(this.gl,a),f=f||this.buffer.reallocate(a),f=f||!this._compareConstantArrayValues(i,this.bufferValue),f){const d=P9(n.constructor,l);M9({target:d,source:i,start:0,count:l}),this.buffer.subData(d),this.bufferValue=n}return this.buffer}_normalizeConstantArrayValue(e){return Array.isArray(e)?new Float32Array(e):e}_compareConstantArrayValues(e,n){if(!e||!n||e.length!==n.length||e.constructor!==n.constructor)return!1;for(let i=0;i<e.length;++i)if(e[i]!==n[i])return!1;return!0}static _setConstantFloatArray(e,n,i){switch(i.length){case 1:e.vertexAttrib1fv(n,i);break;case 2:e.vertexAttrib2fv(n,i);break;case 3:e.vertexAttrib3fv(n,i);break;case 4:e.vertexAttrib4fv(n,i);break;default:ve(!1)}}static _setConstantIntArray(e,n,i){switch(ve(Qe(e)),i.length){case 1:e.vertexAttribI1iv(n,i);break;case 2:e.vertexAttribI2iv(n,i);break;case 3:e.vertexAttribI3iv(n,i);break;case 4:e.vertexAttribI4iv(n,i);break;default:ve(!1)}}static _setConstantUintArray(e,n,i){switch(ve(Qe(e)),i.length){case 1:e.vertexAttribI1uiv(n,i);break;case 2:e.vertexAttribI2uiv(n,i);break;case 3:e.vertexAttribI3uiv(n,i);break;case 4:e.vertexAttribI4uiv(n,i);break;default:ve(!1)}}_createHandle(){return this.gl.createVertexArray()}_deleteHandle(e){return this.gl2.deleteVertexArray(e),[this.elements]}_bindHandle(e){this.gl2.bindVertexArray(e)}_getParameter(e,n){let{location:i}=n;return ve(Number.isFinite(i)),this.bind(()=>{switch(e){case 34373:return this.gl.getVertexAttribOffset(i,e);default:return this.gl.getVertexAttrib(i,e)}})}}const I9="VertexArray: attributes must be Buffers or constants (i.e. typed array)",N9=/^(.+)__LOCATION_([0-9]+)$/,F9=["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"];class O9{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=n.id||n.program&&n.program.id;this.id=i,this.gl=e,this.configuration=null,this.elements=null,this.elementsAccessor=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.attributes={},this.vertexArrayObject=new Ar(e),i4(this,"VertexArray","v6.0",F9),this.initialize(n),Object.seal(this)}delete(){this.buffer&&this.buffer.delete(),this.vertexArrayObject.delete()}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(e)}reset(){this.elements=null,this.elementsAccessor=null;const{MAX_ATTRIBUTES:e}=this.vertexArrayObject;return this.values=new Array(e).fill(null),this.accessors=new Array(e).fill(null),this.unused={},this.drawParams=null,this}setProps(e){return"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"attributes"in e&&this.setAttributes(e.attributes),"elements"in e&&this.setElementBuffer(e.elements),"bindOnUse"in e&&(e=e.bindOnUse),this}clearDrawParams(){this.drawParams=null}getDrawParams(){return this.drawParams=this.drawParams||this._updateDrawParams(),this.drawParams}setAttributes(e){return Object.assign(this.attributes,e),this.vertexArrayObject.bind(()=>{for(const n in e){const i=e[n];this._setAttribute(n,i)}this.gl.bindBuffer(34962,null)}),this}setElementBuffer(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.elements=e,this.elementsAccessor=n,this.clearDrawParams(),this.vertexArrayObject.setElementBuffer(e,n),this}setBuffer(e,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(n.target===34963)return this.setElementBuffer(n,i);const{location:a,accessor:l}=this._resolveLocationAndAccessor(e,n,n.accessor,i);return a>=0&&(this.values[a]=n,this.accessors[a]=l,this.clearDrawParams(),this.vertexArrayObject.setBuffer(a,n,l)),this}setConstant(e,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{location:a,accessor:l}=this._resolveLocationAndAccessor(e,n,Object.assign({size:n.length},i));return a>=0&&(n=this.vertexArrayObject._normalizeConstantArrayValue(n),this.values[a]=n,this.accessors[a]=l,this.clearDrawParams(),this.vertexArrayObject.enable(a,!1)),this}unbindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.vertexArrayObject.setElementBuffer(null),this.buffer=this.buffer||new Tt(this.gl,{accessor:{size:4}});for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++)this.values[e]instanceof Tt&&(this.gl.disableVertexAttribArray(e),this.gl.bindBuffer(34962,this.buffer.handle),this.gl.vertexAttribPointer(e,1,5126,!1,0,0))}),this}bindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.setElementBuffer(this.elements);for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++){const n=this.values[e];n instanceof Tt&&this.setBuffer(e,n)}}),this}bindForDraw(e,n,i){let a;return this.vertexArrayObject.bind(()=>{this._setConstantAttributes(e,n),a=i()}),a}_resolveLocationAndAccessor(e,n,i,a){const l={location:-1,accessor:null},{location:f,name:d}=this._getAttributeIndex(e);if(!Number.isFinite(f)||f<0)return this.unused[e]=n,xe.once(3,()=>"unused value ".concat(e," in ").concat(this.id))(),l;const g=this._getAttributeInfo(d||f);if(!g)return l;const v=this.accessors[f]||{},T=vr.resolve(g.accessor,v,i,a),{size:S,type:x}=T;return ve(Number.isFinite(S)&&Number.isFinite(x)),{location:f,accessor:T}}_getAttributeInfo(e){return this.configuration&&this.configuration.getAttributeInfo(e)}_getAttributeIndex(e){const n=Number(e);if(Number.isFinite(n))return{location:n};const i=N9.exec(e),a=i?i[1]:e,l=i?Number(i[2]):0;return this.configuration?{location:this.configuration.getAttributeLocation(a)+l,name:a}:{location:-1}}_setAttribute(e,n){if(n instanceof Tt)this.setBuffer(e,n);else if(Array.isArray(n)&&n.length&&n[0]instanceof Tt){const i=n[0],a=n[1];this.setBuffer(e,i,a)}else if(ArrayBuffer.isView(n)||Array.isArray(n)){const i=n;this.setConstant(e,i)}else if(n.buffer instanceof Tt){const i=n;this.setBuffer(e,i.buffer,i)}else throw new Error(I9)}_setConstantAttributes(e,n){const i=Math.max(e|0,n|0);let a=this.values[0];ArrayBuffer.isView(a)&&this._setConstantAttributeZero(a,i);for(let l=1;l<this.vertexArrayObject.MAX_ATTRIBUTES;l++)a=this.values[l],ArrayBuffer.isView(a)&&this._setConstantAttribute(l,a)}_setConstantAttributeZero(e,n){if(Ar.isSupported(this.gl,{constantAttributeZero:!0})){this._setConstantAttribute(0,e);return}const i=this.vertexArrayObject.getConstantBuffer(n,e);this.vertexArrayObject.setBuffer(0,i,this.accessors[0])}_setConstantAttribute(e,n){Ar.setConstant(this.gl,e,n)}_updateDrawParams(){const e={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0};for(let n=0;n<this.vertexArrayObject.MAX_ATTRIBUTES;n++)this._updateDrawParamsForLocation(e,n);return this.elements&&(e.elementCount=this.elements.getElementCount(this.elements.accessor),e.isIndexed=!0,e.indexType=this.elementsAccessor.type||this.elements.accessor.type,e.indexOffset=this.elementsAccessor.offset||0),e.indexCount===1/0&&(e.indexCount=0),e.vertexCount===1/0&&(e.vertexCount=0),e.instanceCount===1/0&&(e.instanceCount=0),e}_updateDrawParamsForLocation(e,n){const i=this.values[n],a=this.accessors[n];if(!i)return;const{divisor:l}=a,f=l>0;if(e.isInstanced=e.isInstanced||f,i instanceof Tt){const d=i;if(f){const g=d.getVertexCount(a);e.instanceCount=Math.min(e.instanceCount,g)}else{const g=d.getVertexCount(a);e.vertexCount=Math.min(e.vertexCount,g)}}}setElements(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return xe.deprecated("setElements","setElementBuffer")(),this.setElementBuffer(e,n)}}function L9(t,e){const{maxElts:n=16,size:i=1}=e;let a="[";for(let f=0;f<t.length&&f<n;++f)f>0&&(a+=",".concat(f%i===0?" ":"")),a+=jl(t[f],e);const l=t.length>n?"...":"]";return"".concat(a).concat(l)}function jl(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=1e-16,{isInteger:i=!1}=e;if(Array.isArray(t)||ArrayBuffer.isView(t))return L9(t,e);if(!Number.isFinite(t))return String(t);if(Math.abs(t)<n)return i?"0":"0.";if(i||Math.abs(t)>100&&Math.abs(t)<1e4)return t.toFixed(0);const a=t.toPrecision(2);return a.indexOf(".0")===a.length-2?a.slice(0,-1):a}function S_(t){let{header:e="Uniforms",program:n,uniforms:i,undefinedOnly:a=!1}=t;ve(n);const l=".*_.*",f=".*Matrix",d=n._uniformSetters,g={},v=Object.keys(d).sort();let T=0;for(const M of v)!M.match(l)&&!M.match(f)&&jd({table:g,header:e,uniforms:i,uniformName:M,undefinedOnly:a})&&T++;for(const M of v)M.match(f)&&jd({table:g,header:e,uniforms:i,uniformName:M,undefinedOnly:a})&&T++;for(const M of v)g[M]||jd({table:g,header:e,uniforms:i,uniformName:M,undefinedOnly:a})&&T++;let S=0;const x={};if(!a)for(const M in i){const B=i[M];g[M]||(S++,x[M]={Type:"NOT USED: ".concat(B),[e]:jl(B)})}return{table:g,count:T,unusedTable:x,unusedCount:S}}function jd(t){let{table:e,header:n,uniforms:i,uniformName:a,undefinedOnly:l}=t;const f=i[a],d=V9(f);return!l||!d?(e[a]={[n]:d?jl(f):"N/A","Uniform Type":d?f:"NOT PROVIDED"},!0):!1}function V9(t){return t!=null}function U9(t){let{vertexArray:e,header:n="Attributes"}=t;if(!e.configuration)return{};const i={};e.elements&&(i.ELEMENT_ARRAY_BUFFER=x_(e,e.elements,null,n));const a=e.values;for(const l in a){const f=e._getAttributeInfo(l);if(f){let d="".concat(l,": ").concat(f.name);const g=e.accessors[f.location];g&&(d="".concat(l,": ").concat(B9(f.name,g))),i[d]=x_(e,a[l],g,n)}}return i}function x_(t,e,n,i){const{gl:a}=t;if(!e)return{[i]:"null","Format ":"N/A"};let l="NOT PROVIDED",f=1,d=0,g=0,v,T,S;if(n&&(l=n.type,f=n.size,l=String(l).replace("Array",""),v=l.indexOf("nt")!==-1),e instanceof Tt){const x=e,{data:M,changed:B}=x.getDebugData();T=B?"*":"",S=M,g=x.byteLength,d=g/M.BYTES_PER_ELEMENT/f;let W;if(n){const N=n.divisor>0;W="".concat(N?"I ":"P "," ").concat(d," (x").concat(f,"=").concat(g," bytes ").concat($s(a,l),")")}else v=!0,W="".concat(g," bytes");return{[i]:"".concat(T).concat(jl(S,{size:f,isInteger:v})),"Format ":W}}return S=e,f=e.length,l=String(e.constructor.name).replace("Array",""),v=l.indexOf("nt")!==-1,{[i]:"".concat(jl(S,{size:f,isInteger:v})," (constant)"),"Format ":"".concat(f,"x").concat(l," (constant)")}}function B9(t,e){const{type:n,size:i}=e,a=g4(n,i);return a?"".concat(t," (").concat(a.name,")"):t}function D9(t){const e={},n="Accessors for ".concat(t.id);for(const i of t.attributeInfos)if(i){const a=R_(i);e["in ".concat(a)]={[n]:JSON.stringify(i.accessor)}}for(const i of t.varyingInfos)if(i){const a=R_(i);e["out ".concat(a)]={[n]:JSON.stringify(i.accessor)}}return e}function R_(t){const{type:e,size:n}=t.accessor,i=g4(e,n);return i?"".concat(i.name," ").concat(t.name):t.name}const b_=Rr()&&typeof document<"u";let z9=0;class j9{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{onCreateContext:n=N=>r4(N),onAddHTML:i=null,onInitialize:a=()=>{},onRender:l=()=>{},onFinalize:f=()=>{},onError:d,gl:g=null,glOptions:v={},debug:T=!1,createFramebuffer:S=!1,autoResizeViewport:x=!0,autoResizeDrawingBuffer:M=!0,stats:B=zo.get("animation-loop-".concat(z9++))}=e;let{useDevicePixels:W=!0}=e;"useDevicePixelRatio"in e&&(xe.deprecated("useDevicePixelRatio","useDevicePixels")(),W=e.useDevicePixelRatio),this.props={onCreateContext:n,onAddHTML:i,onInitialize:a,onRender:l,onFinalize:f,onError:d,gl:g,glOptions:v,debug:T,createFramebuffer:S},this.gl=g,this.needsRedraw=null,this.timeline=null,this.stats=B,this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this._initialized=!1,this._running=!1,this._animationFrameId=null,this._nextFramePromise=null,this._resolveNextFrame=null,this._cpuStartTime=0,this.setProps({autoResizeViewport:x,autoResizeDrawingBuffer:M,useDevicePixels:W}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._pageLoadPromise=null,this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}delete(){this.stop(),this._setDisplay(null)}setNeedsRedraw(e){return ve(typeof e=="string"),this.needsRedraw=this.needsRedraw||e,this}setProps(e){return"autoResizeViewport"in e&&(this.autoResizeViewport=e.autoResizeViewport),"autoResizeDrawingBuffer"in e&&(this.autoResizeDrawingBuffer=e.autoResizeDrawingBuffer),"useDevicePixels"in e&&(this.useDevicePixels=e.useDevicePixels),this}start(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this._running)return this;this._running=!0;const n=this._getPageLoadPromise().then(()=>!this._running||this._initialized?null:(this._createWebGLContext(e),this._createFramebuffer(),this._startEventHandling(),this._initializeCallbackData(),this._updateCallbackData(),this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._gpuTimeQuery=yf.isSupported(this.gl,["timers"])?new yf(this.gl):null,this._initialized=!0,this.onInitialize(this.animationProps))).then(i=>{this._running&&(this._addCallbackData(i||{}),i!==!1&&this._startLoop())});return this.props.onError&&n.catch(this.props.onError),this}redraw(){return this.isContextLost()?this:(this._beginTimers(),this._setupFrame(),this._updateCallbackData(),this._renderFrame(this.animationProps),this._clearNeedsRedraw(),this.offScreen&&this.gl.commit&&this.gl.commit(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endTimers(),this)}stop(){return this._running&&(this._finalizeCallbackData(),this._cancelAnimationFrame(this._animationFrameId),this._nextFramePromise=null,this._resolveNextFrame=null,this._animationFrameId=null,this._running=!1),this}attachTimeline(e){return this.timeline=e,this.timeline}detachTimeline(){this.timeline=null}waitForRender(){return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise(e=>{this._resolveNextFrame=e})),this._nextFramePromise}async toDataURL(){return this.setNeedsRedraw("toDataURL"),await this.waitForRender(),this.gl.canvas.toDataURL()}isContextLost(){return this.gl.isContextLost()}onCreateContext(){return this.props.onCreateContext(...arguments)}onInitialize(){return this.props.onInitialize(...arguments)}onRender(){return this.props.onRender(...arguments)}onFinalize(){return this.props.onFinalize(...arguments)}getHTMLControlValue(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const i=document.getElementById(e);return i?Number(i.value):n}setViewParameters(){return xe.removed("AnimationLoop.setViewParameters","AnimationLoop.setProps")(),this}_startLoop(){const e=()=>{this._running&&(this.redraw(),this._animationFrameId=this._requestAnimationFrame(e))};this._cancelAnimationFrame(this._animationFrameId),this._animationFrameId=this._requestAnimationFrame(e)}_getPageLoadPromise(){return this._pageLoadPromise||(this._pageLoadPromise=b_?new Promise((e,n)=>{if(b_&&document.readyState==="complete"){e(document);return}window.addEventListener("load",()=>{e(document)})}):Promise.resolve({})),this._pageLoadPromise}_setDisplay(e){this.display&&(this.display.delete(),this.display.animationLoop=null),e&&(e.animationLoop=this),this.display=e}_cancelAnimationFrame(e){return this.display&&this.display.cancelAnimationFrame?this.display.cancelAnimationFrame(e):Yz(e)}_requestAnimationFrame(e){if(this._running)return this.display&&this.display.requestAnimationFrame?this.display.requestAnimationFrame(e):Hz(e)}_renderFrame(){if(this.display){this.display._renderFrame(...arguments);return}this.onRender(...arguments)}_clearNeedsRedraw(){this.needsRedraw=null}_setupFrame(){this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer()}_initializeCallbackData(){this.animationProps={gl:this.gl,stop:this.stop,canvas:this.gl.canvas,framebuffer:this.framebuffer,useDevicePixels:this.useDevicePixels,needsRedraw:null,startTime:Date.now(),engineTime:0,tick:0,tock:0,time:0,_timeline:this.timeline,_loop:this,_animationLoop:this,_mousePosition:null}}_updateCallbackData(){const{width:e,height:n,aspect:i}=this._getSizeAndAspect();(e!==this.animationProps.width||n!==this.animationProps.height)&&this.setNeedsRedraw("drawing buffer resized"),i!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=e,this.animationProps.height=n,this.animationProps.aspect=i,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime,this.animationProps._offScreen=this.offScreen}_finalizeCallbackData(){this.onFinalize(this.animationProps)}_addCallbackData(e){typeof e=="object"&&e!==null&&(this.animationProps=Object.assign({},this.animationProps,e))}_createWebGLContext(e){if(this.offScreen=e.canvas&&typeof OffscreenCanvas<"u"&&e.canvas instanceof OffscreenCanvas,e=Object.assign({},e,this.props.glOptions),this.gl=this.props.gl?am(this.props.gl,e):this.onCreateContext(e),!qf(this.gl))throw new Error("AnimationLoop.onCreateContext - illegal context returned");Fz(this.gl),this._createInfoDiv()}_createInfoDiv(){if(this.gl.canvas&&this.props.onAddHTML){const e=document.createElement("div");document.body.appendChild(e),e.style.position="relative";const n=document.createElement("div");n.style.position="absolute",n.style.left="10px",n.style.bottom="10px",n.style.width="300px",n.style.background="white",e.appendChild(this.gl.canvas),e.appendChild(n);const i=this.props.onAddHTML(n);i&&(n.innerHTML=i)}}_getSizeAndAspect(){const e=this.gl.drawingBufferWidth,n=this.gl.drawingBufferHeight;let i=1;const{canvas:a}=this.gl;return a&&a.clientHeight?i=a.clientWidth/a.clientHeight:e>0&&n>0&&(i=e/n),{width:e,height:n,aspect:i}}_resizeViewport(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}_resizeCanvasDrawingBuffer(){this.autoResizeDrawingBuffer&&Bz(this.gl,{useDevicePixels:this.useDevicePixels})}_createFramebuffer(){this.props.createFramebuffer&&(this.framebuffer=new en(this.gl))}_resizeFramebuffer(){this.framebuffer&&this.framebuffer.resize({width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight})}_beginTimers(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this._gpuTimeQuery&&this._gpuTimeQuery.isResultAvailable()&&!this._gpuTimeQuery.isTimerDisjoint()&&this.stats.get("GPU Time").addTime(this._gpuTimeQuery.getTimerMilliseconds()),this._gpuTimeQuery&&this._gpuTimeQuery.beginTimeElapsedQuery(),this.cpuTime.timeStart()}_endTimers(){this.cpuTime.timeEnd(),this._gpuTimeQuery&&this._gpuTimeQuery.end()}_startEventHandling(){const{canvas:e}=this.gl;e&&(e.addEventListener("mousemove",this._onMousemove),e.addEventListener("mouseleave",this._onMouseleave))}_onMousemove(e){this.animationProps._mousePosition=[e.offsetX,e.offsetY]}_onMouseleave(e){this.animationProps._mousePosition=null}}const lc="vs",hm="fs";function Sr(t,e){if(!t)throw new Error(e||"shadertools: assertion failed.")}const Wd={number:{validate(t,e){return Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)}},array:{validate(t,e){return Array.isArray(t)||ArrayBuffer.isView(t)}}};function W9(t){const e={};for(const n in t){const i=t[n],a=G9(i);e[n]=a}return e}function G9(t){let e=k_(t);return e==="object"?t?"type"in t?Object.assign({},t,Wd[t.type]):"value"in t?(e=k_(t.value),Object.assign({type:e},t,Wd[e])):{type:"object",value:t}:{type:"object",value:null}:Object.assign({type:e,value:t},Wd[e])}function k_(t){return Array.isArray(t)||ArrayBuffer.isView(t)?"array":typeof t}const Z9="vs",X9="fs";class P_{constructor(e){let{name:n,vs:i,fs:a,dependencies:l=[],uniforms:f,getUniforms:d,deprecations:g=[],defines:v={},inject:T={},vertexShader:S,fragmentShader:x}=e;Sr(typeof n=="string"),this.name=n,this.vs=i||S,this.fs=a||x,this.getModuleUniforms=d,this.dependencies=l,this.deprecations=this._parseDeprecationDefinitions(g),this.defines=v,this.injections=H9(T),f&&(this.uniforms=W9(f))}getModuleSource(e){let n;switch(e){case Z9:n=this.vs||"";break;case X9:n=this.fs||"";break;default:Sr(!1)}return"#define MODULE_".concat(this.name.toUpperCase().replace(/[^0-9a-z]/gi,"_"),`
`).concat(n,"// END MODULE_").concat(this.name,`

`)}getUniforms(e,n){return this.getModuleUniforms?this.getModuleUniforms(e,n):this.uniforms?this._defaultGetUniforms(e):{}}getDefines(){return this.defines}checkDeprecations(e,n){this.deprecations.forEach(i=>{i.regex.test(e)&&(i.deprecated?n.deprecated(i.old,i.new)():n.removed(i.old,i.new)())})}_parseDeprecationDefinitions(e){return e.forEach(n=>{switch(n.type){case"function":n.regex=new RegExp("\\b".concat(n.old,"\\("));break;default:n.regex=new RegExp("".concat(n.type," ").concat(n.old,";"))}}),e}_defaultGetUniforms(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n={},i=this.uniforms;for(const a in i){const l=i[a];a in e&&!l.private?(l.validate&&Sr(l.validate(e[a],l),"".concat(this.name,": invalid ").concat(a)),n[a]=e[a]):n[a]=l.value}return n}}function H9(t){const e={vs:{},fs:{}};for(const n in t){let i=t[n];const a=n.slice(0,2);typeof i=="string"&&(i={order:0,injection:i}),e[a][n]=i}return e}function Y9(t){return $9(v4(t))}function $9(t){const e={},n={};return y4({modules:t,level:0,moduleMap:e,moduleDepth:n}),Object.keys(n).sort((i,a)=>n[a]-n[i]).map(i=>e[i])}function y4(t){let{modules:e,level:n,moduleMap:i,moduleDepth:a}=t;if(n>=5)throw new Error("Possible loop in shader dependency graph");for(const l of e)i[l.name]=l,(a[l.name]===void 0||a[l.name]<n)&&(a[l.name]=n);for(const l of e)l.dependencies&&y4({modules:l.dependencies,level:n+1,moduleMap:i,moduleDepth:a})}function v4(t,e){return t.map(n=>(n instanceof P_||(Sr(typeof n!="string","Shader module use by name is deprecated. Import shader module '".concat(n,"' and use it directly.")),Sr(n.name,"shader module has no name"),n=new P_(n),n.dependencies=v4(n.dependencies)),n))}function J9(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const e=typeof window<"u"?window.navigator||{}:{},n=t.userAgent||e.userAgent||"",i=n.indexOf("MSIE ")!==-1,a=n.indexOf("Trident/")!==-1;return i||a}const Q9=7936,q9=7937,K9=7938,eW=35724,dm={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},Fo={};Object.keys(dm).forEach(t=>{Fo[t]=t});function tW(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?!0:!!(t&&t._version===2)}function nW(t){const e=t.getExtension("WEBGL_debug_renderer_info"),n=t.getParameter(e&&e.UNMASKED_VENDOR_WEBGL||Q9),i=t.getParameter(e&&e.UNMASKED_RENDERER_WEBGL||q9);return{gpuVendor:rW(n,i),vendor:n,renderer:i,version:t.getParameter(K9),shadingLanguageVersion:t.getParameter(eW)}}function rW(t,e){return t.match(/NVIDIA/i)||e.match(/NVIDIA/i)?"NVIDIA":t.match(/INTEL/i)||e.match(/INTEL/i)?"INTEL":t.match(/AMD/i)||e.match(/AMD/i)||t.match(/ATI/i)||e.match(/ATI/i)?"AMD":"UNKNOWN GPU"}const Gd={};function M_(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=dm[e];if(Sr(i,e),!J9(n))return!0;if(e in Gd)return Gd[e];const a=i[0],l=n.behavior||"enable",f="#extension GL_".concat(a," : ").concat(l,`
void main(void) {}`),d=t.createShader(35633);t.shaderSource(d,f),t.compileShader(d);const g=t.getShaderParameter(d,35713);return t.deleteShader(d),Gd[e]=g,g}function iW(t,e){const n=dm[e];Sr(n,e);const i=tW(t)&&n[1]||n[0],a=typeof i=="string"?!!t.getExtension(i):i;return Sr(a===!1||a===!0),a}function u0(t,e){return e=Array.isArray(e)?e:[e],e.every(n=>iW(t,n))}function sW(t){switch(nW(t).gpuVendor.toLowerCase()){case"nvidia":return`#define NVIDIA_GPU
// Nvidia optimizes away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
`;case"intel":return`#define INTEL_GPU
// Intel optimizes away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
// Intel's built-in 'tan' function doesn't have acceptable precision
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`;case"amd":return`#define AMD_GPU
`;default:return`#define DEFAULT_GPU
// Prevent driver from optimizing away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
// Intel's built-in 'tan' function doesn't have acceptable precision
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`}}function oW(t,e,n){let i=`#if (__VERSION__ > 120)

# define FEATURE_GLSL_DERIVATIVES
# define FEATURE_GLSL_DRAW_BUFFERS
# define FEATURE_GLSL_FRAG_DEPTH
# define FEATURE_GLSL_TEXTURE_LOD

// DEPRECATED FLAGS, remove in v9
# define FRAG_DEPTH
# define DERIVATIVES
# define DRAW_BUFFERS
# define TEXTURE_LOD

#endif // __VERSION
`;return u0(t,Fo.GLSL_FRAG_DEPTH)&&(i+=`
// FRAG_DEPTH => gl_FragDepth is available
#ifdef GL_EXT_frag_depth
#extension GL_EXT_frag_depth : enable
# define FEATURE_GLSL_FRAG_DEPTH
# define FRAG_DEPTH
# define gl_FragDepth gl_FragDepthEXT
#endif
`),u0(t,Fo.GLSL_DERIVATIVES)&&M_(t,Fo.GLSL_DERIVATIVES)&&(i+=`
// DERIVATIVES => dxdF, dxdY and fwidth are available
#ifdef GL_OES_standard_derivatives
#extension GL_OES_standard_derivatives : enable
# define FEATURE_GLSL_DERIVATIVES
# define DERIVATIVES
#endif
`),u0(t,Fo.GLSL_FRAG_DATA)&&M_(t,Fo.GLSL_FRAG_DATA,{behavior:"require"})&&(i+=`
// DRAW_BUFFERS => gl_FragData[] is available
#ifdef GL_EXT_draw_buffers
#extension GL_EXT_draw_buffers : require
#define FEATURE_GLSL_DRAW_BUFFERS
#define DRAW_BUFFERS
#endif
`),u0(t,Fo.GLSL_TEXTURE_LOD)&&(i+=`// TEXTURE_LOD => texture2DLod etc are available
#ifdef GL_EXT_shader_texture_lod
#extension GL_EXT_shader_texture_lod : enable

# define FEATURE_GLSL_TEXTURE_LOD
# define TEXTURE_LOD

#endif
`),i}const aW=`#ifdef MODULE_LOGDEPTH
  logdepth_adjustPosition(gl_Position);
#endif
`,uW=`#ifdef MODULE_MATERIAL
  gl_FragColor = material_filterColor(gl_FragColor);
#endif

#ifdef MODULE_LIGHTING
  gl_FragColor = lighting_filterColor(gl_FragColor);
#endif

#ifdef MODULE_FOG
  gl_FragColor = fog_filterColor(gl_FragColor);
#endif

#ifdef MODULE_PICKING
  gl_FragColor = picking_filterHighlightColor(gl_FragColor);
  gl_FragColor = picking_filterPickingColor(gl_FragColor);
#endif

#ifdef MODULE_LOGDEPTH
  logdepth_setFragDepth();
#endif
`,lW={[lc]:aW,[hm]:uW},F0="__LUMA_INJECT_DECLARATIONS__",C_=/void\s+main\s*\([^)]*\)\s*\{\n?/,I_=/}\n?[^{}]*$/,Zd=[];function N_(t,e,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const a=e===lc;for(const l in n){const f=n[l];f.sort((g,v)=>g.order-v.order),Zd.length=f.length;for(let g=0,v=f.length;g<v;++g)Zd[g]=f[g].injection;const d="".concat(Zd.join(`
`),`
`);switch(l){case"vs:#decl":a&&(t=t.replace(F0,d));break;case"vs:#main-start":a&&(t=t.replace(C_,g=>g+d));break;case"vs:#main-end":a&&(t=t.replace(I_,g=>d+g));break;case"fs:#decl":a||(t=t.replace(F0,d));break;case"fs:#main-start":a||(t=t.replace(C_,g=>g+d));break;case"fs:#main-end":a||(t=t.replace(I_,g=>d+g));break;default:t=t.replace(l,g=>g+d)}}return t=t.replace(F0,""),i&&(t=t.replace(/\}\s*$/,l=>l+lW[e])),t}function kg(t){const e={};return Sr(Array.isArray(t)&&t.length>1),t.forEach(n=>{for(const i in n)e[i]=e[i]?"".concat(e[i],`
`).concat(n[i]):n[i]}),e}function du(t){return new RegExp("\\b".concat(t,"[ \\t]+(\\w+[ \\t]+\\w+(\\[\\w+\\])?;)"),"g")}const _4=[[/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,`#version 300 es
`],[/\btexture(2D|2DProj|Cube)Lod(EXT)?\(/g,"textureLod("],[/\btexture(2D|2DProj|Cube)(EXT)?\(/g,"texture("]],cW=[..._4,[du("attribute"),"in $1"],[du("varying"),"out $1"]],fW=[..._4,[du("varying"),"in $1"]],w4=[[/^#version[ \t]+300[ \t]+es/,"#version 100"],[/\btexture(2D|2DProj|Cube)Lod\(/g,"texture$1LodEXT("],[/\btexture\(/g,"texture2D("],[/\btextureLod\(/g,"texture2DLodEXT("]],hW=[...w4,[du("in"),"attribute $1"],[du("out"),"varying $1"]],dW=[...w4,[du("in"),"varying $1"]],Pg="gl_FragColor",Mg=/\bout[ \t]+vec4[ \t]+(\w+)[ \t]*;\n?/,pW=/void\s+main\s*\([^)]*\)\s*\{\n?/;function gW(t,e,n){switch(e){case 300:return n?vf(t,cW):mW(t);case 100:return n?vf(t,hW):AW(t);default:throw new Error("unknown GLSL version ".concat(e))}}function vf(t,e){for(const[n,i]of e)t=t.replace(n,i);return t}function mW(t){t=vf(t,fW);const e=t.match(Mg);if(e){const n=e[1];t=t.replace(new RegExp("\\b".concat(Pg,"\\b"),"g"),n)}else{const n="fragmentColor";t=t.replace(pW,i=>"out vec4 ".concat(n,`;
`).concat(i)).replace(new RegExp("\\b".concat(Pg,"\\b"),"g"),n)}return t}function AW(t){t=vf(t,dW);const e=t.match(Mg);if(e){const n=e[1];t=t.replace(Mg,"").replace(new RegExp("\\b".concat(n,"\\b"),"g"),Pg)}return t}const yW=`

`.concat(F0,`

`),T4={[lc]:"vertex",[hm]:"fragment"},vW=`precision highp float;

`;function _W(t,e){const{vs:n,fs:i}=e,a=Y9(e.modules||[]);return{gl:t,vs:F_(t,Object.assign({},e,{source:n,type:lc,modules:a})),fs:F_(t,Object.assign({},e,{source:i,type:hm,modules:a})),getUniforms:wW(a)}}function F_(t,e){let{id:n,source:i,type:a,modules:l,defines:f={},hookFunctions:d=[],inject:g={},transpileToGLSL100:v=!1,prologue:T=!0,log:S}=e;Sr(typeof i=="string","shader source must be a string");const x=a===lc,M=i.split(`
`);let B=100,W="",N=i;M[0].indexOf("#version ")===0?(B=300,W=M[0],N=M.slice(1).join(`
`)):W="#version ".concat(B);const F={};l.forEach(ae=>{Object.assign(F,ae.getDefines())}),Object.assign(F,f);let V=T?"".concat(W,`
`).concat(EW({id:n,source:i,type:a}),`
`).concat(TW({type:a}),`
`).concat(sW(t),`
`).concat(oW(t),`
`).concat(SW(F),`
`).concat(x?"":vW,`
`):"".concat(W,`
`);const j=RW(d),X={},Q={},K={};for(const ae in g){const fe=typeof g[ae]=="string"?{injection:g[ae],order:0}:g[ae],se=ae.match(/^(v|f)s:(#)?([\w-]+)$/);if(se){const _e=se[2],we=se[3];_e?we==="decl"?Q[ae]=[fe]:K[ae]=[fe]:X[ae]=[fe]}else K[ae]=[fe]}for(const ae of l){S&&ae.checkDeprecations(N,S);const fe=ae.getModuleSource(a,B);V+=fe;const se=ae.injections[a];for(const _e in se){const we=_e.match(/^(v|f)s:#([\w-]+)$/);if(we){const kt=we[2]==="decl"?Q:K;kt[_e]=kt[_e]||[],kt[_e].push(se[_e])}else X[_e]=X[_e]||[],X[_e].push(se[_e])}}return V+=yW,V=N_(V,a,Q),V+=xW(j[a],X),V+=N,V=N_(V,a,K),V=gW(V,v?100:B,x),V}function wW(t){return function(n){const i={};for(const a of t){const l=a.getUniforms(n,i);Object.assign(i,l)}return i}}function TW(t){let{type:e}=t;return`
#define SHADER_TYPE_`.concat(T4[e].toUpperCase(),`
`)}function EW(t){let{id:e,source:n,type:i}=t;return e&&typeof e=="string"&&n.indexOf("SHADER_NAME")===-1?`
#define SHADER_NAME `.concat(e,"_").concat(T4[i],`

`):""}function SW(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=0,n="";for(const i in t){e===0&&(n+=`
// APPLICATION DEFINES
`),e++;const a=t[i];(a||Number.isFinite(a))&&(n+="#define ".concat(i.toUpperCase()," ").concat(t[i],`
`))}return e===0&&(n+=`
`),n}function xW(t,e){let n="";for(const i in t){const a=t[i];if(n+="void ".concat(a.signature,` {
`),a.header&&(n+="  ".concat(a.header)),e[i]){const l=e[i];l.sort((f,d)=>f.order-d.order);for(const f of l)n+="  ".concat(f.injection,`
`)}a.footer&&(n+="  ".concat(a.footer)),n+=`}
`}return n}function RW(t){const e={vs:{},fs:{}};return t.forEach(n=>{let i;typeof n!="string"?(i=n,n=i.hook):i={},n=n.trim();const[a,l]=n.split(":"),f=n.replace(/\(.+/,"");e[a][f]=Object.assign(i,{signature:l})}),e}const bW="void main() {gl_FragColor = vec4(0);}",E4=`out vec4 transform_output;
void main() {
  transform_output = vec4(0);
}`,kW=`#version 300 es
`.concat(E4);function S4(t,e){e=Array.isArray(e)?e:[e];const n=t.replace(/^\s+/,"").split(/\s+/),[i,a,l]=n;if(!e.includes(i)||!a||!l)return null;const f=l.split(";")[0];return{qualifier:i,type:a,name:f}}function x4(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{version:e=100,input:n,inputType:i,output:a}=t;if(!n)return e===300?kW:e>300?"#version ".concat(e,`
`).concat(E4):bW;const l=CW(n,i);return e>=300?"#version ".concat(e," ").concat(e===300?"es":"",`
in `).concat(i," ").concat(n,`;
out vec4 `).concat(a,`;
void main() {
  `).concat(a," = ").concat(l,`;
}`):"varying ".concat(i," ").concat(n,`;
void main() {
  gl_FragColor = `).concat(l,`;
}`)}function PW(t){switch(t){case"float":return"x";case"vec2":return"xy";case"vec3":return"xyz";case"vec4":return"xyzw";default:return Sr(!1),null}}function MW(t){switch(t){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":return 4;default:return Sr(!1),null}}function CW(t,e){switch(e){case"float":return"vec4(".concat(t,", 0.0, 0.0, 1.0)");case"vec2":return"vec4(".concat(t,", 0.0, 1.0)");case"vec3":return"vec4(".concat(t,", 1.0)");case"vec4":return t;default:return Sr(!1),null}}const IW=`#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND
const float TWO_PI = 6.2831854820251465;
const float PI_2 = 1.5707963705062866;
const float PI_16 = 0.1963495463132858;

const float SIN_TABLE_0 = 0.19509032368659973;
const float SIN_TABLE_1 = 0.3826834261417389;
const float SIN_TABLE_2 = 0.5555702447891235;
const float SIN_TABLE_3 = 0.7071067690849304;

const float COS_TABLE_0 = 0.9807852506637573;
const float COS_TABLE_1 = 0.9238795042037964;
const float COS_TABLE_2 = 0.8314695954322815;
const float COS_TABLE_3 = 0.7071067690849304;

const float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;
const float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;
const float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;
const float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;

float sin_taylor_fp32(float a) {
  float r, s, t, x;

  if (a == 0.0) {
    return 0.0;
  }

  x = -a * a;
  s = a;
  r = a;

  r = r * x;
  t = r * INVERSE_FACTORIAL_3;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_5;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_7;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_9;
  s = s + t;

  return s;
}

void sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {
  if (a == 0.0) {
    sin_t = 0.0;
    cos_t = 1.0;
  }
  sin_t = sin_taylor_fp32(a);
  cos_t = sqrt(1.0 - sin_t * sin_t);
}

float tan_taylor_fp32(float a) {
    float sin_a;
    float cos_a;

    if (a == 0.0) {
        return 0.0;
    }
    float z = floor(a / TWO_PI);
    float r = a - TWO_PI * z;

    float t;
    float q = floor(r / PI_2 + 0.5);
    int j = int(q);

    if (j < -2 || j > 2) {
        return 1.0 / 0.0;
    }

    t = r - PI_2 * q;

    q = floor(t / PI_16 + 0.5);
    int k = int(q);
    int abs_k = int(abs(float(k)));

    if (abs_k > 4) {
        return 1.0 / 0.0;
    } else {
        t = t - PI_16 * q;
    }

    float u = 0.0;
    float v = 0.0;

    float sin_t, cos_t;
    float s, c;
    sincos_taylor_fp32(t, sin_t, cos_t);

    if (k == 0) {
        s = sin_t;
        c = cos_t;
    } else {
        if (abs(float(abs_k) - 1.0) < 0.5) {
            u = COS_TABLE_0;
            v = SIN_TABLE_0;
        } else if (abs(float(abs_k) - 2.0) < 0.5) {
            u = COS_TABLE_1;
            v = SIN_TABLE_1;
        } else if (abs(float(abs_k) - 3.0) < 0.5) {
            u = COS_TABLE_2;
            v = SIN_TABLE_2;
        } else if (abs(float(abs_k) - 4.0) < 0.5) {
            u = COS_TABLE_3;
            v = SIN_TABLE_3;
        }
        if (k > 0) {
            s = u * sin_t + v * cos_t;
            c = u * cos_t - v * sin_t;
        } else {
            s = u * sin_t - v * cos_t;
            c = u * cos_t + v * sin_t;
        }
    }

    if (j == 0) {
        sin_a = s;
        cos_a = c;
    } else if (j == 1) {
        sin_a = c;
        cos_a = -s;
    } else if (j == -1) {
        sin_a = -c;
        cos_a = s;
    } else {
        sin_a = -s;
        cos_a = -c;
    }
    return sin_a / cos_a;
}
#endif

float tan_fp32(float a) {
#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND
  return tan_taylor_fp32(a);
#else
  return tan(a);
#endif
}
`,NW={name:"fp32",vs:IW,fs:null};function O_(t,e){if(!t)throw new Error("math.gl assertion ".concat(e))}const wr={EPSILON:1e-12,debug:!1,precision:4,printTypes:!1,printDegrees:!1,printRowMajor:!0};function FW(t,{precision:e=wr.precision}={}){return t=OW(t),"".concat(parseFloat(t.toPrecision(e)))}function pu(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&!(t instanceof DataView)}function _r(t,e,n){return VW(t,i=>Math.max(e,Math.min(n,i)))}function _f(t,e,n){return pu(t)?t.map((i,a)=>_f(i,e[a],n)):n*e+(1-n)*t}function Wl(t,e,n){const i=wr.EPSILON;n&&(wr.EPSILON=n);try{if(t===e)return!0;if(pu(t)&&pu(e)){if(t.length!==e.length)return!1;for(let a=0;a<t.length;++a)if(!Wl(t[a],e[a]))return!1;return!0}return t&&t.equals?t.equals(e):e&&e.equals?e.equals(t):typeof t=="number"&&typeof e=="number"?Math.abs(t-e)<=wr.EPSILON*Math.max(1,Math.abs(t),Math.abs(e)):!1}finally{wr.EPSILON=i}}function OW(t){return Math.round(t/wr.EPSILON)*wr.EPSILON}function LW(t){return t.clone?t.clone():new Array(t.length)}function VW(t,e,n){if(pu(t)){const i=t;n=n||LW(i);for(let a=0;a<n.length&&a<i.length;++a)n[a]=e(t[a],a,n);return n}return e(t)}function UW(t){function e(){var n=Reflect.construct(t,Array.from(arguments));return Object.setPrototypeOf(n,Object.getPrototypeOf(this)),n}return e.prototype=Object.create(t.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t,e}class R4 extends UW(Array){clone(){return new this.constructor().copy(this)}fromArray(e,n=0){for(let i=0;i<this.ELEMENTS;++i)this[i]=e[i+n];return this.check()}toArray(e=[],n=0){for(let i=0;i<this.ELEMENTS;++i)e[n+i]=this[i];return e}from(e){return Array.isArray(e)?this.copy(e):this.fromObject(e)}to(e){return e===this?this:pu(e)?this.toArray(e):this.toObject(e)}toTarget(e){return e?this.to(e):this}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(wr)}formatString(e){let n="";for(let i=0;i<this.ELEMENTS;++i)n+=(i>0?", ":"")+FW(this[i],e);return"".concat(e.printTypes?this.constructor.name:"","[").concat(n,"]")}equals(e){if(!e||this.length!==e.length)return!1;for(let n=0;n<this.ELEMENTS;++n)if(!Wl(this[n],e[n]))return!1;return!0}exactEquals(e){if(!e||this.length!==e.length)return!1;for(let n=0;n<this.ELEMENTS;++n)if(this[n]!==e[n])return!1;return!0}negate(){for(let e=0;e<this.ELEMENTS;++e)this[e]=-this[e];return this.check()}lerp(e,n,i){if(i===void 0)return this.lerp(this,e,n);for(let a=0;a<this.ELEMENTS;++a){const l=e[a];this[a]=l+i*(n[a]-l)}return this.check()}min(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(e[n],this[n]);return this.check()}max(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.max(e[n],this[n]);return this.check()}clamp(e,n){for(let i=0;i<this.ELEMENTS;++i)this[i]=Math.min(Math.max(this[i],e[i]),n[i]);return this.check()}add(...e){for(const n of e)for(let i=0;i<this.ELEMENTS;++i)this[i]+=n[i];return this.check()}subtract(...e){for(const n of e)for(let i=0;i<this.ELEMENTS;++i)this[i]-=n[i];return this.check()}scale(e){if(typeof e=="number")for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;else for(let n=0;n<this.ELEMENTS&&n<e.length;++n)this[n]*=e[n];return this.check()}multiplyByScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;return this.check()}check(){if(wr.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}validate(){let e=this.length===this.ELEMENTS;for(let n=0;n<this.ELEMENTS;++n)e=e&&Number.isFinite(this[n]);return e}sub(e){return this.subtract(e)}setScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=e;return this.check()}addScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]+=e;return this.check()}subScalar(e){return this.addScalar(-e)}multiplyScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;return this.check()}divideScalar(e){return this.multiplyByScalar(1/e)}clampScalar(e,n){for(let i=0;i<this.ELEMENTS;++i)this[i]=Math.min(Math.max(this[i],e),n);return this.check()}get elements(){return this}}function BW(t,e){if(t.length!==e)return!1;for(let n=0;n<t.length;++n)if(!Number.isFinite(t[n]))return!1;return!0}function yr(t){if(!Number.isFinite(t))throw new Error("Invalid number ".concat(t));return t}function Xd(t,e,n=""){if(wr.debug&&!BW(t,e))throw new Error("math.gl: ".concat(n," some fields set to invalid numbers'"));return t}class DW extends R4{get x(){return this[0]}set x(e){this[0]=yr(e)}get y(){return this[1]}set y(e){this[1]=yr(e)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let e=0;for(let n=0;n<this.ELEMENTS;++n)e+=this[n]*this[n];return e}magnitudeSquared(){return this.lengthSquared()}distance(e){return Math.sqrt(this.distanceSquared(e))}distanceSquared(e){let n=0;for(let i=0;i<this.ELEMENTS;++i){const a=this[i]-e[i];n+=a*a}return yr(n)}dot(e){let n=0;for(let i=0;i<this.ELEMENTS;++i)n+=this[i]*e[i];return yr(n)}normalize(){const e=this.magnitude();if(e!==0)for(let n=0;n<this.ELEMENTS;++n)this[n]/=e;return this.check()}multiply(...e){for(const n of e)for(let i=0;i<this.ELEMENTS;++i)this[i]*=n[i];return this.check()}divide(...e){for(const n of e)for(let i=0;i<this.ELEMENTS;++i)this[i]/=n[i];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(e){return this.distance(e)}distanceToSquared(e){return this.distanceSquared(e)}getComponent(e){return O_(e>=0&&e<this.ELEMENTS,"index is out of range"),yr(this[e])}setComponent(e,n){return O_(e>=0&&e<this.ELEMENTS,"index is out of range"),this[e]=n,this.check()}addVectors(e,n){return this.copy(e).add(n)}subVectors(e,n){return this.copy(e).subtract(n)}multiplyVectors(e,n){return this.copy(e).multiply(n)}addScaledVector(e,n){return this.add(new this.constructor(e).multiplyScalar(n))}}var O0=1e-6,gu=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function zW(){var t=new gu(2);return gu!=Float32Array&&(t[0]=0,t[1]=0),t}function L_(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function jW(t,e){return t[0]=-e[0],t[1]=-e[1],t}function b4(t,e,n,i){var a=e[0],l=e[1];return t[0]=a+i*(n[0]-a),t[1]=l+i*(n[1]-l),t}function WW(t,e,n){var i=e[0],a=e[1];return t[0]=n[0]*i+n[4]*a+n[12],t[1]=n[1]*i+n[5]*a+n[13],t}(function(){var t=zW();return function(e,n,i,a,l,f){var d,g;for(n||(n=2),i||(i=0),a?g=Math.min(a*n+i,e.length):g=e.length,d=i;d<g;d+=n)t[0]=e[d],t[1]=e[d+1],l(t,t,f),e[d]=t[0],e[d+1]=t[1];return e}})();function GW(t,e,n){const i=e[0],a=e[1],l=n[3]*i+n[7]*a||1;return t[0]=(n[0]*i+n[4]*a)/l,t[1]=(n[1]*i+n[5]*a)/l,t}function k4(t,e,n){const i=e[0],a=e[1],l=e[2],f=n[3]*i+n[7]*a+n[11]*l||1;return t[0]=(n[0]*i+n[4]*a+n[8]*l)/f,t[1]=(n[1]*i+n[5]*a+n[9]*l)/f,t[2]=(n[2]*i+n[6]*a+n[10]*l)/f,t}function ZW(t,e,n){const i=e[0],a=e[1];return t[0]=n[0]*i+n[2]*a,t[1]=n[1]*i+n[3]*a,t[2]=e[2],t}function XW(){var t=new gu(3);return gu!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function HW(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function YW(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function $W(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function JW(t,e,n){var i=e[0],a=e[1],l=e[2],f=n[0],d=n[1],g=n[2];return t[0]=a*g-l*d,t[1]=l*f-i*g,t[2]=i*d-a*f,t}function P4(t,e,n){var i=e[0],a=e[1],l=e[2],f=n[3]*i+n[7]*a+n[11]*l+n[15];return f=f||1,t[0]=(n[0]*i+n[4]*a+n[8]*l+n[12])/f,t[1]=(n[1]*i+n[5]*a+n[9]*l+n[13])/f,t[2]=(n[2]*i+n[6]*a+n[10]*l+n[14])/f,t}function QW(t,e,n){var i=e[0],a=e[1],l=e[2];return t[0]=i*n[0]+a*n[3]+l*n[6],t[1]=i*n[1]+a*n[4]+l*n[7],t[2]=i*n[2]+a*n[5]+l*n[8],t}function qW(t,e,n){var i=n[0],a=n[1],l=n[2],f=n[3],d=e[0],g=e[1],v=e[2],T=a*v-l*g,S=l*d-i*v,x=i*g-a*d,M=a*x-l*S,B=l*T-i*x,W=i*S-a*T,N=f*2;return T*=N,S*=N,x*=N,M*=2,B*=2,W*=2,t[0]=d+T+M,t[1]=g+S+B,t[2]=v+x+W,t}function KW(t,e,n,i){var a=[],l=[];return a[0]=e[0]-n[0],a[1]=e[1]-n[1],a[2]=e[2]-n[2],l[0]=a[0],l[1]=a[1]*Math.cos(i)-a[2]*Math.sin(i),l[2]=a[1]*Math.sin(i)+a[2]*Math.cos(i),t[0]=l[0]+n[0],t[1]=l[1]+n[1],t[2]=l[2]+n[2],t}function eG(t,e,n,i){var a=[],l=[];return a[0]=e[0]-n[0],a[1]=e[1]-n[1],a[2]=e[2]-n[2],l[0]=a[2]*Math.sin(i)+a[0]*Math.cos(i),l[1]=a[1],l[2]=a[2]*Math.cos(i)-a[0]*Math.sin(i),t[0]=l[0]+n[0],t[1]=l[1]+n[1],t[2]=l[2]+n[2],t}function tG(t,e,n,i){var a=[],l=[];return a[0]=e[0]-n[0],a[1]=e[1]-n[1],a[2]=e[2]-n[2],l[0]=a[0]*Math.cos(i)-a[1]*Math.sin(i),l[1]=a[0]*Math.sin(i)+a[1]*Math.cos(i),l[2]=a[2],t[0]=l[0]+n[0],t[1]=l[1]+n[1],t[2]=l[2]+n[2],t}function nG(t,e){var n=t[0],i=t[1],a=t[2],l=e[0],f=e[1],d=e[2],g=Math.sqrt(n*n+i*i+a*a),v=Math.sqrt(l*l+f*f+d*d),T=g*v,S=T&&$W(t,e)/T;return Math.acos(Math.min(Math.max(S,-1),1))}var rG=HW;(function(){var t=XW();return function(e,n,i,a,l,f){var d,g;for(n||(n=3),i||(i=0),a?g=Math.min(a*n+i,e.length):g=e.length,d=i;d<g;d+=n)t[0]=e[d],t[1]=e[d+1],t[2]=e[d+2],l(t,t,f),e[d]=t[0],e[d+1]=t[1],e[d+2]=t[2];return e}})();const Hd=[0,0,0];let l0;class Bi extends DW{static get ZERO(){return l0||(l0=new Bi(0,0,0),Object.freeze(l0)),l0}constructor(e=0,n=0,i=0){super(-0,-0,-0),arguments.length===1&&pu(e)?this.copy(e):(wr.debug&&(yr(e),yr(n),yr(i)),this[0]=e,this[1]=n,this[2]=i)}set(e,n,i){return this[0]=e,this[1]=n,this[2]=i,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this.check()}fromObject(e){return wr.debug&&(yr(e.x),yr(e.y),yr(e.z)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this.check()}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e}get ELEMENTS(){return 3}get z(){return this[2]}set z(e){this[2]=yr(e)}angle(e){return nG(this,e)}cross(e){return JW(this,this,e),this.check()}rotateX({radians:e,origin:n=Hd}){return KW(this,this,n,e),this.check()}rotateY({radians:e,origin:n=Hd}){return eG(this,this,n,e),this.check()}rotateZ({radians:e,origin:n=Hd}){return tG(this,this,n,e),this.check()}transform(e){return this.transformAsPoint(e)}transformAsPoint(e){return P4(this,this,e),this.check()}transformAsVector(e){return k4(this,this,e),this.check()}transformByMatrix3(e){return QW(this,this,e),this.check()}transformByMatrix2(e){return ZW(this,this,e),this.check()}transformByQuaternion(e){return qW(this,this,e),this.check()}}class iG extends R4{toString(){let e="[";if(wr.printRowMajor){e+="row-major:";for(let n=0;n<this.RANK;++n)for(let i=0;i<this.RANK;++i)e+=" ".concat(this[i*this.RANK+n])}else{e+="column-major:";for(let n=0;n<this.ELEMENTS;++n)e+=" ".concat(this[n])}return e+="]",e}getElementIndex(e,n){return n*this.RANK+e}getElement(e,n){return this[n*this.RANK+e]}setElement(e,n,i){return this[n*this.RANK+e]=yr(i),this}getColumn(e,n=new Array(this.RANK).fill(-0)){const i=e*this.RANK;for(let a=0;a<this.RANK;++a)n[a]=this[i+a];return n}setColumn(e,n){const i=e*this.RANK;for(let a=0;a<this.RANK;++a)this[i+a]=n[a];return this}}function sG(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function oG(t,e){if(t===e){var n=e[1],i=e[2],a=e[3],l=e[6],f=e[7],d=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=i,t[9]=l,t[11]=e[14],t[12]=a,t[13]=f,t[14]=d}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function Cg(t,e){var n=e[0],i=e[1],a=e[2],l=e[3],f=e[4],d=e[5],g=e[6],v=e[7],T=e[8],S=e[9],x=e[10],M=e[11],B=e[12],W=e[13],N=e[14],F=e[15],V=n*d-i*f,j=n*g-a*f,X=n*v-l*f,Q=i*g-a*d,K=i*v-l*d,ae=a*v-l*g,fe=T*W-S*B,se=T*N-x*B,_e=T*F-M*B,we=S*N-x*W,qe=S*F-M*W,kt=x*F-M*N,Pe=V*kt-j*qe+X*we+Q*_e-K*se+ae*fe;return Pe?(Pe=1/Pe,t[0]=(d*kt-g*qe+v*we)*Pe,t[1]=(a*qe-i*kt-l*we)*Pe,t[2]=(W*ae-N*K+F*Q)*Pe,t[3]=(x*K-S*ae-M*Q)*Pe,t[4]=(g*_e-f*kt-v*se)*Pe,t[5]=(n*kt-a*_e+l*se)*Pe,t[6]=(N*X-B*ae-F*j)*Pe,t[7]=(T*ae-x*X+M*j)*Pe,t[8]=(f*qe-d*_e+v*fe)*Pe,t[9]=(i*_e-n*qe-l*fe)*Pe,t[10]=(B*K-W*X+F*V)*Pe,t[11]=(S*X-T*K-M*V)*Pe,t[12]=(d*se-f*we-g*fe)*Pe,t[13]=(n*we-i*se+a*fe)*Pe,t[14]=(W*j-B*Q-N*V)*Pe,t[15]=(T*Q-S*j+x*V)*Pe,t):null}function aG(t){var e=t[0],n=t[1],i=t[2],a=t[3],l=t[4],f=t[5],d=t[6],g=t[7],v=t[8],T=t[9],S=t[10],x=t[11],M=t[12],B=t[13],W=t[14],N=t[15],F=e*f-n*l,V=e*d-i*l,j=e*g-a*l,X=n*d-i*f,Q=n*g-a*f,K=i*g-a*d,ae=v*B-T*M,fe=v*W-S*M,se=v*N-x*M,_e=T*W-S*B,we=T*N-x*B,qe=S*N-x*W;return F*qe-V*we+j*_e+X*se-Q*fe+K*ae}function Ho(t,e,n){var i=e[0],a=e[1],l=e[2],f=e[3],d=e[4],g=e[5],v=e[6],T=e[7],S=e[8],x=e[9],M=e[10],B=e[11],W=e[12],N=e[13],F=e[14],V=e[15],j=n[0],X=n[1],Q=n[2],K=n[3];return t[0]=j*i+X*d+Q*S+K*W,t[1]=j*a+X*g+Q*x+K*N,t[2]=j*l+X*v+Q*M+K*F,t[3]=j*f+X*T+Q*B+K*V,j=n[4],X=n[5],Q=n[6],K=n[7],t[4]=j*i+X*d+Q*S+K*W,t[5]=j*a+X*g+Q*x+K*N,t[6]=j*l+X*v+Q*M+K*F,t[7]=j*f+X*T+Q*B+K*V,j=n[8],X=n[9],Q=n[10],K=n[11],t[8]=j*i+X*d+Q*S+K*W,t[9]=j*a+X*g+Q*x+K*N,t[10]=j*l+X*v+Q*M+K*F,t[11]=j*f+X*T+Q*B+K*V,j=n[12],X=n[13],Q=n[14],K=n[15],t[12]=j*i+X*d+Q*S+K*W,t[13]=j*a+X*g+Q*x+K*N,t[14]=j*l+X*v+Q*M+K*F,t[15]=j*f+X*T+Q*B+K*V,t}function wf(t,e,n){var i=n[0],a=n[1],l=n[2],f,d,g,v,T,S,x,M,B,W,N,F;return e===t?(t[12]=e[0]*i+e[4]*a+e[8]*l+e[12],t[13]=e[1]*i+e[5]*a+e[9]*l+e[13],t[14]=e[2]*i+e[6]*a+e[10]*l+e[14],t[15]=e[3]*i+e[7]*a+e[11]*l+e[15]):(f=e[0],d=e[1],g=e[2],v=e[3],T=e[4],S=e[5],x=e[6],M=e[7],B=e[8],W=e[9],N=e[10],F=e[11],t[0]=f,t[1]=d,t[2]=g,t[3]=v,t[4]=T,t[5]=S,t[6]=x,t[7]=M,t[8]=B,t[9]=W,t[10]=N,t[11]=F,t[12]=f*i+T*a+B*l+e[12],t[13]=d*i+S*a+W*l+e[13],t[14]=g*i+x*a+N*l+e[14],t[15]=v*i+M*a+F*l+e[15]),t}function pm(t,e,n){var i=n[0],a=n[1],l=n[2];return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*a,t[5]=e[5]*a,t[6]=e[6]*a,t[7]=e[7]*a,t[8]=e[8]*l,t[9]=e[9]*l,t[10]=e[10]*l,t[11]=e[11]*l,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function uG(t,e,n,i){var a=i[0],l=i[1],f=i[2],d=Math.hypot(a,l,f),g,v,T,S,x,M,B,W,N,F,V,j,X,Q,K,ae,fe,se,_e,we,qe,kt,Pe,Ee;return d<O0?null:(d=1/d,a*=d,l*=d,f*=d,g=Math.sin(n),v=Math.cos(n),T=1-v,S=e[0],x=e[1],M=e[2],B=e[3],W=e[4],N=e[5],F=e[6],V=e[7],j=e[8],X=e[9],Q=e[10],K=e[11],ae=a*a*T+v,fe=l*a*T+f*g,se=f*a*T-l*g,_e=a*l*T-f*g,we=l*l*T+v,qe=f*l*T+a*g,kt=a*f*T+l*g,Pe=l*f*T-a*g,Ee=f*f*T+v,t[0]=S*ae+W*fe+j*se,t[1]=x*ae+N*fe+X*se,t[2]=M*ae+F*fe+Q*se,t[3]=B*ae+V*fe+K*se,t[4]=S*_e+W*we+j*qe,t[5]=x*_e+N*we+X*qe,t[6]=M*_e+F*we+Q*qe,t[7]=B*_e+V*we+K*qe,t[8]=S*kt+W*Pe+j*Ee,t[9]=x*kt+N*Pe+X*Ee,t[10]=M*kt+F*Pe+Q*Ee,t[11]=B*kt+V*Pe+K*Ee,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function M4(t,e,n){var i=Math.sin(n),a=Math.cos(n),l=e[4],f=e[5],d=e[6],g=e[7],v=e[8],T=e[9],S=e[10],x=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=l*a+v*i,t[5]=f*a+T*i,t[6]=d*a+S*i,t[7]=g*a+x*i,t[8]=v*a-l*i,t[9]=T*a-f*i,t[10]=S*a-d*i,t[11]=x*a-g*i,t}function lG(t,e,n){var i=Math.sin(n),a=Math.cos(n),l=e[0],f=e[1],d=e[2],g=e[3],v=e[8],T=e[9],S=e[10],x=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=l*a-v*i,t[1]=f*a-T*i,t[2]=d*a-S*i,t[3]=g*a-x*i,t[8]=l*i+v*a,t[9]=f*i+T*a,t[10]=d*i+S*a,t[11]=g*i+x*a,t}function C4(t,e,n){var i=Math.sin(n),a=Math.cos(n),l=e[0],f=e[1],d=e[2],g=e[3],v=e[4],T=e[5],S=e[6],x=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=l*a+v*i,t[1]=f*a+T*i,t[2]=d*a+S*i,t[3]=g*a+x*i,t[4]=v*a-l*i,t[5]=T*a-f*i,t[6]=S*a-d*i,t[7]=x*a-g*i,t}function cG(t,e){var n=e[0],i=e[1],a=e[2],l=e[3],f=n+n,d=i+i,g=a+a,v=n*f,T=i*f,S=i*d,x=a*f,M=a*d,B=a*g,W=l*f,N=l*d,F=l*g;return t[0]=1-S-B,t[1]=T+F,t[2]=x-N,t[3]=0,t[4]=T-F,t[5]=1-v-B,t[6]=M+W,t[7]=0,t[8]=x+N,t[9]=M-W,t[10]=1-v-S,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function fG(t,e,n,i,a,l,f){var d=1/(n-e),g=1/(a-i),v=1/(l-f);return t[0]=l*2*d,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=l*2*g,t[6]=0,t[7]=0,t[8]=(n+e)*d,t[9]=(a+i)*g,t[10]=(f+l)*v,t[11]=-1,t[12]=0,t[13]=0,t[14]=f*l*2*v,t[15]=0,t}function hG(t,e,n,i,a){var l=1/Math.tan(e/2),f;return t[0]=l/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,a!=null&&a!==1/0?(f=1/(i-a),t[10]=(a+i)*f,t[14]=2*a*i*f):(t[10]=-1,t[14]=-2*i),t}var dG=hG;function pG(t,e,n,i,a,l,f){var d=1/(e-n),g=1/(i-a),v=1/(l-f);return t[0]=-2*d,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*g,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*v,t[11]=0,t[12]=(e+n)*d,t[13]=(a+i)*g,t[14]=(f+l)*v,t[15]=1,t}var gG=pG;function mG(t,e,n,i){var a,l,f,d,g,v,T,S,x,M,B=e[0],W=e[1],N=e[2],F=i[0],V=i[1],j=i[2],X=n[0],Q=n[1],K=n[2];return Math.abs(B-X)<O0&&Math.abs(W-Q)<O0&&Math.abs(N-K)<O0?sG(t):(T=B-X,S=W-Q,x=N-K,M=1/Math.hypot(T,S,x),T*=M,S*=M,x*=M,a=V*x-j*S,l=j*T-F*x,f=F*S-V*T,M=Math.hypot(a,l,f),M?(M=1/M,a*=M,l*=M,f*=M):(a=0,l=0,f=0),d=S*f-x*l,g=x*a-T*f,v=T*l-S*a,M=Math.hypot(d,g,v),M?(M=1/M,d*=M,g*=M,v*=M):(d=0,g=0,v=0),t[0]=a,t[1]=d,t[2]=T,t[3]=0,t[4]=l,t[5]=g,t[6]=S,t[7]=0,t[8]=f,t[9]=v,t[10]=x,t[11]=0,t[12]=-(a*B+l*W+f*N),t[13]=-(d*B+g*W+v*N),t[14]=-(T*B+S*W+x*N),t[15]=1,t)}function AG(){var t=new gu(4);return gu!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function yG(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function cc(t,e,n){var i=e[0],a=e[1],l=e[2],f=e[3];return t[0]=n[0]*i+n[4]*a+n[8]*l+n[12]*f,t[1]=n[1]*i+n[5]*a+n[9]*l+n[13]*f,t[2]=n[2]*i+n[6]*a+n[10]*l+n[14]*f,t[3]=n[3]*i+n[7]*a+n[11]*l+n[15]*f,t}(function(){var t=AG();return function(e,n,i,a,l,f){var d,g;for(n||(n=4),i||(i=0),a?g=Math.min(a*n+i,e.length):g=e.length,d=i;d<g;d+=n)t[0]=e[d],t[1]=e[d+1],t[2]=e[d+2],t[3]=e[d+3],l(t,t,f),e[d]=t[0],e[d+1]=t[1],e[d+2]=t[2],e[d+3]=t[3];return e}})();var Ig;(function(t){t[t.COL0ROW0=0]="COL0ROW0",t[t.COL0ROW1=1]="COL0ROW1",t[t.COL0ROW2=2]="COL0ROW2",t[t.COL0ROW3=3]="COL0ROW3",t[t.COL1ROW0=4]="COL1ROW0",t[t.COL1ROW1=5]="COL1ROW1",t[t.COL1ROW2=6]="COL1ROW2",t[t.COL1ROW3=7]="COL1ROW3",t[t.COL2ROW0=8]="COL2ROW0",t[t.COL2ROW1=9]="COL2ROW1",t[t.COL2ROW2=10]="COL2ROW2",t[t.COL2ROW3=11]="COL2ROW3",t[t.COL3ROW0=12]="COL3ROW0",t[t.COL3ROW1=13]="COL3ROW1",t[t.COL3ROW2=14]="COL3ROW2",t[t.COL3ROW3=15]="COL3ROW3"})(Ig||(Ig={}));const vG=45*Math.PI/180,_G=1,Yd=.1,$d=500,wG=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);class hi extends iG{static get IDENTITY(){return EG()}static get ZERO(){return TG()}get ELEMENTS(){return 16}get RANK(){return 4}get INDICES(){return Ig}constructor(e){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),arguments.length===1&&Array.isArray(e)?this.copy(e):this.identity()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this[9]=e[9],this[10]=e[10],this[11]=e[11],this[12]=e[12],this[13]=e[13],this[14]=e[14],this[15]=e[15],this.check()}set(e,n,i,a,l,f,d,g,v,T,S,x,M,B,W,N){return this[0]=e,this[1]=n,this[2]=i,this[3]=a,this[4]=l,this[5]=f,this[6]=d,this[7]=g,this[8]=v,this[9]=T,this[10]=S,this[11]=x,this[12]=M,this[13]=B,this[14]=W,this[15]=N,this.check()}setRowMajor(e,n,i,a,l,f,d,g,v,T,S,x,M,B,W,N){return this[0]=e,this[1]=l,this[2]=v,this[3]=M,this[4]=n,this[5]=f,this[6]=T,this[7]=B,this[8]=i,this[9]=d,this[10]=S,this[11]=W,this[12]=a,this[13]=g,this[14]=x,this[15]=N,this.check()}toRowMajor(e){return e[0]=this[0],e[1]=this[4],e[2]=this[8],e[3]=this[12],e[4]=this[1],e[5]=this[5],e[6]=this[9],e[7]=this[13],e[8]=this[2],e[9]=this[6],e[10]=this[10],e[11]=this[14],e[12]=this[3],e[13]=this[7],e[14]=this[11],e[15]=this[15],e}identity(){return this.copy(wG)}fromObject(e){return this.check()}fromQuaternion(e){return cG(this,e),this.check()}frustum(e){const{left:n,right:i,bottom:a,top:l,near:f=Yd,far:d=$d}=e;return d===1/0?SG(this,n,i,a,l,f):fG(this,n,i,a,l,f,d),this.check()}lookAt(e){const{eye:n,center:i=[0,0,0],up:a=[0,1,0]}=e;return mG(this,n,i,a),this.check()}ortho(e){const{left:n,right:i,bottom:a,top:l,near:f=Yd,far:d=$d}=e;return gG(this,n,i,a,l,f,d),this.check()}orthographic(e){const{fovy:n=vG,aspect:i=_G,focalDistance:a=1,near:l=Yd,far:f=$d}=e;V_(n);const d=n/2,g=a*Math.tan(d),v=g*i;return this.ortho({left:-v,right:v,bottom:-g,top:g,near:l,far:f})}perspective(e){const{fovy:n=45*Math.PI/180,aspect:i=1,near:a=.1,far:l=500}=e;return V_(n),dG(this,n,i,a,l),this.check()}determinant(){return aG(this)}getScale(e=[-0,-0,-0]){return e[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),e[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),e[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),e}getTranslation(e=[-0,-0,-0]){return e[0]=this[12],e[1]=this[13],e[2]=this[14],e}getRotation(e,n){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],n=n||[-0,-0,-0];const i=this.getScale(n),a=1/i[0],l=1/i[1],f=1/i[2];return e[0]=this[0]*a,e[1]=this[1]*l,e[2]=this[2]*f,e[3]=0,e[4]=this[4]*a,e[5]=this[5]*l,e[6]=this[6]*f,e[7]=0,e[8]=this[8]*a,e[9]=this[9]*l,e[10]=this[10]*f,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}getRotationMatrix3(e,n){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0],n=n||[-0,-0,-0];const i=this.getScale(n),a=1/i[0],l=1/i[1],f=1/i[2];return e[0]=this[0]*a,e[1]=this[1]*l,e[2]=this[2]*f,e[3]=this[4]*a,e[4]=this[5]*l,e[5]=this[6]*f,e[6]=this[8]*a,e[7]=this[9]*l,e[8]=this[10]*f,e}transpose(){return oG(this,this),this.check()}invert(){return Cg(this,this),this.check()}multiplyLeft(e){return Ho(this,e,this),this.check()}multiplyRight(e){return Ho(this,this,e),this.check()}rotateX(e){return M4(this,this,e),this.check()}rotateY(e){return lG(this,this,e),this.check()}rotateZ(e){return C4(this,this,e),this.check()}rotateXYZ(e){return this.rotateX(e[0]).rotateY(e[1]).rotateZ(e[2])}rotateAxis(e,n){return uG(this,this,e,n),this.check()}scale(e){return pm(this,this,Array.isArray(e)?e:[e,e,e]),this.check()}translate(e){return wf(this,this,e),this.check()}transform(e,n){return e.length===4?(n=cc(n||[-0,-0,-0,-0],e,this),Xd(n,4),n):this.transformAsPoint(e,n)}transformAsPoint(e,n){const{length:i}=e;let a;switch(i){case 2:a=WW(n||[-0,-0],e,this);break;case 3:a=P4(n||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return Xd(a,e.length),a}transformAsVector(e,n){let i;switch(e.length){case 2:i=GW(n||[-0,-0],e,this);break;case 3:i=k4(n||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return Xd(i,e.length),i}transformPoint(e,n){return this.transformAsPoint(e,n)}transformVector(e,n){return this.transformAsPoint(e,n)}transformDirection(e,n){return this.transformAsVector(e,n)}makeRotationX(e){return this.identity().rotateX(e)}makeTranslation(e,n,i){return this.identity().translate([e,n,i])}}let c0,f0;function TG(){return c0||(c0=new hi([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Object.freeze(c0)),c0}function EG(){return f0||(f0=new hi,Object.freeze(f0)),f0}function V_(t){if(t>Math.PI*2)throw Error("expected radians")}function SG(t,e,n,i,a,l){const f=2*l/(n-e),d=2*l/(a-i),g=(n+e)/(n-e),v=(a+i)/(a-i),T=-1,S=-1,x=-2*l;return t[0]=f,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=d,t[6]=0,t[7]=0,t[8]=g,t[9]=v,t[10]=T,t[11]=S,t[12]=0,t[13]=0,t[14]=x,t[15]=0,t}const U_=`#if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))

struct AmbientLight {
 vec3 color;
};

struct PointLight {
 vec3 color;
 vec3 position;
 vec3 attenuation;
};

struct DirectionalLight {
  vec3 color;
  vec3 direction;
};

uniform AmbientLight lighting_uAmbientLight;
uniform PointLight lighting_uPointLight[MAX_LIGHTS];
uniform DirectionalLight lighting_uDirectionalLight[MAX_LIGHTS];
uniform int lighting_uPointLightCount;
uniform int lighting_uDirectionalLightCount;

uniform bool lighting_uEnabled;

float getPointLightAttenuation(PointLight pointLight, float distance) {
  return pointLight.attenuation.x
       + pointLight.attenuation.y * distance
       + pointLight.attenuation.z * distance * distance;
}

#endif
`,xG={lightSources:{}};function Jd(){let{color:t=[0,0,0],intensity:e=1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t.map(n=>n*e/255)}function RG(t){let{ambientLight:e,pointLights:n=[],directionalLights:i=[]}=t;const a={};return e?a["lighting_uAmbientLight.color"]=Jd(e):a["lighting_uAmbientLight.color"]=[0,0,0],n.forEach((l,f)=>{a["lighting_uPointLight[".concat(f,"].color")]=Jd(l),a["lighting_uPointLight[".concat(f,"].position")]=l.position,a["lighting_uPointLight[".concat(f,"].attenuation")]=l.attenuation||[1,0,0]}),a.lighting_uPointLightCount=n.length,i.forEach((l,f)=>{a["lighting_uDirectionalLight[".concat(f,"].color")]=Jd(l),a["lighting_uDirectionalLight[".concat(f,"].direction")]=l.direction}),a.lighting_uDirectionalLightCount=i.length,a}function I4(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:xG;if("lightSources"in t){const{ambientLight:e,pointLights:n,directionalLights:i}=t.lightSources||{};return e||n&&n.length>0||i&&i.length>0?Object.assign({},RG({ambientLight:e,pointLights:n,directionalLights:i}),{lighting_uEnabled:!0}):{lighting_uEnabled:!1}}if("lights"in t){const e={pointLights:[],directionalLights:[]};for(const n of t.lights||[])switch(n.type){case"ambient":e.ambientLight=n;break;case"directional":e.directionalLights.push(n);break;case"point":e.pointLights.push(n);break}return I4({lightSources:e})}return{}}const bG={name:"lights",vs:U_,fs:U_,getUniforms:I4,defines:{MAX_LIGHTS:3}},kG=new Uint8Array([0,255,255,255]),PG={pickingSelectedColor:null,pickingHighlightColor:kG,pickingActive:!1,pickingAttribute:!1};function MG(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:PG;const e={};if(t.pickingSelectedColor!==void 0)if(!t.pickingSelectedColor)e.picking_uSelectedColorValid=0;else{const n=t.pickingSelectedColor.slice(0,3);e.picking_uSelectedColorValid=1,e.picking_uSelectedColor=n}if(t.pickingHighlightColor){const n=Array.from(t.pickingHighlightColor,i=>i/255);Number.isFinite(n[3])||(n[3]=1),e.picking_uHighlightColor=n}return t.pickingActive!==void 0&&(e.picking_uActive=!!t.pickingActive,e.picking_uAttribute=!!t.pickingAttribute),e}const CG=`uniform bool picking_uActive;
uniform bool picking_uAttribute;
uniform vec3 picking_uSelectedColor;
uniform bool picking_uSelectedColorValid;

out vec4 picking_vRGBcolor_Avalid;

const float COLOR_SCALE = 1. / 255.;

bool picking_isColorValid(vec3 color) {
  return dot(color, vec3(1.0)) > 0.001;
}

bool isVertexPicked(vec3 vertexColor) {
  return
    picking_uSelectedColorValid &&
    !picking_isColorValid(abs(vertexColor - picking_uSelectedColor));
}

void picking_setPickingColor(vec3 pickingColor) {
  if (picking_uActive) {
    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));

    if (!picking_uAttribute) {
      picking_vRGBcolor_Avalid.rgb = pickingColor * COLOR_SCALE;
    }
  } else {
    picking_vRGBcolor_Avalid.a = float(isVertexPicked(pickingColor));
  }
}

void picking_setPickingAttribute(float value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.r = value;
  }
}
void picking_setPickingAttribute(vec2 value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.rg = value;
  }
}
void picking_setPickingAttribute(vec3 value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.rgb = value;
  }
}
`,IG=`uniform bool picking_uActive;
uniform vec3 picking_uSelectedColor;
uniform vec4 picking_uHighlightColor;

in vec4 picking_vRGBcolor_Avalid;
vec4 picking_filterHighlightColor(vec4 color) {
  if (picking_uActive) {
    return color;
  }
  bool selected = bool(picking_vRGBcolor_Avalid.a);

  if (selected) {
    float highLightAlpha = picking_uHighlightColor.a;
    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);
    float highLightRatio = highLightAlpha / blendedAlpha;

    vec3 blendedRGB = mix(color.rgb, picking_uHighlightColor.rgb, highLightRatio);
    return vec4(blendedRGB, blendedAlpha);
  } else {
    return color;
  }
}
vec4 picking_filterPickingColor(vec4 color) {
  if (picking_uActive) {
    if (picking_vRGBcolor_Avalid.a == 0.0) {
      discard;
    }
    return picking_vRGBcolor_Avalid;
  }
  return color;
}
vec4 picking_filterColor(vec4 color) {
  vec4 highightColor = picking_filterHighlightColor(color);
  return picking_filterPickingColor(highightColor);
}

`,NG={name:"picking",vs:CG,fs:IG,getUniforms:MG},FG=`
uniform float lighting_uAmbient;
uniform float lighting_uDiffuse;
uniform float lighting_uShininess;
uniform vec3  lighting_uSpecularColor;

vec3 lighting_getLightColor(vec3 surfaceColor, vec3 light_direction, vec3 view_direction, vec3 normal_worldspace, vec3 color) {
    vec3 halfway_direction = normalize(light_direction + view_direction);
    float lambertian = dot(light_direction, normal_worldspace);
    float specular = 0.0;
    if (lambertian > 0.0) {
      float specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);
      specular = pow(specular_angle, lighting_uShininess);
    }
    lambertian = max(lambertian, 0.0);
    return (lambertian * lighting_uDiffuse * surfaceColor + specular * lighting_uSpecularColor) * color;
}

vec3 lighting_getLightColor(vec3 surfaceColor, vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {
  vec3 lightColor = surfaceColor;

  if (lighting_uEnabled) {
    vec3 view_direction = normalize(cameraPosition - position_worldspace);
    lightColor = lighting_uAmbient * surfaceColor * lighting_uAmbientLight.color;

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uPointLightCount) {
        break;
      }
      PointLight pointLight = lighting_uPointLight[i];
      vec3 light_position_worldspace = pointLight.position;
      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);
      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);
    }

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uDirectionalLightCount) {
        break;
      }
      DirectionalLight directionalLight = lighting_uDirectionalLight[i];
      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);
    }
  }
  return lightColor;
}

vec3 lighting_getSpecularLightColor(vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {
  vec3 lightColor = vec3(0, 0, 0);
  vec3 surfaceColor = vec3(0, 0, 0);

  if (lighting_uEnabled) {
    vec3 view_direction = normalize(cameraPosition - position_worldspace);

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uPointLightCount) {
        break;
      }
      PointLight pointLight = lighting_uPointLight[i];
      vec3 light_position_worldspace = pointLight.position;
      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);
      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);
    }

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uDirectionalLightCount) {
        break;
      }
      DirectionalLight directionalLight = lighting_uDirectionalLight[i];
      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);
    }
  }
  return lightColor;
}
`,OG={};function LG(t){const{ambient:e=.35,diffuse:n=.6,shininess:i=32,specularColor:a=[30,30,30]}=t;return{lighting_uAmbient:e,lighting_uDiffuse:n,lighting_uShininess:i,lighting_uSpecularColor:a.map(l=>l/255)}}function VG(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:OG;if(!("material"in t))return{};const{material:e}=t;return e?LG(e):{lighting_uEnabled:!1}}const UG={name:"gouraud-lighting",dependencies:[bG],vs:FG,defines:{LIGHTING_VERTEX:1},getUniforms:VG},BG=`attribute float transform_elementID;
vec2 transform_getPixelSizeHalf(vec2 size) {
  return vec2(1.) / (2. * size);
}

vec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {
  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);
  float xIndex = transform_elementID - (yIndex * texSize[0]);
  return vec2(xIndex, yIndex);
}
vec2 transform_getTexCoord(vec2 size) {
  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);
  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);
  vec2 coord = indices / size + pixelSizeHalf;
  return coord;
}
vec2 transform_getPos(vec2 size) {
  vec2 texCoord = transform_getTexCoord(size);
  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);
  return pos;
}
vec4 transform_getInput(sampler2D texSampler, vec2 size) {
  vec2 texCoord = transform_getTexCoord(size);
  vec4 textureColor = texture2D(texSampler, texCoord);
  return textureColor;
}
`,DG={name:"transform",vs:BG,fs:null};class fc{static getDefaultProgramManager(e){return e.luma=e.luma||{},e.luma.defaultProgramManager=e.luma.defaultProgramManager||new fc(e),e.luma.defaultProgramManager}constructor(e){this.gl=e,this._programCache={},this._getUniforms={},this._registeredModules={},this._hookFunctions=[],this._defaultModules=[],this._hashes={},this._hashCounter=0,this.stateHash=0,this._useCounts={}}addDefaultModule(e){this._defaultModules.find(n=>n.name===e.name)||this._defaultModules.push(e),this.stateHash++}removeDefaultModule(e){const n=typeof e=="string"?e:e.name;this._defaultModules=this._defaultModules.filter(i=>i.name!==n),this.stateHash++}addShaderHook(e,n){n&&(e=Object.assign(n,{hook:e})),this._hookFunctions.push(e),this.stateHash++}get(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{vs:n="",fs:i="",defines:a={},inject:l={},varyings:f=[],bufferMode:d=35981,transpileToGLSL100:g=!1}=e,v=this._getModuleList(e.modules),T=this._getHash(n),S=this._getHash(i),x=v.map(j=>this._getHash(j.name)).sort(),M=f.map(j=>this._getHash(j)),B=Object.keys(a).sort(),W=Object.keys(l).sort(),N=[],F=[];for(const j of B)N.push(this._getHash(j)),N.push(this._getHash(a[j]));for(const j of W)F.push(this._getHash(j)),F.push(this._getHash(l[j]));const V="".concat(T,"/").concat(S,"D").concat(N.join("/"),"M").concat(x.join("/"),"I").concat(F.join("/"),"V").concat(M.join("/"),"H").concat(this.stateHash,"B").concat(d).concat(g?"T":"");if(!this._programCache[V]){const j=_W(this.gl,{vs:n,fs:i,modules:v,inject:l,defines:a,hookFunctions:this._hookFunctions,transpileToGLSL100:g});this._programCache[V]=new m4(this.gl,{hash:V,vs:j.vs,fs:j.fs,varyings:f,bufferMode:d}),this._getUniforms[V]=j.getUniforms||(X=>{}),this._useCounts[V]=0}return this._useCounts[V]++,this._programCache[V]}getUniforms(e){return this._getUniforms[e.hash]||null}release(e){const n=e.hash;this._useCounts[n]--,this._useCounts[n]===0&&(this._programCache[n].delete(),delete this._programCache[n],delete this._getUniforms[n],delete this._useCounts[n])}_getHash(e){return this._hashes[e]===void 0&&(this._hashes[e]=this._hashCounter++),this._hashes[e]}_getModuleList(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const n=new Array(this._defaultModules.length+e.length),i={};let a=0;for(let l=0,f=this._defaultModules.length;l<f;++l){const d=this._defaultModules[l],g=d.name;n[a++]=d,i[g]=!0}for(let l=0,f=e.length;l<f;++l){const d=e[l],g=d.name;i[g]||(n[a++]=d,i[g]=!0)}return n.length=a,n}}const zG={POSITION:"positions",NORMAL:"normals",COLOR_0:"colors",TEXCOORD_0:"texCoords",TEXCOORD_1:"texCoords1",TEXCOORD_2:"texCoords2"};function jG(t,e,n){const i={};let a=e.indices;for(const l in e.attributes){const f=e.attributes[l],d=WG(l,n);if(l==="indices")a=f;else if(f.constant)i[d]=f.value;else{const g=f.value,v={...f};delete v.value,i[d]=[new Tt(t,g),v],GG(l,v)}}if(a){const l=a.value||a;ve(l instanceof Uint16Array||l instanceof Uint32Array,'attribute array for "indices" must be of integer type');const f={size:1,isIndexed:a.isIndexed===void 0?!0:a.isIndexed};i.indices=[new Tt(t,{data:l,target:34963}),f]}return i}function WG(t,e){const{attributeMap:n=zG}=e||{};return n&&n[t]||t}function GG(t,e){let n;switch(t){case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":n="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":n="vectors";break}switch(n){case"vectors":e.size=e.size||3;break;case"uvs":e.size=e.size||2;break}ve(Number.isFinite(e.size),"attribute ".concat(t," needs size"))}const Ca=2,ZG=1e4,XG="Model needs drawMode and vertexCount",B_=()=>{},HG={};class N4{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{id:i=eo("model")}=n;ve(qf(e)),this.id=i,this.gl=e,this.id=n.id||eo("Model"),this.lastLogTime=0,this.animated=!1,this.initialize(n)}initialize(e){this.props={},this.programManager=e.programManager||fc.getDefaultProgramManager(this.gl),this._programManagerState=-1,this._managedProgram=!1;const{program:n=null,vs:i,fs:a,modules:l,defines:f,inject:d,varyings:g,bufferMode:v,transpileToGLSL100:T}=e;this.programProps={program:n,vs:i,fs:a,modules:l,defines:f,inject:d,varyings:g,bufferMode:v,transpileToGLSL100:T},this.program=null,this.vertexArray=null,this._programDirty=!0,this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.uniforms={},this.pickable=!0,this._checkProgram(),this.setUniforms(Object.assign({},this.getModuleUniforms(e.moduleSettings))),this.drawMode=e.drawMode!==void 0?e.drawMode:4,this.vertexCount=e.vertexCount||0,this.geometryBuffers={},this.isInstanced=e.isInstanced||e.instanced||e.instanceCount>0,this._setModelProps(e),this.geometry={},ve(this.drawMode!==void 0&&Number.isFinite(this.vertexCount),XG)}setProps(e){this._setModelProps(e)}delete(){for(const e in this._attributes)this._attributes[e]!==this.attributes[e]&&this._attributes[e].delete();this._managedProgram&&(this.programManager.release(this.program),this._managedProgram=!1),this.vertexArray.delete(),this._deleteGeometryBuffers()}getDrawMode(){return this.drawMode}getVertexCount(){return this.vertexCount}getInstanceCount(){return this.instanceCount}getAttributes(){return this.attributes}getProgram(){return this.program}setProgram(e){const{program:n,vs:i,fs:a,modules:l,defines:f,inject:d,varyings:g,bufferMode:v,transpileToGLSL100:T}=e;this.programProps={program:n,vs:i,fs:a,modules:l,defines:f,inject:d,varyings:g,bufferMode:v,transpileToGLSL100:T},this._programDirty=!0}getUniforms(){return this.uniforms}setDrawMode(e){return this.drawMode=e,this}setVertexCount(e){return ve(Number.isFinite(e)),this.vertexCount=e,this}setInstanceCount(e){return ve(Number.isFinite(e)),this.instanceCount=e,this}setGeometry(e){return this.drawMode=e.drawMode,this.vertexCount=e.getVertexCount(),this._deleteGeometryBuffers(),this.geometryBuffers=jG(this.gl,e),this.vertexArray.setAttributes(this.geometryBuffers),this}setAttributes(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(fu(e))return this;const n={};for(const i in e){const a=e[i];n[i]=a.getValue?a.getValue():a}return this.vertexArray.setAttributes(n),this}setUniforms(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.assign(this.uniforms,e),this}getModuleUniforms(e){this._checkProgram();const n=this.programManager.getUniforms(this.program);return n?n(e):{}}updateModuleSettings(e){const n=this.getModuleUniforms(e||{});return this.setUniforms(n)}clear(e){return cm(this.program.gl,e),this}draw(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._checkProgram();const{moduleSettings:n=null,framebuffer:i,uniforms:a={},attributes:l={},transformFeedback:f=this.transformFeedback,parameters:d={},vertexArray:g=this.vertexArray}=e;this.setAttributes(l),this.updateModuleSettings(n),this.setUniforms(a);let v;xe.priority>=Ca&&(v=this._logDrawCallStart(Ca));const T=this.vertexArray.getDrawParams(),{isIndexed:S=T.isIndexed,indexType:x=T.indexType,indexOffset:M=T.indexOffset,vertexArrayInstanced:B=T.isInstanced}=this.props;B&&!this.isInstanced&&xe.warn("Found instanced attributes on non-instanced model",this.id)();const{isInstanced:W,instanceCount:N}=this,{onBeforeRender:F=B_,onAfterRender:V=B_}=this.props;F(),this.program.setUniforms(this.uniforms);const j=this.program.draw(Object.assign(HG,e,{logPriority:v,uniforms:null,framebuffer:i,parameters:d,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:g,transformFeedback:f,isIndexed:S,indexType:x,isInstanced:W,instanceCount:N,offset:S?M:0}));return V(),xe.priority>=Ca&&this._logDrawCallEnd(v,g,i),j}transform(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{discard:n=!0,feedbackBuffers:i,unbindModels:a=[]}=e;let{parameters:l}=e;i&&this._setFeedbackBuffers(i),n&&(l=Object.assign({},l,{35977:n})),a.forEach(f=>f.vertexArray.unbindBuffers());try{this.draw(Object.assign({},e,{parameters:l}))}finally{a.forEach(f=>f.vertexArray.bindBuffers())}return this}render(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return xe.warn("Model.render() is deprecated. Use Model.setUniforms() and Model.draw()")(),this.setUniforms(e).draw()}_setModelProps(e){Object.assign(this.props,e),"uniforms"in e&&this.setUniforms(e.uniforms),"pickable"in e&&(this.pickable=e.pickable),"instanceCount"in e&&(this.instanceCount=e.instanceCount),"geometry"in e&&this.setGeometry(e.geometry),"attributes"in e&&this.setAttributes(e.attributes),"_feedbackBuffers"in e&&this._setFeedbackBuffers(e._feedbackBuffers)}_checkProgram(){if(!(this._programDirty||this.programManager.stateHash!==this._programManagerState))return;let{program:n}=this.programProps;if(n)this._managedProgram=!1;else{const{vs:i,fs:a,modules:l,inject:f,defines:d,varyings:g,bufferMode:v,transpileToGLSL100:T}=this.programProps;n=this.programManager.get({vs:i,fs:a,modules:l,inject:f,defines:d,varyings:g,bufferMode:v,transpileToGLSL100:T}),this.program&&this._managedProgram&&this.programManager.release(this.program),this._programManagerState=this.programManager.stateHash,this._managedProgram=!0}ve(n instanceof m4,"Model needs a program"),this._programDirty=!1,n!==this.program&&(this.program=n,this.vertexArray?this.vertexArray.setProps({program:this.program,attributes:this.vertexArray.attributes}):this.vertexArray=new O9(this.gl,{program:this.program}),this.setUniforms(Object.assign({},this.getModuleUniforms())))}_deleteGeometryBuffers(){for(const e in this.geometryBuffers){const n=this.geometryBuffers[e][0]||this.geometryBuffers[e];n instanceof Tt&&n.delete()}}_setAnimationProps(e){this.animated&&ve(e,"Model.draw(): animated uniforms but no animationProps")}_setFeedbackBuffers(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(fu(e))return this;const{gl:n}=this.program;return this.transformFeedback=this.transformFeedback||new A4(n,{program:this.program}),this.transformFeedback.setBuffers(e),this}_logDrawCallStart(e){const n=e>3?0:ZG;if(!(Date.now()-this.lastLogTime<n))return this.lastLogTime=Date.now(),xe.group(Ca,">>> DRAWING MODEL ".concat(this.id),{collapsed:xe.level<=2})(),e}_logDrawCallEnd(e,n,i,a){if(e===void 0)return;const l=U9({vertexArray:n,header:"".concat(this.id," attributes"),attributes:this._attributes}),{table:f,unusedTable:d,unusedCount:g}=S_({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,i)}),{table:v,count:T}=S_({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,i),undefinedOnly:!0});T>0&&xe.log("MISSING UNIFORMS",Object.keys(v))(),g>0&&xe.log("UNUSED UNIFORMS",Object.keys(d))();const S=D9(this.vertexArray.configuration);xe.table(e,l)(),xe.table(e,f)(),xe.table(e+1,S)(),a&&a.log({logLevel:Ca,message:"Rendered to ".concat(a.id)}),xe.groupEnd(Ca)()}}class YG{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=e,this.currentIndex=0,this.feedbackMap={},this.varyings=null,this.bindings=[],this.resources={},this._initialize(n),Object.seal(this)}setupResources(e){for(const n of this.bindings)this._setupTransformFeedback(n,e)}updateModelProps(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{varyings:n}=this;return n.length>0&&(e=Object.assign({},e,{varyings:n})),e}getDrawOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=this.bindings[this.currentIndex],{sourceBuffers:i,transformFeedback:a}=n;return{attributes:Object.assign({},i,e.attributes),transformFeedback:a}}swap(){return this.feedbackMap?(this.currentIndex=this._getNextIndex(),!0):!1}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setupBuffers(e)}getBuffer(e){const{feedbackBuffers:n}=this.bindings[this.currentIndex],i=e?n[e]:null;return i?i instanceof Tt?i:i.buffer:null}getData(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{varyingName:n}=e,i=this.getBuffer(n);return i?i.getData():null}delete(){for(const e in this.resources)this.resources[e].delete()}_initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setupBuffers(e),this.varyings=e.varyings||Object.keys(this.bindings[this.currentIndex].feedbackBuffers),this.varyings.length>0&&ve(Qe(this.gl))}_getFeedbackBuffers(e){const{sourceBuffers:n={}}=e,i={};if(this.bindings[this.currentIndex]&&Object.assign(i,this.bindings[this.currentIndex].feedbackBuffers),this.feedbackMap)for(const a in this.feedbackMap){const l=this.feedbackMap[a];a in n&&(i[l]=a)}Object.assign(i,e.feedbackBuffers);for(const a in i){const l=i[a];if(typeof l=="string"){const f=n[l],{byteLength:d,usage:g,accessor:v}=f;i[a]=this._createNewBuffer(a,{byteLength:d,usage:g,accessor:v})}}return i}_setupBuffers(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceBuffers:n=null}=e;Object.assign(this.feedbackMap,e.feedbackMap);const i=this._getFeedbackBuffers(e);this._updateBindings({sourceBuffers:n,feedbackBuffers:i})}_setupTransformFeedback(e,n){let{model:i}=n;const{program:a}=i;e.transformFeedback=new A4(this.gl,{program:a,buffers:e.feedbackBuffers})}_updateBindings(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this.feedbackMap){const{sourceBuffers:n,feedbackBuffers:i}=this._swapBuffers(this.bindings[this.currentIndex]),a=this._getNextIndex();this.bindings[a]=this._updateBinding(this.bindings[a],{sourceBuffers:n,feedbackBuffers:i})}}_updateBinding(e,n){return e?(Object.assign(e.sourceBuffers,n.sourceBuffers),Object.assign(e.feedbackBuffers,n.feedbackBuffers),e.transformFeedback&&e.transformFeedback.setBuffers(e.feedbackBuffers),e):{sourceBuffers:Object.assign({},n.sourceBuffers),feedbackBuffers:Object.assign({},n.feedbackBuffers)}}_swapBuffers(e){if(!this.feedbackMap)return null;const n=Object.assign({},e.sourceBuffers),i=Object.assign({},e.feedbackBuffers);for(const a in this.feedbackMap){const l=this.feedbackMap[a];n[a]=e.feedbackBuffers[l],i[l]=e.sourceBuffers[a],ve(i[l]instanceof Tt)}return{sourceBuffers:n,feedbackBuffers:i}}_createNewBuffer(e,n){const i=new Tt(this.gl,n);return this.resources[e]&&this.resources[e].delete(),this.resources[e]=i,i}_getNextIndex(){return(this.currentIndex+1)%2}}const $G="transform_uSampler_",Tf="transform_uSize_",D_="transform_position";function JG(t){let{vs:e,sourceTextureMap:n,targetTextureVarying:i,targetTexture:a}=t,f=Object.keys(n).length,d=null;const g={};let v=e,T={};if(f>0||i){const S=v.split(`
`),x=S.slice();if(S.forEach((M,B,W)=>{if(f>0){const N=tZ(M,n);if(N){const{updatedLine:F,inject:V}=N;x[B]=F,T=kg([T,V]),Object.assign(g,N.samplerTextureMap),f--}}i&&!d&&(d=eZ(M,i))}),i){ve(a);const M="".concat(Tf).concat(i),B="uniform vec2 ".concat(M,`;
`),W="     vec2 ".concat(D_," = transform_getPos(").concat(M,`);
     gl_Position = vec4(`).concat(D_,`, 0, 1.);
`);T=kg([T,{"vs:#decl":B,"vs:#main-start":W}])}v=x.join(`
`)}return{vs:v,targetTextureType:d,inject:T,samplerTextureMap:g}}function QG(t){let{sourceTextureMap:e,targetTextureVarying:n,targetTexture:i}=t;const a={};let l,f;n&&({width:l,height:f}=i,a["".concat(Tf).concat(n)]=[l,f]);for(const d in e)({width:l,height:f}=e[d]),a["".concat(Tf).concat(d)]=[l,f];return a}function qG(t){return S4(t,["attribute","in"])}function KG(t){const e="".concat($G).concat(t),n="".concat(Tf).concat(t),i="  uniform sampler2D ".concat(e,`;
  uniform vec2 `).concat(n,";");return{samplerName:e,sizeName:n,uniformDeclerations:i}}function eZ(t,e){const n=S4(t,["varying","out"]);return n&&n.name===e?n.type:null}function tZ(t,e){const n={},i=qG(t);if(!i)return null;const{type:a,name:l}=i;if(l&&e[l]){const f="// ".concat(t," => Replaced by Transform with a sampler"),{samplerName:d,sizeName:g,uniformDeclerations:v}=KG(l),T=PW(a),S="  ".concat(a," ").concat(l," = transform_getInput(").concat(d,", ").concat(g,").").concat(T,`;
`);return n[d]=l,{updatedLine:f,inject:{"vs:#decl":v,"vs:#main-start":S},samplerTextureMap:n}}return null}const nZ={10241:9728,10240:9728,10242:33071,10243:33071},rZ="transform_output";class iZ{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=e,this.id=this.currentIndex=0,this._swapTexture=null,this.targetTextureVarying=null,this.targetTextureType=null,this.samplerTextureMap=null,this.bindings=[],this.resources={},this._initialize(n),Object.seal(this)}updateModelProps(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=this._processVertexShader(e);return Object.assign({},e,n)}getDrawOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceBuffers:n,sourceTextures:i,framebuffer:a,targetTexture:l}=this.bindings[this.currentIndex],f=Object.assign({},n,e.attributes),d=Object.assign({},e.uniforms),g=Object.assign({},e.parameters);let v=e.discard;if(this.hasSourceTextures||this.hasTargetTexture){f.transform_elementID=this.elementIDBuffer;for(const S in this.samplerTextureMap){const x=this.samplerTextureMap[S];d[S]=i[x]}this._setSourceTextureParameters();const T=QG({sourceTextureMap:i,targetTextureVarying:this.targetTextureVarying,targetTexture:l});Object.assign(d,T)}return this.hasTargetTexture&&(v=!1,g.viewport=[0,0,a.width,a.height]),{attributes:f,framebuffer:a,uniforms:d,discard:v,parameters:g}}swap(){return this._swapTexture?(this.currentIndex=this._getNextIndex(),!0):!1}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setupTextures(e)}getTargetTexture(){const{targetTexture:e}=this.bindings[this.currentIndex];return e}getData(){let{packed:e=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{framebuffer:n}=this.bindings[this.currentIndex],i=eh(n);if(!e)return i;const a=i.constructor,l=MW(this.targetTextureType),f=new a(i.length*l/4);let d=0;for(let g=0;g<i.length;g+=4)for(let v=0;v<l;v++)f[d++]=i[g+v];return f}getFramebuffer(){return this.bindings[this.currentIndex].framebuffer}delete(){this.ownTexture&&this.ownTexture.delete(),this.elementIDBuffer&&this.elementIDBuffer.delete()}_initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{_targetTextureVarying:n,_swapTexture:i}=e;this._swapTexture=i,this.targetTextureVarying=n,this.hasTargetTexture=n,this._setupTextures(e)}_createTargetTexture(e){const{sourceTextures:n,textureOrReference:i}=e;if(i instanceof fi)return i;const a=n[i];return a?(this._targetRefTexName=i,this._createNewTexture(a)):null}_setupTextures(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceBuffers:n,_sourceTextures:i={},_targetTexture:a}=e,l=this._createTargetTexture({sourceTextures:i,textureOrReference:a});this.hasSourceTextures=this.hasSourceTextures||i&&Object.keys(i).length>0,this._updateBindings({sourceBuffers:n,sourceTextures:i,targetTexture:l}),"elementCount"in e&&this._updateElementIDBuffer(e.elementCount)}_updateElementIDBuffer(e){if(typeof e!="number"||this.elementCount>=e)return;const n=new Float32Array(e);n.forEach((i,a,l)=>{l[a]=a}),this.elementIDBuffer?this.elementIDBuffer.setData({data:n}):this.elementIDBuffer=new Tt(this.gl,{data:n,accessor:{size:1}}),this.elementCount=e}_updateBindings(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this._swapTexture){const{sourceTextures:n,targetTexture:i}=this._swapTextures(this.bindings[this.currentIndex]),a=this._getNextIndex();this.bindings[a]=this._updateBinding(this.bindings[a],{sourceTextures:n,targetTexture:i})}}_updateBinding(e,n){const{sourceBuffers:i,sourceTextures:a,targetTexture:l}=n;if(e||(e={sourceBuffers:{},sourceTextures:{},targetTexture:null}),Object.assign(e.sourceTextures,a),Object.assign(e.sourceBuffers,i),l){e.targetTexture=l;const{width:f,height:d}=l,{framebuffer:g}=e;g?(g.update({attachments:{36064:l},resizeAttachments:!1}),g.resize({width:f,height:d})):e.framebuffer=new en(this.gl,{id:"transform-framebuffer",width:f,height:d,attachments:{36064:l}})}return e}_setSourceTextureParameters(){const e=this.currentIndex,{sourceTextures:n}=this.bindings[e];for(const i in n)n[i].setParameters(nZ)}_swapTextures(e){if(!this._swapTexture)return null;const n=Object.assign({},e.sourceTextures);n[this._swapTexture]=e.targetTexture;const i=e.sourceTextures[this._swapTexture];return{sourceTextures:n,targetTexture:i}}_createNewTexture(e){const n=Sj(e,{parameters:{10241:9728,10240:9728,10242:33071,10243:33071},pixelStore:{37440:!1}});return this.ownTexture&&this.ownTexture.delete(),this.ownTexture=n,n}_getNextIndex(){return(this.currentIndex+1)%2}_processVertexShader(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceTextures:n,targetTexture:i}=this.bindings[this.currentIndex],{vs:a,uniforms:l,targetTextureType:f,inject:d,samplerTextureMap:g}=JG({vs:e.vs,sourceTextureMap:n,targetTextureVarying:this.targetTextureVarying,targetTexture:i}),v=kg([e.inject||{},d]);this.targetTextureType=f,this.samplerTextureMap=g;const T=e._fs||x4({version:p4(a),input:this.targetTextureVarying,inputType:f,output:rZ}),S=this.hasSourceTextures||this.targetTextureVarying?[DG].concat(e.modules||[]):e.modules;return{vs:a,fs:T,modules:S,uniforms:l,inject:v}}}class gm{static isSupported(e){return Qe(e)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=e,this.model=null,this.elementCount=0,this.bufferTransform=null,this.textureTransform=null,this.elementIDBuffer=null,this._initialize(n),Object.seal(this)}delete(){const{model:e,bufferTransform:n,textureTransform:i}=this;e&&e.delete(),n&&n.delete(),i&&i.delete()}run(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{clearRenderTarget:n=!0}=e,i=this._updateDrawOptions(e);n&&i.framebuffer&&i.framebuffer.clear({color:!0}),this.model.transform(i)}swap(){let e=!1;const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of n)e=e||i.swap();ve(e,"Nothing to swap")}getBuffer(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return this.bufferTransform&&this.bufferTransform.getBuffer(e)}getData(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of n){const a=i.getData(e);if(a)return a}return null}getFramebuffer(){return this.textureTransform&&this.textureTransform.getFramebuffer()}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};"elementCount"in e&&this.model.setVertexCount(e.elementCount);const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of n)i.update(e)}_initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{gl:n}=this;this._buildResourceTransforms(n,e),e=this._updateModelProps(e),this.model=new N4(n,Object.assign({},e,{fs:e.fs||x4({version:p4(e.vs)}),id:e.id||"transform-model",drawMode:e.drawMode||0,vertexCount:e.elementCount})),this.bufferTransform&&this.bufferTransform.setupResources({model:this.model})}_updateModelProps(e){let n=Object.assign({},e);const i=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const a of i)n=a.updateModelProps(n);return n}_buildResourceTransforms(e,n){sZ(n)&&(this.bufferTransform=new YG(e,n)),oZ(n)&&(this.textureTransform=new iZ(e,n)),ve(this.bufferTransform||this.textureTransform,"must provide source/feedback buffers or source/target textures")}_updateDrawOptions(e){let n=Object.assign({},e);const i=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const a of i)n=Object.assign(n,a.getDrawOptions(n));return n}}function sZ(t){return!!(!fu(t.feedbackBuffers)||!fu(t.feedbackMap)||t.varyings&&t.varyings.length>0)}function oZ(t){return!!(!fu(t._sourceTextures)||t._targetTexture||t._targetTextureVarying)}const z_={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6};class aZ{static get DRAW_MODE(){return z_}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{id:n=eo("geometry"),drawMode:i=z_.TRIANGLES,attributes:a={},indices:l=null,vertexCount:f=null}=e;this.id=n,this.drawMode=i|0,this.attributes={},this.userData={},this._setAttributes(a,l),this.vertexCount=f||this._calculateVertexCount(this.attributes,this.indices)}get mode(){return this.drawMode}getVertexCount(){return this.vertexCount}getAttributes(){return this.indices?{indices:this.indices,...this.attributes}:this.attributes}_print(e){return"Geometry ".concat(this.id," attribute ").concat(e)}_setAttributes(e,n){n&&(this.indices=ArrayBuffer.isView(n)?{value:n,size:1}:n);for(const i in e){let a=e[i];a=ArrayBuffer.isView(a)?{value:a}:a,ve(ArrayBuffer.isView(a.value),"".concat(this._print(i),": must be typed array or object with value as typed array")),(i==="POSITION"||i==="positions")&&!a.size&&(a.size=3),i==="indices"?(ve(!this.indices),this.indices=a):this.attributes[i]=a}return this.indices&&this.indices.isIndexed!==void 0&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this}_calculateVertexCount(e,n){if(n)return n.value.length;let i=1/0;for(const a in e){const l=e[a],{value:f,size:d,constant:g}=l;!g&&f&&d>=1&&(i=Math.min(i,f.length/d))}return ve(Number.isFinite(i)),i}}let uZ=1,lZ=1;class F4{constructor(){this.time=0,this.channels=new Map,this.animations=new Map,this.playing=!1,this.lastEngineTime=-1}addChannel(e){const{delay:n=0,duration:i=Number.POSITIVE_INFINITY,rate:a=1,repeat:l=1}=e,f=uZ++,d={time:0,delay:n,duration:i,rate:a,repeat:l};return this._setChannelTime(d,this.time),this.channels.set(f,d),f}removeChannel(e){this.channels.delete(e);for(const[n,i]of this.animations)i.channel===e&&this.detachAnimation(n)}isFinished(e){const n=this.channels.get(e);return n===void 0?!1:this.time>=n.delay+n.duration*n.repeat}getTime(e){if(e===void 0)return this.time;const n=this.channels.get(e);return n===void 0?-1:n.time}setTime(e){this.time=Math.max(0,e);const n=this.channels.values();for(const a of n)this._setChannelTime(a,this.time);const i=this.animations.values();for(const a of i){const{animation:l,channel:f}=a;l.setTime(this.getTime(f))}}play(){this.playing=!0}pause(){this.playing=!1,this.lastEngineTime=-1}reset(){this.setTime(0)}attachAnimation(e,n){const i=lZ++;return this.animations.set(i,{animation:e,channel:n}),e.setTime(this.getTime(n)),i}detachAnimation(e){this.animations.delete(e)}update(e){this.playing&&(this.lastEngineTime===-1&&(this.lastEngineTime=e),this.setTime(this.time+(e-this.lastEngineTime)),this.lastEngineTime=e)}_setChannelTime(e,n){const i=n-e.delay,a=e.duration*e.repeat;i>=a?e.time=e.duration*e.rate:(e.time=Math.max(0,i)%e.duration,e.time*=e.rate)}}const cZ=[255,255,255],fZ=1;let hZ=0;class dZ{constructor(e={}){C(this,"id",void 0),C(this,"color",void 0),C(this,"intensity",void 0),C(this,"type","ambient");const{color:n=cZ}=e,{intensity:i=fZ}=e;this.id=e.id||"ambient-".concat(hZ++),this.color=n,this.intensity=i}}const pZ=[255,255,255],gZ=1,mZ=[0,0,-1];let AZ=0;class j_{constructor(e={}){C(this,"id",void 0),C(this,"color",void 0),C(this,"intensity",void 0),C(this,"type","directional"),C(this,"direction",void 0),C(this,"shadow",void 0);const{color:n=pZ}=e,{intensity:i=gZ}=e,{direction:a=mZ}=e,{_shadow:l=!1}=e;this.id=e.id||"directional-".concat(AZ++),this.color=n,this.intensity=i,this.type="directional",this.direction=new Bi(a).normalize().toArray(),this.shadow=l}getProjectedLight(e){return this}}class yZ{constructor(e,n={id:"pass"}){C(this,"id",void 0),C(this,"gl",void 0),C(this,"props",void 0);const{id:i}=n;this.id=i,this.gl=e,this.props={...n}}setProps(e){Object.assign(this.props,e)}render(e){}cleanup(){}}class mm extends yZ{constructor(...e){super(...e),C(this,"_lastRenderIndex",-1)}render(e){const n=this.gl;return cs(n,{framebuffer:e.target}),this._drawLayers(e)}_drawLayers(e){const{target:n,moduleParameters:i,viewports:a,views:l,onViewportActive:f,clearStack:d=!0,clearCanvas:g=!0}=e;e.pass=e.pass||"unknown";const v=this.gl;g&&_Z(v,n),d&&(this._lastRenderIndex=-1);const T=[];for(const S of a){const x=l&&l[S.id];f==null||f(S);const M=this._getDrawLayerParams(S,e),B=S.subViewports||[S];for(const W of B){const N=this._drawLayersInViewport(v,{target:n,moduleParameters:i,viewport:W,view:x,pass:e.pass,layers:e.layers},M);T.push(N)}}return T}_getDrawLayerParams(e,{layers:n,pass:i,isPicking:a=!1,layerFilter:l,cullRect:f,effects:d,moduleParameters:g},v=!1){const T=[],S=O4(this._lastRenderIndex+1),x={layer:n[0],viewport:e,isPicking:a,renderPass:i,cullRect:f},M={};for(let B=0;B<n.length;B++){const W=n[B],N=this._shouldDrawLayer(W,x,l,M),F={shouldDrawLayer:N};N&&!v&&(F.layerRenderIndex=S(W,N),F.moduleParameters=this._getModuleParameters(W,d,i,g),F.layerParameters=this.getLayerParameters(W,B,e)),T[B]=F}return T}_drawLayersInViewport(e,{layers:n,moduleParameters:i,pass:a,target:l,viewport:f,view:d},g){const v=vZ(e,{moduleParameters:i,target:l,viewport:f});if(d&&d.props.clear){const S=d.props.clear===!0?{color:!0,depth:!0}:d.props.clear;ui(e,{scissorTest:!0,scissor:v},()=>cm(e,S))}const T={totalCount:n.length,visibleCount:0,compositeCount:0,pickableCount:0};cs(e,{viewport:v});for(let S=0;S<n.length;S++){const x=n[S],{shouldDrawLayer:M,layerRenderIndex:B,moduleParameters:W,layerParameters:N}=g[S];if(M&&x.props.pickable&&T.pickableCount++,x.isComposite)T.compositeCount++;else if(M){T.visibleCount++,this._lastRenderIndex=Math.max(this._lastRenderIndex,B),W.viewport=f;try{x._drawLayer({moduleParameters:W,uniforms:{layerIndex:B},parameters:N})}catch(F){x.raiseError(F,"drawing ".concat(x," to ").concat(a))}}}return T}shouldDrawLayer(e){return!0}getModuleParameters(e,n){return null}getLayerParameters(e,n,i){return e.props.parameters}_shouldDrawLayer(e,n,i,a){if(!(e.props.visible&&this.shouldDrawLayer(e)))return!1;n.layer=e;let f=e.parent;for(;f;){if(!f.props.visible||!f.filterSubLayer(n))return!1;n.layer=f,f=f.parent}if(i){const d=n.layer.id;if(d in a||(a[d]=i(n)),!a[d])return!1}return e.activateViewport(n.viewport),!0}_getModuleParameters(e,n,i,a){var l;const f=Object.assign(Object.create(((l=e.internalState)===null||l===void 0?void 0:l.propsInTransition)||e.props),{autoWrapLongitude:e.wrapLongitude,viewport:e.context.viewport,mousePosition:e.context.mousePosition,pickingActive:0,devicePixelRatio:cu(this.gl)});if(n)for(const g of n){var d;Object.assign(f,(d=g.getModuleParameters)===null||d===void 0?void 0:d.call(g,e))}return Object.assign(f,this.getModuleParameters(e,n),a)}}function O4(t=0,e={}){const n={},i=(a,l)=>{const f=a.props._offset,d=a.id,g=a.parent&&a.parent.id;let v;if(g&&!(g in e)&&i(a.parent,!1),g in n){const T=n[g]=n[g]||O4(e[g],e);v=T(a,l),n[d]=T}else Number.isFinite(f)?(v=f+(e[g]||0),n[d]=null):v=t;return l&&v>=t&&(t=v+1),e[d]=v,v};return i}function vZ(t,{moduleParameters:e,target:n,viewport:i}){const a=n&&n.id!=="default-framebuffer",l=e&&e.devicePixelRatio||cu(t),f=a?n.height:t.drawingBufferHeight,d=i;return[d.x*l,f-(d.y+d.height)*l,d.width*l,d.height*l]}function _Z(t,e){const n=e?e.width:t.drawingBufferWidth,i=e?e.height:t.drawingBufferHeight;cs(t,{viewport:[0,0,n,i]}),t.clear(16640)}class wZ extends mm{constructor(e,n){super(e,n),C(this,"shadowMap",void 0),C(this,"depthBuffer",void 0),C(this,"fbo",void 0),this.shadowMap=new fi(e,{width:1,height:1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.depthBuffer=new Ha(e,{format:33189,width:1,height:1}),this.fbo=new en(e,{id:"shadowmap",width:1,height:1,attachments:{36064:this.shadowMap,36096:this.depthBuffer}})}render(e){const n=this.fbo;ui(this.gl,{depthRange:[0,1],depthTest:!0,blend:!1,clearColor:[1,1,1,1]},()=>{const i=e.viewports[0],a=cu(this.gl),l=i.width*a,f=i.height*a;(l!==n.width||f!==n.height)&&n.resize({width:l,height:f}),super.render({...e,target:n,pass:"shadow"})})}shouldDrawLayer(e){return e.props.shadowEnabled!==!1}getModuleParameters(){return{drawToShadowMap:!0}}delete(){this.fbo&&(this.fbo.delete(),this.fbo=null),this.shadowMap&&(this.shadowMap.delete(),this.shadowMap=null),this.depthBuffer&&(this.depthBuffer.delete(),this.depthBuffer=null)}}const L4="#define SMOOTH_EDGE_RADIUS 0.5",TZ=`
`.concat(L4,`

struct VertexGeometry {
  vec4 position;
  vec3 worldPosition;
  vec3 worldPositionAlt;
  vec3 normal;
  vec2 uv;
  vec3 pickingColor;
} geometry = VertexGeometry(
  vec4(0.0, 0.0, 1.0, 0.0),
  vec3(0.0),
  vec3(0.0),
  vec3(0.0),
  vec2(0.0),
  vec3(0.0)
);
`),EZ=`
`.concat(L4,`

struct FragmentGeometry {
  vec2 uv;
} geometry;

float smoothedge(float edge, float x) {
  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);
}
`),SZ={name:"geometry",vs:TZ,fs:EZ},xZ=Object.keys(lt).map(t=>"const int COORDINATE_SYSTEM_".concat(t," = ").concat(lt[t],";")).join(""),RZ=Object.keys(Fi).map(t=>"const int PROJECTION_MODE_".concat(t," = ").concat(Fi[t],";")).join(""),bZ=Object.keys(Eg).map(t=>"const int UNIT_".concat(t.toUpperCase()," = ").concat(Eg[t],";")).join(""),kZ="".concat(xZ,`
`).concat(RZ,`
`).concat(bZ,`

uniform int project_uCoordinateSystem;
uniform int project_uProjectionMode;
uniform float project_uScale;
uniform bool project_uWrapLongitude;
uniform vec3 project_uCommonUnitsPerMeter;
uniform vec3 project_uCommonUnitsPerWorldUnit;
uniform vec3 project_uCommonUnitsPerWorldUnit2;
uniform vec4 project_uCenter;
uniform mat4 project_uModelMatrix;
uniform mat4 project_uViewProjectionMatrix;
uniform vec2 project_uViewportSize;
uniform float project_uDevicePixelRatio;
uniform float project_uFocalDistance;
uniform vec3 project_uCameraPosition;
uniform vec3 project_uCoordinateOrigin;
uniform vec3 project_uCommonOrigin;
uniform bool project_uPseudoMeters;

const float TILE_SIZE = 512.0;
const float PI = 3.1415926536;
const float WORLD_SCALE = TILE_SIZE / (PI * 2.0);
const vec3 ZERO_64_LOW = vec3(0.0);
const float EARTH_RADIUS = 6370972.0;
const float GLOBE_RADIUS = 256.0;
float project_size_at_latitude(float lat) {
  float y = clamp(lat, -89.9, 89.9);
  return 1.0 / cos(radians(y));
}

float project_size() {
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR &&
    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT &&
    project_uPseudoMeters == false) {
    
    if (geometry.position.w == 0.0) {
      return project_size_at_latitude(geometry.worldPosition.y);
    }
  
    float y = geometry.position.y / TILE_SIZE * 2.0 - 1.0;
    float y2 = y * y;
    float y4 = y2 * y2;
    float y6 = y4 * y2;
    return 1.0 + 4.9348 * y2 + 4.0587 * y4 + 1.5642 * y6;
  }
  return 1.0;
}

float project_size_at_latitude(float meters, float lat) {
  return meters * project_uCommonUnitsPerMeter.z * project_size_at_latitude(lat);
}
float project_size(float meters) {
  return meters * project_uCommonUnitsPerMeter.z * project_size();
}

vec2 project_size(vec2 meters) {
  return meters * project_uCommonUnitsPerMeter.xy * project_size();
}

vec3 project_size(vec3 meters) {
  return meters * project_uCommonUnitsPerMeter * project_size();
}

vec4 project_size(vec4 meters) {
  return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);
}
mat3 project_get_orientation_matrix(vec3 up) {
  vec3 uz = normalize(up);
  vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));
  vec3 uy = cross(uz, ux);
  return mat3(ux, uy, uz);
}

bool project_needs_rotation(vec3 commonPosition, out mat3 transform) {
  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {
    transform = project_get_orientation_matrix(commonPosition);
    return true;
  }
  return false;
}
vec3 project_normal(vec3 vector) {
  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);
  vec3 n = normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);
  mat3 rotation;
  if (project_needs_rotation(geometry.position.xyz, rotation)) {
    n = rotation * n;
  }
  return n;
}

vec4 project_offset_(vec4 offset) {
  float dy = offset.y;
  vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;
  return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);
}
vec2 project_mercator_(vec2 lnglat) {
  float x = lnglat.x;
  if (project_uWrapLongitude) {
    x = mod(x + 180., 360.0) - 180.;
  }
  float y = clamp(lnglat.y, -89.9, 89.9);
  return vec2(
    radians(x) + PI,
    PI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))
  ) * WORLD_SCALE;
}

vec3 project_globe_(vec3 lnglatz) {
  float lambda = radians(lnglatz.x);
  float phi = radians(lnglatz.y);
  float cosPhi = cos(phi);
  float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;

  return vec3(
    sin(lambda) * cosPhi,
    -cos(lambda) * cosPhi,
    sin(phi)
  ) * D;
}
vec4 project_position(vec4 position, vec3 position64Low) {
  vec4 position_world = project_uModelMatrix * position;
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      return vec4(
        project_mercator_(position_world.xy),
        project_size_at_latitude(position_world.z, position_world.y),
        position_world.w
      );
    }
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {
      position_world.xyz += project_uCoordinateOrigin;
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      return vec4(
        project_globe_(position_world.xyz),
        position_world.w
      );
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      if (abs(position_world.y - project_uCoordinateOrigin.y) > 0.25) {
        return vec4(
          project_mercator_(position_world.xy) - project_uCommonOrigin.xy,
          project_size(position_world.z),
          position_world.w
        );
      }
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||
    (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&
    (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
     project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {
    position_world.xyz -= project_uCoordinateOrigin;
  }
  return project_offset_(position_world + project_uModelMatrix * vec4(position64Low, 0.0));
}

vec4 project_position(vec4 position) {
  return project_position(position, ZERO_64_LOW);
}

vec3 project_position(vec3 position, vec3 position64Low) {
  vec4 projected_position = project_position(vec4(position, 1.0), position64Low);
  return projected_position.xyz;
}

vec3 project_position(vec3 position) {
  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);
  return projected_position.xyz;
}

vec2 project_position(vec2 position) {
  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);
  return projected_position.xy;
}

vec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {
  return viewProjectionMatrix * position + center;
}
vec4 project_common_position_to_clipspace(vec4 position) {
  return project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);
}
vec2 project_pixel_size_to_clipspace(vec2 pixels) {
  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;
  return offset * project_uFocalDistance;
}

float project_size_to_pixel(float meters) {
  return project_size(meters) * project_uScale;
}
float project_size_to_pixel(float size, int unit) {
  if (unit == UNIT_METERS) return project_size_to_pixel(size);
  if (unit == UNIT_COMMON) return size * project_uScale;
  return size;
}
float project_pixel_size(float pixels) {
  return pixels / project_uScale;
}
vec2 project_pixel_size(vec2 pixels) {
  return pixels / project_uScale;
}
`);function PZ(t,e){if(t===e)return!0;if(Array.isArray(t)){const n=t.length;if(!e||e.length!==n)return!1;for(let i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}return!1}function hc(t){let e={},n;return i=>{for(const a in i)if(!PZ(i[a],e[a])){n=t(i),e=i;break}return n}}const W_=[0,0,0,0],MZ=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],V4=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],CZ=[0,0,0],U4=[0,0,0],IZ=hc(OZ);function B4(t,e,n=U4){n.length<3&&(n=[n[0],n[1],0]);let i=n,a,l=!0;switch(e===lt.LNGLAT_OFFSETS||e===lt.METER_OFFSETS?a=n:a=t.isGeospatial?[Math.fround(t.longitude),Math.fround(t.latitude),0]:null,t.projectionMode){case Fi.WEB_MERCATOR:(e===lt.LNGLAT||e===lt.CARTESIAN)&&(a=[0,0,0],l=!1);break;case Fi.WEB_MERCATOR_AUTO_OFFSET:e===lt.LNGLAT?i=a:e===lt.CARTESIAN&&(i=[Math.fround(t.center[0]),Math.fround(t.center[1]),0],a=t.unprojectPosition(i),i[0]-=n[0],i[1]-=n[1],i[2]-=n[2]);break;case Fi.IDENTITY:i=t.position.map(Math.fround),i[2]=i[2]||0;break;case Fi.GLOBE:l=!1,a=null;break;default:l=!1}return{geospatialOrigin:a,shaderCoordinateOrigin:i,offsetMode:l}}function NZ(t,e,n){const{viewMatrixUncentered:i,projectionMatrix:a}=t;let{viewMatrix:l,viewProjectionMatrix:f}=t,d=W_,g=W_,v=t.cameraPosition;const{geospatialOrigin:T,shaderCoordinateOrigin:S,offsetMode:x}=B4(t,e,n);return x&&(g=t.projectPosition(T||S),v=[v[0]-g[0],v[1]-g[1],v[2]-g[2]],g[3]=1,d=cc([],g,f),l=i||l,f=Ho([],a,l),f=Ho([],f,MZ)),{viewMatrix:l,viewProjectionMatrix:f,projectionCenter:d,originCommon:g,cameraPosCommon:v,shaderCoordinateOrigin:S,geospatialOrigin:T}}function FZ({viewport:t,devicePixelRatio:e=1,modelMatrix:n=null,coordinateSystem:i=lt.DEFAULT,coordinateOrigin:a=U4,autoWrapLongitude:l=!1}){i===lt.DEFAULT&&(i=t.isGeospatial?lt.LNGLAT:lt.CARTESIAN);const f=IZ({viewport:t,devicePixelRatio:e,coordinateSystem:i,coordinateOrigin:a});return f.project_uWrapLongitude=l,f.project_uModelMatrix=n||V4,f}function OZ({viewport:t,devicePixelRatio:e,coordinateSystem:n,coordinateOrigin:i}){const{projectionCenter:a,viewProjectionMatrix:l,originCommon:f,cameraPosCommon:d,shaderCoordinateOrigin:g,geospatialOrigin:v}=NZ(t,n,i),T=t.getDistanceScales(),S=[t.width*e,t.height*e],x=cc([],[0,0,-t.focalDistance,1],t.projectionMatrix)[3]||1,M={project_uCoordinateSystem:n,project_uProjectionMode:t.projectionMode,project_uCoordinateOrigin:g,project_uCommonOrigin:f.slice(0,3),project_uCenter:a,project_uPseudoMeters:!!t._pseudoMeters,project_uViewportSize:S,project_uDevicePixelRatio:e,project_uFocalDistance:x,project_uCommonUnitsPerMeter:T.unitsPerMeter,project_uCommonUnitsPerWorldUnit:T.unitsPerMeter,project_uCommonUnitsPerWorldUnit2:CZ,project_uScale:t.scale,project_uWrapLongitude:!1,project_uViewProjectionMatrix:l,project_uModelMatrix:V4,project_uCameraPosition:d};if(v){const B=t.getDistanceScales(v);switch(n){case lt.METER_OFFSETS:M.project_uCommonUnitsPerWorldUnit=B.unitsPerMeter,M.project_uCommonUnitsPerWorldUnit2=B.unitsPerMeter2;break;case lt.LNGLAT:case lt.LNGLAT_OFFSETS:t._pseudoMeters||(M.project_uCommonUnitsPerMeter=B.unitsPerMeter),M.project_uCommonUnitsPerWorldUnit=B.unitsPerDegree,M.project_uCommonUnitsPerWorldUnit2=B.unitsPerDegree2;break;case lt.CARTESIAN:M.project_uCommonUnitsPerWorldUnit=[1,1,B.unitsPerMeter[2]],M.project_uCommonUnitsPerWorldUnit2=[0,0,B.unitsPerMeter2[2]];break}}return M}const LZ={};function VZ(t=LZ){return"viewport"in t?FZ(t):{}}const Am={name:"project",dependencies:[NW,SZ],vs:kZ,getUniforms:VZ};function UZ(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function tu(t,e){const n=cc([],e,t);return yG(n,n,1/n[3]),n}function G_(t,e){const n=t%e;return n<0?e+n:n}function Ng(t,e,n){return t<e?e:t>n?n:t}function BZ(t){return Math.log(t)*Math.LOG2E}const ym=Math.log2||BZ;function fs(t,e){if(!t)throw new Error(e||"@math.gl/web-mercator: assertion failed.")}const ai=Math.PI,D4=ai/4,Xr=ai/180,Fg=180/ai,mu=512,Ef=4003e4,h0=85.051129,DZ=1.5;function zZ(t){return ym(t)}function Sf(t){const[e,n]=t;fs(Number.isFinite(e)),fs(Number.isFinite(n)&&n>=-90&&n<=90,"invalid latitude");const i=e*Xr,a=n*Xr,l=mu*(i+ai)/(2*ai),f=mu*(ai+Math.log(Math.tan(D4+a*.5)))/(2*ai);return[l,f]}function Au(t){const[e,n]=t,i=e/mu*(2*ai)-ai,a=2*(Math.atan(Math.exp(n/mu*(2*ai)-ai))-D4);return[i*Fg,a*Fg]}function jZ(t){const{latitude:e}=t;fs(Number.isFinite(e));const n=Math.cos(e*Xr);return zZ(Ef*n)-9}function Qd(t){const e=Math.cos(t*Xr);return mu/Ef/e}function Og(t){const{latitude:e,longitude:n,highPrecision:i=!1}=t;fs(Number.isFinite(e)&&Number.isFinite(n));const a=mu,l=Math.cos(e*Xr),f=a/360,d=f/l,g=a/Ef/l,v={unitsPerMeter:[g,g,g],metersPerUnit:[1/g,1/g,1/g],unitsPerDegree:[f,d,g],degreesPerUnit:[1/f,1/d,1/g]};if(i){const T=Xr*Math.tan(e*Xr)/l,S=f*T/2,x=a/Ef*T,M=x/d*g;v.unitsPerDegree2=[0,S,x],v.unitsPerMeter2=[M,0,M]}return v}function z4(t,e){const[n,i,a]=t,[l,f,d]=e,{unitsPerMeter:g,unitsPerMeter2:v}=Og({longitude:n,latitude:i,highPrecision:!0}),T=Sf(t);T[0]+=l*(g[0]+v[0]*f),T[1]+=f*(g[1]+v[1]*f);const S=Au(T),x=(a||0)+(d||0);return Number.isFinite(a)||Number.isFinite(d)?[S[0],S[1],x]:S}function WZ(t){const{height:e,pitch:n,bearing:i,altitude:a,scale:l,center:f}=t,d=UZ();wf(d,d,[0,0,-a]),M4(d,d,-n*Xr),C4(d,d,i*Xr);const g=l/e;return pm(d,d,[g,g,g]),f&&wf(d,d,YW([],f)),d}function GZ(t){const{width:e,height:n,altitude:i,pitch:a=0,offset:l,center:f,scale:d,nearZMultiplier:g=1,farZMultiplier:v=1}=t;let{fovy:T=xf(DZ)}=t;i!==void 0&&(T=xf(i));const S=T*Xr,x=a*Xr,M=vm(T);let B=M;f&&(B+=f[2]*d/Math.cos(x)/n);const W=S*(.5+(l?l[1]:0)/n),N=Math.sin(W)*B/Math.sin(Ng(Math.PI/2-x-W,.01,Math.PI-.01)),F=Math.sin(x)*N+B,V=B*10,j=Math.min(F*v,V);return{fov:S,aspect:e/n,focalDistance:M,near:g,far:j}}function xf(t){return 2*Math.atan(.5/t)*Fg}function vm(t){return .5/Math.tan(.5*t*Xr)}function j4(t,e){const[n,i,a=0]=t;return fs(Number.isFinite(n)&&Number.isFinite(i)&&Number.isFinite(a)),tu(e,[n,i,a,1])}function th(t,e,n=0){const[i,a,l]=t;if(fs(Number.isFinite(i)&&Number.isFinite(a),"invalid pixel coordinate"),Number.isFinite(l))return tu(e,[i,a,l,1]);const f=tu(e,[i,a,0,1]),d=tu(e,[i,a,1,1]),g=f[2],v=d[2],T=g===v?0:((n||0)-g)/(v-g);return b4([],f,d,T)}function ZZ(t){const{width:e,height:n,bounds:i,minExtent:a=0,maxZoom:l=24,offset:f=[0,0]}=t,[[d,g],[v,T]]=i,S=XZ(t.padding),x=Sf([d,Ng(T,-h0,h0)]),M=Sf([v,Ng(g,-h0,h0)]),B=[Math.max(Math.abs(M[0]-x[0]),a),Math.max(Math.abs(M[1]-x[1]),a)],W=[e-S.left-S.right-Math.abs(f[0])*2,n-S.top-S.bottom-Math.abs(f[1])*2];fs(W[0]>0&&W[1]>0);const N=W[0]/B[0],F=W[1]/B[1],V=(S.right-S.left)/2/N,j=(S.top-S.bottom)/2/F,X=[(M[0]+x[0])/2+V,(M[1]+x[1])/2+j],Q=Au(X),K=Math.min(l,ym(Math.abs(Math.min(N,F))));return fs(Number.isFinite(K)),{longitude:Q[0],latitude:Q[1],zoom:K}}function XZ(t=0){return typeof t=="number"?{top:t,bottom:t,left:t,right:t}:(fs(Number.isFinite(t.top)&&Number.isFinite(t.bottom)&&Number.isFinite(t.left)&&Number.isFinite(t.right)),t)}const Z_=Math.PI/180;function HZ(t,e=0){const{width:n,height:i,unproject:a}=t,l={targetZ:e},f=a([0,i],l),d=a([n,i],l);let g,v;const T=t.fovy?.5*t.fovy*Z_:Math.atan(.5/t.altitude),S=(90-t.pitch)*Z_;return T>S-.01?(g=X_(t,0,e),v=X_(t,n,e)):(g=a([0,0],l),v=a([n,0],l)),[f,d,v,g]}function X_(t,e,n){const{pixelUnprojectionMatrix:i}=t,a=tu(i,[e,0,1,1]),l=tu(i,[e,t.height,1,1]),d=(n*t.distanceScales.unitsPerMeter[2]-a[2])/(l[2]-a[2]),g=b4([],a,l,d),v=Au(g);return v.push(n),v}const H_=512;function YZ(t){const{width:e,height:n,pitch:i=0}=t;let{longitude:a,latitude:l,zoom:f,bearing:d=0}=t;(a<-180||a>180)&&(a=G_(a+180,360)-180),(d<-180||d>180)&&(d=G_(d+180,360)-180);const g=ym(n/H_);if(f<=g)f=g,l=0;else{const v=n/2/Math.pow(2,f),T=Au([0,v])[1];if(l<T)l=T;else{const S=Au([0,H_-v])[1];l>S&&(l=S)}}return{width:e,height:n,longitude:a,latitude:l,zoom:f,pitch:i,bearing:d}}const $Z=`
const int max_lights = 2;
uniform mat4 shadow_uViewProjectionMatrices[max_lights];
uniform vec4 shadow_uProjectCenters[max_lights];
uniform bool shadow_uDrawShadowMap;
uniform bool shadow_uUseShadowMap;
uniform int shadow_uLightId;
uniform float shadow_uLightCount;

varying vec3 shadow_vPosition[max_lights];

vec4 shadow_setVertexPosition(vec4 position_commonspace) {
  if (shadow_uDrawShadowMap) {
    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);
  }
  if (shadow_uUseShadowMap) {
    for (int i = 0; i < max_lights; i++) {
      if(i < int(shadow_uLightCount)) {
        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);
        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;
      }
    }
  }
  return gl_Position;
}
`,JZ=`
const int max_lights = 2;
uniform bool shadow_uDrawShadowMap;
uniform bool shadow_uUseShadowMap;
uniform sampler2D shadow_uShadowMap0;
uniform sampler2D shadow_uShadowMap1;
uniform vec4 shadow_uColor;
uniform float shadow_uLightCount;

varying vec3 shadow_vPosition[max_lights];

const vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);
const vec4 bitUnpackShift = 1.0 / bitPackShift;
const vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);

float shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {
  vec4 rgbaDepth = texture2D(shadowMap, position.xy);

  float z = dot(rgbaDepth, bitUnpackShift);
  return smoothstep(0.001, 0.01, position.z - z);
}

vec4 shadow_filterShadowColor(vec4 color) {
  if (shadow_uDrawShadowMap) {
    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);
    rgbaDepth -= rgbaDepth.gbaa * bitMask;
    return rgbaDepth;
  }
  if (shadow_uUseShadowMap) {
    float shadowAlpha = 0.0;
    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);
    if(shadow_uLightCount > 1.0) {
      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);
    }
    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;
    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);

    return vec4(
      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),
      blendedAlpha
    );
  }
  return color;
}
`,QZ=hc(nX),qZ=hc(rX),KZ=[0,0,0,1],eX=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0];function tX(t,e){const[n,i,a]=t,l=th([n,i,a],e);return Number.isFinite(a)?l:[l[0],l[1],0]}function nX({viewport:t,center:e}){return new hi(t.viewProjectionMatrix).invert().transform(e)}function rX({viewport:t,shadowMatrices:e}){const n=[],i=t.pixelUnprojectionMatrix,a=t.isGeospatial?void 0:1,l=[[0,0,a],[t.width,0,a],[0,t.height,a],[t.width,t.height,a],[0,0,-1],[t.width,0,-1],[0,t.height,-1],[t.width,t.height,-1]].map(f=>tX(f,i));for(const f of e){const d=f.clone().translate(new Bi(t.center).negate()),g=l.map(T=>d.transform(T)),v=new hi().ortho({left:Math.min(...g.map(T=>T[0])),right:Math.max(...g.map(T=>T[0])),bottom:Math.min(...g.map(T=>T[1])),top:Math.max(...g.map(T=>T[1])),near:Math.min(...g.map(T=>-T[2])),far:Math.max(...g.map(T=>-T[2]))});n.push(v.multiplyRight(f))}return n}function iX(t,e){const{shadowEnabled:n=!0}=t;if(!n||!t.shadowMatrices||!t.shadowMatrices.length)return{shadow_uDrawShadowMap:!1,shadow_uUseShadowMap:!1};const i={shadow_uDrawShadowMap:!!t.drawToShadowMap,shadow_uUseShadowMap:t.shadowMaps?t.shadowMaps.length>0:!1,shadow_uColor:t.shadowColor||KZ,shadow_uLightId:t.shadowLightId||0,shadow_uLightCount:t.shadowMatrices.length},a=QZ({viewport:t.viewport,center:e.project_uCenter}),l=[],f=qZ({shadowMatrices:t.shadowMatrices,viewport:t.viewport}).slice();for(let d=0;d<t.shadowMatrices.length;d++){const g=f[d],v=g.clone().translate(new Bi(t.viewport.center).negate());e.project_uCoordinateSystem===lt.LNGLAT&&e.project_uProjectionMode===Fi.WEB_MERCATOR?(f[d]=v,l[d]=a):(f[d]=g.clone().multiplyRight(eX),l[d]=v.transform(a))}for(let d=0;d<f.length;d++)i["shadow_uViewProjectionMatrices[".concat(d,"]")]=f[d],i["shadow_uProjectCenters[".concat(d,"]")]=l[d],t.shadowMaps&&t.shadowMaps.length>0?i["shadow_uShadowMap".concat(d)]=t.shadowMaps[d]:i["shadow_uShadowMap".concat(d)]=t.dummyShadowMap;return i}const qd={name:"shadow",dependencies:[Am],vs:$Z,fs:JZ,inject:{"vs:DECKGL_FILTER_GL_POSITION":`
    position = shadow_setVertexPosition(geometry.position);
    `,"fs:DECKGL_FILTER_COLOR":`
    color = shadow_filterShadowColor(color);
    `},getUniforms:(t={},e={})=>"viewport"in t&&(t.drawToShadowMap||t.shadowMaps&&t.shadowMaps.length>0)?iX(t,e):{}},sX={color:[255,255,255],intensity:1},Y_=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],oX=[0,0,0,200/255];class W4{constructor(e={}){C(this,"id","lighting-effect"),C(this,"props",void 0),C(this,"shadowColor",oX),C(this,"shadow",void 0),C(this,"ambientLight",void 0),C(this,"directionalLights",void 0),C(this,"pointLights",void 0),C(this,"shadowPasses",[]),C(this,"shadowMaps",[]),C(this,"dummyShadowMap",null),C(this,"programManager",void 0),C(this,"shadowMatrices",void 0),this.setProps(e)}setProps(e){this.ambientLight=null,this.directionalLights=[],this.pointLights=[];for(const n in e){const i=e[n];switch(i.type){case"ambient":this.ambientLight=i;break;case"directional":this.directionalLights.push(i);break;case"point":this.pointLights.push(i);break}}this._applyDefaultLights(),this.shadow=this.directionalLights.some(n=>n.shadow),this.props=e}preRender(e,{layers:n,layerFilter:i,viewports:a,onViewportActive:l,views:f}){if(this.shadow){this.shadowMatrices=this._calculateMatrices(),this.shadowPasses.length===0&&this._createShadowPasses(e),this.programManager||(this.programManager=fc.getDefaultProgramManager(e),qd&&this.programManager.addDefaultModule(qd)),this.dummyShadowMap||(this.dummyShadowMap=new fi(e,{width:1,height:1}));for(let d=0;d<this.shadowPasses.length;d++)this.shadowPasses[d].render({layers:n,layerFilter:i,viewports:a,onViewportActive:l,views:f,moduleParameters:{shadowLightId:d,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}})}}getModuleParameters(e){const n=this.shadow?{shadowMaps:this.shadowMaps,dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{};return n.lightSources={ambientLight:this.ambientLight,directionalLights:this.directionalLights.map(i=>i.getProjectedLight({layer:e})),pointLights:this.pointLights.map(i=>i.getProjectedLight({layer:e}))},n}cleanup(){for(const e of this.shadowPasses)e.delete();this.shadowPasses.length=0,this.shadowMaps.length=0,this.dummyShadowMap&&(this.dummyShadowMap.delete(),this.dummyShadowMap=null),this.shadow&&this.programManager&&(this.programManager.removeDefaultModule(qd),this.programManager=null)}_calculateMatrices(){const e=[];for(const n of this.directionalLights){const i=new hi().lookAt({eye:new Bi(n.direction).negate()});e.push(i)}return e}_createShadowPasses(e){for(let n=0;n<this.directionalLights.length;n++){const i=new wZ(e);this.shadowPasses[n]=i,this.shadowMaps[n]=i.shadowMap}}_applyDefaultLights(){const{ambientLight:e,pointLights:n,directionalLights:i}=this;!e&&n.length===0&&i.length===0&&(this.ambientLight=new dZ(sX),this.directionalLights.push(new j_(Y_[0]),new j_(Y_[1])))}}class aX{constructor(e={}){C(this,"_pool",[]),C(this,"opts",{overAlloc:2,poolSize:100}),this.setOptions(e)}setOptions(e){Object.assign(this.opts,e)}allocate(e,n,{size:i=1,type:a,padding:l=0,copy:f=!1,initialize:d=!1,maxCount:g}){const v=a||e&&e.constructor||Float32Array,T=n*i+l;if(ArrayBuffer.isView(e)){if(T<=e.length)return e;if(T*e.BYTES_PER_ELEMENT<=e.buffer.byteLength)return new v(e.buffer,0,T)}let S=1/0;g&&(S=g*i+l);const x=this._allocate(v,T,d,S);return e&&f?x.set(e):d||x.fill(0,0,4),this._release(e),x}release(e){this._release(e)}_allocate(e,n,i,a){let l=Math.max(Math.ceil(n*this.opts.overAlloc),1);l>a&&(l=a);const f=this._pool,d=e.BYTES_PER_ELEMENT*l,g=f.findIndex(v=>v.byteLength>=d);if(g>=0){const v=new e(f.splice(g,1)[0],0,l);return i&&v.fill(0),v}return new e(l)}_release(e){if(!ArrayBuffer.isView(e))return;const n=this._pool,{buffer:i}=e,{byteLength:a}=i,l=n.findIndex(f=>f.byteLength>=a);l<0?n.push(i):(l>0||n.length<this.opts.poolSize)&&n.splice(l,0,i),n.length>this.opts.poolSize&&n.shift()}}const Gl=new aX;function pl(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function uX(t,e){const n=t%e;return n<0?e+n:n}function lX(t){return[t[12],t[13],t[14]]}function cX(t){return{left:Ia(t[3]+t[0],t[7]+t[4],t[11]+t[8],t[15]+t[12]),right:Ia(t[3]-t[0],t[7]-t[4],t[11]-t[8],t[15]-t[12]),bottom:Ia(t[3]+t[1],t[7]+t[5],t[11]+t[9],t[15]+t[13]),top:Ia(t[3]-t[1],t[7]-t[5],t[11]-t[9],t[15]-t[13]),near:Ia(t[3]+t[2],t[7]+t[6],t[11]+t[10],t[15]+t[14]),far:Ia(t[3]-t[2],t[7]-t[6],t[11]-t[10],t[15]-t[14])}}const $_=new Bi;function Ia(t,e,n,i){$_.set(t,e,n);const a=$_.len();return{distance:i/a,normal:new Bi(-t/a,-e/a,-n/a)}}function fX(t){return t-Math.fround(t)}let ol;function Kd(t,e){const{size:n=1,startIndex:i=0}=e,a=e.endIndex!==void 0?e.endIndex:t.length,l=(a-i)/n;ol=Gl.allocate(ol,l,{type:Float32Array,size:n*2});let f=i,d=0;for(;f<a;){for(let g=0;g<n;g++){const v=t[f++];ol[d+g]=v,ol[d+g+n]=fX(v)}d+=n*2}return ol.subarray(0,l*n*2)}function hX(t){let e=null,n=!1;for(const i of t)i&&(e?(n||(e=[[e[0][0],e[0][1]],[e[1][0],e[1][1]]],n=!0),e[0][0]=Math.min(e[0][0],i[0][0]),e[0][1]=Math.min(e[0][1],i[0][1]),e[1][0]=Math.max(e[1][0],i[1][0]),e[1][1]=Math.max(e[1][1],i[1][1])):e=i);return e}const dX=Math.PI/180,pX=pl(),J_=[0,0,0],gX={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]};function mX({width:t,height:e,orthographic:n,fovyRadians:i,focalDistance:a,padding:l,near:f,far:d}){const g=t/e,v=n?new hi().orthographic({fovy:i,aspect:g,focalDistance:a,near:f,far:d}):new hi().perspective({fovy:i,aspect:g,near:f,far:d});if(l){const{left:T=0,right:S=0,top:x=0,bottom:M=0}=l,B=_r((T+t-S)/2,0,t)-t/2,W=_r((x+e-M)/2,0,e)-e/2;v[8]-=B*2/t,v[9]+=W*2/e}return v}class sa{constructor(e={}){C(this,"id",void 0),C(this,"x",void 0),C(this,"y",void 0),C(this,"width",void 0),C(this,"height",void 0),C(this,"padding",void 0),C(this,"isGeospatial",void 0),C(this,"zoom",void 0),C(this,"focalDistance",void 0),C(this,"position",void 0),C(this,"modelMatrix",void 0),C(this,"distanceScales",void 0),C(this,"scale",void 0),C(this,"center",void 0),C(this,"cameraPosition",void 0),C(this,"projectionMatrix",void 0),C(this,"viewMatrix",void 0),C(this,"viewMatrixUncentered",void 0),C(this,"viewMatrixInverse",void 0),C(this,"viewProjectionMatrix",void 0),C(this,"pixelProjectionMatrix",void 0),C(this,"pixelUnprojectionMatrix",void 0),C(this,"resolution",void 0),C(this,"_frustumPlanes",{}),this.id=e.id||this.constructor.displayName||"viewport",this.x=e.x||0,this.y=e.y||0,this.width=e.width||1,this.height=e.height||1,this.zoom=e.zoom||0,this.padding=e.padding,this.distanceScales=e.distanceScales||gX,this.focalDistance=e.focalDistance||1,this.position=e.position||J_,this.modelMatrix=e.modelMatrix||null;const{longitude:n,latitude:i}=e;this.isGeospatial=Number.isFinite(i)&&Number.isFinite(n),this._initProps(e),this._initMatrices(e),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}get subViewports(){return null}get metersPerPixel(){return this.distanceScales.metersPerUnit[2]/this.scale}get projectionMode(){return this.isGeospatial?this.zoom<12?Fi.WEB_MERCATOR:Fi.WEB_MERCATOR_AUTO_OFFSET:Fi.IDENTITY}equals(e){return e instanceof sa?this===e?!0:e.width===this.width&&e.height===this.height&&e.scale===this.scale&&Wl(e.projectionMatrix,this.projectionMatrix)&&Wl(e.viewMatrix,this.viewMatrix):!1}project(e,{topLeft:n=!0}={}){const i=this.projectPosition(e),a=j4(i,this.pixelProjectionMatrix),[l,f]=a,d=n?f:this.height-f;return e.length===2?[l,d]:[l,d,a[2]]}unproject(e,{topLeft:n=!0,targetZ:i}={}){const[a,l,f]=e,d=n?l:this.height-l,g=i&&i*this.distanceScales.unitsPerMeter[2],v=th([a,d,f],this.pixelUnprojectionMatrix,g),[T,S,x]=this.unprojectPosition(v);return Number.isFinite(f)?[T,S,x]:Number.isFinite(i)?[T,S,i]:[T,S]}projectPosition(e){const[n,i]=this.projectFlat(e),a=(e[2]||0)*this.distanceScales.unitsPerMeter[2];return[n,i,a]}unprojectPosition(e){const[n,i]=this.unprojectFlat(e),a=(e[2]||0)*this.distanceScales.metersPerUnit[2];return[n,i,a]}projectFlat(e){if(this.isGeospatial){const n=Sf(e);return n[1]=_r(n[1],-318,830),n}return e}unprojectFlat(e){return this.isGeospatial?Au(e):e}getBounds(e={}){const n={targetZ:e.z||0},i=this.unproject([0,0],n),a=this.unproject([this.width,0],n),l=this.unproject([0,this.height],n),f=this.unproject([this.width,this.height],n);return[Math.min(i[0],a[0],l[0],f[0]),Math.min(i[1],a[1],l[1],f[1]),Math.max(i[0],a[0],l[0],f[0]),Math.max(i[1],a[1],l[1],f[1])]}getDistanceScales(e){return e?Og({longitude:e[0],latitude:e[1],highPrecision:!0}):this.distanceScales}containsPixel({x:e,y:n,width:i=1,height:a=1}){return e<this.x+this.width&&this.x<e+i&&n<this.y+this.height&&this.y<n+a}getFrustumPlanes(){return this._frustumPlanes.near?this._frustumPlanes:(Object.assign(this._frustumPlanes,cX(this.viewProjectionMatrix)),this._frustumPlanes)}panByPosition(e,n){return null}_initProps(e){const n=e.longitude,i=e.latitude;this.isGeospatial&&(Number.isFinite(e.zoom)||(this.zoom=jZ({latitude:i})+Math.log2(this.focalDistance)),this.distanceScales=e.distanceScales||Og({latitude:i,longitude:n}));const a=Math.pow(2,this.zoom);this.scale=a;const{position:l,modelMatrix:f}=e;let d=J_;if(l&&(d=f?new hi(f).transformAsVector(l,[]):l),this.isGeospatial){const g=this.projectPosition([n,i,0]);this.center=new Bi(d).scale(this.distanceScales.unitsPerMeter).add(g)}else this.center=this.projectPosition(d)}_initMatrices(e){const{viewMatrix:n=pX,projectionMatrix:i=null,orthographic:a=!1,fovyRadians:l,fovy:f=75,near:d=.1,far:g=1e3,padding:v=null,focalDistance:T=1}=e;this.viewMatrixUncentered=n,this.viewMatrix=new hi().multiplyRight(n).translate(new Bi(this.center).negate()),this.projectionMatrix=i||mX({width:this.width,height:this.height,orthographic:a,fovyRadians:l||f*dX,focalDistance:T,padding:v,near:d,far:g});const S=pl();Ho(S,S,this.projectionMatrix),Ho(S,S,this.viewMatrix),this.viewProjectionMatrix=S,this.viewMatrixInverse=Cg([],this.viewMatrix)||this.viewMatrix,this.cameraPosition=lX(this.viewMatrixInverse);const x=pl(),M=pl();pm(x,x,[this.width/2,-this.height/2,1]),wf(x,x,[1,-1,0]),Ho(M,x,this.viewProjectionMatrix),this.pixelProjectionMatrix=M,this.pixelUnprojectionMatrix=Cg(pl(),this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||Et.warn("Pixel project matrix not invertible")()}}C(sa,"displayName","Viewport");class yu extends sa{constructor(e={}){const{latitude:n=0,longitude:i=0,zoom:a=0,pitch:l=0,bearing:f=0,nearZMultiplier:d=.1,farZMultiplier:g=1.01,nearZ:v,farZ:T,orthographic:S=!1,projectionMatrix:x,repeat:M=!1,worldOffset:B=0,position:W,padding:N,legacyMeterSizes:F=!1}=e;let{width:V,height:j,altitude:X=1.5}=e;const Q=Math.pow(2,a);V=V||1,j=j||1;let K,ae=null;if(x)X=x[5]/2,K=xf(X);else{e.fovy?(K=e.fovy,X=vm(K)):K=xf(X);let se;if(N){const{top:_e=0,bottom:we=0}=N;se=[0,_r((_e+j-we)/2,0,j)-j/2]}ae=GZ({width:V,height:j,scale:Q,center:W&&[0,0,W[2]*Qd(n)],offset:se,pitch:l,fovy:K,nearZMultiplier:d,farZMultiplier:g}),Number.isFinite(v)&&(ae.near=v),Number.isFinite(T)&&(ae.far=T)}let fe=WZ({height:j,pitch:l,bearing:f,scale:Q,altitude:X});B&&(fe=new hi().translate([512*B,0,0]).multiplyLeft(fe)),super({...e,width:V,height:j,viewMatrix:fe,longitude:i,latitude:n,zoom:a,...ae,fovy:K,focalDistance:X}),C(this,"longitude",void 0),C(this,"latitude",void 0),C(this,"pitch",void 0),C(this,"bearing",void 0),C(this,"altitude",void 0),C(this,"fovy",void 0),C(this,"orthographic",void 0),C(this,"_subViewports",void 0),C(this,"_pseudoMeters",void 0),this.latitude=n,this.longitude=i,this.zoom=a,this.pitch=l,this.bearing=f,this.altitude=X,this.fovy=K,this.orthographic=S,this._subViewports=M?[]:null,this._pseudoMeters=F,Object.freeze(this)}get subViewports(){if(this._subViewports&&!this._subViewports.length){const e=this.getBounds(),n=Math.floor((e[0]+180)/360),i=Math.ceil((e[2]-180)/360);for(let a=n;a<=i;a++){const l=a?new yu({...this,worldOffset:a}):this;this._subViewports.push(l)}}return this._subViewports}projectPosition(e){if(this._pseudoMeters)return super.projectPosition(e);const[n,i]=this.projectFlat(e),a=(e[2]||0)*Qd(e[1]);return[n,i,a]}unprojectPosition(e){if(this._pseudoMeters)return super.unprojectPosition(e);const[n,i]=this.unprojectFlat(e),a=(e[2]||0)/Qd(i);return[n,i,a]}addMetersToLngLat(e,n){return z4(e,n)}panByPosition(e,n){const i=th(n,this.pixelUnprojectionMatrix),a=this.projectFlat(e),l=L_([],a,jW([],i)),f=L_([],this.center,l),[d,g]=this.unprojectFlat(f);return{longitude:d,latitude:g}}getBounds(e={}){const n=HZ(this,e.z||0);return[Math.min(n[0][0],n[1][0],n[2][0],n[3][0]),Math.min(n[0][1],n[1][1],n[2][1],n[3][1]),Math.max(n[0][0],n[1][0],n[2][0],n[3][0]),Math.max(n[0][1],n[1][1],n[2][1],n[3][1])]}fitBounds(e,n={}){const{width:i,height:a}=this,{longitude:l,latitude:f,zoom:d}=ZZ({width:i,height:a,bounds:e,...n});return new yu({width:i,height:a,longitude:l,latitude:f,zoom:d})}}C(yu,"displayName","WebMercatorViewport");const Q_=[0,0,0];function ep(t,e,n=!1){const i=e.projectPosition(t);if(n&&e instanceof yu){const[a,l,f=0]=t,d=e.getDistanceScales([a,l]);i[2]=f*d.unitsPerMeter[2]}return i}function AX(t){const{viewport:e,modelMatrix:n,coordinateOrigin:i}=t;let{coordinateSystem:a,fromCoordinateSystem:l,fromCoordinateOrigin:f}=t;return a===lt.DEFAULT&&(a=e.isGeospatial?lt.LNGLAT:lt.CARTESIAN),l===void 0&&(l=a),f===void 0&&(f=i),{viewport:e,coordinateSystem:a,coordinateOrigin:i,modelMatrix:n,fromCoordinateSystem:l,fromCoordinateOrigin:f}}function G4(t,{viewport:e,modelMatrix:n,coordinateSystem:i,coordinateOrigin:a,offsetMode:l}){let[f,d,g=0]=t;switch(n&&([f,d,g]=cc([],[f,d,g,1],n)),i){case lt.LNGLAT:return ep([f,d,g],e,l);case lt.LNGLAT_OFFSETS:return ep([f+a[0],d+a[1],g+(a[2]||0)],e,l);case lt.METER_OFFSETS:return ep(z4(a,[f,d,g]),e,l);case lt.CARTESIAN:default:return e.isGeospatial?[f+a[0],d+a[1],g+a[2]]:e.projectPosition([f,d,g])}}function yX(t,e){const{viewport:n,coordinateSystem:i,coordinateOrigin:a,modelMatrix:l,fromCoordinateSystem:f,fromCoordinateOrigin:d}=AX(e),{autoOffset:g=!0}=e,{geospatialOrigin:v=Q_,shaderCoordinateOrigin:T=Q_,offsetMode:S=!1}=g?B4(n,i,a):{},x=G4(t,{viewport:n,modelMatrix:l,coordinateSystem:f,coordinateOrigin:d,offsetMode:S});if(S){const M=n.projectPosition(v||T);rG(x,x,M)}return x}const q_={blendFunc:[1,0,32771,0],blendEquation:32774};class Z4 extends mm{constructor(...e){super(...e),C(this,"pickZ",void 0),C(this,"_colorEncoderState",null)}render(e){return"pickingFBO"in e?this._drawPickingBuffer(e):super.render(e)}_drawPickingBuffer({layers:e,layerFilter:n,views:i,viewports:a,onViewportActive:l,pickingFBO:f,deviceRect:{x:d,y:g,width:v,height:T},cullRect:S,effects:x,pass:M="picking",pickZ:B,moduleParameters:W}){const N=this.gl;this.pickZ=B;const F=this._resetColorEncoder(B),V=ui(N,{scissorTest:!0,scissor:[d,g,v,T],clearColor:[0,0,0,0],depthMask:!0,depthTest:!0,depthRange:[0,1],colorMask:[!0,!0,!0,!0],...q_,blend:!B},()=>super.render({target:f,layers:e,layerFilter:n,views:i,viewports:a,onViewportActive:l,cullRect:S,effects:x==null?void 0:x.filter(X=>X.useInPicking),pass:M,isPicking:!0,moduleParameters:W}));return this._colorEncoderState=null,{decodePickingColor:F&&_X.bind(null,F),stats:V}}shouldDrawLayer(e){const{pickable:n,operation:i}=e.props;return n&&i.includes("draw")||i.includes("terrain")||i.includes("mask")}getModuleParameters(){return{pickingActive:1,pickingAttribute:this.pickZ,lightSources:{}}}getLayerParameters(e,n,i){const a={...e.props.parameters},{pickable:l,operation:f}=e.props;return this._colorEncoderState?l&&f.includes("draw")&&(Object.assign(a,q_),a.blend=!0,a.blendColor=vX(this._colorEncoderState,e,i)):a.blend=!1,f.includes("terrain")&&(a.blend=!1),a}_resetColorEncoder(e){return this._colorEncoderState=e?null:{byLayer:new Map,byAlpha:[]},this._colorEncoderState}}function vX(t,e,n){const{byLayer:i,byAlpha:a}=t;let l,f=i.get(e);return f?(f.viewports.push(n),l=f.a):(l=i.size+1,l<=255?(f={a:l,layer:e,viewports:[n]},i.set(e,f),a[l]=f):(Et.warn("Too many pickable layers, only picking the first 255")(),l=0)),[0,0,0,l/255]}function _X(t,e){const n=t.byAlpha[e[3]];return n&&{pickedLayer:n.layer,pickedViewports:n.viewports,pickedObjectIndex:n.layer.decodePickingColor(e)}}const Ba={NO_STATE:"Awaiting state",MATCHED:"Matched. State transferred from previous layer",INITIALIZED:"Initialized",AWAITING_GC:"Discarded. Awaiting garbage collection",AWAITING_FINALIZATION:"No longer matched. Awaiting garbage collection",FINALIZED:"Finalized! Awaiting garbage collection"},Rf=Symbol.for("component"),Yo=Symbol.for("propTypes"),tp=Symbol.for("deprecatedProps"),nu=Symbol.for("asyncPropDefaults"),Ko=Symbol.for("asyncPropOriginal"),zs=Symbol.for("asyncPropResolved");function X4(t,e=()=>!0){return Array.isArray(t)?H4(t,e,[]):e(t)?[t]:[]}function H4(t,e,n){let i=-1;for(;++i<t.length;){const a=t[i];Array.isArray(a)?H4(a,e,n):e(a)&&n.push(a)}return n}function wX({target:t,source:e,start:n=0,count:i=1}){const a=e.length,l=i*a;let f=0;for(let d=n;f<a;f++)t[d++]=e[f];for(;f<l;)f<l-f?(t.copyWithin(n+f,n,n+f),f*=2):(t.copyWithin(n+f,n,n+l-f),f=l);return t}class TX{constructor(e,n,i){C(this,"id",void 0),C(this,"context",void 0),C(this,"isLoaded",void 0),C(this,"persistent",void 0),C(this,"_loadCount",0),C(this,"_subscribers",new Set),C(this,"_data",void 0),C(this,"_loader",void 0),C(this,"_error",void 0),C(this,"_content",void 0),this.id=e,this.context=i,this.setData(n)}subscribe(e){this._subscribers.add(e)}unsubscribe(e){this._subscribers.delete(e)}inUse(){return this._subscribers.size>0}delete(){}getData(){return this.isLoaded?this._error?Promise.reject(this._error):this._content:this._loader.then(()=>this.getData())}setData(e,n){if(e===this._data&&!n)return;this._data=e;const i=++this._loadCount;let a=e;typeof e=="string"&&(a=yg(e)),a instanceof Promise?(this.isLoaded=!1,this._loader=a.then(l=>{this._loadCount===i&&(this.isLoaded=!0,this._error=void 0,this._content=l)}).catch(l=>{this._loadCount===i&&(this.isLoaded=!0,this._error=l||!0)})):(this.isLoaded=!0,this._error=void 0,this._content=e);for(const l of this._subscribers)l.onChange(this.getData())}}class EX{constructor({gl:e,protocol:n}){C(this,"protocol",void 0),C(this,"_context",void 0),C(this,"_resources",void 0),C(this,"_consumers",void 0),C(this,"_pruneRequest",void 0),this.protocol=n||"resource://",this._context={gl:e,resourceManager:this},this._resources={},this._consumers={},this._pruneRequest=null}contains(e){return e.startsWith(this.protocol)?!0:e in this._resources}add({resourceId:e,data:n,forceUpdate:i=!1,persistent:a=!0}){let l=this._resources[e];l?l.setData(n,i):(l=new TX(e,n,this._context),this._resources[e]=l),l.persistent=a}remove(e){const n=this._resources[e];n&&(n.delete(),delete this._resources[e])}unsubscribe({consumerId:e}){const n=this._consumers[e];if(n){for(const i in n){const a=n[i],l=this._resources[a.resourceId];l&&l.unsubscribe(a)}delete this._consumers[e],this.prune()}}subscribe({resourceId:e,onChange:n,consumerId:i,requestId:a="default"}){const{_resources:l,protocol:f}=this;e.startsWith(f)&&(e=e.replace(f,""),l[e]||this.add({resourceId:e,data:null,persistent:!1}));const d=l[e];if(this._track(i,a,d,n),d)return d.getData()}prune(){this._pruneRequest||(this._pruneRequest=setTimeout(()=>this._prune(),0))}finalize(){for(const e in this._resources)this._resources[e].delete()}_track(e,n,i,a){const l=this._consumers,f=l[e]=l[e]||{},d=f[n]||{},g=d.resourceId&&this._resources[d.resourceId];g&&(g.unsubscribe(d),this.prune()),i&&(f[n]=d,d.onChange=a,d.resourceId=i.id,i.subscribe(d))}_prune(){this._pruneRequest=null;for(const e of Object.keys(this._resources)){const n=this._resources[e];!n.persistent&&!n.inUse()&&(n.delete(),delete this._resources[e])}}}const SX=`
vec4 project_position_to_clipspace(
  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition
) {
  vec3 projectedPosition = project_position(position, position64Low);
  mat3 rotation;
  if (project_needs_rotation(projectedPosition, rotation)) {
    // offset is specified as ENU
    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe
    offset = rotation * offset;
  }
  commonPosition = vec4(projectedPosition + offset, 1.0);
  return project_common_position_to_clipspace(commonPosition);
}

vec4 project_position_to_clipspace(
  vec3 position, vec3 position64Low, vec3 offset
) {
  vec4 commonPosition;
  return project_position_to_clipspace(position, position64Low, offset, commonPosition);
}
`,xX={name:"project32",dependencies:[Am],vs:SX},RX={inject:{"vs:DECKGL_FILTER_GL_POSITION":`
    // for picking depth values
    picking_setPickingAttribute(position.z / position.w);
  `,"vs:DECKGL_FILTER_COLOR":`
  picking_setPickingColor(geometry.pickingColor);
  `,"fs:#decl":`
uniform bool picking_uAttribute;
  `,"fs:DECKGL_FILTER_COLOR":{order:99,injection:`
  // use highlight color if this fragment belongs to the selected object.
  color = picking_filterHighlightColor(color);

  // use picking color if rendering to picking FBO.
  color = picking_filterPickingColor(color);
    `}},...NG},bX=[Am],kX=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"];function PX(t){const e=fc.getDefaultProgramManager(t);for(const n of bX)e.addDefaultModule(n);for(const n of kX)e.addShaderHook(n);return e}const MX="layerManager.setLayers",CX="layerManager.activateViewport";class IX{constructor(e,{deck:n,stats:i,viewport:a,timeline:l}={}){C(this,"layers",void 0),C(this,"context",void 0),C(this,"resourceManager",void 0),C(this,"_lastRenderedLayers",[]),C(this,"_needsRedraw",!1),C(this,"_needsUpdate",!1),C(this,"_nextLayers",null),C(this,"_debug",!1),C(this,"activateViewport",f=>{jn(CX,this,f),f&&(this.context.viewport=f)}),this.layers=[],this.resourceManager=new EX({gl:e,protocol:"deck://"}),this.context={mousePosition:null,userData:{},layerManager:this,gl:e,deck:n,programManager:e&&PX(e),stats:i||new um({id:"deck.gl"}),viewport:a||new sa({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:l||new F4,resourceManager:this.resourceManager,onError:void 0},Object.seal(this)}finalize(){this.resourceManager.finalize();for(const e of this.layers)this._finalizeLayer(e)}needsRedraw(e={clearRedrawFlags:!1}){let n=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);for(const i of this.layers){const a=i.getNeedsRedraw(e);n=n||a}return n}needsUpdate(){return this._nextLayers&&this._nextLayers!==this._lastRenderedLayers?"layers changed":this._needsUpdate}setNeedsRedraw(e){this._needsRedraw=this._needsRedraw||e}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e}getLayers({layerIds:e}={}){return e?this.layers.filter(n=>e.find(i=>n.id.indexOf(i)===0)):this.layers}setProps(e){"debug"in e&&(this._debug=e.debug),"userData"in e&&(this.context.userData=e.userData),"layers"in e&&(this._nextLayers=e.layers),"onError"in e&&(this.context.onError=e.onError)}setLayers(e,n){jn(MX,this,n,e),this._lastRenderedLayers=e;const i=X4(e,Boolean);for(const a of i)a.context=this.context;this._updateLayers(this.layers,i)}updateLayers(){const e=this.needsUpdate();e&&(this.setNeedsRedraw("updating layers: ".concat(e)),this.setLayers(this._nextLayers||this._lastRenderedLayers,e)),this._nextLayers=null}_handleError(e,n,i){i.raiseError(n,"".concat(e," of ").concat(i))}_updateLayers(e,n){const i={};for(const f of e)i[f.id]?Et.warn("Multiple old layers with same id ".concat(f.id))():i[f.id]=f;const a=[];this._updateSublayersRecursively(n,i,a),this._finalizeOldLayers(i);let l=!1;for(const f of a)if(f.hasUniformTransition()){l="Uniform transition in ".concat(f);break}this._needsUpdate=l,this.layers=a}_updateSublayersRecursively(e,n,i){for(const a of e){a.context=this.context;const l=n[a.id];l===null&&Et.warn("Multiple new layers with same id ".concat(a.id))(),n[a.id]=null;let f=null;try{this._debug&&l!==a&&a.validateProps(),l?(this._transferLayerState(l,a),this._updateLayer(a)):this._initializeLayer(a),i.push(a),f=a.isComposite?a.getSubLayers():null}catch(d){this._handleError("matching",d,a)}f&&this._updateSublayersRecursively(f,n,i)}}_finalizeOldLayers(e){for(const n in e){const i=e[n];i&&this._finalizeLayer(i)}}_initializeLayer(e){try{e._initialize(),e.lifecycle=Ba.INITIALIZED}catch(n){this._handleError("initialization",n,e)}}_transferLayerState(e,n){n._transferState(e),n.lifecycle=Ba.MATCHED,n!==e&&(e.lifecycle=Ba.AWAITING_GC)}_updateLayer(e){try{e._update()}catch(n){this._handleError("update",n,e)}}_finalizeLayer(e){this._needsRedraw=this._needsRedraw||"finalized ".concat(e),e.lifecycle=Ba.AWAITING_FINALIZATION;try{e._finalize(),e.lifecycle=Ba.FINALIZED}catch(n){this._handleError("finalization",n,e)}}}function Oi(t,e,n){if(t===e)return!0;if(!n||!t||!e)return!1;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(!Oi(t[i],e[i],n-1))return!1;return!0}if(Array.isArray(e))return!1;if(typeof t=="object"&&typeof e=="object"){const i=Object.keys(t),a=Object.keys(e);if(i.length!==a.length)return!1;for(const l of i)if(!e.hasOwnProperty(l)||!Oi(t[l],e[l],n-1))return!1;return!0}return!1}class NX{constructor(e){C(this,"width",void 0),C(this,"height",void 0),C(this,"views",void 0),C(this,"viewState",void 0),C(this,"controllers",void 0),C(this,"timeline",void 0),C(this,"_viewports",void 0),C(this,"_viewportMap",void 0),C(this,"_isUpdating",void 0),C(this,"_needsRedraw",void 0),C(this,"_needsUpdate",void 0),C(this,"_eventManager",void 0),C(this,"_eventCallbacks",void 0),this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=e.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="First render",this._needsUpdate="Initialize",this._eventManager=e.eventManager,this._eventCallbacks={onViewStateChange:e.onViewStateChange,onInteractionStateChange:e.onInteractionStateChange},Object.seal(this),this.setProps(e)}finalize(){for(const e in this.controllers){const n=this.controllers[e];n&&n.finalize()}this.controllers={}}needsRedraw(e={clearRedrawFlags:!1}){const n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e,this._needsRedraw=this._needsRedraw||e}updateViewStates(){for(const e in this.controllers){const n=this.controllers[e];n&&n.updateTransition()}}getViewports(e){return e?this._viewports.filter(n=>n.containsPixel(e)):this._viewports}getViews(){const e={};return this.views.forEach(n=>{e[n.id]=n}),e}getView(e){return this.views.find(n=>n.id===e)}getViewState(e){const n=typeof e=="string"?this.getView(e):e,i=n&&this.viewState[n.getViewStateId()]||this.viewState;return n?n.filterViewState(i):i}getViewport(e){return this._viewportMap[e]}unproject(e,n){const i=this.getViewports(),a={x:e[0],y:e[1]};for(let l=i.length-1;l>=0;--l){const f=i[l];if(f.containsPixel(a)){const d=e.slice();return d[0]-=f.x,d[1]-=f.y,f.unproject(d,n)}}return null}setProps(e){e.views&&this._setViews(e.views),e.viewState&&this._setViewState(e.viewState),("width"in e||"height"in e)&&this._setSize(e.width,e.height),this._isUpdating||this._update()}_update(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}_setSize(e,n){(e!==this.width||n!==this.height)&&(this.width=e,this.height=n,this.setNeedsUpdate("Size changed"))}_setViews(e){e=X4(e,Boolean),this._diffViews(e,this.views)&&this.setNeedsUpdate("views changed"),this.views=e}_setViewState(e){e?(!Oi(e,this.viewState,3)&&this.setNeedsUpdate("viewState changed"),this.viewState=e):Et.warn("missing `viewState` or `initialViewState`")()}_onViewStateChange(e,n){this._eventCallbacks.onViewStateChange&&this._eventCallbacks.onViewStateChange({...n,viewId:e})}_createController(e,n){const i=n.type;return new i({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._onViewStateChange.bind(this,n.id),onStateChange:this._eventCallbacks.onInteractionStateChange,makeViewport:l=>{var f;return(f=this.getView(e.id))===null||f===void 0?void 0:f.makeViewport({viewState:l,width:this.width,height:this.height})}})}_updateController(e,n,i,a){const l=e.controller;if(l&&i){const f={...n,...l,id:e.id,x:i.x,y:i.y,width:i.width,height:i.height};return(!a||a.constructor!==l.type)&&(a=this._createController(e,f)),a&&a.setProps(f),a}return null}_rebuildViewports(){const{views:e}=this,n=this.controllers;this._viewports=[],this.controllers={};let i=!1;for(let a=e.length;a--;){const l=e[a],f=this.getViewState(l),d=l.makeViewport({viewState:f,width:this.width,height:this.height});let g=n[l.id];const v=!!l.controller;v&&!g&&(i=!0),(i||!v)&&g&&(g.finalize(),g=null),this.controllers[l.id]=this._updateController(l,f,d,g),d&&this._viewports.unshift(d)}for(const a in n){const l=n[a];l&&!this.controllers[a]&&l.finalize()}this._buildViewportMap()}_buildViewportMap(){this._viewportMap={},this._viewports.forEach(e=>{e.id&&(this._viewportMap[e.id]=this._viewportMap[e.id]||e)})}_diffViews(e,n){return e.length!==n.length?!0:e.some((i,a)=>!e[a].equals(n[a]))}}const FX=/([0-9]+\.?[0-9]*)(%|px)/;function Ms(t){switch(typeof t){case"number":return{position:t,relative:!1};case"string":const e=FX.exec(t);if(e&&e.length>=3){const n=e[2]==="%",i=parseFloat(e[1]);return{position:n?i/100:i,relative:n}}default:throw new Error("Could not parse position string ".concat(t))}}function Cs(t,e){return t.relative?Math.round(t.position*e):t.position}function _n(t,e){if(!t)throw new Error(e||"deck.gl: assertion failed.")}class ea{constructor(e){C(this,"id",void 0),C(this,"viewportInstance",void 0),C(this,"_x",void 0),C(this,"_y",void 0),C(this,"_width",void 0),C(this,"_height",void 0),C(this,"_padding",void 0),C(this,"props",void 0);const{id:n,x:i=0,y:a=0,width:l="100%",height:f="100%",padding:d=null,viewportInstance:g}=e||{};_n(!g||g instanceof sa),this.viewportInstance=g,this.id=n||this.constructor.displayName||"view",this.props={...e,id:this.id},this._x=Ms(i),this._y=Ms(a),this._width=Ms(l),this._height=Ms(f),this._padding=d&&{left:Ms(d.left||0),right:Ms(d.right||0),top:Ms(d.top||0),bottom:Ms(d.bottom||0)},this.equals=this.equals.bind(this),Object.seal(this)}equals(e){return this===e?!0:this.viewportInstance?e.viewportInstance?this.viewportInstance.equals(e.viewportInstance):!1:this.ViewportType===e.ViewportType&&Oi(this.props,e.props,2)}makeViewport({width:e,height:n,viewState:i}){if(this.viewportInstance)return this.viewportInstance;i=this.filterViewState(i);const a=this.getDimensions({width:e,height:n});return!a.height||!a.width?null:new this.ViewportType({...i,...this.props,...a})}getViewStateId(){const{viewState:e}=this.props;return typeof e=="string"?e:(e==null?void 0:e.id)||this.id}filterViewState(e){if(this.props.viewState&&typeof this.props.viewState=="object"){if(!this.props.viewState.id)return this.props.viewState;const n={...e};for(const i in this.props.viewState)i!=="id"&&(n[i]=this.props.viewState[i]);return n}return e}getDimensions({width:e,height:n}){const i={x:Cs(this._x,e),y:Cs(this._y,n),width:Cs(this._width,e),height:Cs(this._height,n)};return this._padding&&(i.padding={left:Cs(this._padding.left,e),top:Cs(this._padding.top,n),right:Cs(this._padding.right,e),bottom:Cs(this._padding.bottom,n)}),i}get controller(){const e=this.props.controller;return e?e===!0?{type:this.ControllerType}:typeof e=="function"?{type:e}:{type:this.ControllerType,...e}:null}}class dc{constructor(e){C(this,"_inProgress",void 0),C(this,"_handle",void 0),C(this,"_timeline",void 0),C(this,"time",void 0),C(this,"settings",void 0),this._inProgress=!1,this._handle=null,this._timeline=e,this.time=0,this.settings={duration:0}}get inProgress(){return this._inProgress}start(e){var n,i;this.cancel(),this.settings=e,this._inProgress=!0,(n=(i=this.settings).onStart)===null||n===void 0||n.call(i,this)}end(){if(this._inProgress){var e,n;this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,(e=(n=this.settings).onEnd)===null||e===void 0||e.call(n,this)}}cancel(){if(this._inProgress){var e,n;(e=(n=this.settings).onInterrupt)===null||e===void 0||e.call(n,this),this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1}}update(){var e,n;if(!this._inProgress)return!1;if(this._handle===null){const{_timeline:i,settings:a}=this;this._handle=i.addChannel({delay:i.getTime(),duration:a.duration})}return this.time=this._timeline.getTime(this._handle),this._onUpdate(),(e=(n=this.settings).onUpdate)===null||e===void 0||e.call(n,this),this._timeline.isFinished(this._handle)&&this.end(),!0}_onUpdate(){}}const K_=()=>{},Lg={BREAK:1,SNAP_TO_END:2,IGNORE:3},OX=t=>t,LX=Lg.BREAK;class VX{constructor(e){C(this,"getControllerState",void 0),C(this,"props",void 0),C(this,"propsInTransition",void 0),C(this,"transition",void 0),C(this,"onViewStateChange",void 0),C(this,"onStateChange",void 0),C(this,"_onTransitionUpdate",n=>{const{time:i,settings:{interpolator:a,startProps:l,endProps:f,duration:d,easing:g}}=n,v=g(i/d),T=a.interpolateProps(l,f,v);this.propsInTransition=this.getControllerState({...this.props,...T}).getViewportProps(),this.onViewStateChange({viewState:this.propsInTransition,oldViewState:this.props})}),this.getControllerState=e.getControllerState,this.propsInTransition=null,this.transition=new dc(e.timeline),this.onViewStateChange=e.onViewStateChange||K_,this.onStateChange=e.onStateChange||K_}finalize(){this.transition.cancel()}getViewportInTransition(){return this.propsInTransition}processViewStateChange(e){let n=!1;const i=this.props;if(this.props=e,!i||this._shouldIgnoreViewportChange(i,e))return!1;if(this._isTransitionEnabled(e)){let a=i;if(this.transition.inProgress){const{interruption:l,endProps:f}=this.transition.settings;a={...i,...l===Lg.SNAP_TO_END?f:this.propsInTransition||i}}this._triggerTransition(a,e),n=!0}else this.transition.cancel();return n}updateTransition(){this.transition.update()}_isTransitionEnabled(e){const{transitionDuration:n,transitionInterpolator:i}=e;return(n>0||n==="auto")&&!!i}_isUpdateDueToCurrentTransition(e){return this.transition.inProgress&&this.propsInTransition?this.transition.settings.interpolator.arePropsEqual(e,this.propsInTransition):!1}_shouldIgnoreViewportChange(e,n){return this.transition.inProgress?this.transition.settings.interruption===Lg.IGNORE||this._isUpdateDueToCurrentTransition(n):this._isTransitionEnabled(n)?n.transitionInterpolator.arePropsEqual(e,n):!0}_triggerTransition(e,n){const i=this.getControllerState(e),a=this.getControllerState(n).shortestPathFrom(i),l=n.transitionInterpolator,f=l.getDuration?l.getDuration(e,n):n.transitionDuration;if(f===0)return;const d=l.initializeProps(e,a);this.propsInTransition={};const g={duration:f,easing:n.transitionEasing||OX,interpolator:l,interruption:n.transitionInterruption||LX,startProps:d.start,endProps:d.end,onStart:n.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(n.onTransitionInterrupt),onEnd:this._onTransitionEnd(n.onTransitionEnd)};this.transition.start(g),this.onStateChange({inTransition:!0}),this.updateTransition()}_onTransitionEnd(e){return n=>{this.propsInTransition=null,this.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1}),e==null||e(n)}}}class UX{constructor(e){C(this,"_propsToCompare",void 0),C(this,"_propsToExtract",void 0),C(this,"_requiredProps",void 0);const{compare:n,extract:i,required:a}=e;this._propsToCompare=n,this._propsToExtract=i||n,this._requiredProps=a}arePropsEqual(e,n){for(const i of this._propsToCompare)if(!(i in e)||!(i in n)||!Wl(e[i],n[i]))return!1;return!0}initializeProps(e,n){const i={},a={};for(const l of this._propsToExtract)(l in e||l in n)&&(i[l]=e[l],a[l]=n[l]);return this._checkRequiredProps(i),this._checkRequiredProps(a),{start:i,end:a}}getDuration(e,n){return n.transitionDuration}_checkRequiredProps(e){this._requiredProps&&this._requiredProps.forEach(n=>{const i=e[n];_n(Number.isFinite(i)||Array.isArray(i),"".concat(n," is required for transition"))})}}const BX=["longitude","latitude","zoom","bearing","pitch"],DX=["longitude","latitude","zoom"];class nh extends UX{constructor(e={}){const n=Array.isArray(e)?e:e.transitionProps,i=Array.isArray(e)?{}:e;i.transitionProps=Array.isArray(n)?{compare:n,required:n}:n||{compare:BX,required:DX},super(i.transitionProps),C(this,"opts",void 0),this.opts=i}initializeProps(e,n){const i=super.initializeProps(e,n),{makeViewport:a,around:l}=this.opts;if(a&&l){const f=a(e),d=a(n),g=f.unproject(l);i.start.around=l,Object.assign(i.end,{around:d.project(g),aroundPosition:g,width:n.width,height:n.height})}return i}interpolateProps(e,n,i){const a={};for(const l of this._propsToExtract)a[l]=_f(e[l]||0,n[l]||0,i);if(n.aroundPosition&&this.opts.makeViewport){const l=this.opts.makeViewport({...n,...a});Object.assign(a,l.panByPosition(n.aroundPosition,_f(e.around,n.around,i)))}return a}}const Is={transitionDuration:0},zX=300,d0=t=>1-(1-t)*(1-t),Na={WHEEL:["wheel"],PAN:["panstart","panmove","panend"],PINCH:["pinchstart","pinchmove","pinchend"],TRIPLE_PAN:["tripanstart","tripanmove","tripanend"],DOUBLE_TAP:["doubletap"],KEYBOARD:["keydown"]},Mo={};class Y4{constructor(e){C(this,"props",void 0),C(this,"state",{}),C(this,"transitionManager",void 0),C(this,"eventManager",void 0),C(this,"onViewStateChange",void 0),C(this,"onStateChange",void 0),C(this,"makeViewport",void 0),C(this,"_controllerState",void 0),C(this,"_events",{}),C(this,"_interactionState",{isDragging:!1}),C(this,"_customEvents",[]),C(this,"_eventStartBlocked",null),C(this,"_panMove",!1),C(this,"invertPan",!1),C(this,"dragMode","rotate"),C(this,"inertia",0),C(this,"scrollZoom",!0),C(this,"dragPan",!0),C(this,"dragRotate",!0),C(this,"doubleClickZoom",!0),C(this,"touchZoom",!0),C(this,"touchRotate",!1),C(this,"keyboard",!0),this.transitionManager=new VX({...e,getControllerState:n=>new this.ControllerState(n),onViewStateChange:this._onTransition.bind(this),onStateChange:this._setInteractionState.bind(this)}),this.handleEvent=this.handleEvent.bind(this),this.eventManager=e.eventManager,this.onViewStateChange=e.onViewStateChange||(()=>{}),this.onStateChange=e.onStateChange||(()=>{}),this.makeViewport=e.makeViewport}set events(e){this.toggleEvents(this._customEvents,!1),this.toggleEvents(e,!0),this._customEvents=e,this.props&&this.setProps(this.props)}finalize(){for(const n in this._events)if(this._events[n]){var e;(e=this.eventManager)===null||e===void 0||e.off(n,this.handleEvent)}this.transitionManager.finalize()}handleEvent(e){this._controllerState=void 0;const n=this._eventStartBlocked;switch(e.type){case"panstart":return n?!1:this._onPanStart(e);case"panmove":return this._onPan(e);case"panend":return this._onPanEnd(e);case"pinchstart":return n?!1:this._onPinchStart(e);case"pinchmove":return this._onPinch(e);case"pinchend":return this._onPinchEnd(e);case"tripanstart":return n?!1:this._onTriplePanStart(e);case"tripanmove":return this._onTriplePan(e);case"tripanend":return this._onTriplePanEnd(e);case"doubletap":return this._onDoubleTap(e);case"wheel":return this._onWheel(e);case"keydown":return this._onKeyDown(e);default:return!1}}get controllerState(){return this._controllerState=this._controllerState||new this.ControllerState({makeViewport:this.makeViewport,...this.props,...this.state}),this._controllerState}getCenter(e){const{x:n,y:i}=this.props,{offsetCenter:a}=e;return[a.x-n,a.y-i]}isPointInBounds(e,n){const{width:i,height:a}=this.props;if(n&&n.handled)return!1;const l=e[0]>=0&&e[0]<=i&&e[1]>=0&&e[1]<=a;return l&&n&&n.stopPropagation(),l}isFunctionKeyPressed(e){const{srcEvent:n}=e;return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}isDragging(){return this._interactionState.isDragging||!1}blockEvents(e){const n=setTimeout(()=>{this._eventStartBlocked===n&&(this._eventStartBlocked=null)},e);this._eventStartBlocked=n}setProps(e){e.dragMode&&(this.dragMode=e.dragMode),this.props=e,"transitionInterpolator"in e||(e.transitionInterpolator=this._getTransitionProps().transitionInterpolator),this.transitionManager.processViewStateChange(e);const{inertia:n}=e;this.inertia=Number.isFinite(n)?n:n===!0?zX:0;const{scrollZoom:i=!0,dragPan:a=!0,dragRotate:l=!0,doubleClickZoom:f=!0,touchZoom:d=!0,touchRotate:g=!1,keyboard:v=!0}=e,T=!!this.onViewStateChange;this.toggleEvents(Na.WHEEL,T&&i),this.toggleEvents(Na.PAN,T),this.toggleEvents(Na.PINCH,T&&(d||g)),this.toggleEvents(Na.TRIPLE_PAN,T&&g),this.toggleEvents(Na.DOUBLE_TAP,T&&f),this.toggleEvents(Na.KEYBOARD,T&&v),this.scrollZoom=i,this.dragPan=a,this.dragRotate=l,this.doubleClickZoom=f,this.touchZoom=d,this.touchRotate=g,this.keyboard=v}updateTransition(){this.transitionManager.updateTransition()}toggleEvents(e,n){this.eventManager&&e.forEach(i=>{this._events[i]!==n&&(this._events[i]=n,n?this.eventManager.on(i,this.handleEvent):this.eventManager.off(i,this.handleEvent))})}updateViewport(e,n=null,i={}){const a={...e.getViewportProps(),...n},l=this.controllerState!==e;if(this.state=e.getState(),this._setInteractionState(i),l){const f=this.controllerState&&this.controllerState.getViewportProps();this.onViewStateChange&&this.onViewStateChange({viewState:a,interactionState:this._interactionState,oldViewState:f})}}_onTransition(e){this.onViewStateChange({...e,interactionState:this._interactionState})}_setInteractionState(e){Object.assign(this._interactionState,e),this.onStateChange(this._interactionState)}_onPanStart(e){const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;let i=this.isFunctionKeyPressed(e)||e.rightButton||!1;(this.invertPan||this.dragMode==="pan")&&(i=!i);const a=this.controllerState[i?"panStart":"rotateStart"]({pos:n});return this._panMove=i,this.updateViewport(a,Is,{isDragging:!0}),!0}_onPan(e){return this.isDragging()?this._panMove?this._onPanMove(e):this._onPanRotate(e):!1}_onPanEnd(e){return this.isDragging()?this._panMove?this._onPanMoveEnd(e):this._onPanRotateEnd(e):!1}_onPanMove(e){if(!this.dragPan)return!1;const n=this.getCenter(e),i=this.controllerState.pan({pos:n});return this.updateViewport(i,Is,{isDragging:!0,isPanning:!0}),!0}_onPanMoveEnd(e){const{inertia:n}=this;if(this.dragPan&&n&&e.velocity){const i=this.getCenter(e),a=[i[0]+e.velocityX*n/2,i[1]+e.velocityY*n/2],l=this.controllerState.pan({pos:a}).panEnd();this.updateViewport(l,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:d0},{isDragging:!1,isPanning:!0})}else{const i=this.controllerState.panEnd();this.updateViewport(i,null,{isDragging:!1,isPanning:!1})}return!0}_onPanRotate(e){if(!this.dragRotate)return!1;const n=this.getCenter(e),i=this.controllerState.rotate({pos:n});return this.updateViewport(i,Is,{isDragging:!0,isRotating:!0}),!0}_onPanRotateEnd(e){const{inertia:n}=this;if(this.dragRotate&&n&&e.velocity){const i=this.getCenter(e),a=[i[0]+e.velocityX*n/2,i[1]+e.velocityY*n/2],l=this.controllerState.rotate({pos:a}).rotateEnd();this.updateViewport(l,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:d0},{isDragging:!1,isRotating:!0})}else{const i=this.controllerState.rotateEnd();this.updateViewport(i,null,{isDragging:!1,isRotating:!1})}return!0}_onWheel(e){if(!this.scrollZoom)return!1;const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;e.srcEvent.preventDefault();const{speed:i=.01,smooth:a=!1}=this.scrollZoom===!0?{}:this.scrollZoom,{delta:l}=e;let f=2/(1+Math.exp(-Math.abs(l*i)));l<0&&f!==0&&(f=1/f);const d=this.controllerState.zoom({pos:n,scale:f});return this.updateViewport(d,{...this._getTransitionProps({around:n}),transitionDuration:a?250:1},{isZooming:!0,isPanning:!0}),!0}_onTriplePanStart(e){const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const i=this.controllerState.rotateStart({pos:n});return this.updateViewport(i,Is,{isDragging:!0}),!0}_onTriplePan(e){if(!this.touchRotate||!this.isDragging())return!1;const n=this.getCenter(e);n[0]-=e.deltaX;const i=this.controllerState.rotate({pos:n});return this.updateViewport(i,Is,{isDragging:!0,isRotating:!0}),!0}_onTriplePanEnd(e){if(!this.isDragging())return!1;const{inertia:n}=this;if(this.touchRotate&&n&&e.velocityY){const i=this.getCenter(e),a=[i[0],i[1]+=e.velocityY*n/2],l=this.controllerState.rotate({pos:a});this.updateViewport(l,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:d0},{isDragging:!1,isRotating:!0}),this.blockEvents(n)}else{const i=this.controllerState.rotateEnd();this.updateViewport(i,null,{isDragging:!1,isRotating:!1})}return!0}_onPinchStart(e){const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const i=this.controllerState.zoomStart({pos:n}).rotateStart({pos:n});return Mo._startPinchRotation=e.rotation,Mo._lastPinchEvent=e,this.updateViewport(i,Is,{isDragging:!0}),!0}_onPinch(e){if(!this.touchZoom&&!this.touchRotate||!this.isDragging())return!1;let n=this.controllerState;if(this.touchZoom){const{scale:i}=e,a=this.getCenter(e);n=n.zoom({pos:a,scale:i})}if(this.touchRotate){const{rotation:i}=e;n=n.rotate({deltaAngleX:Mo._startPinchRotation-i})}return this.updateViewport(n,Is,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),Mo._lastPinchEvent=e,!0}_onPinchEnd(e){if(!this.isDragging())return!1;const{inertia:n}=this,{_lastPinchEvent:i}=Mo;if(this.touchZoom&&n&&i&&e.scale!==i.scale){const a=this.getCenter(e);let l=this.controllerState.rotateEnd();const f=Math.log2(e.scale),d=(f-Math.log2(i.scale))/(e.deltaTime-i.deltaTime),g=Math.pow(2,f+d*n/2);l=l.zoom({pos:a,scale:g}).zoomEnd(),this.updateViewport(l,{...this._getTransitionProps({around:a}),transitionDuration:n,transitionEasing:d0},{isDragging:!1,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:!1}),this.blockEvents(n)}else{const a=this.controllerState.zoomEnd().rotateEnd();this.updateViewport(a,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1})}return Mo._startPinchRotation=null,Mo._lastPinchEvent=null,!0}_onDoubleTap(e){if(!this.doubleClickZoom)return!1;const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const i=this.isFunctionKeyPressed(e),a=this.controllerState.zoom({pos:n,scale:i?.5:2});return this.updateViewport(a,this._getTransitionProps({around:n}),{isZooming:!0,isPanning:!0}),this.blockEvents(100),!0}_onKeyDown(e){if(!this.keyboard)return!1;const n=this.isFunctionKeyPressed(e),{zoomSpeed:i,moveSpeed:a,rotateSpeedX:l,rotateSpeedY:f}=this.keyboard===!0?{}:this.keyboard,{controllerState:d}=this;let g;const v={};switch(e.srcEvent.code){case"Minus":g=n?d.zoomOut(i).zoomOut(i):d.zoomOut(i),v.isZooming=!0;break;case"Equal":g=n?d.zoomIn(i).zoomIn(i):d.zoomIn(i),v.isZooming=!0;break;case"ArrowLeft":n?(g=d.rotateLeft(l),v.isRotating=!0):(g=d.moveLeft(a),v.isPanning=!0);break;case"ArrowRight":n?(g=d.rotateRight(l),v.isRotating=!0):(g=d.moveRight(a),v.isPanning=!0);break;case"ArrowUp":n?(g=d.rotateUp(f),v.isRotating=!0):(g=d.moveUp(a),v.isPanning=!0);break;case"ArrowDown":n?(g=d.rotateDown(f),v.isRotating=!0):(g=d.moveDown(a),v.isPanning=!0);break;default:return!1}return this.updateViewport(g,this._getTransitionProps(),v),!0}_getTransitionProps(e){const{transition:n}=this;return!n||!n.transitionInterpolator?Is:e?{...n,transitionInterpolator:new nh({...e,...n.transitionInterpolator.opts,makeViewport:this.controllerState.makeViewport})}:n}}class $4{constructor(e,n){C(this,"_viewportProps",void 0),C(this,"_state",void 0),this._viewportProps=this.applyConstraints(e),this._state=n}getViewportProps(){return this._viewportProps}getState(){return this._state}}const ew=5,jX=1.2;class WX extends $4{constructor(e){const{width:n,height:i,latitude:a,longitude:l,zoom:f,bearing:d=0,pitch:g=0,altitude:v=1.5,position:T=[0,0,0],maxZoom:S=20,minZoom:x=0,maxPitch:M=60,minPitch:B=0,startPanLngLat:W,startZoomLngLat:N,startRotatePos:F,startBearing:V,startPitch:j,startZoom:X,normalize:Q=!0}=e;_n(Number.isFinite(l)),_n(Number.isFinite(a)),_n(Number.isFinite(f)),super({width:n,height:i,latitude:a,longitude:l,zoom:f,bearing:d,pitch:g,altitude:v,maxZoom:S,minZoom:x,maxPitch:M,minPitch:B,normalize:Q,position:T},{startPanLngLat:W,startZoomLngLat:N,startRotatePos:F,startBearing:V,startPitch:j,startZoom:X}),C(this,"makeViewport",void 0),this.makeViewport=e.makeViewport}panStart({pos:e}){return this._getUpdatedState({startPanLngLat:this._unproject(e)})}pan({pos:e,startPos:n}){const i=this.getState().startPanLngLat||this._unproject(n);if(!i)return this;const l=this.makeViewport(this.getViewportProps()).panByPosition(i,e);return this._getUpdatedState(l)}panEnd(){return this._getUpdatedState({startPanLngLat:null})}rotateStart({pos:e}){return this._getUpdatedState({startRotatePos:e,startBearing:this.getViewportProps().bearing,startPitch:this.getViewportProps().pitch})}rotate({pos:e,deltaAngleX:n=0,deltaAngleY:i=0}){const{startRotatePos:a,startBearing:l,startPitch:f}=this.getState();if(!a||l===void 0||f===void 0)return this;let d;return e?d=this._getNewRotation(e,a,f,l):d={bearing:l+n,pitch:f+i},this._getUpdatedState(d)}rotateEnd(){return this._getUpdatedState({startBearing:null,startPitch:null})}zoomStart({pos:e}){return this._getUpdatedState({startZoomLngLat:this._unproject(e),startZoom:this.getViewportProps().zoom})}zoom({pos:e,startPos:n,scale:i}){let{startZoom:a,startZoomLngLat:l}=this.getState();if(l||(a=this.getViewportProps().zoom,l=this._unproject(n)||this._unproject(e)),!l)return this;const{maxZoom:f,minZoom:d}=this.getViewportProps();let g=a+Math.log2(i);g=_r(g,d,f);const v=this.makeViewport({...this.getViewportProps(),zoom:g});return this._getUpdatedState({zoom:g,...v.panByPosition(l,e)})}zoomEnd(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}zoomIn(e=2){return this._zoomFromCenter(e)}zoomOut(e=2){return this._zoomFromCenter(1/e)}moveLeft(e=100){return this._panFromCenter([e,0])}moveRight(e=100){return this._panFromCenter([-e,0])}moveUp(e=100){return this._panFromCenter([0,e])}moveDown(e=100){return this._panFromCenter([0,-e])}rotateLeft(e=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing-e})}rotateRight(e=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing+e})}rotateUp(e=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch+e})}rotateDown(e=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch-e})}shortestPathFrom(e){const n=e.getViewportProps(),i={...this.getViewportProps()},{bearing:a,longitude:l}=i;return Math.abs(a-n.bearing)>180&&(i.bearing=a<0?a+360:a-360),Math.abs(l-n.longitude)>180&&(i.longitude=l<0?l+360:l-360),i}applyConstraints(e){const{maxZoom:n,minZoom:i,zoom:a}=e;e.zoom=_r(a,i,n);const{maxPitch:l,minPitch:f,pitch:d}=e;e.pitch=_r(d,f,l);const{normalize:g=!0}=e;return g&&Object.assign(e,YZ(e)),e}_zoomFromCenter(e){const{width:n,height:i}=this.getViewportProps();return this.zoom({pos:[n/2,i/2],scale:e})}_panFromCenter(e){const{width:n,height:i}=this.getViewportProps();return this.pan({startPos:[n/2,i/2],pos:[n/2+e[0],i/2+e[1]]})}_getUpdatedState(e){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...e})}_unproject(e){const n=this.makeViewport(this.getViewportProps());return e&&n.unproject(e)}_getNewRotation(e,n,i,a){const l=e[0]-n[0],f=e[1]-n[1],d=e[1],g=n[1],{width:v,height:T}=this.getViewportProps(),S=l/v;let x=0;f>0?Math.abs(T-g)>ew&&(x=f/(g-T)*jX):f<0&&g>ew&&(x=1-d/g),x=_r(x,-1,1);const{minPitch:M,maxPitch:B}=this.getViewportProps(),W=a+180*S;let N=i;return x>0?N=i+x*(B-i):x<0&&(N=i-x*(M-i)),{pitch:N,bearing:W}}}class GX extends Y4{constructor(...e){super(...e),C(this,"ControllerState",WX),C(this,"transition",{transitionDuration:300,transitionInterpolator:new nh({transitionProps:{compare:["longitude","latitude","zoom","bearing","pitch","position"],required:["longitude","latitude","zoom"]}})}),C(this,"dragMode","pan")}setProps(e){e.position=e.position||[0,0,0];const n=this.props;super.setProps(e),(!n||n.height!==e.height)&&this.updateViewport(new this.ControllerState({makeViewport:this.makeViewport,...e,...this.state}))}}class J4 extends ea{get ViewportType(){return yu}get ControllerType(){return GX}}C(J4,"displayName","MapView");const ZX=new W4;function XX(t,e){var n,i;const a=(n=t.order)!==null&&n!==void 0?n:1/0,l=(i=e.order)!==null&&i!==void 0?i:1/0;return a-l}class HX{constructor(){C(this,"effects",void 0),C(this,"_resolvedEffects",[]),C(this,"_defaultEffects",[]),C(this,"_needsRedraw",void 0),this.effects=[],this._needsRedraw="Initial render",this._setEffects([])}addDefaultEffect(e){const n=this._defaultEffects;if(!n.find(i=>i.id===e.id)){const i=n.findIndex(a=>XX(a,e)>0);i<0?n.push(e):n.splice(i,0,e),this._setEffects(this.effects)}}setProps(e){"effects"in e&&(Oi(e.effects,this.effects,1)||this._setEffects(e.effects))}needsRedraw(e={clearRedrawFlags:!1}){const n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}getEffects(){return this._resolvedEffects}_setEffects(e){const n={};for(const a of this.effects)n[a.id]=a;const i=[];for(const a of e){const l=n[a.id];l&&l!==a?l.setProps?(l.setProps(a.props),i.push(l)):(l.cleanup(),i.push(a)):i.push(a),delete n[a.id]}for(const a in n)n[a].cleanup();this.effects=i,this._resolvedEffects=i.concat(this._defaultEffects),e.some(a=>a instanceof W4)||this._resolvedEffects.push(ZX),this._needsRedraw="effects changed"}finalize(){for(const e of this._resolvedEffects)e.cleanup();this.effects.length=0,this._resolvedEffects.length=0,this._defaultEffects.length=0}}class YX extends mm{shouldDrawLayer(e){const{operation:n}=e.props;return n.includes("draw")||n.includes("terrain")}}const $X="deckRenderer.renderLayers";class JX{constructor(e){C(this,"gl",void 0),C(this,"layerFilter",void 0),C(this,"drawPickingColors",void 0),C(this,"drawLayersPass",void 0),C(this,"pickLayersPass",void 0),C(this,"renderCount",void 0),C(this,"_needsRedraw",void 0),C(this,"renderBuffers",void 0),C(this,"lastPostProcessEffect",void 0),this.gl=e,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new YX(e),this.pickLayersPass=new Z4(e),this.renderCount=0,this._needsRedraw="Initial render",this.renderBuffers=[],this.lastPostProcessEffect=null}setProps(e){this.layerFilter!==e.layerFilter&&(this.layerFilter=e.layerFilter,this._needsRedraw="layerFilter changed"),this.drawPickingColors!==e.drawPickingColors&&(this.drawPickingColors=e.drawPickingColors,this._needsRedraw="drawPickingColors changed")}renderLayers(e){if(!e.viewports.length)return;const n=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass,i={layerFilter:this.layerFilter,isPicking:this.drawPickingColors,...e,target:e.target||en.getDefaultFramebuffer(this.gl)};i.effects&&this._preRender(i.effects,i);const a=this.lastPostProcessEffect?this.renderBuffers[0]:i.target,l=n.render({...i,target:a});i.effects&&this._postRender(i.effects,i),this.renderCount++,jn($X,this,l,e)}needsRedraw(e={clearRedrawFlags:!1}){const n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}finalize(){const{renderBuffers:e}=this;for(const n of e)n.delete();e.length=0}_preRender(e,n){this.lastPostProcessEffect=null,n.preRenderStats=n.preRenderStats||{};for(const i of e)n.preRenderStats[i.id]=i.preRender(this.gl,n),i.postRender&&(this.lastPostProcessEffect=i.id);this.lastPostProcessEffect&&this._resizeRenderBuffers()}_resizeRenderBuffers(){const{renderBuffers:e}=this;e.length===0&&e.push(new en(this.gl),new en(this.gl));for(const n of e)n.resize()}_postRender(e,n){const{renderBuffers:i}=this,a={...n,inputBuffer:i[0],swapBuffer:i[1],target:null};for(const l of e)if(l.postRender){if(l.id===this.lastPostProcessEffect){a.target=n.target,l.postRender(this.gl,a);break}const f=l.postRender(this.gl,a);a.inputBuffer=f,a.swapBuffer=f===i[0]?i[1]:i[0]}}}const QX={pickedColor:null,pickedObjectIndex:-1};function qX({pickedColors:t,decodePickingColor:e,deviceX:n,deviceY:i,deviceRadius:a,deviceRect:l}){const{x:f,y:d,width:g,height:v}=l;let T=a*a,S=-1,x=0;for(let M=0;M<v;M++){const B=M+d-i,W=B*B;if(W>T)x+=4*g;else for(let N=0;N<g;N++){if(t[x+3]-1>=0){const V=N+f-n,j=V*V+W;j<=T&&(T=j,S=x)}x+=4}}if(S>=0){const M=t.slice(S,S+4),B=e(M);if(B){const W=Math.floor(S/4/g),N=S/4-W*g;return{...B,pickedColor:M,pickedX:f+N,pickedY:d+W}}Et.error("Picked non-existent layer. Is picking buffer corrupt?")()}return QX}function KX({pickedColors:t,decodePickingColor:e}){const n=new Map;if(t){for(let i=0;i<t.length;i+=4)if(t[i+3]-1>=0){const l=t.slice(i,i+4),f=l.join(",");if(!n.has(f)){const d=e(l);d?n.set(f,{...d,color:l}):Et.error("Picked non-existent layer. Is picking buffer corrupt?")()}}}return Array.from(n.values())}function Q4({pickInfo:t,viewports:e,pixelRatio:n,x:i,y:a,z:l}){let f=e[0];e.length>1&&(f=t7((t==null?void 0:t.pickedViewports)||e,{x:i,y:a}));let d;if(f){const g=[i-f.x,a-f.y];l!==void 0&&(g[2]=l),d=f.unproject(g)}return{color:null,layer:null,viewport:f,index:-1,picked:!1,x:i,y:a,pixel:[i,a],coordinate:d,devicePixel:t&&"pickedX"in t?[t.pickedX,t.pickedY]:void 0,pixelRatio:n}}function e7(t){const{pickInfo:e,lastPickedInfo:n,mode:i,layers:a}=t,{pickedColor:l,pickedLayer:f,pickedObjectIndex:d}=e,g=f?[f]:[];if(i==="hover"){const S=n.index,x=n.layerId,M=f?f.props.id:null;if(M!==x||d!==S){if(M!==x){const B=a.find(W=>W.props.id===x);B&&g.unshift(B)}n.layerId=M,n.index=d,n.info=null}}const v=Q4(t),T=new Map;return T.set(null,v),g.forEach(S=>{let x={...v};S===f&&(x.color=l,x.index=d,x.picked=!0),x=q4({layer:S,info:x,mode:i});const M=x.layer;S===f&&i==="hover"&&(n.info=x),T.set(M.id,x),i==="hover"&&M.updateAutoHighlight(x)}),T}function q4({layer:t,info:e,mode:n}){for(;t&&e;){const i=e.layer||null;e.sourceLayer=i,e.layer=t,e=t.getPickingInfo({info:e,mode:n,sourceLayer:i}),t=t.parent}return e}function t7(t,e){for(let n=t.length-1;n>=0;n--){const i=t[n];if(i.containsPixel(e))return i}return t[0]}class n7{constructor(e){C(this,"gl",void 0),C(this,"pickingFBO",void 0),C(this,"depthFBO",void 0),C(this,"pickLayersPass",void 0),C(this,"layerFilter",void 0),C(this,"lastPickedInfo",void 0),C(this,"_pickable",!0),this.gl=e,this.pickLayersPass=new Z4(e),this.lastPickedInfo={index:-1,layerId:null,info:null}}setProps(e){"layerFilter"in e&&(this.layerFilter=e.layerFilter),"_pickable"in e&&(this._pickable=e._pickable)}finalize(){this.pickingFBO&&this.pickingFBO.delete(),this.depthFBO&&(this.depthFBO.color.delete(),this.depthFBO.delete())}pickObject(e){return this._pickClosestObject(e)}pickObjects(e){return this._pickVisibleObjects(e)}getLastPickedObject({x:e,y:n,layers:i,viewports:a},l=this.lastPickedInfo.info){const f=l&&l.layer&&l.layer.id,d=l&&l.viewport&&l.viewport.id,g=f?i.find(x=>x.id===f):null,v=d&&a.find(x=>x.id===d)||a[0],T=v&&v.unproject([e-v.x,n-v.y]);return{...l,...{x:e,y:n,viewport:v,coordinate:T,layer:g}}}_resizeBuffer(){var e,n;const{gl:i}=this;if(!this.pickingFBO&&(this.pickingFBO=new en(i),en.isSupported(i,{colorBufferFloat:!0}))){const a=new en(i);a.attach({36064:new fi(i,{format:Qe(i)?34836:6408,type:5126})}),this.depthFBO=a}(e=this.pickingFBO)===null||e===void 0||e.resize({width:i.canvas.width,height:i.canvas.height}),(n=this.depthFBO)===null||n===void 0||n.resize({width:i.canvas.width,height:i.canvas.height})}_getPickable(e){if(this._pickable===!1)return null;const n=e.filter(i=>this.pickLayersPass.shouldDrawLayer(i)&&!i.isComposite);return n.length?n:null}_pickClosestObject({layers:e,views:n,viewports:i,x:a,y:l,radius:f=0,depth:d=1,mode:g="query",unproject3D:v,onViewportActive:T,effects:S}){const x=this._getPickable(e),M=cu(this.gl);if(!x)return{result:[],emptyInfo:Q4({viewports:i,x:a,y:l,pixelRatio:M})};this._resizeBuffer();const B=Vd(this.gl,[a,l],!0),W=[B.x+Math.floor(B.width/2),B.y+Math.floor(B.height/2)],N=Math.round(f*M),{width:F,height:V}=this.pickingFBO,j=this._getPickingRect({deviceX:W[0],deviceY:W[1],deviceRadius:N,deviceWidth:F,deviceHeight:V}),X={x:a-f,y:l-f,width:f*2+1,height:f*2+1};let Q;const K=[],ae=new Set;for(let fe=0;fe<d;fe++){let se;if(j){const we=this._drawAndSample({layers:x,views:n,viewports:i,onViewportActive:T,deviceRect:j,cullRect:X,effects:S,pass:"picking:".concat(g)});se=qX({...we,deviceX:W[0],deviceY:W[1],deviceRadius:N,deviceRect:j})}else se={pickedColor:null,pickedObjectIndex:-1};let _e;if(se.pickedLayer&&v&&this.depthFBO){const{pickedColors:we}=this._drawAndSample({layers:[se.pickedLayer],views:n,viewports:i,onViewportActive:T,deviceRect:{x:se.pickedX,y:se.pickedY,width:1,height:1},cullRect:X,effects:S,pass:"picking:".concat(g,":z")},!0);we[3]&&(_e=we[0])}se.pickedLayer&&fe+1<d&&(ae.add(se.pickedLayer),se.pickedLayer.disablePickingIndex(se.pickedObjectIndex)),Q=e7({pickInfo:se,lastPickedInfo:this.lastPickedInfo,mode:g,layers:x,viewports:i,x:a,y:l,z:_e,pixelRatio:M});for(const we of Q.values())we.layer&&K.push(we);if(!se.pickedColor)break}for(const fe of ae)fe.restorePickingColors();return{result:K,emptyInfo:Q.get(null)}}_pickVisibleObjects({layers:e,views:n,viewports:i,x:a,y:l,width:f=1,height:d=1,mode:g="query",maxObjects:v=null,onViewportActive:T,effects:S}){const x=this._getPickable(e);if(!x)return[];this._resizeBuffer();const M=cu(this.gl),B=Vd(this.gl,[a,l],!0),W=B.x,N=B.y+B.height,F=Vd(this.gl,[a+f,l+d],!0),V=F.x+F.width,j=F.y,X={x:W,y:j,width:V-W,height:N-j},Q=this._drawAndSample({layers:x,views:n,viewports:i,onViewportActive:T,deviceRect:X,cullRect:{x:a,y:l,width:f,height:d},effects:S,pass:"picking:".concat(g)}),K=KX(Q),ae=new Map,fe=Number.isFinite(v);for(let se=0;se<K.length&&!(fe&&v&&ae.size>=v);se++){const _e=K[se];let we={color:_e.pickedColor,layer:null,index:_e.pickedObjectIndex,picked:!0,x:a,y:l,pixelRatio:M};we=q4({layer:_e.pickedLayer,info:we,mode:g}),ae.has(we.object)||ae.set(we.object,we)}return Array.from(ae.values())}_drawAndSample({layers:e,views:n,viewports:i,onViewportActive:a,deviceRect:l,cullRect:f,effects:d,pass:g},v=!1){const T=v?this.depthFBO:this.pickingFBO,S={layers:e,layerFilter:this.layerFilter,views:n,viewports:i,onViewportActive:a,pickingFBO:T,deviceRect:l,cullRect:f,effects:d,pass:g,pickZ:v,preRenderStats:{}};for(const V of d)V.useInPicking&&(S.preRenderStats[V.id]=V.preRender(this.gl,S));const{decodePickingColor:x}=this.pickLayersPass.render(S),{x:M,y:B,width:W,height:N}=l,F=new(v?Float32Array:Uint8Array)(W*N*4);return eh(T,{sourceX:M,sourceY:B,sourceWidth:W,sourceHeight:N,target:F}),{pickedColors:F,decodePickingColor:x}}_getPickingRect({deviceX:e,deviceY:n,deviceRadius:i,deviceWidth:a,deviceHeight:l}){const f=Math.max(0,e-i),d=Math.max(0,n-i),g=Math.min(a,e+i+1)-f,v=Math.min(l,n+i+1)-d;return g<=0||v<=0?null:{x:f,y:d,width:g,height:v}}}const r7={zIndex:"1",position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:"0",left:"0",display:"none"};class i7{constructor(e){C(this,"el",null),C(this,"isVisible",!1);const n=e.parentElement;n&&(this.el=document.createElement("div"),this.el.className="deck-tooltip",Object.assign(this.el.style,r7),n.appendChild(this.el))}setTooltip(e,n,i){const a=this.el;if(a){if(typeof e=="string")a.innerText=e;else if(e)e.text&&(a.innerText=e.text),e.html&&(a.innerHTML=e.html),e.className&&(a.className=e.className);else{this.isVisible=!1,a.style.display="none";return}this.isVisible=!0,a.style.display="block",a.style.transform="translate(".concat(n,"px, ").concat(i,"px)"),e&&typeof e=="object"&&"style"in e&&Object.assign(a.style,e.style)}}remove(){this.el&&(this.el.remove(),this.el=null)}}var K4={exports:{}};/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */(function(t){(function(e,n,i,a){var l=["","webkit","Moz","MS","ms","o"],f=n.createElement("div"),d="function",g=Math.round,v=Math.abs,T=Date.now;function S(P,I,z){return setTimeout(j(P,z),I)}function x(P,I,z){return Array.isArray(P)?(M(P,z[I],z),!0):!1}function M(P,I,z){var Y;if(P)if(P.forEach)P.forEach(I,z);else if(P.length!==a)for(Y=0;Y<P.length;)I.call(z,P[Y],Y,P),Y++;else for(Y in P)P.hasOwnProperty(Y)&&I.call(z,P[Y],Y,P)}function B(P,I,z){var Y="DEPRECATED METHOD: "+I+`
`+z+` AT 
`;return function(){var ie=new Error("get-stack-trace"),me=ie&&ie.stack?ie.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",Oe=e.console&&(e.console.warn||e.console.log);return Oe&&Oe.call(e.console,Y,me),P.apply(this,arguments)}}var W;typeof Object.assign!="function"?W=function(I){if(I===a||I===null)throw new TypeError("Cannot convert undefined or null to object");for(var z=Object(I),Y=1;Y<arguments.length;Y++){var ie=arguments[Y];if(ie!==a&&ie!==null)for(var me in ie)ie.hasOwnProperty(me)&&(z[me]=ie[me])}return z}:W=Object.assign;var N=B(function(I,z,Y){for(var ie=Object.keys(z),me=0;me<ie.length;)(!Y||Y&&I[ie[me]]===a)&&(I[ie[me]]=z[ie[me]]),me++;return I},"extend","Use `assign`."),F=B(function(I,z){return N(I,z,!0)},"merge","Use `assign`.");function V(P,I,z){var Y=I.prototype,ie;ie=P.prototype=Object.create(Y),ie.constructor=P,ie._super=Y,z&&W(ie,z)}function j(P,I){return function(){return P.apply(I,arguments)}}function X(P,I){return typeof P==d?P.apply(I&&I[0]||a,I):P}function Q(P,I){return P===a?I:P}function K(P,I,z){M(_e(I),function(Y){P.addEventListener(Y,z,!1)})}function ae(P,I,z){M(_e(I),function(Y){P.removeEventListener(Y,z,!1)})}function fe(P,I){for(;P;){if(P==I)return!0;P=P.parentNode}return!1}function se(P,I){return P.indexOf(I)>-1}function _e(P){return P.trim().split(/\s+/g)}function we(P,I,z){if(P.indexOf&&!z)return P.indexOf(I);for(var Y=0;Y<P.length;){if(z&&P[Y][z]==I||!z&&P[Y]===I)return Y;Y++}return-1}function qe(P){return Array.prototype.slice.call(P,0)}function kt(P,I,z){for(var Y=[],ie=[],me=0;me<P.length;){var Oe=I?P[me][I]:P[me];we(ie,Oe)<0&&Y.push(P[me]),ie[me]=Oe,me++}return z&&(I?Y=Y.sort(function(Ye,Mt){return Ye[I]>Mt[I]}):Y=Y.sort()),Y}function Pe(P,I){for(var z,Y,ie=I[0].toUpperCase()+I.slice(1),me=0;me<l.length;){if(z=l[me],Y=z?z+ie:I,Y in P)return Y;me++}return a}var Ee=1;function On(){return Ee++}function mt(P){var I=P.ownerDocument||P;return I.defaultView||I.parentWindow||e}var Ht=/mobile|tablet|ip(ad|hone|od)|android/i,Bt="ontouchstart"in e,En=Pe(e,"PointerEvent")!==a,ct=Bt&&Ht.test(navigator.userAgent),Dt="touch",rr="pen",ue="mouse",Ae="kinect",Ve=25,Ie=1,Ke=2,je=4,gt=8,xt=1,Yt=2,tn=4,dn=8,pn=16,nn=Yt|tn,Hn=dn|pn,Sn=nn|Hn,zi=["x","y"],Qr=["clientX","clientY"];function $t(P,I){var z=this;this.manager=P,this.callback=I,this.element=P.element,this.target=P.options.inputTarget,this.domHandler=function(Y){X(P.options.enable,[P])&&z.handler(Y)},this.init()}$t.prototype={handler:function(){},init:function(){this.evEl&&K(this.element,this.evEl,this.domHandler),this.evTarget&&K(this.target,this.evTarget,this.domHandler),this.evWin&&K(mt(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&ae(this.element,this.evEl,this.domHandler),this.evTarget&&ae(this.target,this.evTarget,this.domHandler),this.evWin&&ae(mt(this.element),this.evWin,this.domHandler)}};function ms(P){var I,z=P.options.inputClass;return z?I=z:En?I=pi:ct?I=gi:Bt?I=Kr:I=rn,new I(P,kr)}function kr(P,I,z){var Y=z.pointers.length,ie=z.changedPointers.length,me=I&Ie&&Y-ie===0,Oe=I&(je|gt)&&Y-ie===0;z.isFirst=!!me,z.isFinal=!!Oe,me&&(P.session={}),z.eventType=I,ji(P,z),P.emit("hammer.input",z),P.recognize(z),P.session.prevInput=z}function ji(P,I){var z=P.session,Y=I.pointers,ie=Y.length;z.firstInput||(z.firstInput=Pr(I)),ie>1&&!z.firstMultiple?z.firstMultiple=Pr(I):ie===1&&(z.firstMultiple=!1);var me=z.firstInput,Oe=z.firstMultiple,ut=Oe?Oe.center:me.center,Ye=I.center=xn(Y);I.timeStamp=T(),I.deltaTime=I.timeStamp-me.timeStamp,I.angle=ys(ut,Ye),I.distance=Wi(ut,Ye),As(z,I),I.offsetDirection=so(I.deltaX,I.deltaY);var Mt=io(I.deltaTime,I.deltaX,I.deltaY);I.overallVelocityX=Mt.x,I.overallVelocityY=Mt.y,I.overallVelocity=v(Mt.x)>v(Mt.y)?Mt.x:Mt.y,I.scale=Oe?Jt(Oe.pointers,Y):1,I.rotation=Oe?Eu(Oe.pointers,Y):0,I.maxPointers=z.prevInput?I.pointers.length>z.prevInput.maxPointers?I.pointers.length:z.prevInput.maxPointers:I.pointers.length,ro(z,I);var Dn=P.element;fe(I.srcEvent.target,Dn)&&(Dn=I.srcEvent.target),I.target=Dn}function As(P,I){var z=I.center,Y=P.offsetDelta||{},ie=P.prevDelta||{},me=P.prevInput||{};(I.eventType===Ie||me.eventType===je)&&(ie=P.prevDelta={x:me.deltaX||0,y:me.deltaY||0},Y=P.offsetDelta={x:z.x,y:z.y}),I.deltaX=ie.x+(z.x-Y.x),I.deltaY=ie.y+(z.y-Y.y)}function ro(P,I){var z=P.lastInterval||I,Y=I.timeStamp-z.timeStamp,ie,me,Oe,ut;if(I.eventType!=gt&&(Y>Ve||z.velocity===a)){var Ye=I.deltaX-z.deltaX,Mt=I.deltaY-z.deltaY,Dn=io(Y,Ye,Mt);me=Dn.x,Oe=Dn.y,ie=v(Dn.x)>v(Dn.y)?Dn.x:Dn.y,ut=so(Ye,Mt),P.lastInterval=I}else ie=z.velocity,me=z.velocityX,Oe=z.velocityY,ut=z.direction;I.velocity=ie,I.velocityX=me,I.velocityY=Oe,I.direction=ut}function Pr(P){for(var I=[],z=0;z<P.pointers.length;)I[z]={clientX:g(P.pointers[z].clientX),clientY:g(P.pointers[z].clientY)},z++;return{timeStamp:T(),pointers:I,center:xn(I),deltaX:P.deltaX,deltaY:P.deltaY}}function xn(P){var I=P.length;if(I===1)return{x:g(P[0].clientX),y:g(P[0].clientY)};for(var z=0,Y=0,ie=0;ie<I;)z+=P[ie].clientX,Y+=P[ie].clientY,ie++;return{x:g(z/I),y:g(Y/I)}}function io(P,I,z){return{x:I/P||0,y:z/P||0}}function so(P,I){return P===I?xt:v(P)>=v(I)?P<0?Yt:tn:I<0?dn:pn}function Wi(P,I,z){z||(z=zi);var Y=I[z[0]]-P[z[0]],ie=I[z[1]]-P[z[1]];return Math.sqrt(Y*Y+ie*ie)}function ys(P,I,z){z||(z=zi);var Y=I[z[0]]-P[z[0]],ie=I[z[1]]-P[z[1]];return Math.atan2(ie,Y)*180/Math.PI}function Eu(P,I){return ys(I[1],I[0],Qr)+ys(P[1],P[0],Qr)}function Jt(P,I){return Wi(I[0],I[1],Qr)/Wi(P[0],P[1],Qr)}var ir={mousedown:Ie,mousemove:Ke,mouseup:je},sr="mousedown",Yn="mousemove mouseup";function rn(){this.evEl=sr,this.evWin=Yn,this.pressed=!1,$t.apply(this,arguments)}V(rn,$t,{handler:function(I){var z=ir[I.type];z&Ie&&I.button===0&&(this.pressed=!0),z&Ke&&I.which!==1&&(z=je),this.pressed&&(z&je&&(this.pressed=!1),this.callback(this.manager,z,{pointers:[I],changedPointers:[I],pointerType:ue,srcEvent:I}))}});var oo={pointerdown:Ie,pointermove:Ke,pointerup:je,pointercancel:gt,pointerout:gt},la={2:Dt,3:rr,4:ue,5:Ae},Gi="pointerdown",vs="pointermove pointerup pointercancel";e.MSPointerEvent&&!e.PointerEvent&&(Gi="MSPointerDown",vs="MSPointerMove MSPointerUp MSPointerCancel");function pi(){this.evEl=Gi,this.evWin=vs,$t.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}V(pi,$t,{handler:function(I){var z=this.store,Y=!1,ie=I.type.toLowerCase().replace("ms",""),me=oo[ie],Oe=la[I.pointerType]||I.pointerType,ut=Oe==Dt,Ye=we(z,I.pointerId,"pointerId");me&Ie&&(I.button===0||ut)?Ye<0&&(z.push(I),Ye=z.length-1):me&(je|gt)&&(Y=!0),!(Ye<0)&&(z[Ye]=I,this.callback(this.manager,me,{pointers:z,changedPointers:[I],pointerType:Oe,srcEvent:I}),Y&&z.splice(Ye,1))}});var sn={touchstart:Ie,touchmove:Ke,touchend:je,touchcancel:gt},on="touchstart",Mr="touchstart touchmove touchend touchcancel";function Zi(){this.evTarget=on,this.evWin=Mr,this.started=!1,$t.apply(this,arguments)}V(Zi,$t,{handler:function(I){var z=sn[I.type];if(z===Ie&&(this.started=!0),!!this.started){var Y=Su.call(this,I,z);z&(je|gt)&&Y[0].length-Y[1].length===0&&(this.started=!1),this.callback(this.manager,z,{pointers:Y[0],changedPointers:Y[1],pointerType:Dt,srcEvent:I})}}});function Su(P,I){var z=qe(P.touches),Y=qe(P.changedTouches);return I&(je|gt)&&(z=kt(z.concat(Y),"identifier",!0)),[z,Y]}var xu={touchstart:Ie,touchmove:Ke,touchend:je,touchcancel:gt},ao="touchstart touchmove touchend touchcancel";function gi(){this.evTarget=ao,this.targetIds={},$t.apply(this,arguments)}V(gi,$t,{handler:function(I){var z=xu[I.type],Y=uo.call(this,I,z);Y&&this.callback(this.manager,z,{pointers:Y[0],changedPointers:Y[1],pointerType:Dt,srcEvent:I})}});function uo(P,I){var z=qe(P.touches),Y=this.targetIds;if(I&(Ie|Ke)&&z.length===1)return Y[z[0].identifier]=!0,[z,z];var ie,me,Oe=qe(P.changedTouches),ut=[],Ye=this.target;if(me=z.filter(function(Mt){return fe(Mt.target,Ye)}),I===Ie)for(ie=0;ie<me.length;)Y[me[ie].identifier]=!0,ie++;for(ie=0;ie<Oe.length;)Y[Oe[ie].identifier]&&ut.push(Oe[ie]),I&(je|gt)&&delete Y[Oe[ie].identifier],ie++;if(ut.length)return[kt(me.concat(ut),"identifier",!0),ut]}var qr=2500,Xe=25;function Kr(){$t.apply(this,arguments);var P=j(this.handler,this);this.touch=new gi(this.manager,P),this.mouse=new rn(this.manager,P),this.primaryTouch=null,this.lastTouches=[]}V(Kr,$t,{handler:function(I,z,Y){var ie=Y.pointerType==Dt,me=Y.pointerType==ue;if(!(me&&Y.sourceCapabilities&&Y.sourceCapabilities.firesTouchEvents)){if(ie)Ln.call(this,z,Y);else if(me&&Vn.call(this,Y))return;this.callback(I,z,Y)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function Ln(P,I){P&Ie?(this.primaryTouch=I.changedPointers[0].identifier,$n.call(this,I)):P&(je|gt)&&$n.call(this,I)}function $n(P){var I=P.changedPointers[0];if(I.identifier===this.primaryTouch){var z={x:I.clientX,y:I.clientY};this.lastTouches.push(z);var Y=this.lastTouches,ie=function(){var me=Y.indexOf(z);me>-1&&Y.splice(me,1)};setTimeout(ie,qr)}}function Vn(P){for(var I=P.srcEvent.clientX,z=P.srcEvent.clientY,Y=0;Y<this.lastTouches.length;Y++){var ie=this.lastTouches[Y],me=Math.abs(I-ie.x),Oe=Math.abs(z-ie.y);if(me<=Xe&&Oe<=Xe)return!0}return!1}var lo=Pe(f.style,"touchAction"),co=lo!==a,_s="compute",ei="auto",Xi="manipulation",gn="none",Hi="pan-x",Cr="pan-y",Rn=Te();function Ne(P,I){this.manager=P,this.set(I)}Ne.prototype={set:function(P){P==_s&&(P=this.compute()),co&&this.manager.element.style&&Rn[P]&&(this.manager.element.style[lo]=P),this.actions=P.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var P=[];return M(this.manager.recognizers,function(I){X(I.options.enable,[I])&&(P=P.concat(I.getTouchAction()))}),Re(P.join(" "))},preventDefaults:function(P){var I=P.srcEvent,z=P.offsetDirection;if(this.manager.session.prevented){I.preventDefault();return}var Y=this.actions,ie=se(Y,gn)&&!Rn[gn],me=se(Y,Cr)&&!Rn[Cr],Oe=se(Y,Hi)&&!Rn[Hi];if(ie){var ut=P.pointers.length===1,Ye=P.distance<2,Mt=P.deltaTime<250;if(ut&&Ye&&Mt)return}if(!(Oe&&me)&&(ie||me&&z&nn||Oe&&z&Hn))return this.preventSrc(I)},preventSrc:function(P){this.manager.session.prevented=!0,P.preventDefault()}};function Re(P){if(se(P,gn))return gn;var I=se(P,Hi),z=se(P,Cr);return I&&z?gn:I||z?I?Hi:Cr:se(P,Xi)?Xi:ei}function Te(){if(!co)return!1;var P={},I=e.CSS&&e.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(z){P[z]=I?e.CSS.supports("touch-action",z):!0}),P}var ke=1,he=2,Ge=4,ee=8,Ue=ee,Me=16,et=32;function Fe(P){this.options=W({},this.defaults,P||{}),this.id=On(),this.manager=null,this.options.enable=Q(this.options.enable,!0),this.state=ke,this.simultaneous={},this.requireFail=[]}Fe.prototype={defaults:{},set:function(P){return W(this.options,P),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(P){if(x(P,"recognizeWith",this))return this;var I=this.simultaneous;return P=ze(P,this),I[P.id]||(I[P.id]=P,P.recognizeWith(this)),this},dropRecognizeWith:function(P){return x(P,"dropRecognizeWith",this)?this:(P=ze(P,this),delete this.simultaneous[P.id],this)},requireFailure:function(P){if(x(P,"requireFailure",this))return this;var I=this.requireFail;return P=ze(P,this),we(I,P)===-1&&(I.push(P),P.requireFailure(this)),this},dropRequireFailure:function(P){if(x(P,"dropRequireFailure",this))return this;P=ze(P,this);var I=we(this.requireFail,P);return I>-1&&this.requireFail.splice(I,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(P){return!!this.simultaneous[P.id]},emit:function(P){var I=this,z=this.state;function Y(ie){I.manager.emit(ie,P)}z<ee&&Y(I.options.event+Pt(z)),Y(I.options.event),P.additionalEvent&&Y(P.additionalEvent),z>=ee&&Y(I.options.event+Pt(z))},tryEmit:function(P){if(this.canEmit())return this.emit(P);this.state=et},canEmit:function(){for(var P=0;P<this.requireFail.length;){if(!(this.requireFail[P].state&(et|ke)))return!1;P++}return!0},recognize:function(P){var I=W({},P);if(!X(this.options.enable,[this,I])){this.reset(),this.state=et;return}this.state&(Ue|Me|et)&&(this.state=ke),this.state=this.process(I),this.state&(he|Ge|ee|Me)&&this.tryEmit(I)},process:function(P){},getTouchAction:function(){},reset:function(){}};function Pt(P){return P&Me?"cancel":P&ee?"end":P&Ge?"move":P&he?"start":""}function ot(P){return P==pn?"down":P==dn?"up":P==Yt?"left":P==tn?"right":""}function ze(P,I){var z=I.manager;return z?z.get(P):P}function ft(){Fe.apply(this,arguments)}V(ft,Fe,{defaults:{pointers:1},attrTest:function(P){var I=this.options.pointers;return I===0||P.pointers.length===I},process:function(P){var I=this.state,z=P.eventType,Y=I&(he|Ge),ie=this.attrTest(P);return Y&&(z&gt||!ie)?I|Me:Y||ie?z&je?I|ee:I&he?I|Ge:he:et}});function Zt(){ft.apply(this,arguments),this.pX=null,this.pY=null}V(Zt,ft,{defaults:{event:"pan",threshold:10,pointers:1,direction:Sn},getTouchAction:function(){var P=this.options.direction,I=[];return P&nn&&I.push(Cr),P&Hn&&I.push(Hi),I},directionTest:function(P){var I=this.options,z=!0,Y=P.distance,ie=P.direction,me=P.deltaX,Oe=P.deltaY;return ie&I.direction||(I.direction&nn?(ie=me===0?xt:me<0?Yt:tn,z=me!=this.pX,Y=Math.abs(P.deltaX)):(ie=Oe===0?xt:Oe<0?dn:pn,z=Oe!=this.pY,Y=Math.abs(P.deltaY))),P.direction=ie,z&&Y>I.threshold&&ie&I.direction},attrTest:function(P){return ft.prototype.attrTest.call(this,P)&&(this.state&he||!(this.state&he)&&this.directionTest(P))},emit:function(P){this.pX=P.deltaX,this.pY=P.deltaY;var I=ot(P.direction);I&&(P.additionalEvent=this.options.event+I),this._super.emit.call(this,P)}});function Ir(){ft.apply(this,arguments)}V(Ir,ft,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[gn]},attrTest:function(P){return this._super.attrTest.call(this,P)&&(Math.abs(P.scale-1)>this.options.threshold||this.state&he)},emit:function(P){if(P.scale!==1){var I=P.scale<1?"in":"out";P.additionalEvent=this.options.event+I}this._super.emit.call(this,P)}});function Ft(){Fe.apply(this,arguments),this._timer=null,this._input=null}V(Ft,Fe,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[ei]},process:function(P){var I=this.options,z=P.pointers.length===I.pointers,Y=P.distance<I.threshold,ie=P.deltaTime>I.time;if(this._input=P,!Y||!z||P.eventType&(je|gt)&&!ie)this.reset();else if(P.eventType&Ie)this.reset(),this._timer=S(function(){this.state=Ue,this.tryEmit()},I.time,this);else if(P.eventType&je)return Ue;return et},reset:function(){clearTimeout(this._timer)},emit:function(P){this.state===Ue&&(P&&P.eventType&je?this.manager.emit(this.options.event+"up",P):(this._input.timeStamp=T(),this.manager.emit(this.options.event,this._input)))}});function Un(){ft.apply(this,arguments)}V(Un,ft,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[gn]},attrTest:function(P){return this._super.attrTest.call(this,P)&&(Math.abs(P.rotation)>this.options.threshold||this.state&he)}});function mi(){ft.apply(this,arguments)}V(mi,ft,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:nn|Hn,pointers:1},getTouchAction:function(){return Zt.prototype.getTouchAction.call(this)},attrTest:function(P){var I=this.options.direction,z;return I&(nn|Hn)?z=P.overallVelocity:I&nn?z=P.overallVelocityX:I&Hn&&(z=P.overallVelocityY),this._super.attrTest.call(this,P)&&I&P.offsetDirection&&P.distance>this.options.threshold&&P.maxPointers==this.options.pointers&&v(z)>this.options.velocity&&P.eventType&je},emit:function(P){var I=ot(P.offsetDirection);I&&this.manager.emit(this.options.event+I,P),this.manager.emit(this.options.event,P)}});function mn(){Fe.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}V(mn,Fe,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Xi]},process:function(P){var I=this.options,z=P.pointers.length===I.pointers,Y=P.distance<I.threshold,ie=P.deltaTime<I.time;if(this.reset(),P.eventType&Ie&&this.count===0)return this.failTimeout();if(Y&&ie&&z){if(P.eventType!=je)return this.failTimeout();var me=this.pTime?P.timeStamp-this.pTime<I.interval:!0,Oe=!this.pCenter||Wi(this.pCenter,P.center)<I.posThreshold;this.pTime=P.timeStamp,this.pCenter=P.center,!Oe||!me?this.count=1:this.count+=1,this._input=P;var ut=this.count%I.taps;if(ut===0)return this.hasRequireFailures()?(this._timer=S(function(){this.state=Ue,this.tryEmit()},I.interval,this),he):Ue}return et},failTimeout:function(){return this._timer=S(function(){this.state=et},this.options.interval,this),et},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Ue&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function Be(P,I){return I=I||{},I.recognizers=Q(I.recognizers,Be.defaults.preset),new ni(P,I)}Be.VERSION="2.0.7",Be.defaults={domEvents:!1,touchAction:_s,enable:!0,inputTarget:null,inputClass:null,preset:[[Un,{enable:!1}],[Ir,{enable:!1},["rotate"]],[mi,{direction:nn}],[Zt,{direction:nn},["swipe"]],[mn],[mn,{event:"doubletap",taps:2},["tap"]],[Ft]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var bn=1,ti=2;function ni(P,I){this.options=W({},Be.defaults,I||{}),this.options.inputTarget=this.options.inputTarget||P,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=P,this.input=ms(this),this.touchAction=new Ne(this,this.options.touchAction),at(this,!0),M(this.options.recognizers,function(z){var Y=this.add(new z[0](z[1]));z[2]&&Y.recognizeWith(z[2]),z[3]&&Y.requireFailure(z[3])},this)}ni.prototype={set:function(P){return W(this.options,P),P.touchAction&&this.touchAction.update(),P.inputTarget&&(this.input.destroy(),this.input.target=P.inputTarget,this.input.init()),this},stop:function(P){this.session.stopped=P?ti:bn},recognize:function(P){var I=this.session;if(!I.stopped){this.touchAction.preventDefaults(P);var z,Y=this.recognizers,ie=I.curRecognizer;(!ie||ie&&ie.state&Ue)&&(ie=I.curRecognizer=null);for(var me=0;me<Y.length;)z=Y[me],I.stopped!==ti&&(!ie||z==ie||z.canRecognizeWith(ie))?z.recognize(P):z.reset(),!ie&&z.state&(he|Ge|ee)&&(ie=I.curRecognizer=z),me++}},get:function(P){if(P instanceof Fe)return P;for(var I=this.recognizers,z=0;z<I.length;z++)if(I[z].options.event==P)return I[z];return null},add:function(P){if(x(P,"add",this))return this;var I=this.get(P.options.event);return I&&this.remove(I),this.recognizers.push(P),P.manager=this,this.touchAction.update(),P},remove:function(P){if(x(P,"remove",this))return this;if(P=this.get(P),P){var I=this.recognizers,z=we(I,P);z!==-1&&(I.splice(z,1),this.touchAction.update())}return this},on:function(P,I){if(P!==a&&I!==a){var z=this.handlers;return M(_e(P),function(Y){z[Y]=z[Y]||[],z[Y].push(I)}),this}},off:function(P,I){if(P!==a){var z=this.handlers;return M(_e(P),function(Y){I?z[Y]&&z[Y].splice(we(z[Y],I),1):delete z[Y]}),this}},emit:function(P,I){this.options.domEvents&&Bn(P,I);var z=this.handlers[P]&&this.handlers[P].slice();if(!(!z||!z.length)){I.type=P,I.preventDefault=function(){I.srcEvent.preventDefault()};for(var Y=0;Y<z.length;)z[Y](I),Y++}},destroy:function(){this.element&&at(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function at(P,I){var z=P.element;if(z.style){var Y;M(P.options.cssProps,function(ie,me){Y=Pe(z.style,me),I?(P.oldCssProps[Y]=z.style[Y],z.style[Y]=ie):z.style[Y]=P.oldCssProps[Y]||""}),I||(P.oldCssProps={})}}function Bn(P,I){var z=n.createEvent("Event");z.initEvent(P,!0,!0),z.gesture=I,I.target.dispatchEvent(z)}W(Be,{INPUT_START:Ie,INPUT_MOVE:Ke,INPUT_END:je,INPUT_CANCEL:gt,STATE_POSSIBLE:ke,STATE_BEGAN:he,STATE_CHANGED:Ge,STATE_ENDED:ee,STATE_RECOGNIZED:Ue,STATE_CANCELLED:Me,STATE_FAILED:et,DIRECTION_NONE:xt,DIRECTION_LEFT:Yt,DIRECTION_RIGHT:tn,DIRECTION_UP:dn,DIRECTION_DOWN:pn,DIRECTION_HORIZONTAL:nn,DIRECTION_VERTICAL:Hn,DIRECTION_ALL:Sn,Manager:ni,Input:$t,TouchAction:Ne,TouchInput:gi,MouseInput:rn,PointerEventInput:pi,TouchMouseInput:Kr,SingleTouchInput:Zi,Recognizer:Fe,AttrRecognizer:ft,Tap:mn,Pan:Zt,Swipe:mi,Pinch:Ir,Rotate:Un,Press:Ft,on:K,off:ae,each:M,merge:F,extend:N,assign:W,inherit:V,bindFn:j,prefixed:Pe});var Yi=typeof e<"u"?e:typeof self<"u"?self:{};Yi.Hammer=Be,typeof a=="function"&&a.amd?a(function(){return Be}):t.exports?t.exports=Be:e[i]=Be})(window,document,"Hammer")})(K4);var pc=K4.exports;const s7=Yl(pc),bi=X6({__proto__:null,default:s7},[pc]),eS=1,tS=2,Vg=4,o7={mousedown:eS,mousemove:tS,mouseup:Vg};function a7(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return!0;return!1}function u7(t){const e=t.prototype.handler;t.prototype.handler=function(i){const a=this.store;i.button>0&&i.type==="pointerdown"&&(a7(a,l=>l.pointerId===i.pointerId)||a.push(i)),e.call(this,i)}}function l7(t){t.prototype.handler=function(n){let i=o7[n.type];i&eS&&n.button>=0&&(this.pressed=!0),i&tS&&n.which===0&&(i=Vg),this.pressed&&(i&Vg&&(this.pressed=!1),this.callback(this.manager,i,{pointers:[n],changedPointers:[n],pointerType:"mouse",srcEvent:n}))}}u7(pc.PointerEventInput);l7(pc.MouseInput);const c7=pc.Manager;class rh{constructor(e,n,i){this.element=e,this.callback=n,this.options={enable:!0,...i}}}const f7=bi?[[bi.Pan,{event:"tripan",pointers:3,threshold:0,enable:!1}],[bi.Rotate,{enable:!1}],[bi.Pinch,{enable:!1}],[bi.Swipe,{enable:!1}],[bi.Pan,{threshold:0,enable:!1}],[bi.Press,{enable:!1}],[bi.Tap,{event:"doubletap",taps:2,enable:!1}],[bi.Tap,{event:"anytap",enable:!1}],[bi.Tap,{enable:!1}]]:null,tw={tripan:["rotate","pinch","pan"],rotate:["pinch"],pinch:["pan"],pan:["press","doubletap","anytap","tap"],doubletap:["anytap"],anytap:["tap"]},h7={doubletap:["tap"]},d7={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},_m={KEY_EVENTS:["keydown","keyup"],MOUSE_EVENTS:["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],WHEEL_EVENTS:["wheel","mousewheel"]},p7={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",tripan:"tripan",tripanstart:"tripan",tripanmove:"tripan",tripanup:"tripan",tripandown:"tripan",tripanleft:"tripan",tripanright:"tripan",tripanend:"tripan",tripancancel:"tripan",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},nw={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"},g7=typeof navigator<"u"&&navigator.userAgent?navigator.userAgent.toLowerCase():"",Ya=typeof window<"u"?window:global;let Ug=!1;try{const t={get passive(){return Ug=!0,!0}};Ya.addEventListener("test",null,t),Ya.removeEventListener("test",null)}catch{Ug=!1}const m7=g7.indexOf("firefox")!==-1,{WHEEL_EVENTS:A7}=_m,rw="wheel",iw=4.000244140625,y7=40,v7=.25;class _7 extends rh{constructor(e,n,i){super(e,n,i),this.handleEvent=a=>{if(!this.options.enable)return;let l=a.deltaY;Ya.WheelEvent&&(m7&&a.deltaMode===Ya.WheelEvent.DOM_DELTA_PIXEL&&(l/=Ya.devicePixelRatio),a.deltaMode===Ya.WheelEvent.DOM_DELTA_LINE&&(l*=y7)),l!==0&&l%iw===0&&(l=Math.floor(l/iw)),a.shiftKey&&l&&(l=l*v7),this.callback({type:rw,center:{x:a.clientX,y:a.clientY},delta:-l,srcEvent:a,pointerType:"mouse",target:a.target})},this.events=(this.options.events||[]).concat(A7),this.events.forEach(a=>e.addEventListener(a,this.handleEvent,Ug?{passive:!1}:!1))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,n){e===rw&&(this.options.enable=n)}}const{MOUSE_EVENTS:w7}=_m,sw="pointermove",ow="pointerover",aw="pointerout",uw="pointerenter",lw="pointerleave";class T7 extends rh{constructor(e,n,i){super(e,n,i),this.handleEvent=l=>{this.handleOverEvent(l),this.handleOutEvent(l),this.handleEnterEvent(l),this.handleLeaveEvent(l),this.handleMoveEvent(l)},this.pressed=!1;const{enable:a}=this.options;this.enableMoveEvent=a,this.enableLeaveEvent=a,this.enableEnterEvent=a,this.enableOutEvent=a,this.enableOverEvent=a,this.events=(this.options.events||[]).concat(w7),this.events.forEach(l=>e.addEventListener(l,this.handleEvent))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,n){e===sw&&(this.enableMoveEvent=n),e===ow&&(this.enableOverEvent=n),e===aw&&(this.enableOutEvent=n),e===uw&&(this.enableEnterEvent=n),e===lw&&(this.enableLeaveEvent=n)}handleOverEvent(e){this.enableOverEvent&&e.type==="mouseover"&&this._emit(ow,e)}handleOutEvent(e){this.enableOutEvent&&e.type==="mouseout"&&this._emit(aw,e)}handleEnterEvent(e){this.enableEnterEvent&&e.type==="mouseenter"&&this._emit(uw,e)}handleLeaveEvent(e){this.enableLeaveEvent&&e.type==="mouseleave"&&this._emit(lw,e)}handleMoveEvent(e){if(this.enableMoveEvent)switch(e.type){case"mousedown":e.button>=0&&(this.pressed=!0);break;case"mousemove":e.which===0&&(this.pressed=!1),this.pressed||this._emit(sw,e);break;case"mouseup":this.pressed=!1;break}}_emit(e,n){this.callback({type:e,center:{x:n.clientX,y:n.clientY},srcEvent:n,pointerType:"mouse",target:n.target})}}const{KEY_EVENTS:E7}=_m,cw="keydown",fw="keyup";class S7 extends rh{constructor(e,n,i){super(e,n,i),this.handleEvent=a=>{const l=a.target||a.srcElement;l.tagName==="INPUT"&&l.type==="text"||l.tagName==="TEXTAREA"||(this.enableDownEvent&&a.type==="keydown"&&this.callback({type:cw,srcEvent:a,key:a.key,target:a.target}),this.enableUpEvent&&a.type==="keyup"&&this.callback({type:fw,srcEvent:a,key:a.key,target:a.target}))},this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=(this.options.events||[]).concat(E7),e.tabIndex=this.options.tabIndex||0,e.style.outline="none",this.events.forEach(a=>e.addEventListener(a,this.handleEvent))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,n){e===cw&&(this.enableDownEvent=n),e===fw&&(this.enableUpEvent=n)}}const hw="contextmenu";class x7 extends rh{constructor(e,n,i){super(e,n,i),this.handleEvent=a=>{this.options.enable&&this.callback({type:hw,center:{x:a.clientX,y:a.clientY},srcEvent:a,pointerType:"mouse",target:a.target})},e.addEventListener("contextmenu",this.handleEvent)}destroy(){this.element.removeEventListener("contextmenu",this.handleEvent)}enableEventType(e,n){e===hw&&(this.options.enable=n)}}const Bg=1,bf=2,Dg=4,R7={pointerdown:Bg,pointermove:bf,pointerup:Dg,mousedown:Bg,mousemove:bf,mouseup:Dg},b7=1,k7=2,P7=3,M7=0,C7=1,I7=2,N7=1,F7=2,O7=4;function L7(t){const e=R7[t.srcEvent.type];if(!e)return null;const{buttons:n,button:i,which:a}=t.srcEvent;let l=!1,f=!1,d=!1;return e===Dg||e===bf&&!Number.isFinite(n)?(l=a===b7,f=a===k7,d=a===P7):e===bf?(l=!!(n&N7),f=!!(n&O7),d=!!(n&F7)):e===Bg&&(l=i===M7,f=i===C7,d=i===I7),{leftButton:l,middleButton:f,rightButton:d}}function V7(t,e){const n=t.center;if(!n)return null;const i=e.getBoundingClientRect(),a=i.width/e.offsetWidth||1,l=i.height/e.offsetHeight||1,f={x:(n.x-i.left-e.clientLeft)/a,y:(n.y-i.top-e.clientTop)/l};return{center:n,offsetCenter:f}}const np={srcElement:"root",priority:0};class U7{constructor(e){this.handleEvent=n=>{if(this.isEmpty())return;const i=this._normalizeEvent(n);let a=n.srcEvent.target;for(;a&&a!==i.rootElement;){if(this._emit(i,a),i.handled)return;a=a.parentNode}this._emit(i,"root")},this.eventManager=e,this.handlers=[],this.handlersByElement=new Map,this._active=!1}isEmpty(){return!this._active}add(e,n,i,a=!1,l=!1){const{handlers:f,handlersByElement:d}=this;let g=np;typeof i=="string"||i&&i.addEventListener?g={...np,srcElement:i}:i&&(g={...np,...i});let v=d.get(g.srcElement);v||(v=[],d.set(g.srcElement,v));const T={type:e,handler:n,srcElement:g.srcElement,priority:g.priority};a&&(T.once=!0),l&&(T.passive=!0),f.push(T),this._active=this._active||!T.passive;let S=v.length-1;for(;S>=0&&!(v[S].priority>=T.priority);)S--;v.splice(S+1,0,T)}remove(e,n){const{handlers:i,handlersByElement:a}=this;for(let l=i.length-1;l>=0;l--){const f=i[l];if(f.type===e&&f.handler===n){i.splice(l,1);const d=a.get(f.srcElement);d.splice(d.indexOf(f),1),d.length===0&&a.delete(f.srcElement)}}this._active=i.some(l=>!l.passive)}_emit(e,n){const i=this.handlersByElement.get(n);if(i){let a=!1;const l=()=>{e.handled=!0},f=()=>{e.handled=!0,a=!0},d=[];for(let g=0;g<i.length;g++){const{type:v,handler:T,once:S}=i[g];if(T({...e,type:v,stopPropagation:l,stopImmediatePropagation:f}),S&&d.push(i[g]),a)break}for(let g=0;g<d.length;g++){const{type:v,handler:T}=d[g];this.remove(v,T)}}}_normalizeEvent(e){const n=this.eventManager.getElement();return{...e,...L7(e),...V7(e,n),preventDefault:()=>{e.srcEvent.preventDefault()},stopImmediatePropagation:null,stopPropagation:null,handled:!1,rootElement:n}}}const B7={events:null,recognizers:null,recognizerOptions:{},Manager:c7,touchAction:"none",tabIndex:0};class D7{constructor(e=null,n){this._onBasicInput=a=>{const{srcEvent:l}=a,f=d7[l.type];f&&this.manager.emit(f,a)},this._onOtherEvent=a=>{this.manager.emit(a.type,a)},this.options={...B7,...n},this.events=new Map,this.setElement(e);const{events:i}=this.options;i&&this.on(i)}getElement(){return this.element}setElement(e){if(this.element&&this.destroy(),this.element=e,!e)return;const{options:n}=this,i=n.Manager;this.manager=new i(e,{touchAction:n.touchAction,recognizers:n.recognizers||f7}).on("hammer.input",this._onBasicInput),n.recognizers||Object.keys(tw).forEach(a=>{const l=this.manager.get(a);l&&tw[a].forEach(f=>{l.recognizeWith(f)})});for(const a in n.recognizerOptions){const l=this.manager.get(a);if(l){const f=n.recognizerOptions[a];delete f.enable,l.set(f)}}this.wheelInput=new _7(e,this._onOtherEvent,{enable:!1}),this.moveInput=new T7(e,this._onOtherEvent,{enable:!1}),this.keyInput=new S7(e,this._onOtherEvent,{enable:!1,tabIndex:n.tabIndex}),this.contextmenuInput=new x7(e,this._onOtherEvent,{enable:!1});for(const[a,l]of this.events)l.isEmpty()||(this._toggleRecognizer(l.recognizerName,!0),this.manager.on(a,l.handleEvent))}destroy(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}on(e,n,i){this._addEventHandler(e,n,i,!1)}once(e,n,i){this._addEventHandler(e,n,i,!0)}watch(e,n,i){this._addEventHandler(e,n,i,!1,!0)}off(e,n){this._removeEventHandler(e,n)}_toggleRecognizer(e,n){const{manager:i}=this;if(!i)return;const a=i.get(e);if(a&&a.options.enable!==n){a.set({enable:n});const l=h7[e];l&&!this.options.recognizers&&l.forEach(f=>{const d=i.get(f);n?(d.requireFailure(e),a.dropRequireFailure(f)):d.dropRequireFailure(e)})}this.wheelInput.enableEventType(e,n),this.moveInput.enableEventType(e,n),this.keyInput.enableEventType(e,n),this.contextmenuInput.enableEventType(e,n)}_addEventHandler(e,n,i,a,l){if(typeof e!="string"){i=n;for(const T in e)this._addEventHandler(T,e[T],i,a,l);return}const{manager:f,events:d}=this,g=nw[e]||e;let v=d.get(g);v||(v=new U7(this),d.set(g,v),v.recognizerName=p7[g]||g,f&&f.on(g,v.handleEvent)),v.add(e,n,i,a,l),v.isEmpty()||this._toggleRecognizer(v.recognizerName,!0)}_removeEventHandler(e,n){if(typeof e!="string"){for(const f in e)this._removeEventHandler(f,e[f]);return}const{events:i}=this,a=nw[e]||e,l=i.get(a);if(l&&(l.remove(e,n),l.isEmpty())){const{recognizerName:f}=l;let d=!1;for(const g of i.values())if(g.recognizerName===f&&!g.isEmpty()){d=!0;break}d||this._toggleRecognizer(f,!1)}}}function Co(){}const z7=({isDragging:t})=>t?"grabbing":"grab",nS={id:"",width:"100%",height:"100%",style:null,viewState:null,initialViewState:null,pickingRadius:0,layerFilter:null,glOptions:{},parameters:{},parent:null,gl:null,canvas:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",eventRecognizerOptions:{},_framebuffer:null,_animate:!1,_pickable:!0,_typedArrayManagerProps:{},_customRender:null,onWebGLInitialized:Co,onResize:Co,onViewStateChange:Co,onInteractionStateChange:Co,onBeforeRender:Co,onAfterRender:Co,onLoad:Co,onError:t=>Et.error(t.message,t.cause)(),onHover:null,onClick:null,onDragStart:null,onDrag:null,onDragEnd:null,_onMetrics:null,getCursor:z7,getTooltip:null,debug:!1,drawPickingColors:!1};class ih{constructor(e){C(this,"props",void 0),C(this,"width",0),C(this,"height",0),C(this,"userData",{}),C(this,"canvas",null),C(this,"viewManager",null),C(this,"layerManager",null),C(this,"effectManager",null),C(this,"deckRenderer",null),C(this,"deckPicker",null),C(this,"eventManager",null),C(this,"tooltip",null),C(this,"metrics",void 0),C(this,"animationLoop",void 0),C(this,"stats",void 0),C(this,"viewState",void 0),C(this,"cursorState",void 0),C(this,"_needsRedraw",void 0),C(this,"_pickRequest",void 0),C(this,"_lastPointerDownInfo",null),C(this,"_metricsCounter",void 0),C(this,"_onPointerMove",n=>{const{_pickRequest:i}=this;if(n.type==="pointerleave")i.x=-1,i.y=-1,i.radius=0;else{if(n.leftButton||n.rightButton)return;{const a=n.offsetCenter;if(!a)return;i.x=a.x,i.y=a.y,i.radius=this.props.pickingRadius}}this.layerManager&&(this.layerManager.context.mousePosition={x:i.x,y:i.y}),i.event=n}),C(this,"_onEvent",n=>{const i=Zv[n.type],a=n.offsetCenter;if(!i||!a||!this.layerManager)return;const l=this.layerManager.getLayers(),f=this.deckPicker.getLastPickedObject({x:a.x,y:a.y,layers:l,viewports:this.getViewports(a)},this._lastPointerDownInfo),{layer:d}=f,g=d&&(d[i.handler]||d.props[i.handler]),v=this.props[i.handler];let T=!1;g&&(T=g.call(d,f,n)),!T&&v&&v(f,n)}),C(this,"_onPointerDown",n=>{const i=n.offsetCenter,a=this._pick("pickObject","pickObject Time",{x:i.x,y:i.y,radius:this.props.pickingRadius});this._lastPointerDownInfo=a.result[0]||a.emptyInfo}),this.props={...nS,...e},e=this.props,this._needsRedraw="Initial render",this._pickRequest={mode:"hover",x:-1,y:-1,radius:0,event:null},this.cursorState={isHovering:!1,isDragging:!1},e.viewState&&e.initialViewState&&Et.warn("View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.")(),H3()==="IE"&&Et.warn("IE 11 is not supported")(),this.viewState=e.initialViewState,e.gl||typeof document<"u"&&(this.canvas=this._createCanvas(e)),this.animationLoop=this._createAnimationLoop(e),this.stats=new um({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this.setProps(e),e._typedArrayManagerProps&&Gl.setOptions(e._typedArrayManagerProps),this.animationLoop.start()}finalize(){var e,n,i,a,l,f,d,g;if((e=this.animationLoop)===null||e===void 0||e.stop(),this.animationLoop=null,this._lastPointerDownInfo=null,(n=this.layerManager)===null||n===void 0||n.finalize(),this.layerManager=null,(i=this.viewManager)===null||i===void 0||i.finalize(),this.viewManager=null,(a=this.effectManager)===null||a===void 0||a.finalize(),this.effectManager=null,(l=this.deckRenderer)===null||l===void 0||l.finalize(),this.deckRenderer=null,(f=this.deckPicker)===null||f===void 0||f.finalize(),this.deckPicker=null,(d=this.eventManager)===null||d===void 0||d.destroy(),this.eventManager=null,(g=this.tooltip)===null||g===void 0||g.remove(),this.tooltip=null,!this.props.canvas&&!this.props.gl&&this.canvas){var v;(v=this.canvas.parentElement)===null||v===void 0||v.removeChild(this.canvas),this.canvas=null}}setProps(e){this.stats.get("setProps Time").timeStart(),"onLayerHover"in e&&Et.removed("onLayerHover","onHover")(),"onLayerClick"in e&&Et.removed("onLayerClick","onClick")(),e.initialViewState&&!Oi(this.props.initialViewState,e.initialViewState,3)&&(this.viewState=e.initialViewState),Object.assign(this.props,e),this._setCanvasSize(this.props);const n=Object.create(this.props);Object.assign(n,{views:this._getViews(),width:this.width,height:this.height,viewState:this._getViewState()}),this.animationLoop.setProps(n),this.layerManager&&(this.viewManager.setProps(n),this.layerManager.activateViewport(this.getViewports()[0]),this.layerManager.setProps(n),this.effectManager.setProps(n),this.deckRenderer.setProps(n),this.deckPicker.setProps(n)),this.stats.get("setProps Time").timeEnd()}needsRedraw(e={clearRedrawFlags:!1}){if(!this.layerManager)return!1;if(this.props._animate)return"Deck._animate";let n=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);const i=this.viewManager.needsRedraw(e),a=this.layerManager.needsRedraw(e),l=this.effectManager.needsRedraw(e),f=this.deckRenderer.needsRedraw(e);return n=n||i||a||l||f,n}redraw(e){if(!this.layerManager)return;let n=this.needsRedraw({clearRedrawFlags:!0});n=e||n,n&&(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(n):this._drawLayers(n))}get isInitialized(){return this.viewManager!==null}getViews(){return _n(this.viewManager),this.viewManager.views}getViewports(e){return _n(this.viewManager),this.viewManager.getViewports(e)}getCanvas(){return this.canvas}pickObject(e){const n=this._pick("pickObject","pickObject Time",e).result;return n.length?n[0]:null}pickMultipleObjects(e){return e.depth=e.depth||10,this._pick("pickObject","pickMultipleObjects Time",e).result}pickObjects(e){return this._pick("pickObjects","pickObjects Time",e)}_addResources(e,n=!1){for(const i in e)this.layerManager.resourceManager.add({resourceId:i,data:e[i],forceUpdate:n})}_removeResources(e){for(const n of e)this.layerManager.resourceManager.remove(n)}_addDefaultEffect(e){this.effectManager.addDefaultEffect(e)}_pick(e,n,i){_n(this.deckPicker);const{stats:a}=this;a.get("Pick Count").incrementCount(),a.get(n).timeStart();const l=this.deckPicker[e]({layers:this.layerManager.getLayers(i),views:this.viewManager.getViews(),viewports:this.getViewports(i),onViewportActive:this.layerManager.activateViewport,effects:this.effectManager.getEffects(),...i});return a.get(n).timeEnd(),l}_createCanvas(e){let n=e.canvas;return typeof n=="string"&&(n=document.getElementById(n),_n(n)),n||(n=document.createElement("canvas"),n.id=e.id||"deckgl-overlay",(e.parent||document.body).appendChild(n)),Object.assign(n.style,e.style),n}_setCanvasSize(e){if(!this.canvas)return;const{width:n,height:i}=e;if(n||n===0){const l=Number.isFinite(n)?"".concat(n,"px"):n;this.canvas.style.width=l}if(i||i===0){var a;const l=Number.isFinite(i)?"".concat(i,"px"):i;this.canvas.style.position=((a=e.style)===null||a===void 0?void 0:a.position)||"absolute",this.canvas.style.height=l}}_updateCanvasSize(){var e,n;const{canvas:i}=this;if(!i)return;const a=(e=i.clientWidth)!==null&&e!==void 0?e:i.width,l=(n=i.clientHeight)!==null&&n!==void 0?n:i.height;if(a!==this.width||l!==this.height){var f,d;this.width=a,this.height=l,(f=this.viewManager)===null||f===void 0||f.setProps({width:a,height:l}),(d=this.layerManager)===null||d===void 0||d.activateViewport(this.getViewports()[0]),this.props.onResize({width:a,height:l})}}_createAnimationLoop(e){const{width:n,height:i,gl:a,glOptions:l,debug:f,onError:d,onBeforeRender:g,onAfterRender:v,useDevicePixels:T}=e;return new j9({width:n,height:i,useDevicePixels:T,autoResizeDrawingBuffer:!a,autoResizeViewport:!1,gl:a,onCreateContext:S=>r4({...l,...S,canvas:this.canvas,debug:f,onContextLost:()=>this._onContextLost()}),onInitialize:S=>this._setGLContext(S.gl),onRender:this._onRenderFrame.bind(this),onBeforeRender:g,onAfterRender:v,onError:d})}_getViewState(){return this.props.viewState||this.viewState}_getViews(){let e=this.props.views||[new J4({id:"default-view"})];return e=Array.isArray(e)?e:[e],e.length&&this.props.controller&&(e[0].props.controller=this.props.controller),e}_onContextLost(){const{onError:e}=this.props;this.animationLoop&&e&&e(new Error("WebGL context is lost"))}_pickAndCallback(){const{_pickRequest:e}=this;if(e.event){const{result:i,emptyInfo:a}=this._pick("pickObject","pickObject Time",e);this.cursorState.isHovering=i.length>0;let l=a,f=!1;for(const d of i){var n;l=d,f=((n=d.layer)===null||n===void 0?void 0:n.onHover(d,e.event))||f}if(!f&&this.props.onHover&&this.props.onHover(l,e.event),this.props.getTooltip&&this.tooltip){const d=this.props.getTooltip(l);this.tooltip.setTooltip(d,l.x,l.y)}e.event=null}}_updateCursor(){const e=this.props.parent||this.canvas;e&&(e.style.cursor=this.props.getCursor(this.cursorState))}_setGLContext(e){if(this.layerManager)return;this.canvas||(this.canvas=e.canvas,am(e,{enable:!0,copyState:!0})),this.tooltip=new i7(this.canvas),cs(e,{blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onWebGLInitialized(e);const n=new F4;n.play(),this.animationLoop.attachTimeline(n),this.eventManager=new D7(this.props.parent||e.canvas,{touchAction:this.props.touchAction,recognizerOptions:this.props.eventRecognizerOptions,events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}});for(const a in Zv)this.eventManager.on(a,this._onEvent);this.viewManager=new NX({timeline:n,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange.bind(this),onInteractionStateChange:this._onInteractionStateChange.bind(this),views:this._getViews(),viewState:this._getViewState(),width:this.width,height:this.height});const i=this.viewManager.getViewports()[0];this.layerManager=new IX(e,{deck:this,stats:this.stats,viewport:i,timeline:n}),this.effectManager=new HX,this.deckRenderer=new JX(e),this.deckPicker=new n7(e),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}_drawLayers(e,n){const{gl:i}=this.layerManager.context;cs(i,this.props.parameters),this.props.onBeforeRender({gl:i}),this.deckRenderer.renderLayers({target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:"screen",effects:this.effectManager.getEffects(),...n}),this.props.onAfterRender({gl:i})}_onRenderFrame(e){this._getFrameStats(),this._metricsCounter++%60===0&&(this._getMetrics(),this.stats.reset(),Et.table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.tooltip.isVisible&&this.viewManager.needsRedraw()&&this.tooltip.setTooltip(null),this.layerManager.updateLayers(),this._pickAndCallback(),this.redraw(),this.viewManager&&this.viewManager.updateViewStates()}_onViewStateChange(e){const n=this.props.onViewStateChange(e)||e.viewState;this.viewState&&(this.viewState={...this.viewState,[e.viewId]:n},this.props.viewState||this.viewManager&&this.viewManager.setProps({viewState:this.viewState}))}_onInteractionStateChange(e){this.cursorState.isDragging=e.isDragging||!1,this.props.onInteractionStateChange(e)}_getFrameStats(){const{stats:e}=this;e.get("frameRate").timeEnd(),e.get("frameRate").timeStart();const n=this.animationLoop.stats;e.get("GPU Time").addTime(n.get("GPU Time").lastTiming),e.get("CPU Time").addTime(n.get("CPU Time").lastTiming)}_getMetrics(){const{metrics:e,stats:n}=this;e.fps=n.get("frameRate").getHz(),e.setPropsTime=n.get("setProps Time").time,e.updateAttributesTime=n.get("Update Attributes").time,e.framesRedrawn=n.get("Redraw Count").count,e.pickTime=n.get("pickObject Time").time+n.get("pickMultipleObjects Time").time+n.get("pickObjects Time").time,e.pickCount=n.get("Pick Count").count,e.gpuTime=n.get("GPU Time").time,e.cpuTime=n.get("CPU Time").time,e.gpuTimePerFrame=n.get("GPU Time").getAverageTime(),e.cpuTimePerFrame=n.get("CPU Time").getAverageTime();const i=zo.get("Memory Usage");e.bufferMemory=i.get("Buffer Memory").count,e.textureMemory=i.get("Texture Memory").count,e.renderbufferMemory=i.get("Renderbuffer Memory").count,e.gpuMemory=i.get("GPU Memory").count}}C(ih,"defaultProps",nS);C(ih,"VERSION",LD);class rp{constructor(e,n){C(this,"opts",void 0),C(this,"source",void 0),this.opts=n,this.source=e}get value(){return this.source.value}getValue(){const e=this.source.getBuffer(),n=this.getAccessor();if(e)return[e,n];const{value:i}=this.source,{size:a}=n;let l=i;if(i&&i.length!==a){l=new Float32Array(a);const f=n.elementOffset||0;for(let d=0;d<a;++d)l[d]=i[f+d]}return l}getAccessor(){return{...this.source.getAccessor(),...this.opts}}}function j7(t){switch(t){case 5126:return Float32Array;case 5130:return Float64Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return Uint8ClampedArray;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Unknown GL type")}}function L0(t){return t.stride||t.size*t.bytesPerElement}function rS(t,e){e.offset&&Et.removed("shaderAttribute.offset","vertexOffset, elementOffset")();const n=L0(t),i=e.vertexOffset!==void 0?e.vertexOffset:t.vertexOffset||0,a=e.elementOffset||0,l=i*n+a*t.bytesPerElement+(t.offset||0);return{...e,offset:l,stride:n}}function W7(t,e){const n=rS(t,e);return{high:n,low:{...n,offset:n.offset+t.size*4}}}class G7{constructor(e,n,i){C(this,"gl",void 0),C(this,"id",void 0),C(this,"size",void 0),C(this,"settings",void 0),C(this,"value",void 0),C(this,"doublePrecision",void 0),C(this,"_buffer",void 0),C(this,"state",void 0),this.gl=e,this.id=n.id||"",this.size=n.size||1;const a=n.logicalType||n.type,l=a===5130;let{defaultValue:f}=n;f=Number.isFinite(f)?[f]:f||new Array(this.size).fill(0);let d;l?d=5126:!a&&n.isIndexed?d=e&&yj(e,It.ELEMENT_INDEX_UINT32)?5125:5123:d=a||5126;let g=j7(a||d||5126);this.doublePrecision=l,l&&n.fp64===!1&&(g=Float32Array),this.value=null,this.settings={...n,defaultType:g,defaultValue:f,logicalType:a,type:d,size:this.size,bytesPerElement:g.BYTES_PER_ELEMENT},this.state={...i,externalBuffer:null,bufferAccessor:this.settings,allocatedValue:null,numInstances:0,bounds:null,constant:!1},this._buffer=null}get isConstant(){return this.state.constant}get buffer(){if(!this._buffer){const{isIndexed:e,type:n}=this.settings;this._buffer=new Tt(this.gl,{id:this.id,target:e?34963:34962,accessor:{type:n}})}return this._buffer}get byteOffset(){const e=this.getAccessor();return e.vertexOffset?e.vertexOffset*L0(e):0}get numInstances(){return this.state.numInstances}set numInstances(e){this.state.numInstances=e}delete(){this._buffer&&(this._buffer.delete(),this._buffer=null),Gl.release(this.state.allocatedValue)}getShaderAttributes(e,n){if(this.doublePrecision){const i={},a=this.value instanceof Float64Array,l=W7(this.getAccessor(),n||{});return i[e]=new rp(this,l.high),i["".concat(e,"64Low")]=a?new rp(this,l.low):new Float32Array(this.size),i}if(n){const i=rS(this.getAccessor(),n);return{[e]:new rp(this,i)}}return{[e]:this}}getBuffer(){return this.state.constant?null:this.state.externalBuffer||this._buffer}getValue(){return this.state.constant?this.value:[this.getBuffer(),this.getAccessor()]}getAccessor(){return this.state.bufferAccessor}getBounds(){if(this.state.bounds)return this.state.bounds;let e=null;if(this.state.constant&&this.value){const n=Array.from(this.value);e=[n,n]}else{const{value:n,numInstances:i,size:a}=this,l=i*a;if(n&&l&&n.length>=l){const f=new Array(a).fill(1/0),d=new Array(a).fill(-1/0);for(let g=0;g<l;)for(let v=0;v<a;v++){const T=n[g++];T<f[v]&&(f[v]=T),T>d[v]&&(d[v]=T)}e=[f,d]}}return this.state.bounds=e,e}setData(e){const{state:n}=this;let i;ArrayBuffer.isView(e)?i={value:e}:e instanceof Tt?i={buffer:e}:i=e;const a={...this.settings,...i};if(n.bufferAccessor=a,n.bounds=null,i.constant){let l=i.value;if(l=this._normalizeValue(l,[],0),this.settings.normalized&&(l=this.normalizeConstant(l)),!(!n.constant||!this._areValuesEqual(l,this.value)))return!1;n.externalBuffer=null,n.constant=!0,this.value=l}else if(i.buffer){const l=i.buffer;n.externalBuffer=l,n.constant=!1,this.value=i.value||null;const f=i.value instanceof Float64Array;a.type=i.type||l.accessor.type,a.bytesPerElement=l.accessor.BYTES_PER_ELEMENT*(f?2:1),a.stride=L0(a)}else if(i.value){this._checkExternalBuffer(i);let l=i.value;n.externalBuffer=null,n.constant=!1,this.value=l,a.bytesPerElement=l.BYTES_PER_ELEMENT,a.stride=L0(a);const{buffer:f,byteOffset:d}=this;this.doublePrecision&&l instanceof Float64Array&&(l=Kd(l,a));const g=l.byteLength+d+a.stride*2;f.byteLength<g&&f.reallocate(g),f.setAccessor(null),f.subData({data:l,offset:d}),a.type=i.type||f.accessor.type}return!0}updateSubBuffer(e={}){this.state.bounds=null;const n=this.value,{startOffset:i=0,endOffset:a}=e;this.buffer.subData({data:this.doublePrecision&&n instanceof Float64Array?Kd(n,{size:this.size,startIndex:i,endIndex:a}):n.subarray(i,a),offset:i*n.BYTES_PER_ELEMENT+this.byteOffset})}allocate(e,n=!1){const{state:i}=this,a=i.allocatedValue,l=Gl.allocate(a,e+1,{size:this.size,type:this.settings.defaultType,copy:n});this.value=l;const{buffer:f,byteOffset:d}=this;return f.byteLength<l.byteLength+d&&(f.reallocate(l.byteLength+d),n&&a&&f.subData({data:a instanceof Float64Array?Kd(a,this):a,offset:d})),i.allocatedValue=l,i.constant=!1,i.externalBuffer=null,i.bufferAccessor=this.settings,!0}_checkExternalBuffer(e){const{value:n}=e;if(!ArrayBuffer.isView(n))throw new Error("Attribute ".concat(this.id," value is not TypedArray"));const i=this.settings.defaultType;let a=!1;if(this.doublePrecision&&(a=n.BYTES_PER_ELEMENT<4),a)throw new Error("Attribute ".concat(this.id," does not support ").concat(n.constructor.name));!(n instanceof i)&&this.settings.normalized&&!("normalized"in e)&&Et.warn("Attribute ".concat(this.id," is normalized"))()}normalizeConstant(e){switch(this.settings.type){case 5120:return new Float32Array(e).map(n=>(n+128)/255*2-1);case 5122:return new Float32Array(e).map(n=>(n+32768)/65535*2-1);case 5121:return new Float32Array(e).map(n=>n/255);case 5123:return new Float32Array(e).map(n=>n/65535);default:return e}}_normalizeValue(e,n,i){const{defaultValue:a,size:l}=this.settings;if(Number.isFinite(e))return n[i]=e,n;if(!e){let f=l;for(;--f>=0;)n[i+f]=a[f];return n}switch(l){case 4:n[i+3]=Number.isFinite(e[3])?e[3]:a[3];case 3:n[i+2]=Number.isFinite(e[2])?e[2]:a[2];case 2:n[i+1]=Number.isFinite(e[1])?e[1]:a[1];case 1:n[i+0]=Number.isFinite(e[0])?e[0]:a[0];break;default:let f=l;for(;--f>=0;)n[i+f]=Number.isFinite(e[f])?e[f]:a[f]}return n}_areValuesEqual(e,n){if(!e||!n)return!1;const{size:i}=this;for(let a=0;a<i;a++)if(e[a]!==n[a])return!1;return!0}}const dw=[],pw=[];function Z7(t,e=0,n=1/0){let i=dw;const a={index:-1,data:t,target:[]};return t?typeof t[Symbol.iterator]=="function"?i=t:t.length>0&&(pw.length=t.length,i=pw):i=dw,(e>0||Number.isFinite(n))&&(i=(Array.isArray(i)?i:Array.from(i)).slice(e,n),a.index=e-1),{iterable:i,objectInfo:a}}function iS(t){return t&&t[Symbol.asyncIterator]}function X7(t,e){const{size:n,stride:i,offset:a,startIndices:l,nested:f}=e,d=t.BYTES_PER_ELEMENT,g=i?i/d:n,v=a?a/d:0,T=Math.floor((t.length-v)/g);return(S,{index:x,target:M})=>{if(!l){const F=x*g+v;for(let V=0;V<n;V++)M[V]=t[F+V];return M}const B=l[x],W=l[x+1]||T;let N;if(f){N=new Array(W-B);for(let F=B;F<W;F++){const V=F*g+v;M=new Array(n);for(let j=0;j<n;j++)M[j]=t[V+j];N[F-B]=M}}else if(g===n)N=t.subarray(B*n+v,W*n+v);else{N=new t.constructor((W-B)*n);let F=0;for(let V=B;V<W;V++){const j=V*g+v;for(let X=0;X<n;X++)N[F++]=t[j+X]}}return N}}const H7=[],V0=[[0,1/0]];function Y7(t,e){if(t===V0||(e[0]<0&&(e[0]=0),e[0]>=e[1]))return t;const n=[],i=t.length;let a=0;for(let l=0;l<i;l++){const f=t[l];f[1]<e[0]?(n.push(f),a=l+1):f[0]>e[1]?n.push(f):e=[Math.min(f[0],e[0]),Math.max(f[1],e[1])]}return n.splice(a,0,e),n}function ip(t){const{source:e,target:n,start:i=0,size:a,getData:l}=t,f=t.end||n.length,d=e.length,g=f-i;if(d>g){n.set(e.subarray(0,g),i);return}if(n.set(e,i),!l)return;let v=d;for(;v<g;){const T=l(v,e);for(let S=0;S<a;S++)n[i+v]=T[S]||0,v++}}function $7({source:t,target:e,size:n,getData:i,sourceStartIndices:a,targetStartIndices:l}){if(!Array.isArray(l))return ip({source:t,target:e,size:n,getData:i}),e;let f=0,d=0;const g=i&&((T,S)=>i(T+d,S)),v=Math.min(a.length,l.length);for(let T=1;T<v;T++){const S=a[T]*n,x=l[T]*n;ip({source:t.subarray(f,S),target:e,start:d,end:x,size:n,getData:g}),f=S,d=x}return d<e.length&&ip({source:[],target:e,start:d,size:n,getData:g}),e}const J7={interpolation:{duration:0,easing:t=>t},spring:{stiffness:.05,damping:.5}};function sS(t,e){if(!t)return null;Number.isFinite(t)&&(t={type:"interpolation",duration:t});const n=t.type||"interpolation";return{...J7[n],...e,...t,type:n}}function oS(t,e){const n=e.getBuffer();return n?[n,{divisor:0,size:e.size,normalized:e.settings.normalized}]:e.value}function aS(t){switch(t){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error('No defined attribute type for size "'.concat(t,'"'))}}function uS(t){t.push(t.shift())}function wm(t,e){const{doublePrecision:n,settings:i,value:a,size:l}=t,f=n&&a instanceof Float64Array?2:1;return(i.noAlloc?a.length:e*l)*f}function lS({buffer:t,numInstances:e,attribute:n,fromLength:i,fromStartIndices:a,getData:l=f=>f}){const f=n.doublePrecision&&n.value instanceof Float64Array?2:1,d=n.size*f,g=n.byteOffset,v=n.startIndices,T=a&&v,S=wm(n,e),x=n.isConstant;if(!T&&i>=S)return;const M=x?n.value:n.getBuffer().getData({srcByteOffset:g});if(n.settings.normalized&&!x){const F=l;l=(V,j)=>n.normalizeConstant(F(V,j))}const B=x?(F,V)=>l(M,V):(F,V)=>l(M.subarray(F,F+d),V),W=t.getData({length:i}),N=new Float32Array(S);$7({source:W,target:N,sourceStartIndices:a,targetStartIndices:v,size:d,getData:B}),t.byteLength<N.byteLength+g&&t.reallocate(N.byteLength+g),t.subData({data:N,offset:g})}class Tm extends G7{constructor(e,n){super(e,n,{startIndices:null,lastExternalBuffer:null,binaryValue:null,binaryAccessor:null,needsUpdate:!0,needsRedraw:!1,updateRanges:V0}),C(this,"constant",!1),this.settings.update=n.update||(n.accessor?this._autoUpdater:void 0),Object.seal(this.settings),Object.seal(this.state),this._validateAttributeUpdaters()}get startIndices(){return this.state.startIndices}set startIndices(e){this.state.startIndices=e}needsUpdate(){return this.state.needsUpdate}needsRedraw({clearChangedFlags:e=!1}={}){const n=this.state.needsRedraw;return this.state.needsRedraw=n&&!e,n}getUpdateTriggers(){const{accessor:e}=this.settings;return[this.id].concat(typeof e!="function"&&e||[])}supportsTransition(){return!!this.settings.transition}getTransitionSetting(e){if(!e||!this.supportsTransition())return null;const{accessor:n}=this.settings,i=this.settings.transition,a=Array.isArray(n)?e[n.find(l=>e[l])]:e[n];return sS(a,i)}setNeedsUpdate(e=this.id,n){if(this.state.needsUpdate=this.state.needsUpdate||e,this.setNeedsRedraw(e),n){const{startRow:i=0,endRow:a=1/0}=n;this.state.updateRanges=Y7(this.state.updateRanges,[i,a])}else this.state.updateRanges=V0}clearNeedsUpdate(){this.state.needsUpdate=!1,this.state.updateRanges=H7}setNeedsRedraw(e=this.id){this.state.needsRedraw=this.state.needsRedraw||e}allocate(e){const{state:n,settings:i}=this;return i.noAlloc?!1:i.update?(super.allocate(e,n.updateRanges!==V0),!0):!1}updateBuffer({numInstances:e,data:n,props:i,context:a}){if(!this.needsUpdate())return!1;const{state:{updateRanges:l},settings:{update:f,noAlloc:d}}=this;let g=!0;if(f){for(const[v,T]of l)f.call(a,this,{data:n,startRow:v,endRow:T,props:i,numInstances:e});if(this.value)if(this.constant||this.buffer.byteLength<this.value.byteLength+this.byteOffset)this.setData({value:this.value,constant:this.constant}),this.constant=!1;else for(const[v,T]of l){const S=Number.isFinite(v)?this.getVertexOffset(v):0,x=Number.isFinite(T)?this.getVertexOffset(T):d||!Number.isFinite(e)?this.value.length:e*this.size;super.updateSubBuffer({startOffset:S,endOffset:x})}this._checkAttributeArray()}else g=!1;return this.clearNeedsUpdate(),this.setNeedsRedraw(),g}setConstantValue(e){return e===void 0||typeof e=="function"?!1:(this.setData({constant:!0,value:e})&&this.setNeedsRedraw(),this.clearNeedsUpdate(),!0)}setExternalBuffer(e){const{state:n}=this;return e?(this.clearNeedsUpdate(),n.lastExternalBuffer===e||(n.lastExternalBuffer=e,this.setNeedsRedraw(),this.setData(e)),!0):(n.lastExternalBuffer=null,!1)}setBinaryValue(e,n=null){const{state:i,settings:a}=this;if(!e)return i.binaryValue=null,i.binaryAccessor=null,!1;if(a.noAlloc)return!1;if(i.binaryValue===e)return this.clearNeedsUpdate(),!0;if(i.binaryValue=e,this.setNeedsRedraw(),a.transform||n!==this.startIndices){ArrayBuffer.isView(e)&&(e={value:e});const f=e;_n(ArrayBuffer.isView(f.value),"invalid ".concat(a.accessor));const d=!!f.size&&f.size!==this.size;return i.binaryAccessor=X7(f.value,{size:f.size||this.size,stride:f.stride,offset:f.offset,startIndices:n,nested:d}),!1}return this.clearNeedsUpdate(),this.setData(e),!0}getVertexOffset(e){const{startIndices:n}=this;return(n?e<n.length?n[e]:this.numInstances:e)*this.size}getShaderAttributes(){const e=this.settings.shaderAttributes||{[this.id]:null},n={};for(const i in e)Object.assign(n,super.getShaderAttributes(i,e[i]));return n}_autoUpdater(e,{data:n,startRow:i,endRow:a,props:l,numInstances:f}){if(e.constant)return;const{settings:d,state:g,value:v,size:T,startIndices:S}=e,{accessor:x,transform:M}=d,B=g.binaryAccessor||(typeof x=="function"?x:l[x]);_n(typeof B=="function",'accessor "'.concat(x,'" is not a function'));let W=e.getVertexOffset(i);const{iterable:N,objectInfo:F}=Z7(n,i,a);for(const V of N){F.index++;let j=B(V,F);if(M&&(j=M.call(this,j)),S){const X=(F.index<S.length-1?S[F.index+1]:f)-S[F.index];if(j&&Array.isArray(j[0])){let Q=W;for(const K of j)e._normalizeValue(K,v,Q),Q+=T}else j&&j.length>T?v.set(j,W):(e._normalizeValue(j,F.target,0),wX({target:v,source:F.target,start:W,count:X}));W+=X*T}else e._normalizeValue(j,v,W),W+=T}}_validateAttributeUpdaters(){const{settings:e}=this;if(!(e.noAlloc||typeof e.update=="function"))throw new Error("Attribute ".concat(this.id," missing update or accessor"))}_checkAttributeArray(){const{value:e}=this,n=Math.min(4,this.size);if(e&&e.length>=n){let i=!0;switch(n){case 4:i=i&&Number.isFinite(e[3]);case 3:i=i&&Number.isFinite(e[2]);case 2:i=i&&Number.isFinite(e[1]);case 1:i=i&&Number.isFinite(e[0]);break;default:i=!1}if(!i)throw new Error("Illegal attribute generated for ".concat(this.id))}}}class Q7{constructor({gl:e,attribute:n,timeline:i}){C(this,"gl",void 0),C(this,"type","interpolation"),C(this,"attributeInTransition",void 0),C(this,"settings",void 0),C(this,"attribute",void 0),C(this,"transition",void 0),C(this,"currentStartIndices",void 0),C(this,"currentLength",void 0),C(this,"transform",void 0),C(this,"buffers",void 0),this.gl=e,this.transition=new dc(i),this.attribute=n,this.attributeInTransition=new Tm(e,n.settings),this.currentStartIndices=n.startIndices,this.currentLength=0,this.transform=K7(e,n);const a={byteLength:0,usage:35050};this.buffers=[new Tt(e,a),new Tt(e,a)]}get inProgress(){return this.transition.inProgress}start(e,n){if(e.duration<=0){this.transition.cancel();return}this.settings=e;const{gl:i,buffers:a,attribute:l}=this;uS(a);const f={numInstances:n,attribute:l,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter};for(const d of a)lS({buffer:d,...f});this.currentStartIndices=l.startIndices,this.currentLength=wm(l,n),this.attributeInTransition.setData({buffer:a[1],value:l.value}),this.transition.start(e),this.transform.update({elementCount:Math.floor(this.currentLength/l.size),sourceBuffers:{aFrom:a[0],aTo:oS(i,l)},feedbackBuffers:{vCurrent:a[1]}})}update(){const e=this.transition.update();if(e){const{duration:n,easing:i}=this.settings,{time:a}=this.transition;let l=a/n;i&&(l=i(l)),this.transform.run({uniforms:{time:l}})}return e}cancel(){this.transition.cancel(),this.transform.delete();for(const e of this.buffers)e.delete();this.buffers.length=0}}const q7=`
#define SHADER_NAME interpolation-transition-vertex-shader

uniform float time;
attribute ATTRIBUTE_TYPE aFrom;
attribute ATTRIBUTE_TYPE aTo;
varying ATTRIBUTE_TYPE vCurrent;

void main(void) {
  vCurrent = mix(aFrom, aTo, time);
  gl_Position = vec4(0.0);
}
`;function K7(t,e){const n=aS(e.size);return new gm(t,{vs:q7,defines:{ATTRIBUTE_TYPE:n},varyings:["vCurrent"]})}class eH{constructor({gl:e,attribute:n,timeline:i}){C(this,"gl",void 0),C(this,"type","spring"),C(this,"attributeInTransition",void 0),C(this,"settings",void 0),C(this,"attribute",void 0),C(this,"transition",void 0),C(this,"currentStartIndices",void 0),C(this,"currentLength",void 0),C(this,"texture",void 0),C(this,"framebuffer",void 0),C(this,"transform",void 0),C(this,"buffers",void 0),this.gl=e,this.type="spring",this.transition=new dc(i),this.attribute=n,this.attributeInTransition=new Tm(e,{...n.settings,normalized:!1}),this.currentStartIndices=n.startIndices,this.currentLength=0,this.texture=nH(e),this.framebuffer=rH(e,this.texture),this.transform=tH(e,n,this.framebuffer);const a={byteLength:0,usage:35050};this.buffers=[new Tt(e,a),new Tt(e,a),new Tt(e,a)]}get inProgress(){return this.transition.inProgress}start(e,n){const{gl:i,buffers:a,attribute:l}=this,f={numInstances:n,attribute:l,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter};for(const d of a)lS({buffer:d,...f});this.settings=e,this.currentStartIndices=l.startIndices,this.currentLength=wm(l,n),this.attributeInTransition.setData({buffer:a[1],value:l.value}),this.transition.start({...e,duration:1/0}),this.transform.update({elementCount:Math.floor(this.currentLength/l.size),sourceBuffers:{aTo:oS(i,l)}})}update(){const{buffers:e,transform:n,framebuffer:i,transition:a}=this;if(!a.update())return!1;const f=this.settings;return n.update({sourceBuffers:{aPrev:e[0],aCur:e[1]},feedbackBuffers:{vNext:e[2]}}),n.run({framebuffer:i,discard:!1,clearRenderTarget:!0,uniforms:{stiffness:f.stiffness,damping:f.damping},parameters:{depthTest:!1,blend:!0,viewport:[0,0,1,1],blendFunc:[1,1],blendEquation:[32776,32776]}}),uS(e),this.attributeInTransition.setData({buffer:e[1],value:this.attribute.value}),eh(i)[0]>0||a.end(),!0}cancel(){this.transition.cancel(),this.transform.delete();for(const e of this.buffers)e.delete();this.buffers.length=0,this.texture.delete(),this.framebuffer.delete()}}function tH(t,e,n){const i=aS(e.size);return new gm(t,{framebuffer:n,vs:`
#define SHADER_NAME spring-transition-vertex-shader

#define EPSILON 0.00001

uniform float stiffness;
uniform float damping;
attribute ATTRIBUTE_TYPE aPrev;
attribute ATTRIBUTE_TYPE aCur;
attribute ATTRIBUTE_TYPE aTo;
varying ATTRIBUTE_TYPE vNext;
varying float vIsTransitioningFlag;

ATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {
  ATTRIBUTE_TYPE velocity = cur - prev;
  ATTRIBUTE_TYPE delta = dest - cur;
  ATTRIBUTE_TYPE spring = delta * stiffness;
  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;
  return spring + damper + velocity + cur;
}

void main(void) {
  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;
  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;

  vNext = getNextValue(aCur, aPrev, aTo);
  gl_Position = vec4(0, 0, 0, 1);
  gl_PointSize = 100.0;
}
`,fs:`
#define SHADER_NAME spring-transition-is-transitioning-fragment-shader

varying float vIsTransitioningFlag;

void main(void) {
  if (vIsTransitioningFlag == 0.0) {
    discard;
  }
  gl_FragColor = vec4(1.0);
}`,defines:{ATTRIBUTE_TYPE:i},varyings:["vNext"]})}function nH(t){return new fi(t,{data:new Uint8Array(4),format:6408,type:5121,border:0,mipmaps:!1,dataFormat:6408,width:1,height:1})}function rH(t,e){return new en(t,{id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,attachments:{36064:e}})}const iH={interpolation:Q7,spring:eH};class sH{constructor(e,{id:n,timeline:i}){C(this,"id",void 0),C(this,"isSupported",void 0),C(this,"gl",void 0),C(this,"timeline",void 0),C(this,"transitions",void 0),C(this,"needsRedraw",void 0),C(this,"numInstances",void 0),this.id=n,this.gl=e,this.timeline=i,this.transitions={},this.needsRedraw=!1,this.numInstances=1,this.isSupported=gm.isSupported(e)}finalize(){for(const e in this.transitions)this._removeTransition(e)}update({attributes:e,transitions:n,numInstances:i}){this.numInstances=i||1;for(const a in e){const l=e[a],f=l.getTransitionSetting(n);f&&this._updateAttribute(a,l,f)}for(const a in this.transitions){const l=e[a];(!l||!l.getTransitionSetting(n))&&this._removeTransition(a)}}hasAttribute(e){const n=this.transitions[e];return n&&n.inProgress}getAttributes(){const e={};for(const n in this.transitions){const i=this.transitions[n];i.inProgress&&(e[n]=i.attributeInTransition)}return e}run(){if(!this.isSupported||this.numInstances===0)return!1;for(const n in this.transitions)this.transitions[n].update()&&(this.needsRedraw=!0);const e=this.needsRedraw;return this.needsRedraw=!1,e}_removeTransition(e){this.transitions[e].cancel(),delete this.transitions[e]}_updateAttribute(e,n,i){const a=this.transitions[e];let l=!a||a.type!==i.type;if(l){if(!this.isSupported){Et.warn("WebGL2 not supported by this browser. Transition for ".concat(e," is disabled."))();return}a&&this._removeTransition(e);const f=iH[i.type];f?this.transitions[e]=new f({attribute:n,timeline:this.timeline,gl:this.gl}):(Et.error("unsupported transition type '".concat(i.type,"'"))(),l=!1)}(l||n.needsRedraw())&&(this.needsRedraw=!0,this.transitions[e].start(i,this.numInstances))}}const gw="attributeManager.invalidate",oH="attributeManager.updateStart",aH="attributeManager.updateEnd",uH="attribute.updateStart",lH="attribute.allocate",cH="attribute.updateEnd";class fH{constructor(e,{id:n="attribute-manager",stats:i,timeline:a}={}){C(this,"id",void 0),C(this,"gl",void 0),C(this,"attributes",void 0),C(this,"updateTriggers",void 0),C(this,"needsRedraw",void 0),C(this,"userData",void 0),C(this,"stats",void 0),C(this,"attributeTransitionManager",void 0),C(this,"mergeBoundsMemoized",hc(hX)),this.id=n,this.gl=e,this.attributes={},this.updateTriggers={},this.needsRedraw=!0,this.userData={},this.stats=i,this.attributeTransitionManager=new sH(e,{id:"".concat(n,"-transitions"),timeline:a}),Object.seal(this)}finalize(){for(const e in this.attributes)this.attributes[e].delete();this.attributeTransitionManager.finalize()}getNeedsRedraw(e={clearRedrawFlags:!1}){const n=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!e.clearRedrawFlags,n&&this.id}setNeedsRedraw(){this.needsRedraw=!0}add(e){this._add(e)}addInstanced(e){this._add(e,{instanced:1})}remove(e){for(const n of e)this.attributes[n]!==void 0&&(this.attributes[n].delete(),delete this.attributes[n])}invalidate(e,n){const i=this._invalidateTrigger(e,n);jn(gw,this,e,i)}invalidateAll(e){for(const n in this.attributes)this.attributes[n].setNeedsUpdate(n,e);jn(gw,this,"all")}update({data:e,numInstances:n,startIndices:i=null,transitions:a,props:l={},buffers:f={},context:d={}}){let g=!1;jn(oH,this),this.stats&&this.stats.get("Update Attributes").timeStart();for(const v in this.attributes){const T=this.attributes[v],S=T.settings.accessor;T.startIndices=i,T.numInstances=n,l[v]&&Et.removed("props.".concat(v),"data.attributes.".concat(v))(),T.setExternalBuffer(f[v])||T.setBinaryValue(typeof S=="string"?f[S]:void 0,e.startIndices)||typeof S=="string"&&!f[S]&&T.setConstantValue(l[S])||T.needsUpdate()&&(g=!0,this._updateAttribute({attribute:T,numInstances:n,data:e,props:l,context:d})),this.needsRedraw=this.needsRedraw||T.needsRedraw()}g&&jn(aH,this,n),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:n,transitions:a})}updateTransition(){const{attributeTransitionManager:e}=this,n=e.run();return this.needsRedraw=this.needsRedraw||n,n}getAttributes(){return this.attributes}getBounds(e){const n=e.map(i=>{var a;return(a=this.attributes[i])===null||a===void 0?void 0:a.getBounds()});return this.mergeBoundsMemoized(n)}getChangedAttributes(e={clearChangedFlags:!1}){const{attributes:n,attributeTransitionManager:i}=this,a={...i.getAttributes()};for(const l in n){const f=n[l];f.needsRedraw(e)&&!i.hasAttribute(l)&&(a[l]=f)}return a}getShaderAttributes(e,n={}){e||(e=this.getAttributes());const i={};for(const a in e)n[a]||Object.assign(i,e[a].getShaderAttributes());return i}_add(e,n={}){for(const i in e){const a=e[i];this.attributes[i]=this._createAttribute(i,a,n)}this._mapUpdateTriggersToAttributes()}_createAttribute(e,n,i){const a={...n,id:e,size:n.isIndexed&&1||n.size||1,divisor:i.instanced?1:n.divisor||0};return new Tm(this.gl,a)}_mapUpdateTriggersToAttributes(){const e={};for(const n in this.attributes)this.attributes[n].getUpdateTriggers().forEach(a=>{e[a]||(e[a]=[]),e[a].push(n)});this.updateTriggers=e}_invalidateTrigger(e,n){const{attributes:i,updateTriggers:a}=this,l=a[e];return l&&l.forEach(f=>{const d=i[f];d&&d.setNeedsUpdate(d.id,n)}),l}_updateAttribute(e){const{attribute:n,numInstances:i}=e;if(jn(uH,n),n.constant){n.setConstantValue(n.value);return}n.allocate(i)&&jn(lH,n,i),n.updateBuffer(e)&&(this.needsRedraw=!0,jn(cH,n,i))}}class hH extends dc{get value(){return this._value}_onUpdate(){const{time:e,settings:{fromValue:n,toValue:i,duration:a,easing:l}}=this,f=l(e/a);this._value=_f(n,i,f)}}const mw=1e-5;function Aw(t,e,n,i,a){const l=e-t,d=(n-e)*a,g=-l*i;return d+g+l+e}function dH(t,e,n,i,a){if(Array.isArray(n)){const l=[];for(let f=0;f<n.length;f++)l[f]=Aw(t[f],e[f],n[f],i,a);return l}return Aw(t,e,n,i,a)}function yw(t,e){if(Array.isArray(t)){let n=0;for(let i=0;i<t.length;i++){const a=t[i]-e[i];n+=a*a}return Math.sqrt(n)}return Math.abs(t-e)}class pH extends dc{get value(){return this._currValue}_onUpdate(){const{fromValue:e,toValue:n,damping:i,stiffness:a}=this.settings,{_prevValue:l=e,_currValue:f=e}=this;let d=dH(l,f,n,i,a);const g=yw(d,n),v=yw(d,f);g<mw&&v<mw&&(d=n,this.end()),this._prevValue=f,this._currValue=d}}const gH={interpolation:hH,spring:pH};class mH{constructor(e){this.transitions=new Map,this.timeline=e}get active(){return this.transitions.size>0}add(e,n,i,a){const{transitions:l}=this;if(l.has(e)){const g=l.get(e),{value:v=g.settings.fromValue}=g;n=v,this.remove(e)}if(a=sS(a),!a)return;const f=gH[a.type];if(!f){Et.error("unsupported transition type '".concat(a.type,"'"))();return}const d=new f(this.timeline);d.start({...a,fromValue:n,toValue:i}),l.set(e,d)}remove(e){const{transitions:n}=this;n.has(e)&&(n.get(e).cancel(),n.delete(e))}update(){const e={};for(const[n,i]of this.transitions)i.update(),e[n]=i.value,i.inProgress||this.remove(n);return e}clear(){for(const e of this.transitions.keys())this.remove(e)}}function AH(t){const e=t[Yo];for(const n in e){const i=e[n],{validate:a}=i;if(a&&!a(t[n],i))throw new Error("Invalid prop ".concat(n,": ").concat(t[n]))}}function yH(t,e){const n=cS({newProps:t,oldProps:e,propTypes:t[Yo],ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),i=_H(t,e);let a=!1;return i||(a=wH(t,e)),{dataChanged:i,propsChanged:n,updateTriggersChanged:a,extensionsChanged:TH(t,e),transitionsChanged:vH(t,e)}}function vH(t,e){if(!t.transitions)return!1;const n={},i=t[Yo];let a=!1;for(const l in t.transitions){const f=i[l],d=f&&f.type;(d==="number"||d==="color"||d==="array")&&zg(t[l],e[l],f)&&(n[l]=!0,a=!0)}return a?n:!1}function cS({newProps:t,oldProps:e,ignoreProps:n={},propTypes:i={},triggerName:a="props"}){if(e===t)return!1;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return"".concat(a," changed shallowly");for(const l of Object.keys(t))if(!(l in n)){if(!(l in e))return"".concat(a,".").concat(l," added");const f=zg(t[l],e[l],i[l]);if(f)return"".concat(a,".").concat(l," ").concat(f)}for(const l of Object.keys(e))if(!(l in n)){if(!(l in t))return"".concat(a,".").concat(l," dropped");if(!Object.hasOwnProperty.call(t,l)){const f=zg(t[l],e[l],i[l]);if(f)return"".concat(a,".").concat(l," ").concat(f)}}return!1}function zg(t,e,n){let i=n&&n.equal;return i&&!i(t,e,n)||!i&&(i=t&&e&&t.equals,i&&!i.call(t,e))?"changed deeply":!i&&e!==t?"changed shallowly":null}function _H(t,e){if(e===null)return"oldProps is null, initial diff";let n=!1;const{dataComparator:i,_dataDiff:a}=t;return i?i(t.data,e.data)||(n="Data comparator detected a change"):t.data!==e.data&&(n="A new data container was supplied"),n&&a&&(n=a(t.data,e.data)||n),n}function wH(t,e){if(e===null)return{all:!0};if("all"in t.updateTriggers&&vw(t,e,"all"))return{all:!0};const n={};let i=!1;for(const a in t.updateTriggers)a!=="all"&&vw(t,e,a)&&(n[a]=!0,i=!0);return i?n:!1}function TH(t,e){if(e===null)return!0;const n=e.extensions,{extensions:i}=t;if(i===n)return!1;if(!n||!i||i.length!==n.length)return!0;for(let a=0;a<i.length;a++)if(!i[a].equals(n[a]))return!0;return!1}function vw(t,e,n){let i=t.updateTriggers[n];i=i??{};let a=e.updateTriggers[n];return a=a??{},cS({oldProps:a,newProps:i,triggerName:n})}const EH="count(): argument not an object",SH="count(): argument not a container";function xH(t){if(!bH(t))throw new Error(EH);if(typeof t.count=="function")return t.count();if(Number.isFinite(t.size))return t.size;if(Number.isFinite(t.length))return t.length;if(RH(t))return Object.keys(t).length;throw new Error(SH)}function RH(t){return t!==null&&typeof t=="object"&&t.constructor===Object}function bH(t){return t!==null&&typeof t=="object"}function kH(t,e){if(!e)return t;const n={...t,...e};if("defines"in e&&(n.defines={...t.defines,...e.defines}),"modules"in e&&(n.modules=(t.modules||[]).concat(e.modules),e.modules.some(i=>i.name==="project64"))){const i=n.modules.findIndex(a=>a.name==="project32");i>=0&&n.modules.splice(i,1)}if("inject"in e)if(!t.inject)n.inject=e.inject;else{const i={...t.inject};for(const a in e.inject)i[a]=(i[a]||"")+e.inject[a];n.inject=i}return n}const PH={10241:9987,10240:9729,10242:33071,10243:33071},jg={};function MH(t,e,n,i){if(n instanceof fi)return n;n.constructor&&n.constructor.name!=="Object"&&(n={data:n});let a=null;n.compressed&&(a={10241:n.data.length>1?9985:9729});const l=new fi(e,{...n,parameters:{...PH,...a,...i}});return jg[l.id]=t,l}function CH(t,e){!e||!(e instanceof fi)||jg[e.id]===t&&(e.delete(),delete jg[e.id])}const IH={boolean:{validate(t,e){return!0},equal(t,e,n){return!!t==!!e}},number:{validate(t,e){return Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)}},color:{validate(t,e){return e.optional&&!t||Wg(t)&&(t.length===3||t.length===4)},equal(t,e,n){return Oi(t,e,1)}},accessor:{validate(t,e){const n=kf(t);return n==="function"||n===kf(e.value)},equal(t,e,n){return typeof e=="function"?!0:Oi(t,e,1)}},array:{validate(t,e){return e.optional&&!t||Wg(t)},equal(t,e,n){const{compare:i}=n,a=Number.isInteger(i)?i:i?1:0;return i?Oi(t,e,a):t===e}},object:{equal(t,e,n){if(n.ignore)return!0;const{compare:i}=n,a=Number.isInteger(i)?i:i?1:0;return i?Oi(t,e,a):t===e}},function:{validate(t,e){return e.optional&&!t||typeof t=="function"},equal(t,e,n){return!n.compare&&n.ignore!==!1||t===e}},data:{transform:(t,e,n)=>{const{dataTransform:i}=n.props;return i&&t?i(t):t}},image:{transform:(t,e,n)=>{const i=n.context;return!i||!i.gl?null:MH(n.id,i.gl,t,{...e.parameters,...n.props.textureParameters})},release:(t,e,n)=>{CH(n.id,t)}}};function NH(t){const e={},n={},i={};for(const[a,l]of Object.entries(t)){const f=l==null?void 0:l.deprecatedFor;if(f)i[a]=Array.isArray(f)?f:[f];else{const d=FH(a,l);e[a]=d,n[a]=d.value}}return{propTypes:e,defaultProps:n,deprecatedProps:i}}function FH(t,e){switch(kf(e)){case"object":return al(t,e);case"array":return al(t,{type:"array",value:e,compare:!1});case"boolean":return al(t,{type:"boolean",value:e});case"number":return al(t,{type:"number",value:e});case"function":return al(t,{type:"function",value:e,compare:!0});default:return{name:t,type:"unknown",value:e}}}function al(t,e){return"type"in e?{name:t,...IH[e.type],...e}:"value"in e?{name:t,type:kf(e.value),...e}:{name:t,type:"object",value:e}}function Wg(t){return Array.isArray(t)||ArrayBuffer.isView(t)}function kf(t){return Wg(t)?"array":t===null?"null":typeof t}function OH(t,e){let n;for(let l=e.length-1;l>=0;l--){const f=e[l];"extensions"in f&&(n=f.extensions)}const i=Gg(t.constructor,n),a=Object.create(i);a[Rf]=t,a[Ko]={},a[zs]={};for(let l=0;l<e.length;++l){const f=e[l];for(const d in f)a[d]=f[d]}return Object.freeze(a),a}const LH="_mergedDefaultProps";function Gg(t,e){let n=LH;if(e)for(const a of e){const l=a.constructor;l&&(n+=":".concat(l.extensionName||l.name))}const i=fS(t,n);return i||(t[n]=VH(t,e||[]))}function VH(t,e){if(!t.prototype)return null;const i=Object.getPrototypeOf(t),a=Gg(i),l=fS(t,"defaultProps")||{},f=NH(l),d=Object.assign(Object.create(null),a,f.defaultProps),g=Object.assign(Object.create(null),a==null?void 0:a[Yo],f.propTypes),v=Object.assign(Object.create(null),a==null?void 0:a[tp],f.deprecatedProps);for(const T of e){const S=Gg(T.constructor);S&&(Object.assign(d,S),Object.assign(g,S[Yo]),Object.assign(v,S[tp]))}return UH(d,t),DH(d,g),BH(d,v),d[Yo]=g,d[tp]=v,e.length===0&&!Em(t,"_propTypes")&&(t._propTypes=g),d}function UH(t,e){const n=jH(e);Object.defineProperties(t,{id:{writable:!0,value:n}})}function BH(t,e){for(const n in e)Object.defineProperty(t,n,{enumerable:!1,set(i){const a="".concat(this.id,": ").concat(n);for(const l of e[n])Em(this,l)||(this[l]=i);Et.deprecated(a,e[n].join("/"))()}})}function DH(t,e){const n={},i={};for(const a in e){const l=e[a],{name:f,value:d}=l;l.async&&(n[f]=d,i[f]=zH(f))}t[nu]=n,t[Ko]={},Object.defineProperties(t,i)}function zH(t){return{enumerable:!0,set(e){typeof e=="string"||e instanceof Promise||iS(e)?this[Ko][t]=e:this[zs][t]=e},get(){if(this[zs]){if(t in this[zs])return this[zs][t]||this[nu][t];if(t in this[Ko]){const e=this[Rf]&&this[Rf].internalState;if(e&&e.hasAsyncProp(t))return e.getAsyncProp(t)||this[nu][t]}}return this[nu][t]}}}function Em(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function fS(t,e){return Em(t,e)&&t[e]}function jH(t){const e=t.componentName;return e||Et.warn("".concat(t.name,".componentName not specified"))(),e||t.name}let WH=0;class Sm{constructor(...e){C(this,"id",void 0),C(this,"props",void 0),C(this,"count",void 0),this.props=OH(this,e),this.id=this.props.id,this.count=WH++}clone(e){const{props:n}=this,i={};for(const a in n[nu])a in n[zs]?i[a]=n[zs][a]:a in n[Ko]&&(i[a]=n[Ko][a]);return new this.constructor({...n,...i,...e})}}C(Sm,"componentName","Component");C(Sm,"defaultProps",{});const GH=Object.freeze({});class ZH{constructor(e){C(this,"component",void 0),C(this,"onAsyncPropUpdated",void 0),C(this,"asyncProps",void 0),C(this,"oldProps",void 0),C(this,"oldAsyncProps",void 0),this.component=e,this.asyncProps={},this.onAsyncPropUpdated=()=>{},this.oldProps=null,this.oldAsyncProps=null}finalize(){for(const e in this.asyncProps){const n=this.asyncProps[e];n&&n.type&&n.type.release&&n.type.release(n.resolvedValue,n.type,this.component)}this.asyncProps={},this.component=null,this.resetOldProps()}getOldProps(){return this.oldAsyncProps||this.oldProps||GH}resetOldProps(){this.oldAsyncProps=null,this.oldProps=this.component?this.component.props:null}hasAsyncProp(e){return e in this.asyncProps}getAsyncProp(e){const n=this.asyncProps[e];return n&&n.resolvedValue}isAsyncPropLoading(e){if(e){const n=this.asyncProps[e];return!!(n&&n.pendingLoadCount>0&&n.pendingLoadCount!==n.resolvedLoadCount)}for(const n in this.asyncProps)if(this.isAsyncPropLoading(n))return!0;return!1}reloadAsyncProp(e,n){this._watchPromise(e,Promise.resolve(n))}setAsyncProps(e){this.component=e[Rf]||this.component;const n=e[zs]||{},i=e[Ko]||e,a=e[nu]||{};for(const l in n){const f=n[l];this._createAsyncPropData(l,a[l]),this._updateAsyncProp(l,f),n[l]=this.getAsyncProp(l)}for(const l in i){const f=i[l];this._createAsyncPropData(l,a[l]),this._updateAsyncProp(l,f)}}_fetch(e,n){return null}_onResolve(e,n){}_onError(e,n){}_updateAsyncProp(e,n){if(this._didAsyncInputValueChange(e,n)){if(typeof n=="string"&&(n=this._fetch(e,n)),n instanceof Promise){this._watchPromise(e,n);return}if(iS(n)){this._resolveAsyncIterable(e,n);return}this._setPropValue(e,n)}}_freezeAsyncOldProps(){if(!this.oldAsyncProps&&this.oldProps){this.oldAsyncProps=Object.create(this.oldProps);for(const e in this.asyncProps)Object.defineProperty(this.oldAsyncProps,e,{enumerable:!0,value:this.oldProps[e]})}}_didAsyncInputValueChange(e,n){const i=this.asyncProps[e];return n===i.resolvedValue||n===i.lastValue?!1:(i.lastValue=n,!0)}_setPropValue(e,n){this._freezeAsyncOldProps();const i=this.asyncProps[e];i&&(n=this._postProcessValue(i,n),i.resolvedValue=n,i.pendingLoadCount++,i.resolvedLoadCount=i.pendingLoadCount)}_setAsyncPropValue(e,n,i){const a=this.asyncProps[e];a&&i>=a.resolvedLoadCount&&n!==void 0&&(this._freezeAsyncOldProps(),a.resolvedValue=n,a.resolvedLoadCount=i,this.onAsyncPropUpdated(e,n))}_watchPromise(e,n){const i=this.asyncProps[e];if(i){i.pendingLoadCount++;const a=i.pendingLoadCount;n.then(l=>{this.component&&(l=this._postProcessValue(i,l),this._setAsyncPropValue(e,l,a),this._onResolve(e,l))}).catch(l=>{this._onError(e,l)})}}async _resolveAsyncIterable(e,n){if(e!=="data"){this._setPropValue(e,n);return}const i=this.asyncProps[e];if(!i)return;i.pendingLoadCount++;const a=i.pendingLoadCount;let l=[],f=0;for await(const d of n){if(!this.component)return;const{dataTransform:g}=this.component.props;g?l=g(d,l):l=l.concat(d),Object.defineProperty(l,"__diff",{enumerable:!1,value:[{startRow:f,endRow:l.length}]}),f=l.length,this._setAsyncPropValue(e,l,a)}this._onResolve(e,l)}_postProcessValue(e,n){const i=e.type;return i&&this.component&&(i.release&&i.release(e.resolvedValue,i,this.component),i.transform)?i.transform(n,i,this.component):n}_createAsyncPropData(e,n){if(!this.asyncProps[e]){const a=this.component&&this.component.props[Yo];this.asyncProps[e]={type:a&&a[e],lastValue:null,resolvedValue:n,pendingLoadCount:0,resolvedLoadCount:0}}}}class XH extends ZH{constructor({attributeManager:e,layer:n}){super(n),C(this,"attributeManager",void 0),C(this,"needsRedraw",void 0),C(this,"needsUpdate",void 0),C(this,"subLayers",void 0),C(this,"usesPickingColorCache",void 0),C(this,"hasPickingBuffer",void 0),C(this,"changeFlags",void 0),C(this,"viewport",void 0),C(this,"uniformTransitions",void 0),C(this,"propsInTransition",void 0),this.attributeManager=e,this.needsRedraw=!0,this.needsUpdate=!0,this.subLayers=null,this.usesPickingColorCache=!1}get layer(){return this.component}_fetch(e,n){const i=this.layer,a=i==null?void 0:i.props.fetch;return a?a(n,{propName:e,layer:i}):super._fetch(e,n)}_onResolve(e,n){const i=this.layer;if(i){const a=i.props.onDataLoad;e==="data"&&a&&a(n,{propName:e,layer:i})}}_onError(e,n){const i=this.layer;i&&i.raiseError(n,"loading ".concat(e," of ").concat(this.layer))}}const HH="layer.changeFlag",YH="layer.initialize",$H="layer.update",JH="layer.finalize",QH="layer.matched",_w=2**24-1,qH=Object.freeze([]),KH=hc(({oldViewport:t,viewport:e})=>t.equals(e));let ki=new Uint8ClampedArray(0);const eY={data:{type:"data",value:qH,async:!0},dataComparator:{type:"function",value:null,optional:!0},_dataDiff:{type:"function",value:t=>t&&t.__diff,optional:!0},dataTransform:{type:"function",value:null,optional:!0},onDataLoad:{type:"function",value:null,optional:!0},onError:{type:"function",value:null,optional:!0},fetch:{type:"function",value:(t,{propName:e,layer:n,loaders:i,loadOptions:a,signal:l})=>{const{resourceManager:f}=n.context;if(a=a||n.getLoadOptions(),i=i||n.props.loaders,l){var d;a={...a,fetch:{...(d=a)===null||d===void 0?void 0:d.fetch,signal:l}}}let g=f.contains(t);return!g&&!a&&(f.add({resourceId:t,data:yg(t,i),persistent:!1}),g=!0),g?f.subscribe({resourceId:t,onChange:v=>{var T;return(T=n.internalState)===null||T===void 0?void 0:T.reloadAsyncProp(e,v)},consumerId:n.id,requestId:e}):yg(t,i,a)}},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:1},operation:"draw",onHover:{type:"function",value:null,optional:!0},onClick:{type:"function",value:null,optional:!0},onDragStart:{type:"function",value:null,optional:!0},onDrag:{type:"function",value:null,optional:!0},onDragEnd:{type:"function",value:null,optional:!0},coordinateSystem:lt.DEFAULT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{type:"object",value:{},optional:!0,compare:2},loadOptions:{type:"object",value:null,optional:!0,ignore:!0},transitions:null,extensions:[],loaders:{type:"array",value:[],optional:!0,ignore:!0},getPolygonOffset:{type:"function",value:({layerIndex:t})=>[0,-t*100]},highlightedObjectIndex:null,autoHighlight:!1,highlightColor:{type:"accessor",value:[0,0,128,128]}};class sh extends Sm{constructor(...e){super(...e),C(this,"internalState",null),C(this,"lifecycle",Ba.NO_STATE),C(this,"context",void 0),C(this,"state",void 0),C(this,"parent",null)}static get componentName(){return Object.prototype.hasOwnProperty.call(this,"layerName")?this.layerName:""}get root(){let e=this;for(;e.parent;)e=e.parent;return e}toString(){const e=this.constructor.layerName||this.constructor.name;return"".concat(e,"({id: '").concat(this.props.id,"'})")}project(e){_n(this.internalState);const n=this.internalState.viewport||this.context.viewport,i=G4(e,{viewport:n,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),[a,l,f]=j4(i,n.pixelProjectionMatrix);return e.length===2?[a,l]:[a,l,f]}unproject(e){return _n(this.internalState),(this.internalState.viewport||this.context.viewport).unproject(e)}projectPosition(e,n){_n(this.internalState);const i=this.internalState.viewport||this.context.viewport;return yX(e,{viewport:i,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem,...n})}get isComposite(){return!1}setState(e){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,e),this.setNeedsRedraw()}setNeedsRedraw(){this.internalState&&(this.internalState.needsRedraw=!0)}setNeedsUpdate(){this.internalState&&(this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0)}get isLoaded(){return this.internalState?!this.internalState.isAsyncPropLoading():!1}get wrapLongitude(){return this.props.wrapLongitude}isPickable(){return this.props.pickable&&this.props.visible}getModels(){return this.state&&(this.state.models||this.state.model&&[this.state.model])||[]}setModuleParameters(e){for(const n of this.getModels())n.updateModuleSettings(e)}getAttributeManager(){return this.internalState&&this.internalState.attributeManager}getCurrentLayer(){return this.internalState&&this.internalState.layer}getLoadOptions(){return this.props.loadOptions}use64bitPositions(){const{coordinateSystem:e}=this.props;return e===lt.DEFAULT||e===lt.LNGLAT||e===lt.CARTESIAN}onHover(e,n){return this.props.onHover&&this.props.onHover(e,n)||!1}onClick(e,n){return this.props.onClick&&this.props.onClick(e,n)||!1}nullPickingColor(){return[0,0,0]}encodePickingColor(e,n=[]){return n[0]=e+1&255,n[1]=e+1>>8&255,n[2]=e+1>>8>>8&255,n}decodePickingColor(e){_n(e instanceof Uint8Array);const[n,i,a]=e;return n+i*256+a*65536-1}getNumInstances(){return Number.isFinite(this.props.numInstances)?this.props.numInstances:this.state&&this.state.numInstances!==void 0?this.state.numInstances:xH(this.props.data)}getStartIndices(){return this.props.startIndices?this.props.startIndices:this.state&&this.state.startIndices?this.state.startIndices:null}getBounds(){var e;return(e=this.getAttributeManager())===null||e===void 0?void 0:e.getBounds(["positions","instancePositions"])}getShaders(e){for(const n of this.props.extensions)e=kH(e,n.getShaders.call(this,n));return e}shouldUpdateState(e){return e.changeFlags.propsOrDataChanged}updateState(e){const n=this.getAttributeManager(),{dataChanged:i}=e.changeFlags;if(i&&n)if(Array.isArray(i))for(const a of i)n.invalidateAll(a);else n.invalidateAll();if(n){const{props:a}=e,l=this.internalState.hasPickingBuffer,f=Number.isInteger(a.highlightedObjectIndex)||a.pickable||a.extensions.some(d=>d.getNeedsPickingBuffer.call(this,d));if(l!==f){this.internalState.hasPickingBuffer=f;const{pickingColors:d,instancePickingColors:g}=n.attributes,v=d||g;v&&(f&&v.constant&&(v.constant=!1,n.invalidate(v.id)),!v.value&&!f&&(v.constant=!0,v.value=[0,0,0]))}}}finalizeState(e){for(const i of this.getModels())i.delete();const n=this.getAttributeManager();n&&n.finalize(),this.context&&this.context.resourceManager.unsubscribe({consumerId:this.id}),this.internalState&&(this.internalState.uniformTransitions.clear(),this.internalState.finalize())}draw(e){for(const n of this.getModels())n.draw(e)}getPickingInfo({info:e,mode:n,sourceLayer:i}){const{index:a}=e;return a>=0&&Array.isArray(this.props.data)&&(e.object=this.props.data[a]),e}raiseError(e,n){var i,a;if(n&&(e=new Error("".concat(n,": ").concat(e.message),{cause:e})),!((i=(a=this.props).onError)!==null&&i!==void 0&&i.call(a,e))){var l,f;(l=this.context)===null||l===void 0||(f=l.onError)===null||f===void 0||f.call(l,e,this)}}getNeedsRedraw(e={clearRedrawFlags:!1}){return this._getNeedsRedraw(e)}needsUpdate(){return this.internalState?this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams()):!1}hasUniformTransition(){var e;return((e=this.internalState)===null||e===void 0?void 0:e.uniformTransitions.active)||!1}activateViewport(e){if(!this.internalState)return;const n=this.internalState.viewport;this.internalState.viewport=e,(!n||!KH({oldViewport:n,viewport:e}))&&(this.setChangeFlags({viewportChanged:!0}),this.isComposite?this.needsUpdate()&&this.setNeedsUpdate():this._update())}invalidateAttribute(e="all"){const n=this.getAttributeManager();n&&(e==="all"?n.invalidateAll():n.invalidate(e))}updateAttributes(e){for(const n of this.getModels())this._setModelAttributes(n,e)}_updateAttributes(){const e=this.getAttributeManager();if(!e)return;const n=this.props,i=this.getNumInstances(),a=this.getStartIndices();e.update({data:n.data,numInstances:i,startIndices:a,props:n,transitions:n.transitions,buffers:n.data.attributes,context:this});const l=e.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(l)}_updateAttributeTransition(){const e=this.getAttributeManager();e&&e.updateTransition()}_updateUniformTransition(){const{uniformTransitions:e}=this.internalState;if(e.active){const n=e.update(),i=Object.create(this.props);for(const a in n)Object.defineProperty(i,a,{value:n[a]});return i}return this.props}calculateInstancePickingColors(e,{numInstances:n}){if(e.constant)return;const i=Math.floor(ki.length/3);if(this.internalState.usesPickingColorCache=!0,i<n){n>_w&&Et.warn("Layer has too many data objects. Picking might not be able to distinguish all objects.")(),ki=Gl.allocate(ki,n,{size:3,copy:!0,maxCount:Math.max(n,_w)});const a=Math.floor(ki.length/3),l=[];for(let f=i;f<a;f++)this.encodePickingColor(f,l),ki[f*3+0]=l[0],ki[f*3+1]=l[1],ki[f*3+2]=l[2]}e.value=ki.subarray(0,n*3)}_setModelAttributes(e,n){const i=this.getAttributeManager(),a=e.userData.excludeAttributes||{},l=i.getShaderAttributes(n,a);e.setAttributes(l)}disablePickingIndex(e){const n=this.props.data;if(!("attributes"in n)){this._disablePickingIndex(e);return}const{pickingColors:i,instancePickingColors:a}=this.getAttributeManager().attributes,l=i||a,f=l&&n.attributes&&n.attributes[l.id];if(f&&f.value){const d=f.value,g=this.encodePickingColor(e);for(let v=0;v<n.length;v++){const T=l.getVertexOffset(v);d[T]===g[0]&&d[T+1]===g[1]&&d[T+2]===g[2]&&this._disablePickingIndex(v)}}else this._disablePickingIndex(e)}_disablePickingIndex(e){const{pickingColors:n,instancePickingColors:i}=this.getAttributeManager().attributes,a=n||i;if(!a)return;const l=a.getVertexOffset(e),f=a.getVertexOffset(e+1);a.buffer.subData({data:new Uint8Array(f-l),offset:l})}restorePickingColors(){const{pickingColors:e,instancePickingColors:n}=this.getAttributeManager().attributes,i=e||n;i&&(this.internalState.usesPickingColorCache&&i.value.buffer!==ki.buffer&&(i.value=ki.subarray(0,i.value.length)),i.updateSubBuffer({startOffset:0}))}_initialize(){_n(!this.internalState),_n(Number.isFinite(this.props.coordinateSystem)),jn(YH,this);const e=this._getAttributeManager();e&&e.addInstanced({instancePickingColors:{type:5121,size:3,noAlloc:!0,update:this.calculateInstancePickingColors}}),this.internalState=new XH({attributeManager:e,layer:this}),this._clearChangeFlags(),this.state={},Object.defineProperty(this.state,"attributeManager",{get:()=>(Et.deprecated("layer.state.attributeManager","layer.getAttributeManager()")(),e)}),this.internalState.uniformTransitions=new mH(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props),this.initializeState(this.context);for(const n of this.props.extensions)n.initializeState.call(this,this.context,n);this.setChangeFlags({dataChanged:"init",propsChanged:"init",viewportChanged:!0,extensionsChanged:!0}),this._update()}_transferState(e){jn(QH,this,this===e);const{state:n,internalState:i}=e;this!==e&&(this.internalState=i,this.state=n,this.internalState.setAsyncProps(this.props),this._diffProps(this.props,this.internalState.getOldProps()))}_update(){const e=this.needsUpdate();if(jn($H,this,e),!e)return;const n=this.props,i=this.context,a=this.internalState,l=i.viewport,f=this._updateUniformTransition();a.propsInTransition=f,i.viewport=a.viewport||l,this.props=f;try{const d=this._getUpdateParams(),g=this.getModels();if(i.gl)this.updateState(d);else try{this.updateState(d)}catch{}for(const T of this.props.extensions)T.updateState.call(this,d,T);const v=this.getModels()[0]!==g[0];this._postUpdate(d,v)}finally{i.viewport=l,this.props=n,this._clearChangeFlags(),a.needsUpdate=!1,a.resetOldProps()}}_finalize(){jn(JH,this),this.finalizeState(this.context);for(const e of this.props.extensions)e.finalizeState.call(this,this.context,e)}_drawLayer({moduleParameters:e=null,uniforms:n={},parameters:i={}}){this._updateAttributeTransition();const a=this.props,l=this.context;this.props=this.internalState.propsInTransition||a;const f=this.props.opacity;n.opacity=Math.pow(f,1/2.2);try{e&&this.setModuleParameters(e);const{getPolygonOffset:d}=this.props,g=d&&d(n)||[0,0];cs(l.gl,{polygonOffset:g}),ui(l.gl,i,()=>{const v={moduleParameters:e,uniforms:n,parameters:i,context:l};for(const T of this.props.extensions)T.draw.call(this,v,T);this.draw(v)})}finally{this.props=a}}getChangeFlags(){var e;return(e=this.internalState)===null||e===void 0?void 0:e.changeFlags}setChangeFlags(e){if(!this.internalState)return;const{changeFlags:n}=this.internalState;for(const a in e)if(e[a]){let l=!1;switch(a){case"dataChanged":const f=e[a],d=n[a];f&&Array.isArray(d)&&(n.dataChanged=Array.isArray(f)?d.concat(f):f,l=!0);default:n[a]||(n[a]=e[a],l=!0)}l&&jn(HH,this,a,e)}const i=!!(n.dataChanged||n.updateTriggersChanged||n.propsChanged||n.extensionsChanged);n.propsOrDataChanged=i,n.somethingChanged=i||n.viewportChanged||n.stateChanged}_clearChangeFlags(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}_diffProps(e,n){const i=yH(e,n);if(i.updateTriggersChanged)for(const l in i.updateTriggersChanged)i.updateTriggersChanged[l]&&this.invalidateAttribute(l);if(i.transitionsChanged)for(const l in i.transitionsChanged){var a;this.internalState.uniformTransitions.add(l,n[l],e[l],(a=e.transitions)===null||a===void 0?void 0:a[l])}return this.setChangeFlags(i)}validateProps(){AH(this.props)}updateAutoHighlight(e){this.props.autoHighlight&&!Number.isInteger(this.props.highlightedObjectIndex)&&this._updateAutoHighlight(e)}_updateAutoHighlight(e){const n={pickingSelectedColor:e.picked?e.color:null},{highlightColor:i}=this.props;e.picked&&typeof i=="function"&&(n.pickingHighlightColor=i(e)),this.setModuleParameters(n),this.setNeedsRedraw()}_getAttributeManager(){const e=this.context;return new fH(e.gl,{id:this.props.id,stats:e.stats,timeline:e.timeline})}_postUpdate(e,n){const{props:i,oldProps:a}=e;this.setNeedsRedraw(),this._updateAttributes();const{model:l}=this.state;l==null||l.setInstanceCount(this.getNumInstances());const{autoHighlight:f,highlightedObjectIndex:d,highlightColor:g}=i;if(n||a.autoHighlight!==f||a.highlightedObjectIndex!==d||a.highlightColor!==g){const v={};f||(v.pickingSelectedColor=null),Array.isArray(g)&&(v.pickingHighlightColor=g),(n||d!==a.highlightedObjectIndex)&&(v.pickingSelectedColor=Number.isFinite(d)&&d>=0?this.encodePickingColor(d):null),this.setModuleParameters(v)}}_getUpdateParams(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}_getNeedsRedraw(e){if(!this.internalState)return!1;let n=!1;n=n||this.internalState.needsRedraw&&this.id;const i=this.getAttributeManager(),a=i?i.getNeedsRedraw(e):!1;if(n=n||a,n)for(const l of this.props.extensions)l.onNeedsRedraw.call(this,l);return this.internalState.needsRedraw=this.internalState.needsRedraw&&!e.clearRedrawFlags,n}_onAsyncPropUpdated(){this._diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}}C(sh,"defaultProps",eY);C(sh,"layerName","Layer");const sp=Math.PI/180;function tY({height:t,focalDistance:e,orbitAxis:n,rotationX:i,rotationOrbit:a,zoom:l}){const f=n==="Z"?[0,0,1]:[0,1,0],d=n==="Z"?[0,-e,0]:[0,0,e],g=new hi().lookAt({eye:d,up:f});g.rotateX(i*sp),n==="Z"?g.rotateZ(a*sp):g.rotateY(a*sp);const v=Math.pow(2,l)/t;return g.scale(v),g}class nY extends sa{constructor(e){const{height:n,projectionMatrix:i,fovy:a=50,orbitAxis:l="Z",target:f=[0,0,0],rotationX:d=0,rotationOrbit:g=0,zoom:v=0}=e,T=i?i[5]/2:vm(a);super({...e,longitude:void 0,viewMatrix:tY({height:n||1,focalDistance:T,orbitAxis:l,rotationX:d,rotationOrbit:g,zoom:v}),fovy:a,focalDistance:T,position:f,zoom:v}),C(this,"projectedCenter",void 0),this.projectedCenter=this.project(this.center)}unproject(e,{topLeft:n=!0}={}){const[i,a,l=this.projectedCenter[2]]=e,f=n?a:this.height-a,[d,g,v]=th([i,f,l],this.pixelUnprojectionMatrix);return[d,g,v]}panByPosition(e,n){const i=this.project(e),a=[this.width/2+i[0]-n[0],this.height/2+i[1]-n[1],this.projectedCenter[2]];return{target:this.unproject(a)}}}class rY extends $4{constructor(e){const{width:n,height:i,rotationX:a=0,rotationOrbit:l=0,target:f=[0,0,0],zoom:d=0,minRotationX:g=-90,maxRotationX:v=90,minZoom:T=-1/0,maxZoom:S=1/0,startPanPosition:x,startRotatePos:M,startRotationX:B,startRotationOrbit:W,startZoomPosition:N,startZoom:F}=e;super({width:n,height:i,rotationX:a,rotationOrbit:l,target:f,zoom:d,minRotationX:g,maxRotationX:v,minZoom:T,maxZoom:S},{startPanPosition:x,startRotatePos:M,startRotationX:B,startRotationOrbit:W,startZoomPosition:N,startZoom:F}),C(this,"makeViewport",void 0),this.makeViewport=e.makeViewport}panStart({pos:e}){return this._getUpdatedState({startPanPosition:this._unproject(e)})}pan({pos:e,startPosition:n}){const i=this.getState().startPanPosition||n;if(!i)return this;const l=this.makeViewport(this.getViewportProps()).panByPosition(i,e);return this._getUpdatedState(l)}panEnd(){return this._getUpdatedState({startPanPosition:null})}rotateStart({pos:e}){return this._getUpdatedState({startRotatePos:e,startRotationX:this.getViewportProps().rotationX,startRotationOrbit:this.getViewportProps().rotationOrbit})}rotate({pos:e,deltaAngleX:n=0,deltaAngleY:i=0}){const{startRotatePos:a,startRotationX:l,startRotationOrbit:f}=this.getState(),{width:d,height:g}=this.getViewportProps();if(!a||l===void 0||f===void 0)return this;let v;if(e){let T=(e[0]-a[0])/d;const S=(e[1]-a[1])/g;(l<-90||l>90)&&(T*=-1),v={rotationX:l+S*180,rotationOrbit:f+T*180}}else v={rotationX:l+i,rotationOrbit:f+n};return this._getUpdatedState(v)}rotateEnd(){return this._getUpdatedState({startRotationX:null,startRotationOrbit:null})}shortestPathFrom(e){const n=e.getViewportProps(),i={...this.getViewportProps()},{rotationOrbit:a}=i;return Math.abs(a-n.rotationOrbit)>180&&(i.rotationOrbit=a<0?a+360:a-360),i}zoomStart({pos:e}){return this._getUpdatedState({startZoomPosition:this._unproject(e),startZoom:this.getViewportProps().zoom})}zoom({pos:e,startPos:n,scale:i}){let{startZoom:a,startZoomPosition:l}=this.getState();if(l||(a=this.getViewportProps().zoom,l=this._unproject(n)||this._unproject(e)),!l)return this;const f=this._calculateNewZoom({scale:i,startZoom:a}),d=this.makeViewport({...this.getViewportProps(),zoom:f});return this._getUpdatedState({zoom:f,...d.panByPosition(l,e)})}zoomEnd(){return this._getUpdatedState({startZoomPosition:null,startZoom:null})}zoomIn(e=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:e})})}zoomOut(e=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:1/e})})}moveLeft(e=50){return this._panFromCenter([-e,0])}moveRight(e=50){return this._panFromCenter([e,0])}moveUp(e=50){return this._panFromCenter([0,-e])}moveDown(e=50){return this._panFromCenter([0,e])}rotateLeft(e=15){return this._getUpdatedState({rotationOrbit:this.getViewportProps().rotationOrbit-e})}rotateRight(e=15){return this._getUpdatedState({rotationOrbit:this.getViewportProps().rotationOrbit+e})}rotateUp(e=10){return this._getUpdatedState({rotationX:this.getViewportProps().rotationX-e})}rotateDown(e=10){return this._getUpdatedState({rotationX:this.getViewportProps().rotationX+e})}_unproject(e){const n=this.makeViewport(this.getViewportProps());return e&&n.unproject(e)}_calculateNewZoom({scale:e,startZoom:n}){const{maxZoom:i,minZoom:a}=this.getViewportProps();n===void 0&&(n=this.getViewportProps().zoom);const l=n+Math.log2(e);return _r(l,a,i)}_panFromCenter(e){const{width:n,height:i,target:a}=this.getViewportProps();return this.pan({startPosition:a,pos:[n/2+e[0],i/2+e[1]]})}_getUpdatedState(e){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...e})}applyConstraints(e){const{maxZoom:n,minZoom:i,zoom:a,maxRotationX:l,minRotationX:f,rotationOrbit:d}=e;return e.zoom=Array.isArray(a)?[_r(a[0],i,n),_r(a[1],i,n)]:_r(a,i,n),e.rotationX=_r(e.rotationX,f,l),(d<-180||d>180)&&(e.rotationOrbit=uX(d+180,360)-180),e}}class iY extends Y4{constructor(...e){super(...e),C(this,"ControllerState",rY),C(this,"transition",{transitionDuration:300,transitionInterpolator:new nh({transitionProps:{compare:["target","zoom","rotationX","rotationOrbit"],required:["target","zoom"]}})})}}class hS extends ea{constructor(e={}){super(e),this.props.orbitAxis=e.orbitAxis||"Z"}get ViewportType(){return nY}get ControllerType(){return iY}}C(hS,"displayName","OrbitView");const sY=typeof window<"u"?it.useLayoutEffect:it.useEffect,oY=sY;function Pf(t,e){for(;t;){if(t===e)return!0;t=Object.getPrototypeOf(t)}return!1}const aY={position:"absolute",zIndex:-1};function dS(t,e){if(typeof t=="function")return t(e);if(Array.isArray(t))return t.map(n=>dS(n,e));if(oh(t)){if(uY(t))return e.style=aY,it.cloneElement(t,e);if(lY(t))return it.cloneElement(t,e)}return t}function oh(t){return t&&typeof t=="object"&&"type"in t||!1}function uY(t){var e;return(e=t.props)===null||e===void 0?void 0:e.mapStyle}function lY(t){const e=t.type;return e&&e.deckGLViewProps}function Zg(t){if(typeof t=="function")return it.createElement(ea,{},t);if(Array.isArray(t))return t.map(Zg);if(oh(t)){if(t.type===it.Fragment)return Zg(t.props.children);if(Pf(t.type,ea))return t}return t}function cY({children:t,layers:e=[],views:n=null}){const i=[],a=[],l={};return it.Children.forEach(Zg(t),f=>{if(oh(f)){const d=f.type;if(Pf(d,sh)){const g=fY(d,f.props);a.push(g)}else i.push(f);if(Pf(d,ea)&&d!==ea&&f.props.id){const g=new d(f.props);l[g.id]=g}}else f&&i.push(f)}),Object.keys(l).length>0&&(Array.isArray(n)?n.forEach(f=>{l[f.id]=f}):n&&(l[n.id]=n),n=Object.values(l)),e=a.length>0?[...a,...e]:e,{layers:e,children:i,views:n}}function fY(t,e){const n={},i=t.defaultProps||{};for(const a in e)i[a]!==e[a]&&(n[a]=e[a]);return new t(n)}function hY({children:t,deck:e,ContextProvider:n}){const{viewManager:i}=e||{};if(!i||!i.views.length)return[];const a={},l=i.views[0].id;for(const f of t){let d=l,g=f;oh(f)&&Pf(f.type,ea)&&(d=f.props.id||l,g=f.props.children);const v=i.getViewport(d),T=i.getViewState(d);if(v){T.padding=v.padding;const{x:S,y:x,width:M,height:B}=v;g=dS(g,{x:S,y:x,width:M,height:B,viewport:v,viewState:T}),a[d]||(a[d]={viewport:v,children:[]}),a[d].children.push(g)}}return Object.keys(a).map(f=>{const{viewport:d,children:g}=a[f],{x:v,y:T,width:S,height:x}=d,M={position:"absolute",left:v,top:T,width:S,height:x},B="view-".concat(f),W=it.createElement("div",{key:B,id:B,style:M},...g);if(n){const N={viewport:d,container:e.canvas.offsetParent,eventManager:e.eventManager,onViewStateChange:F=>{F.viewId=f,e._onViewStateChange(F)}};return it.createElement(n,{key:B,value:N},W)}return W})}const dY={mixBlendMode:null};function pY({width:t,height:e,style:n}){const i={position:"absolute",zIndex:0,left:0,top:0,width:t,height:e},a={left:0,top:0};if(n)for(const l in n)l in dY?a[l]=n[l]:i[l]=n[l];return{containerStyle:i,canvasStyle:a}}function gY(t){return{get deck(){return t.deck},pickObject:e=>t.deck.pickObject(e),pickMultipleObjects:e=>t.deck.pickMultipleObjects(e),pickObjects:e=>t.deck.pickObjects(e)}}function pS(t){t.redrawReason&&(t.deck._drawLayers(t.redrawReason),t.redrawReason=null)}function mY(t,e,n){const i=new e({...n,_customRender:a=>{t.redrawReason=a;const l=i.getViewports();t.lastRenderedViewports!==l?t.forceUpdate():pS(t)}});return i}const gS=it.forwardRef((t,e)=>{const[n,i]=it.useState(0),l=it.useRef({control:null,version:n,forceUpdate:()=>i(Q=>Q+1)}).current,f=it.useRef(null),d=it.useRef(null),g=it.useMemo(()=>cY(t),[t.layers,t.views,t.children]);let v=!0;const T=Q=>{var K;return v&&t.viewState?(l.viewStateUpdateRequested=Q,null):(l.viewStateUpdateRequested=null,(K=t.onViewStateChange)===null||K===void 0?void 0:K.call(t,Q))},S=Q=>{if(v)l.interactionStateUpdateRequested=Q;else{var K;l.interactionStateUpdateRequested=null,(K=t.onInteractionStateChange)===null||K===void 0||K.call(t,Q)}},x=it.useMemo(()=>{const Q={...t,style:null,width:"100%",height:"100%",parent:f.current,canvas:d.current,layers:g.layers,views:g.views,onViewStateChange:T,onInteractionStateChange:S};return delete Q._customRender,l.deck&&l.deck.setProps(Q),Q},[t]);it.useEffect(()=>{const Q=t.Deck||ih;return l.deck=mY(l,Q,{...x,parent:f.current,canvas:d.current}),()=>{var K;return(K=l.deck)===null||K===void 0?void 0:K.finalize()}},[]),oY(()=>{pS(l);const{viewStateUpdateRequested:Q,interactionStateUpdateRequested:K}=l;Q&&T(Q),K&&S(K)}),it.useImperativeHandle(e,()=>gY(l),[]);const M=l.deck&&l.deck.isInitialized?l.deck.getViewports():void 0,{ContextProvider:B,width:W,height:N,id:F,style:V}=t,{containerStyle:j,canvasStyle:X}=it.useMemo(()=>pY({width:W,height:N,style:V}),[W,N,V]);if(!l.viewStateUpdateRequested&&l.lastRenderedViewports===M||l.version!==n){l.lastRenderedViewports=M,l.version=n;const Q=hY({children:g.children,deck:l.deck,ContextProvider:B}),K=it.createElement("canvas",{key:"canvas",id:F||"deckgl-overlay",ref:d,style:X});l.control=it.createElement("div",{id:"".concat(F||"deckgl","-wrapper"),ref:f,style:j},[K,Q])}return v=!1,l.control});gS.defaultProps=ih.defaultProps;const AY=gS;function ww(t,e){if(!t)throw new Error(e||"loader assertion failed.")}const mS=!!(typeof process!="object"||String(process)!=="[object process]"||process.browser),Tw=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);Tw&&parseFloat(Tw[1]);function yY(t,e){return AS(t||{},e)}function AS(t,e){const n={...t};for(const[i,a]of Object.entries(e))a&&typeof a=="object"&&!Array.isArray(a)?n[i]=AS(n[i]||{},e[i]):n[i]=e[i];return n}const yS="latest";function vY(){var t;return(t=globalThis._loadersgl_)!==null&&t!==void 0&&t.version||(globalThis._loadersgl_=globalThis._loadersgl_||{},typeof __VERSION__>"u"?(console.warn("loaders.gl: The __VERSION__ variable is not injected using babel plugin. Latest unstable workers would be fetched from the CDN."),globalThis._loadersgl_.version=yS):globalThis._loadersgl_.version=__VERSION__),globalThis._loadersgl_.version}const vS=vY();function hs(t,e){if(!t)throw new Error(e||"loaders.gl assertion failed.")}const Hr=typeof process!="object"||String(process)!=="[object process]"||process.browser,xm=typeof importScripts=="function",_Y=typeof window<"u"&&typeof window.orientation<"u",Ew=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);Ew&&parseFloat(Ew[1]);class wY{constructor(e,n){this.name=void 0,this.workerThread=void 0,this.isRunning=!0,this.result=void 0,this._resolve=()=>{},this._reject=()=>{},this.name=e,this.workerThread=n,this.result=new Promise((i,a)=>{this._resolve=i,this._reject=a})}postMessage(e,n){this.workerThread.postMessage({source:"loaders.gl",type:e,payload:n})}done(e){hs(this.isRunning),this.isRunning=!1,this._resolve(e)}error(e){hs(this.isRunning),this.isRunning=!1,this._reject(e)}}let op=class{terminate(){}};const ap=new Map;function TY(t){hs(t.source&&!t.url||!t.source&&t.url);let e=ap.get(t.source||t.url);return e||(t.url&&(e=EY(t.url),ap.set(t.url,e)),t.source&&(e=_S(t.source),ap.set(t.source,e))),hs(e),e}function EY(t){if(!t.startsWith("http"))return t;const e=SY(t);return _S(e)}function _S(t){const e=new Blob([t],{type:"application/javascript"});return URL.createObjectURL(e)}function SY(t){return`try {
  importScripts('${t}');
} catch (error) {
  console.error(error);
  throw error;
}`}function wS(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=arguments.length>2?arguments[2]:void 0;const i=n||new Set;if(t){if(Sw(t))i.add(t);else if(Sw(t.buffer))i.add(t.buffer);else if(!ArrayBuffer.isView(t)){if(e&&typeof t=="object")for(const a in t)wS(t[a],e,i)}}return n===void 0?Array.from(i):[]}function Sw(t){return t?t instanceof ArrayBuffer||typeof MessagePort<"u"&&t instanceof MessagePort||typeof ImageBitmap<"u"&&t instanceof ImageBitmap||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas:!1}const up=()=>{};class Xg{static isSupported(){return typeof Worker<"u"&&Hr||typeof op<"u"&&!Hr}constructor(e){this.name=void 0,this.source=void 0,this.url=void 0,this.terminated=!1,this.worker=void 0,this.onMessage=void 0,this.onError=void 0,this._loadableURL="";const{name:n,source:i,url:a}=e;hs(i||a),this.name=n,this.source=i,this.url=a,this.onMessage=up,this.onError=l=>console.log(l),this.worker=Hr?this._createBrowserWorker():this._createNodeWorker()}destroy(){this.onMessage=up,this.onError=up,this.worker.terminate(),this.terminated=!0}get isRunning(){return!!this.onMessage}postMessage(e,n){n=n||wS(e),this.worker.postMessage(e,n)}_getErrorFromErrorEvent(e){let n="Failed to load ";return n+=`worker ${this.name} from ${this.url}. `,e.message&&(n+=`${e.message} in `),e.lineno&&(n+=`:${e.lineno}:${e.colno}`),new Error(n)}_createBrowserWorker(){this._loadableURL=TY({source:this.source,url:this.url});const e=new Worker(this._loadableURL,{name:this.name});return e.onmessage=n=>{n.data?this.onMessage(n.data):this.onError(new Error("No data received"))},e.onerror=n=>{this.onError(this._getErrorFromErrorEvent(n)),this.terminated=!0},e.onmessageerror=n=>console.error(n),e}_createNodeWorker(){let e;if(this.url){const i=this.url.includes(":/")||this.url.startsWith("/")?this.url:`./${this.url}`;e=new op(i,{eval:!1})}else if(this.source)e=new op(this.source,{eval:!0});else throw new Error("no worker");return e.on("message",n=>{this.onMessage(n)}),e.on("error",n=>{this.onError(n)}),e.on("exit",n=>{}),e}}class xY{static isSupported(){return Xg.isSupported()}constructor(e){this.name="unnamed",this.source=void 0,this.url=void 0,this.maxConcurrency=1,this.maxMobileConcurrency=1,this.onDebug=()=>{},this.reuseWorkers=!0,this.props={},this.jobQueue=[],this.idleQueue=[],this.count=0,this.isDestroyed=!1,this.source=e.source,this.url=e.url,this.setProps(e)}destroy(){this.idleQueue.forEach(e=>e.destroy()),this.isDestroyed=!0}setProps(e){this.props={...this.props,...e},e.name!==void 0&&(this.name=e.name),e.maxConcurrency!==void 0&&(this.maxConcurrency=e.maxConcurrency),e.maxMobileConcurrency!==void 0&&(this.maxMobileConcurrency=e.maxMobileConcurrency),e.reuseWorkers!==void 0&&(this.reuseWorkers=e.reuseWorkers),e.onDebug!==void 0&&(this.onDebug=e.onDebug)}async startJob(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:(l,f,d)=>l.done(d),i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:(l,f)=>l.error(f);const a=new Promise(l=>(this.jobQueue.push({name:e,onMessage:n,onError:i,onStart:l}),this));return this._startQueuedJob(),await a}async _startQueuedJob(){if(!this.jobQueue.length)return;const e=this._getAvailableWorker();if(!e)return;const n=this.jobQueue.shift();if(n){this.onDebug({message:"Starting job",name:n.name,workerThread:e,backlog:this.jobQueue.length});const i=new wY(n.name,e);e.onMessage=a=>n.onMessage(i,a.type,a.payload),e.onError=a=>n.onError(i,a),n.onStart(i);try{await i.result}catch(a){console.error(`Worker exception: ${a}`)}finally{this.returnWorkerToQueue(e)}}}returnWorkerToQueue(e){!Hr||this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(e.destroy(),this.count--):this.idleQueue.push(e),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const e=`${this.name.toLowerCase()} (#${this.count} of ${this.maxConcurrency})`;return new Xg({name:e,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return _Y?this.maxMobileConcurrency:this.maxConcurrency}}const RY={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:()=>{}};class ss{static isSupported(){return Xg.isSupported()}static getWorkerFarm(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return ss._workerFarm=ss._workerFarm||new ss({}),ss._workerFarm.setProps(e),ss._workerFarm}constructor(e){this.props=void 0,this.workerPools=new Map,this.props={...RY},this.setProps(e),this.workerPools=new Map}destroy(){for(const e of this.workerPools.values())e.destroy();this.workerPools=new Map}setProps(e){this.props={...this.props,...e};for(const n of this.workerPools.values())n.setProps(this._getWorkerPoolProps())}getWorkerPool(e){const{name:n,source:i,url:a}=e;let l=this.workerPools.get(n);return l||(l=new xY({name:n,source:i,url:a}),l.setProps(this._getWorkerPoolProps()),this.workerPools.set(n,l)),l}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}}ss._workerFarm=void 0;function bY(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=e[t.id]||{},i=Hr?`${t.id}-worker.js`:`${t.id}-worker-node.js`;let a=n.workerUrl;if(!a&&t.id==="compression"&&(a=e.workerUrl),e._workerType==="test"&&(Hr?a=`modules/${t.module}/dist/${i}`:a=`modules/${t.module}/src/workers/${t.id}-worker-node.ts`),!a){let l=t.version;l==="latest"&&(l=yS);const f=l?`@${l}`:"";a=`https://unpkg.com/@loaders.gl/${t.module}${f}/dist/${i}`}return hs(a),a}function kY(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:vS;hs(t,"no worker provided");const n=t.version;return!(!e||!n)}const lp={};async function cp(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;return e&&(t=PY(t,e,n,i)),lp[t]=lp[t]||MY(t),await lp[t]}function PY(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;if(!n.useLocalLibraries&&t.startsWith("http"))return t;i=i||t;const a=n.modules||{};return a[i]?a[i]:Hr?n.CDN?(hs(n.CDN.startsWith("http")),`${n.CDN}/${e}@${vS}/dist/libs/${i}`):xm?`../src/libs/${i}`:`modules/${e}/src/libs/${i}`:`modules/${e}/dist/libs/${i}`}async function MY(t){if(t.endsWith("wasm"))return await IY(t);if(!Hr)try{return wU&&void 0}catch(n){return console.error(n),null}if(xm)return importScripts(t);const e=await NY(t);return CY(e,t)}function CY(t,e){if(!Hr)return;if(xm)return eval.call(globalThis,t),null;const n=document.createElement("script");n.id=e;try{n.appendChild(document.createTextNode(t))}catch{n.text=t}return document.body.appendChild(n),null}async function IY(t){return await(await fetch(t)).arrayBuffer()}async function NY(t){return await(await fetch(t)).text()}function FY(t,e){return!ss.isSupported()||!Hr&&!(e!=null&&e._nodeWorkers)?!1:t.worker&&(e==null?void 0:e.worker)}async function OY(t,e,n,i,a){const l=t.id,f=bY(t,n),g=ss.getWorkerFarm(n).getWorkerPool({name:l,url:f});n=JSON.parse(JSON.stringify(n)),i=JSON.parse(JSON.stringify(i||{}));const v=await g.startJob("process-on-worker",LY.bind(null,a));return v.postMessage("process",{input:e,options:n,context:i}),await(await v.result).result}async function LY(t,e,n,i){switch(n){case"done":e.done(i);break;case"error":e.error(new Error(i.error));break;case"process":const{id:a,input:l,options:f}=i;try{const d=await t(l,f);e.postMessage("done",{id:a,result:d})}catch(d){const g=d instanceof Error?d.message:"unknown error";e.postMessage("error",{id:a,error:g})}break;default:console.warn(`parse-with-worker unknown message ${n}`)}}function VY(t,e,n){if(n=n||t.byteLength,t.byteLength<n||e.byteLength<n)return!1;const i=new Uint8Array(t),a=new Uint8Array(e);for(let l=0;l<i.length;++l)if(i[l]!==a[l])return!1;return!0}function UY(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];const i=e.map(d=>d instanceof ArrayBuffer?new Uint8Array(d):d),a=i.reduce((d,g)=>d+g.byteLength,0),l=new Uint8Array(a);let f=0;for(const d of i)l.set(d,f),f+=d.byteLength;return l.buffer}function BY(t){try{let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return async function*(){const n=new TextDecoder(void 0,e);for await(const i of t)yield typeof i=="string"?i:n.decode(i,{stream:!0})}()}catch(e){return Promise.reject(e)}}async function*DY(t){let e="";for await(const n of t){e+=n;let i;for(;(i=e.indexOf(`
`))>=0;){const a=e.slice(0,i+1);e=e.slice(i+1),yield a}}e.length>0&&(yield e)}async function zY(t,e){for(;;){const{done:n,value:i}=await t.next();if(n){t.return();return}if(e(i))return}}async function jY(t){const e=[];for await(const n of t)e.push(n);return UY(...e)}let WY="";const xw={};function GY(t){for(const e in xw)if(t.startsWith(e)){const n=xw[e];t=t.replace(e,n)}return!t.startsWith("http://")&&!t.startsWith("https://")&&(t=`${WY}${t}`),t}function ZY(t){return t&&typeof t=="object"&&t.isBuffer}function TS(t){if(ZY(t))return t;if(t instanceof ArrayBuffer)return t;if(ArrayBuffer.isView(t))return t.byteOffset===0&&t.byteLength===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength);if(typeof t=="string"){const e=t;return new TextEncoder().encode(e).buffer}if(t&&typeof t=="object"&&t._toArrayBuffer)return t._toArrayBuffer();throw new Error("toArrayBuffer")}function ES(t){const e=t?t.lastIndexOf("/"):-1;return e>=0?t.substr(e+1):""}function XY(t){const e=t?t.lastIndexOf("/"):-1;return e>=0?t.substr(0,e):""}const HY=t=>typeof t=="boolean",bl=t=>typeof t=="function",gc=t=>t!==null&&typeof t=="object",Rw=t=>gc(t)&&t.constructor==={}.constructor,YY=t=>!!t&&typeof t[Symbol.iterator]=="function",$Y=t=>t&&typeof t[Symbol.asyncIterator]=="function",oa=t=>typeof Response<"u"&&t instanceof Response||t&&t.arrayBuffer&&t.text&&t.json,aa=t=>typeof Blob<"u"&&t instanceof Blob,JY=t=>t&&typeof t=="object"&&t.isBuffer,QY=t=>typeof ReadableStream<"u"&&t instanceof ReadableStream||gc(t)&&bl(t.tee)&&bl(t.cancel)&&bl(t.getReader),qY=t=>gc(t)&&bl(t.read)&&bl(t.pipe)&&HY(t.readable),SS=t=>QY(t)||qY(t),KY=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,e$=/^([-\w.]+\/[-\w.+]+)/;function t$(t){const e=e$.exec(t);return e?e[1]:t}function bw(t){const e=KY.exec(t);return e?e[1]:""}const xS=/\?.*/;function n$(t){const e=t.match(xS);return e&&e[0]}function Rm(t){return t.replace(xS,"")}function ah(t){return oa(t)?t.url:aa(t)?t.name||"":typeof t=="string"?t:""}function bm(t){if(oa(t)){const e=t,n=e.headers.get("content-type")||"",i=Rm(e.url);return t$(n)||bw(i)}return aa(t)?t.type||"":typeof t=="string"?bw(t):""}function r$(t){return oa(t)?t.headers["content-length"]||-1:aa(t)?t.size:typeof t=="string"?t.length:t instanceof ArrayBuffer||ArrayBuffer.isView(t)?t.byteLength:-1}async function RS(t){if(oa(t))return t;const e={},n=r$(t);n>=0&&(e["content-length"]=String(n));const i=ah(t),a=bm(t);a&&(e["content-type"]=a);const l=await o$(t);l&&(e["x-first-bytes"]=l),typeof t=="string"&&(t=new TextEncoder().encode(t));const f=new Response(t,{headers:e});return Object.defineProperty(f,"url",{value:i}),f}async function i$(t){if(!t.ok){const e=await s$(t);throw new Error(e)}}async function s$(t){let e=`Failed to fetch resource ${t.url} (${t.status}): `;try{const n=t.headers.get("Content-Type");let i=t.statusText;n!=null&&n.includes("application/json")&&(i+=` ${await t.text()}`),e+=i,e=e.length>60?`${e.slice(0,60)}...`:e}catch{}return e}async function o$(t){if(typeof t=="string")return`data:,${t.slice(0,5)}`;if(t instanceof Blob){const n=t.slice(0,5);return await new Promise(i=>{const a=new FileReader;a.onload=l=>{var f;return i(l==null||(f=l.target)===null||f===void 0?void 0:f.result)},a.readAsDataURL(n)})}if(t instanceof ArrayBuffer){const n=t.slice(0,5);return`data:base64,${a$(n)}`}return null}function a$(t){let e="";const n=new Uint8Array(t);for(let i=0;i<n.byteLength;i++)e+=String.fromCharCode(n[i]);return btoa(e)}function u$(t){return!l$(t)&&!c$(t)}function l$(t){return t.startsWith("http:")||t.startsWith("https:")}function c$(t){return t.startsWith("data:")}async function kw(t,e){if(typeof t=="string"){const a=GY(t);if(u$(a)){var n;if((n=globalThis.loaders)!==null&&n!==void 0&&n.fetchNode){var i;return(i=globalThis.loaders)===null||i===void 0?void 0:i.fetchNode(a,e)}}return await fetch(a,e)}return await RS(t)}function f$(t){if(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&process.versions.electron)return!0;const e=typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent,n=t||e;return!!(n&&n.indexOf("Electron")>=0)}function mc(){return!(typeof process=="object"&&String(process)==="[object process]"&&!process.browser)||f$()}const p0=globalThis.window||globalThis.self||globalThis.global,ul=globalThis.process||{},bS=typeof __VERSION__<"u"?__VERSION__:"untranspiled source";mc();function h$(t){try{const e=window[t],n="__storage_test__";return e.setItem(n,n),e.removeItem(n),e}catch{return null}}class d${constructor(e,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"sessionStorage";this.storage=void 0,this.id=void 0,this.config=void 0,this.storage=h$(i),this.id=e,this.config=n,this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(e){if(Object.assign(this.config,e),this.storage){const n=JSON.stringify(this.config);this.storage.setItem(this.id,n)}}_loadConfiguration(){let e={};if(this.storage){const n=this.storage.getItem(this.id);e=n?JSON.parse(n):{}}return Object.assign(this.config,e),this}}function p$(t){let e;return t<10?e="".concat(t.toFixed(2),"ms"):t<100?e="".concat(t.toFixed(1),"ms"):t<1e3?e="".concat(t.toFixed(0),"ms"):e="".concat((t/1e3).toFixed(2),"s"),e}function g$(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:8;const n=Math.max(e-t.length,0);return"".concat(" ".repeat(n)).concat(t)}function fp(t,e,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:600;const a=t.src.replace(/\(/g,"%28").replace(/\)/g,"%29");t.width>i&&(n=Math.min(n,i/t.width));const l=t.width*n,f=t.height*n,d=["font-size:1px;","padding:".concat(Math.floor(f/2),"px ").concat(Math.floor(l/2),"px;"),"line-height:".concat(f,"px;"),"background:url(".concat(a,");"),"background-size:".concat(l,"px ").concat(f,"px;"),"color:transparent;"].join("");return["".concat(e," %c+"),d]}let Mf;(function(t){t[t.BLACK=30]="BLACK",t[t.RED=31]="RED",t[t.GREEN=32]="GREEN",t[t.YELLOW=33]="YELLOW",t[t.BLUE=34]="BLUE",t[t.MAGENTA=35]="MAGENTA",t[t.CYAN=36]="CYAN",t[t.WHITE=37]="WHITE",t[t.BRIGHT_BLACK=90]="BRIGHT_BLACK",t[t.BRIGHT_RED=91]="BRIGHT_RED",t[t.BRIGHT_GREEN=92]="BRIGHT_GREEN",t[t.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",t[t.BRIGHT_BLUE=94]="BRIGHT_BLUE",t[t.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",t[t.BRIGHT_CYAN=96]="BRIGHT_CYAN",t[t.BRIGHT_WHITE=97]="BRIGHT_WHITE"})(Mf||(Mf={}));const m$=10;function Pw(t){return typeof t!="string"?t:(t=t.toUpperCase(),Mf[t]||Mf.WHITE)}function A$(t,e,n){if(!mc&&typeof t=="string"){if(e){const i=Pw(e);t="\x1B[".concat(i,"m").concat(t,"\x1B[39m")}if(n){const i=Pw(n);t="\x1B[".concat(i+m$,"m").concat(t,"\x1B[49m")}}return t}function y$(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:["constructor"];const n=Object.getPrototypeOf(t),i=Object.getOwnPropertyNames(n),a=t;for(const l of i){const f=a[l];typeof f=="function"&&(e.find(d=>l===d)||(a[l]=f.bind(t)))}}function Cf(t,e){if(!t)throw new Error(e||"Assertion failed")}function Fa(){let t;if(mc()&&p0.performance){var e,n;t=p0==null||(e=p0.performance)===null||e===void 0||(n=e.now)===null||n===void 0?void 0:n.call(e)}else if("hrtime"in ul){var i;const a=ul==null||(i=ul.hrtime)===null||i===void 0?void 0:i.call(ul);t=a[0]*1e3+a[1]/1e6}else t=Date.now();return t}const Oa={debug:mc()&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},v$={enabled:!0,level:0};function Wr(){}const Mw={},Cw={once:!0};class km{constructor(){let{id:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{id:""};this.id=void 0,this.VERSION=bS,this._startTs=Fa(),this._deltaTs=Fa(),this._storage=void 0,this.userData={},this.LOG_THROTTLE_TIMEOUT=0,this.id=e,this.userData={},this._storage=new d$("__probe-".concat(this.id,"__"),v$),this.timeStamp("".concat(this.id," started")),y$(this),Object.seal(this)}set level(e){this.setLevel(e)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((Fa()-this._startTs).toPrecision(10))}getDelta(){return Number((Fa()-this._deltaTs).toPrecision(10))}set priority(e){this.level=e}get priority(){return this.level}getPriority(){return this.level}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return this._storage.setConfiguration({enabled:e}),this}setLevel(e){return this._storage.setConfiguration({level:e}),this}get(e){return this._storage.config[e]}set(e,n){this._storage.setConfiguration({[e]:n})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(e,n){Cf(e,n)}warn(e){return this._getLogFunction(0,e,Oa.warn,arguments,Cw)}error(e){return this._getLogFunction(0,e,Oa.error,arguments)}deprecated(e,n){return this.warn("`".concat(e,"` is deprecated and will be removed in a later version. Use `").concat(n,"` instead"))}removed(e,n){return this.error("`".concat(e,"` has been removed. Use `").concat(n,"` instead"))}probe(e,n){return this._getLogFunction(e,n,Oa.log,arguments,{time:!0,once:!0})}log(e,n){return this._getLogFunction(e,n,Oa.debug,arguments)}info(e,n){return this._getLogFunction(e,n,console.info,arguments)}once(e,n){return this._getLogFunction(e,n,Oa.debug||Oa.info,arguments,Cw)}table(e,n,i){return n?this._getLogFunction(e,n,console.table||Wr,i&&[i],{tag:E$(n)}):Wr}image(e){let{logLevel:n,priority:i,image:a,message:l="",scale:f=1}=e;return this._shouldLog(n||i)?mc()?T$({image:a,message:l,scale:f}):w$():Wr}time(e,n){return this._getLogFunction(e,n,console.time?console.time:console.info)}timeEnd(e,n){return this._getLogFunction(e,n,console.timeEnd?console.timeEnd:console.info)}timeStamp(e,n){return this._getLogFunction(e,n,console.timeStamp||Wr)}group(e,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{collapsed:!1};const a=Iw({logLevel:e,message:n,opts:i}),{collapsed:l}=i;return a.method=(l?console.groupCollapsed:console.group)||console.info,this._getLogFunction(a)}groupCollapsed(e,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.group(e,n,Object.assign({},i,{collapsed:!0}))}groupEnd(e){return this._getLogFunction(e,"",console.groupEnd||Wr)}withGroup(e,n,i){this.group(e,n)();try{i()}finally{this.groupEnd(e)()}}trace(){console.trace&&console.trace()}_shouldLog(e){return this.isEnabled()&&this.getLevel()>=kS(e)}_getLogFunction(e,n,i,a,l){if(this._shouldLog(e)){l=Iw({logLevel:e,message:n,args:a,opts:l}),i=i||l.method,Cf(i),l.total=this.getTotal(),l.delta=this.getDelta(),this._deltaTs=Fa();const f=l.tag||l.message;if(l.once&&f)if(!Mw[f])Mw[f]=Fa();else return Wr;return n=_$(this.id,l.message,l),i.bind(console,n,...l.args)}return Wr}}km.VERSION=bS;function kS(t){if(!t)return 0;let e;switch(typeof t){case"number":e=t;break;case"object":e=t.logLevel||t.priority||0;break;default:return 0}return Cf(Number.isFinite(e)&&e>=0),e}function Iw(t){const{logLevel:e,message:n}=t;t.logLevel=kS(e);const i=t.args?Array.from(t.args):[];for(;i.length&&i.shift()!==n;);switch(typeof e){case"string":case"function":n!==void 0&&i.unshift(n),t.message=e;break;case"object":Object.assign(t,e);break}typeof t.message=="function"&&(t.message=t.message());const a=typeof t.message;return Cf(a==="string"||a==="object"),Object.assign(t,{args:i},t.opts)}function _$(t,e,n){if(typeof e=="string"){const i=n.time?g$(p$(n.total)):"";e=n.time?"".concat(t,": ").concat(i,"  ").concat(e):"".concat(t,": ").concat(e),e=A$(e,n.color,n.background)}return e}function w$(t){return console.warn("removed"),Wr}function T$(t){let{image:e,message:n="",scale:i=1}=t;if(typeof e=="string"){const l=new Image;return l.onload=()=>{const f=fp(l,n,i);console.log(...f)},l.src=e,Wr}const a=e.nodeName||"";if(a.toLowerCase()==="img")return console.log(...fp(e,n,i)),Wr;if(a.toLowerCase()==="canvas"){const l=new Image;return l.onload=()=>console.log(...fp(l,n,i)),l.src=e.toDataURL(),Wr}return Wr}function E$(t){for(const e in t)for(const n in t[e])return n||"untitled";return"empty"}const Nw=new km({id:"loaders.gl"});class S${log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}class x${constructor(){this.console=void 0,this.console=console}log(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return this.console.log.bind(this.console,...n)}info(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return this.console.info.bind(this.console,...n)}warn(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return this.console.warn.bind(this.console,...n)}error(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return this.console.error.bind(this.console,...n)}}const PS={fetch:null,mimeType:void 0,nothrow:!1,log:new x$,useLocalLibraries:!1,CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:mS,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]},R$={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function MS(){globalThis.loaders=globalThis.loaders||{};const{loaders:t}=globalThis;return t._state=t._state||{},t._state}function CS(){const t=MS();return t.globalOptions=t.globalOptions||{...PS},t.globalOptions}function b$(t,e,n,i){return n=n||[],n=Array.isArray(n)?n:[n],k$(t,n),M$(e,t,i)}function k$(t,e){Fw(t,null,PS,R$,e);for(const n of e){const i=t&&t[n.id]||{},a=n.options&&n.options[n.id]||{},l=n.deprecatedOptions&&n.deprecatedOptions[n.id]||{};Fw(i,n.id,a,l,e)}}function Fw(t,e,n,i,a){const l=e||"Top level",f=e?`${e}.`:"";for(const d in t){const g=!e&&gc(t[d]),v=d==="baseUri"&&!e,T=d==="workerUrl"&&e;if(!(d in n)&&!v&&!T){if(d in i)Nw.warn(`${l} loader option '${f}${d}' no longer supported, use '${i[d]}'`)();else if(!g){const S=P$(d,a);Nw.warn(`${l} loader option '${f}${d}' not recognized. ${S}`)()}}}}function P$(t,e){const n=t.toLowerCase();let i="";for(const a of e)for(const l in a.options){if(t===l)return`Did you mean '${a.id}.${l}'?`;const f=l.toLowerCase();(n.startsWith(f)||f.startsWith(n))&&(i=i||`Did you mean '${a.id}.${l}'?`)}return i}function M$(t,e,n){const a={...t.options||{}};return C$(a,n),a.log===null&&(a.log=new S$),Ow(a,CS()),Ow(a,e),a}function Ow(t,e){for(const n in e)if(n in e){const i=e[n];Rw(i)&&Rw(t[n])?t[n]={...t[n],...e[n]}:t[n]=e[n]}}function C$(t,e){e&&!("baseUri"in t)&&(t.baseUri=e)}function Pm(t){var e;return t?(Array.isArray(t)&&(t=t[0]),Array.isArray((e=t)===null||e===void 0?void 0:e.extensions)):!1}function Mm(t){var e,n;ww(t,"null loader"),ww(Pm(t),"invalid loader");let i;return Array.isArray(t)&&(i=t[1],t=t[0],t={...t,options:{...t.options,...i}}),((e=t)!==null&&e!==void 0&&e.parseTextSync||(n=t)!==null&&n!==void 0&&n.parseText)&&(t.text=!0),t.text||(t.binary=!0),t}const IS=()=>{const t=MS();return t.loaderRegistry=t.loaderRegistry||[],t.loaderRegistry};function I$(t){const e=IS();t=Array.isArray(t)?t:[t];for(const n of t){const i=Mm(n);e.find(a=>i===a)||e.unshift(i)}}function N$(){return IS()}const F$=new km({id:"loaders.gl"}),O$=/\.([^.]+)$/;async function L$(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;if(!NS(t))return null;let a=Lw(t,e,{...n,nothrow:!0},i);if(a)return a;if(aa(t)&&(t=await t.slice(0,10).arrayBuffer(),a=Lw(t,e,n,i)),!a&&!(n!=null&&n.nothrow))throw new Error(FS(t));return a}function Lw(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;if(!NS(t))return null;if(e&&!Array.isArray(e))return Mm(e);let a=[];e&&(a=a.concat(e)),n!=null&&n.ignoreRegisteredLoaders||a.push(...N$()),U$(a);const l=V$(t,a,n,i);if(!l&&!(n!=null&&n.nothrow))throw new Error(FS(t));return l}function V$(t,e,n,i){const a=ah(t),l=bm(t),f=Rm(a)||(i==null?void 0:i.url);let d=null,g="";if(n!=null&&n.mimeType&&(d=hp(e,n==null?void 0:n.mimeType),g=`match forced by supplied MIME type ${n==null?void 0:n.mimeType}`),d=d||B$(e,f),g=g||(d?`matched url ${f}`:""),d=d||hp(e,l),g=g||(d?`matched MIME type ${l}`:""),d=d||z$(e,t),g=g||(d?`matched initial data ${OS(t)}`:""),n!=null&&n.fallbackMimeType&&(d=d||hp(e,n==null?void 0:n.fallbackMimeType),g=g||(d?`matched fallback MIME type ${l}`:"")),g){var v;F$.log(1,`selectLoader selected ${(v=d)===null||v===void 0?void 0:v.name}: ${g}.`)}return d}function NS(t){return!(t instanceof Response&&t.status===204)}function FS(t){const e=ah(t),n=bm(t);let i="No valid loader found (";i+=e?`${ES(e)}, `:"no url provided, ",i+=`MIME type: ${n?`"${n}"`:"not provided"}, `;const a=t?OS(t):"";return i+=a?` first bytes: "${a}"`:"first bytes: not available",i+=")",i}function U$(t){for(const e of t)Mm(e)}function B$(t,e){const n=e&&O$.exec(e),i=n&&n[1];return i?D$(t,i):null}function D$(t,e){e=e.toLowerCase();for(const n of t)for(const i of n.extensions)if(i.toLowerCase()===e)return n;return null}function hp(t,e){for(const n of t)if(n.mimeTypes&&n.mimeTypes.includes(e)||e===`application/x.${n.id}`)return n;return null}function z$(t,e){if(!e)return null;for(const n of t)if(typeof e=="string"){if(j$(e,n))return n}else if(ArrayBuffer.isView(e)){if(Vw(e.buffer,e.byteOffset,n))return n}else if(e instanceof ArrayBuffer&&Vw(e,0,n))return n;return null}function j$(t,e){return e.testText?e.testText(t):(Array.isArray(e.tests)?e.tests:[e.tests]).some(i=>t.startsWith(i))}function Vw(t,e,n){return(Array.isArray(n.tests)?n.tests:[n.tests]).some(a=>W$(t,e,n,a))}function W$(t,e,n,i){if(i instanceof ArrayBuffer)return VY(i,t,i.byteLength);switch(typeof i){case"function":return i(t);case"string":const a=Hg(t,e,i.length);return i===a;default:return!1}}function OS(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5;return typeof t=="string"?t.slice(0,e):ArrayBuffer.isView(t)?Hg(t.buffer,t.byteOffset,e):t instanceof ArrayBuffer?Hg(t,0,e):""}function Hg(t,e,n){if(t.byteLength<e+n)return"";const i=new DataView(t);let a="";for(let l=0;l<n;l++)a+=String.fromCharCode(i.getUint8(e+l));return a}const G$=256*1024;function*Z$(t,e){const n=(e==null?void 0:e.chunkSize)||G$;let i=0;const a=new TextEncoder;for(;i<t.length;){const l=Math.min(t.length-i,n),f=t.slice(i,i+l);i+=l,yield a.encode(f)}}const X$=256*1024;function H$(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){const{chunkSize:n=X$}=e;let i=0;for(;i<t.byteLength;){const a=Math.min(t.byteLength-i,n),l=new ArrayBuffer(a),f=new Uint8Array(t,i,a);new Uint8Array(l).set(f),i+=a,yield l}}()}const Y$=1024*1024;async function*$$(t,e){const n=(e==null?void 0:e.chunkSize)||Y$;let i=0;for(;i<t.size;){const a=i+n,l=await t.slice(i,a).arrayBuffer();i=a,yield l}}function Uw(t,e){return mS?J$(t,e):Q$(t)}async function*J$(t,e){const n=t.getReader();let i;try{for(;;){const a=i||n.read();e!=null&&e._streamReadAhead&&(i=n.read());const{done:l,value:f}=await a;if(l)return;yield TS(f)}}catch{n.releaseLock()}}async function*Q$(t,e){for await(const n of t)yield TS(n)}function q$(t,e){if(typeof t=="string")return Z$(t,e);if(t instanceof ArrayBuffer)return H$(t,e);if(aa(t))return $$(t,e);if(SS(t))return Uw(t,e);if(oa(t))return Uw(t.body,e);throw new Error("makeIterator")}const LS="Cannot convert supplied data type";function K$(t,e,n){if(e.text&&typeof t=="string")return t;if(JY(t)&&(t=t.buffer),t instanceof ArrayBuffer){const i=t;return e.text&&!e.binary?new TextDecoder("utf8").decode(i):i}if(ArrayBuffer.isView(t)){if(e.text&&!e.binary)return new TextDecoder("utf8").decode(t);let i=t.buffer;const a=t.byteLength||t.length;return(t.byteOffset!==0||a!==i.byteLength)&&(i=i.slice(t.byteOffset,t.byteOffset+a)),i}throw new Error(LS)}async function eJ(t,e,n){const i=t instanceof ArrayBuffer||ArrayBuffer.isView(t);if(typeof t=="string"||i)return K$(t,e);if(aa(t)&&(t=await RS(t)),oa(t)){const a=t;return await i$(a),e.binary?await a.arrayBuffer():await a.text()}if(SS(t)&&(t=q$(t,n)),YY(t)||$Y(t))return jY(t);throw new Error(LS)}function VS(t,e){const n=CS(),i=t||n;return typeof i.fetch=="function"?i.fetch:gc(i.fetch)?a=>kw(a,i.fetch):e!=null&&e.fetch?e==null?void 0:e.fetch:kw}function tJ(t,e,n){if(n)return n;const i={fetch:VS(e,t),...t};if(i.url){const a=Rm(i.url);i.baseUrl=a,i.queryString=n$(i.url),i.filename=ES(a),i.baseUrl=XY(a)}return Array.isArray(i.loaders)||(i.loaders=null),i}function nJ(t,e){if(t&&!Array.isArray(t))return t;let n;if(t&&(n=Array.isArray(t)?t:[t]),e&&e.loaders){const i=Array.isArray(e.loaders)?e.loaders:[e.loaders];n=n?[...n,...i]:i}return n&&n.length?n:void 0}async function If(t,e,n,i){e&&!Array.isArray(e)&&!Pm(e)&&(i=void 0,n=e,e=void 0),t=await t,n=n||{};const a=ah(t),f=nJ(e,i),d=await L$(t,f,n);return d?(n=b$(n,d,f,a),i=tJ({url:a,_parse:If,loaders:f},n,i||null),await rJ(d,t,n,i)):null}async function rJ(t,e,n,i){if(kY(t),n=yY(t.options,n),oa(e)){const l=e,{ok:f,redirected:d,status:g,statusText:v,type:T,url:S}=l,x=Object.fromEntries(l.headers.entries());i.response={headers:x,ok:f,redirected:d,status:g,statusText:v,type:T,url:S}}e=await eJ(e,t,n);const a=t;if(a.parseTextSync&&typeof e=="string")return a.parseTextSync(e,n,i);if(FY(t,n))return await OY(t,e,n,i,If);if(a.parseText&&typeof e=="string")return await a.parseText(e,n,i);if(a.parse)return await a.parse(e,n,i);throw hs(!a.parseSync),new Error(`${t.id} loader - no parser found and worker is disabled`)}function iJ(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"float32";return t instanceof Date?"date-millisecond":t instanceof Number?e:typeof t=="string"?"utf8":"null"}function sJ(t){let e=US(t);return e!=="null"?{type:e,nullable:!1}:t.length>0?(e=iJ(t[0]),{type:e,nullable:!0}):{type:"null",nullable:!0}}function US(t){switch(t.constructor){case Int8Array:return"int8";case Uint8Array:case Uint8ClampedArray:return"uint8";case Int16Array:return"int16";case Uint16Array:return"uint16";case Int32Array:return"int32";case Uint32Array:return"uint32";case Float32Array:return"float32";case Float64Array:return"float64";default:return"null"}}function Ac(t){let e=1/0,n=1/0,i=1/0,a=-1/0,l=-1/0,f=-1/0;const d=t.POSITION?t.POSITION.value:[],g=d&&d.length;for(let v=0;v<g;v+=3){const T=d[v],S=d[v+1],x=d[v+2];e=T<e?T:e,n=S<n?S:n,i=x<i?x:i,a=T>a?T:a,l=S>l?S:l,f=x>f?x:f}return[[e,n,i],[a,l,f]]}function BS(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return{fields:oJ(t),metadata:e}}function DS(t,e,n){const i=US(e.value),a=n||aJ(e);return{name:t,type:{type:"fixed-size-list",listSize:e.size,children:[{name:"value",type:i}]},nullable:!1,metadata:a}}function oJ(t){const e=[];for(const n in t){const i=t[n];e.push(DS(n,i))}return e}function aJ(t){const e={};return"byteOffset"in t&&(e.byteOffset=t.byteOffset.toString(10)),"byteStride"in t&&(e.byteStride=t.byteStride.toString(10)),"normalized"in t&&(e.normalized=t.normalized.toString()),e}async function uJ(t,e,n,i){let a,l;!Array.isArray(e)&&!Pm(e)?(a=[],l=e):(a=e,l=n);const f=VS(l);let d=t;return typeof t=="string"&&(d=await f(t)),aa(t)&&(d=await f(t)),Array.isArray(a)?await If(d,a,l):await If(d,a,l)}const lJ=`#define SHADER_NAME point-cloud-layer-vertex-shader

attribute vec3 positions;
attribute vec3 instanceNormals;
attribute vec4 instanceColors;
attribute vec3 instancePositions;
attribute vec3 instancePositions64Low;
attribute vec3 instancePickingColors;

uniform float opacity;
uniform float radiusPixels;
uniform int sizeUnits;

varying vec4 vColor;
varying vec2 unitPosition;

void main(void) {
  geometry.worldPosition = instancePositions;
  geometry.normal = project_normal(instanceNormals);
  unitPosition = positions.xy;
  geometry.uv = unitPosition;
  geometry.pickingColor = instancePickingColors;
  vec3 offset = vec3(positions.xy * project_size_to_pixel(radiusPixels, sizeUnits), 0.0);
  DECKGL_FILTER_SIZE(offset, geometry);

  gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.), geometry.position);
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
  gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);
  vec3 lightColor = lighting_getLightColor(instanceColors.rgb, project_uCameraPosition, geometry.position.xyz, geometry.normal);
  vColor = vec4(lightColor, instanceColors.a * opacity);
  DECKGL_FILTER_COLOR(vColor, geometry);
}
`,cJ=`#define SHADER_NAME point-cloud-layer-fragment-shader

precision highp float;

varying vec4 vColor;
varying vec2 unitPosition;

void main(void) {
  geometry.uv = unitPosition;

  float distToCenter = length(unitPosition);

  if (distToCenter > 1.0) {
    discard;
  }

  gl_FragColor = vColor;
  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,zS=[0,0,0,255],jS=[0,0,1],fJ={sizeUnits:"pixels",pointSize:{type:"number",min:0,value:10},getPosition:{type:"accessor",value:t=>t.position},getNormal:{type:"accessor",value:jS},getColor:{type:"accessor",value:zS},material:!0,radiusPixels:{deprecatedFor:"pointSize"}};function hJ(t){const{header:e,attributes:n}=t;!e||!n||(t.length=e.vertexCount,n.POSITION&&(n.instancePositions=n.POSITION),n.NORMAL&&(n.instanceNormals=n.NORMAL),n.COLOR_0&&(n.instanceColors=n.COLOR_0))}class Cm extends sh{getShaders(){return super.getShaders({vs:lJ,fs:cJ,modules:[xX,UG,RX]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceNormals:{size:3,transition:!0,accessor:"getNormal",defaultValue:jS},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:zS}})}updateState(e){const{changeFlags:n,props:i}=e;if(super.updateState(e),n.extensionsChanged){var a;const{gl:l}=this.context;(a=this.state.model)===null||a===void 0||a.delete(),this.state.model=this._getModel(l),this.getAttributeManager().invalidateAll()}n.dataChanged&&hJ(i.data)}draw({uniforms:e}){const{pointSize:n,sizeUnits:i}=this.props;this.state.model.setUniforms(e).setUniforms({sizeUnits:Eg[i],radiusPixels:n}).draw()}_getModel(e){const n=[];for(let i=0;i<3;i++){const a=i/3*Math.PI*2;n.push(Math.cos(a)*2,Math.sin(a)*2,0)}return new N4(e,{...this.getShaders(),id:this.props.id,geometry:new aZ({drawMode:4,attributes:{positions:new Float32Array(n)}}),isInstanced:!0})}}C(Cm,"layerName","PointCloudLayer");C(Cm,"defaultProps",fJ);const dJ=typeof __VERSION__<"u"?__VERSION__:"latest",pJ={draco:{decoderType:typeof WebAssembly=="object"?"wasm":"js",libraryPath:"libs/",extraAttributes:{},attributeNameEntry:void 0}},gJ={name:"Draco",id:"draco",module:"draco",version:dJ,worker:!0,extensions:["drc"],mimeTypes:["application/octet-stream"],binary:!0,tests:["DRACO"],options:pJ};function mJ(t,e,n){const i=WS(e.metadata),a=[],l=AJ(e.attributes);for(const f in t){const d=t[f],g=Bw(f,d,l[f]);a.push(g)}if(n){const f=Bw("indices",n);a.push(f)}return{fields:a,metadata:i}}function AJ(t){const e={};for(const n in t){const i=t[n];e[i.name||"undefined"]=i}return e}function Bw(t,e,n){const i=n?WS(n.metadata):void 0;return DS(t,e,i)}function WS(t){Object.entries(t);const e={};for(const n in t)e[`${n}.string`]=JSON.stringify(t[n]);return e}const Dw={POSITION:"POSITION",NORMAL:"NORMAL",COLOR:"COLOR_0",TEX_COORD:"TEXCOORD_0"},yJ={1:Int8Array,2:Uint8Array,3:Int16Array,4:Uint16Array,5:Int32Array,6:Uint32Array,9:Float32Array},vJ=4;class _J{constructor(e){this.draco=void 0,this.decoder=void 0,this.metadataQuerier=void 0,this.draco=e,this.decoder=new this.draco.Decoder,this.metadataQuerier=new this.draco.MetadataQuerier}destroy(){this.draco.destroy(this.decoder),this.draco.destroy(this.metadataQuerier)}parseSync(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=new this.draco.DecoderBuffer;i.Init(new Int8Array(e),e.byteLength),this._disableAttributeTransforms(n);const a=this.decoder.GetEncodedGeometryType(i),l=a===this.draco.TRIANGULAR_MESH?new this.draco.Mesh:new this.draco.PointCloud;try{let f;switch(a){case this.draco.TRIANGULAR_MESH:f=this.decoder.DecodeBufferToMesh(i,l);break;case this.draco.POINT_CLOUD:f=this.decoder.DecodeBufferToPointCloud(i,l);break;default:throw new Error("DRACO: Unknown geometry type.")}if(!f.ok()||!l.ptr){const x=`DRACO decompression failed: ${f.error_msg()}`;throw new Error(x)}const d=this._getDracoLoaderData(l,a,n),g=this._getMeshData(l,d,n),v=Ac(g.attributes),T=mJ(g.attributes,d,g.indices);return{loader:"draco",loaderData:d,header:{vertexCount:l.num_points(),boundingBox:v},...g,schema:T}}finally{this.draco.destroy(i),l&&this.draco.destroy(l)}}_getDracoLoaderData(e,n,i){const a=this._getTopLevelMetadata(e),l=this._getDracoAttributes(e,i);return{geometry_type:n,num_attributes:e.num_attributes(),num_points:e.num_points(),num_faces:e instanceof this.draco.Mesh?e.num_faces():0,metadata:a,attributes:l}}_getDracoAttributes(e,n){const i={};for(let a=0;a<e.num_attributes();a++){const l=this.decoder.GetAttribute(e,a),f=this._getAttributeMetadata(e,a);i[l.unique_id()]={unique_id:l.unique_id(),attribute_type:l.attribute_type(),data_type:l.data_type(),num_components:l.num_components(),byte_offset:l.byte_offset(),byte_stride:l.byte_stride(),normalized:l.normalized(),attribute_index:a,metadata:f};const d=this._getQuantizationTransform(l,n);d&&(i[l.unique_id()].quantization_transform=d);const g=this._getOctahedronTransform(l,n);g&&(i[l.unique_id()].octahedron_transform=g)}return i}_getMeshData(e,n,i){const a=this._getMeshAttributes(n,e,i);if(!a.POSITION)throw new Error("DRACO: No position attribute found.");if(e instanceof this.draco.Mesh)switch(i.topology){case"triangle-strip":return{topology:"triangle-strip",mode:4,attributes:a,indices:{value:this._getTriangleStripIndices(e),size:1}};case"triangle-list":default:return{topology:"triangle-list",mode:5,attributes:a,indices:{value:this._getTriangleListIndices(e),size:1}}}return{topology:"point-list",mode:0,attributes:a}}_getMeshAttributes(e,n,i){const a={};for(const l of Object.values(e.attributes)){const f=this._deduceAttributeName(l,i);l.name=f;const{value:d,size:g}=this._getAttributeValues(n,l);a[f]={value:d,size:g,byteOffset:l.byte_offset,byteStride:l.byte_stride,normalized:l.normalized}}return a}_getTriangleListIndices(e){const i=e.num_faces()*3,a=i*vJ,l=this.draco._malloc(a);try{return this.decoder.GetTrianglesUInt32Array(e,a,l),new Uint32Array(this.draco.HEAPF32.buffer,l,i).slice()}finally{this.draco._free(l)}}_getTriangleStripIndices(e){const n=new this.draco.DracoInt32Array;try{return this.decoder.GetTriangleStripsFromMesh(e,n),EJ(n)}finally{this.draco.destroy(n)}}_getAttributeValues(e,n){const i=yJ[n.data_type],a=n.num_components,f=e.num_points()*a,d=f*i.BYTES_PER_ELEMENT,g=wJ(this.draco,i);let v;const T=this.draco._malloc(d);try{const S=this.decoder.GetAttribute(e,n.attribute_index);this.decoder.GetAttributeDataArrayForAllPoints(e,S,g,d,T),v=new i(this.draco.HEAPF32.buffer,T,f).slice()}finally{this.draco._free(T)}return{value:v,size:a}}_deduceAttributeName(e,n){const i=e.unique_id;for(const[f,d]of Object.entries(n.extraAttributes||{}))if(d===i)return f;const a=e.attribute_type;for(const f in Dw)if(this.draco[f]===a)return Dw[f];const l=n.attributeNameEntry||"name";return e.metadata[l]?e.metadata[l].string:`CUSTOM_ATTRIBUTE_${i}`}_getTopLevelMetadata(e){const n=this.decoder.GetMetadata(e);return this._getDracoMetadata(n)}_getAttributeMetadata(e,n){const i=this.decoder.GetAttributeMetadata(e,n);return this._getDracoMetadata(i)}_getDracoMetadata(e){if(!e||!e.ptr)return{};const n={},i=this.metadataQuerier.NumEntries(e);for(let a=0;a<i;a++){const l=this.metadataQuerier.GetEntryName(e,a);n[l]=this._getDracoMetadataField(e,l)}return n}_getDracoMetadataField(e,n){const i=new this.draco.DracoInt32Array;try{this.metadataQuerier.GetIntEntryArray(e,n,i);const a=TJ(i);return{int:this.metadataQuerier.GetIntEntry(e,n),string:this.metadataQuerier.GetStringEntry(e,n),double:this.metadataQuerier.GetDoubleEntry(e,n),intArray:a}}finally{this.draco.destroy(i)}}_disableAttributeTransforms(e){const{quantizedAttributes:n=[],octahedronAttributes:i=[]}=e,a=[...n,...i];for(const l of a)this.decoder.SkipAttributeTransform(this.draco[l])}_getQuantizationTransform(e,n){const{quantizedAttributes:i=[]}=n,a=e.attribute_type();if(i.map(f=>this.decoder[f]).includes(a)){const f=new this.draco.AttributeQuantizationTransform;try{if(f.InitFromAttribute(e))return{quantization_bits:f.quantization_bits(),range:f.range(),min_values:new Float32Array([1,2,3]).map(d=>f.min_value(d))}}finally{this.draco.destroy(f)}}return null}_getOctahedronTransform(e,n){const{octahedronAttributes:i=[]}=n,a=e.attribute_type();if(i.map(f=>this.decoder[f]).includes(a)){const f=new this.draco.AttributeQuantizationTransform;try{if(f.InitFromAttribute(e))return{quantization_bits:f.quantization_bits()}}finally{this.draco.destroy(f)}}return null}}function wJ(t,e){switch(e){case Float32Array:return t.DT_FLOAT32;case Int8Array:return t.DT_INT8;case Int16Array:return t.DT_INT16;case Int32Array:return t.DT_INT32;case Uint8Array:return t.DT_UINT8;case Uint16Array:return t.DT_UINT16;case Uint32Array:return t.DT_UINT32;default:return t.DT_INVALID}}function TJ(t){const e=t.size(),n=new Int32Array(e);for(let i=0;i<e;i++)n[i]=t.GetValue(i);return n}function EJ(t){const e=t.size(),n=new Int32Array(e);for(let i=0;i<e;i++)n[i]=t.GetValue(i);return n}const SJ="1.5.6",xJ="1.4.1",dp=`https://www.gstatic.com/draco/versioned/decoders/${SJ}`,qn={DECODER:"draco_wasm_wrapper.js",DECODER_WASM:"draco_decoder.wasm",FALLBACK_DECODER:"draco_decoder.js",ENCODER:"draco_encoder.js"},pp={[qn.DECODER]:`${dp}/${qn.DECODER}`,[qn.DECODER_WASM]:`${dp}/${qn.DECODER_WASM}`,[qn.FALLBACK_DECODER]:`${dp}/${qn.FALLBACK_DECODER}`,[qn.ENCODER]:`https://raw.githubusercontent.com/google/draco/${xJ}/javascript/${qn.ENCODER}`};let ll;async function RJ(t){const e=t.modules||{};return e.draco3d?ll=ll||e.draco3d.createDecoderModule({}).then(n=>({draco:n})):ll=ll||bJ(t),await ll}async function bJ(t){let e,n;switch(t.draco&&t.draco.decoderType){case"js":e=await cp(pp[qn.FALLBACK_DECODER],"draco",t,qn.FALLBACK_DECODER);break;case"wasm":default:[e,n]=await Promise.all([await cp(pp[qn.DECODER],"draco",t,qn.DECODER),await cp(pp[qn.DECODER_WASM],"draco",t,qn.DECODER_WASM)])}return e=e||globalThis.DracoDecoderModule,await kJ(e,n)}function kJ(t,e){const n={};return e&&(n.wasmBinary=e),new Promise(i=>{t({...n,onModuleLoaded:a=>i({draco:a})})})}const PJ={...gJ,parse:MJ};async function MJ(t,e){const{draco:n}=await RJ(e),i=new _J(n);try{return i.parseSync(t,e==null?void 0:e.draco)}finally{i.destroy()}}const CJ=typeof __VERSION__<"u"?__VERSION__:"latest",IJ={las:{shape:"mesh",fp64:!1,skip:1,colorDepth:8}},NJ={name:"LAS",id:"las",module:"las",version:CJ,worker:!0,extensions:["las","laz"],mimeTypes:["application/octet-stream"],text:!0,binary:!0,tests:["LAS"],options:IJ};function FJ(){var t=typeof t<"u"?t:{},e={},n;for(n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);var i=!1,a=!1,l=!1,f=!1;i=typeof window=="object",a=typeof importScripts=="function",l=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",f=!i&&!l&&!a;var d="";function g(b){return t.locateFile?t.locateFile(b,d):d+b}var v,T,S,x,M;l?(a?d=require("path").dirname(d)+"/":d=(typeof __dirname<"u"?__dirname:"")+"/",v=function(R,D){var y=Ts(R);return y?D?y:y.toString():(x||(x=require("fs")),M||(M=require("path")),R=M.normalize(R),x.readFileSync(R,D?null:"utf8"))},S=function(R){var D=v(R,!0);return D.buffer||(D=new Uint8Array(D)),Q(D.buffer),D},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),typeof e2<"u"&&(e2.exports=t),process.on("uncaughtException",function(b){if(!(b instanceof Yx))throw b}),process.on("unhandledRejection",Pr),t.inspect=function(){return"[Emscripten Module object]"}):f?(typeof read<"u"&&(v=function(R){var D=Ts(R);return D?Hm(D):read(R)}),S=function(R){var D;return D=Ts(R),D||(typeof readbuffer=="function"?new Uint8Array(readbuffer(R)):(D=read(R,"binary"),Q(typeof D=="object"),D))},typeof scriptArgs<"u"&&scriptArgs,typeof print<"u"&&(typeof console>"u"&&(console={}),console.log=print,console.warn=console.error=typeof printErr<"u"?printErr:print)):(i||a)&&(a?d=self.location.href:document.currentScript&&(d=document.currentScript.src),d.indexOf("blob:")!==0?d=d.substr(0,d.lastIndexOf("/")+1):d="",v=function(R){try{var D=new XMLHttpRequest;return D.open("GET",R,!1),D.send(null),D.responseText}catch(J){var y=Ts(R);if(y)return Hm(y);throw J}},a&&(S=function(R){try{var D=new XMLHttpRequest;return D.open("GET",R,!1),D.responseType="arraybuffer",D.send(null),new Uint8Array(D.response)}catch(J){var y=Ts(R);if(y)return y;throw J}}),T=function(R,D,y){var J=new XMLHttpRequest;J.open("GET",R,!0),J.responseType="arraybuffer",J.onload=function(){if(J.status==200||J.status==0&&J.response){D(J.response);return}var L=Ts(R);if(L){D(L.buffer);return}y()},J.onerror=y,J.send(null)});var B=t.print||console.log.bind(console),W=t.printErr||console.warn.bind(console);for(n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);e=null,t.arguments&&t.arguments,t.thisProgram&&t.thisProgram,t.quit&&t.quit,new Array(0);var N=0,F=function(b){N=b},V=function(){return N},j=8;t.wasmBinary&&t.wasmBinary,t.noExitRuntime&&t.noExitRuntime;var X=!1;function Q(b,R){b||Pr("Assertion failed: "+R)}var K=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function ae(b,R,D){for(var y=R+D,J=R;b[J]&&!(J>=y);)++J;if(J-R>16&&b.subarray&&K)return K.decode(b.subarray(R,J));for(var s="";R<J;){var L=b[R++];if(!(L&128)){s+=String.fromCharCode(L);continue}var te=b[R++]&63;if((L&224)==192){s+=String.fromCharCode((L&31)<<6|te);continue}var de=b[R++]&63;if((L&240)==224?L=(L&15)<<12|te<<6|de:L=(L&7)<<18|te<<12|de<<6|b[R++]&63,L<65536)s+=String.fromCharCode(L);else{var ce=L-65536;s+=String.fromCharCode(55296|ce>>10,56320|ce&1023)}}return s}function fe(b,R){return b?ae(ct,b,R):""}function se(b,R,D,y){if(!(y>0))return 0;for(var J=D,s=D+y-1,L=0;L<b.length;++L){var te=b.charCodeAt(L);if(te>=55296&&te<=57343){var de=b.charCodeAt(++L);te=65536+((te&1023)<<10)|de&1023}if(te<=127){if(D>=s)break;R[D++]=te}else if(te<=2047){if(D+1>=s)break;R[D++]=192|te>>6,R[D++]=128|te&63}else if(te<=65535){if(D+2>=s)break;R[D++]=224|te>>12,R[D++]=128|te>>6&63,R[D++]=128|te&63}else{if(D+3>=s)break;R[D++]=240|te>>18,R[D++]=128|te>>12&63,R[D++]=128|te>>6&63,R[D++]=128|te&63}}return R[D]=0,D-J}function _e(b,R,D){return se(b,ct,R,D)}function we(b){for(var R=0,D=0;D<b.length;++D){var y=b.charCodeAt(D);y>=55296&&y<=57343&&(y=65536+((y&1023)<<10)|b.charCodeAt(++D)&1023),y<=127?++R:y<=2047?R+=2:y<=65535?R+=3:R+=4}return R}var qe=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0;function kt(b,R){for(var D=b,y=D>>1,J=y+R/2;!(y>=J)&&rr[y];)++y;if(D=y<<1,D-b>32&&qe)return qe.decode(ct.subarray(b,D));for(var s=0,L="";;){var te=Dt[b+s*2>>1];if(te==0||s==R/2)return L;++s,L+=String.fromCharCode(te)}}function Pe(b,R,D){if(D===void 0&&(D=2147483647),D<2)return 0;D-=2;for(var y=R,J=D<b.length*2?D/2:b.length,s=0;s<J;++s){var L=b.charCodeAt(s);Dt[R>>1]=L,R+=2}return Dt[R>>1]=0,R-y}function Ee(b){return b.length*2}function On(b,R){for(var D=0,y="";!(D>=R/4);){var J=ue[b+D*4>>2];if(J==0)break;if(++D,J>=65536){var s=J-65536;y+=String.fromCharCode(55296|s>>10,56320|s&1023)}else y+=String.fromCharCode(J)}return y}function mt(b,R,D){if(D===void 0&&(D=2147483647),D<4)return 0;for(var y=R,J=y+D-4,s=0;s<b.length;++s){var L=b.charCodeAt(s);if(L>=55296&&L<=57343){var te=b.charCodeAt(++s);L=65536+((L&1023)<<10)|te&1023}if(ue[R>>2]=L,R+=4,R+4>J)break}return ue[R>>2]=0,R-y}function Ht(b){for(var R=0,D=0;D<b.length;++D){var y=b.charCodeAt(D);y>=55296&&y<=57343&&++D,R+=4}return R}var Bt,En,ct,Dt,rr,ue,Ae,Ve,Ie;function Ke(b){Bt=b,t.HEAP8=En=new Int8Array(b),t.HEAP16=Dt=new Int16Array(b),t.HEAP32=ue=new Int32Array(b),t.HEAPU8=ct=new Uint8Array(b),t.HEAPU16=rr=new Uint16Array(b),t.HEAPU32=Ae=new Uint32Array(b),t.HEAPF32=Ve=new Float32Array(b),t.HEAPF64=Ie=new Float64Array(b)}var je=5265264,gt=22176,xt=t.INITIAL_MEMORY||167772160;t.buffer?Bt=t.buffer:Bt=new ArrayBuffer(xt),xt=Bt.byteLength,Ke(Bt),ue[gt>>2]=je;function Yt(b){for(;b.length>0;){var R=b.shift();if(typeof R=="function"){R(t);continue}var D=R.func;typeof D=="number"?R.arg===void 0?t.dynCall_v(D):t.dynCall_vi(D,R.arg):D(R.arg===void 0?null:R.arg)}}var tn=[],dn=[],pn=[],nn=[];function Hn(){if(t.preRun)for(typeof t.preRun=="function"&&(t.preRun=[t.preRun]);t.preRun.length;)$t(t.preRun.shift());Yt(tn)}function Sn(){Yt(dn)}function zi(){Yt(pn)}function Qr(){if(t.postRun)for(typeof t.postRun=="function"&&(t.postRun=[t.postRun]);t.postRun.length;)ms(t.postRun.shift());Yt(nn)}function $t(b){tn.unshift(b)}function ms(b){nn.unshift(b)}var kr=0,ji=null;function As(b){kr++,t.monitorRunDependencies&&t.monitorRunDependencies(kr)}function ro(b){if(kr--,t.monitorRunDependencies&&t.monitorRunDependencies(kr),kr==0&&ji){var R=ji;ji=null,R()}}t.preloadedImages={},t.preloadedAudios={};function Pr(b){throw t.onAbort&&t.onAbort(b),b+="",B(b),W(b),X=!0,b="abort("+b+"). Build with -s ASSERTIONS=1 for more info.",b}var xn=null;function io(b,R){return String.prototype.startsWith?b.startsWith(R):b.indexOf(R)===0}var so="data:application/octet-stream;base64,";function Wi(b){return io(b,so)}dn.push({func:function(){Xx()}}),xn="data:application/octet-stream;base64,AAAAAAAAAAAPDg0MCwoJCA4AAQMGCgoJDQECBAcLCwoMAwQFCAwMCwsGBwgJDQ0MCgoLDA0ODg0JCgsMDQ4PDggJCgsMDQ4PAAECAwQFBgcBAAECAwQFBgIBAAECAwQFAwIBAAECAwQEAwIBAAECAwUEAwIBAAECBgUEAwIBAAEHBgUEAwIBAMgPAAAoDQAAEBAAACAQAADIDwAAUA0AABAQAAAgEAAAEQAKABEREQAAAAAFAAAAAAAACQAAAAALAAAAAAAAAAARAA8KERERAwoHAAEACQsLAAAJBgsAAAsABhEAAAAREREAAAAAAAAAAAAAAAAAAAAACwAAAAAAAAAAEQAKChEREQAKAAACAAkLAAAACQALAAALAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAADAAAAAAJDAAAAAAADAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAANAAAABA0AAAAACQ4AAAAAAA4AAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAADwAAAAAPAAAAAAkQAAAAAAAQAAAQAAASAAAAEhISAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABIAAAASEhIAAAAAAAAJAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALAAAAAAAAAAAAAAAKAAAAAAoAAAAACQsAAAAAAAsAAAsAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAMAAAAAAkMAAAAAAAMAAAMAAAwMTIzNDU2Nzg5QUJDREVGGRJEOwI/LEcUPTMwChsGRktFNw9JDo4XA0AdPGkrNh9KLRwBICUpIQgMFRYiLhA4Pgs0MRhkdHV2L0EJfzkRI0MyQomKiwUEJignDSoeNYwHGkiTE5SVAAAAAAAAAAAASWxsZWdhbCBieXRlIHNlcXVlbmNlAERvbWFpbiBlcnJvcgBSZXN1bHQgbm90IHJlcHJlc2VudGFibGUATm90IGEgdHR5AFBlcm1pc3Npb24gZGVuaWVkAE9wZXJhdGlvbiBub3QgcGVybWl0dGVkAE5vIHN1Y2ggZmlsZSBvciBkaXJlY3RvcnkATm8gc3VjaCBwcm9jZXNzAEZpbGUgZXhpc3RzAFZhbHVlIHRvbyBsYXJnZSBmb3IgZGF0YSB0eXBlAE5vIHNwYWNlIGxlZnQgb24gZGV2aWNlAE91dCBvZiBtZW1vcnkAUmVzb3VyY2UgYnVzeQBJbnRlcnJ1cHRlZCBzeXN0ZW0gY2FsbABSZXNvdXJjZSB0ZW1wb3JhcmlseSB1bmF2YWlsYWJsZQBJbnZhbGlkIHNlZWsAQ3Jvc3MtZGV2aWNlIGxpbmsAUmVhZC1vbmx5IGZpbGUgc3lzdGVtAERpcmVjdG9yeSBub3QgZW1wdHkAQ29ubmVjdGlvbiByZXNldCBieSBwZWVyAE9wZXJhdGlvbiB0aW1lZCBvdXQAQ29ubmVjdGlvbiByZWZ1c2VkAEhvc3QgaXMgZG93bgBIb3N0IGlzIHVucmVhY2hhYmxlAEFkZHJlc3MgaW4gdXNlAEJyb2tlbiBwaXBlAEkvTyBlcnJvcgBObyBzdWNoIGRldmljZSBvciBhZGRyZXNzAEJsb2NrIGRldmljZSByZXF1aXJlZABObyBzdWNoIGRldmljZQBOb3QgYSBkaXJlY3RvcnkASXMgYSBkaXJlY3RvcnkAVGV4dCBmaWxlIGJ1c3kARXhlYyBmb3JtYXQgZXJyb3IASW52YWxpZCBhcmd1bWVudABBcmd1bWVudCBsaXN0IHRvbyBsb25nAFN5bWJvbGljIGxpbmsgbG9vcABGaWxlbmFtZSB0b28gbG9uZwBUb28gbWFueSBvcGVuIGZpbGVzIGluIHN5c3RlbQBObyBmaWxlIGRlc2NyaXB0b3JzIGF2YWlsYWJsZQBCYWQgZmlsZSBkZXNjcmlwdG9yAE5vIGNoaWxkIHByb2Nlc3MAQmFkIGFkZHJlc3MARmlsZSB0b28gbGFyZ2UAVG9vIG1hbnkgbGlua3MATm8gbG9ja3MgYXZhaWxhYmxlAFJlc291cmNlIGRlYWRsb2NrIHdvdWxkIG9jY3VyAFN0YXRlIG5vdCByZWNvdmVyYWJsZQBQcmV2aW91cyBvd25lciBkaWVkAE9wZXJhdGlvbiBjYW5jZWxlZABGdW5jdGlvbiBub3QgaW1wbGVtZW50ZWQATm8gbWVzc2FnZSBvZiBkZXNpcmVkIHR5cGUASWRlbnRpZmllciByZW1vdmVkAERldmljZSBub3QgYSBzdHJlYW0ATm8gZGF0YSBhdmFpbGFibGUARGV2aWNlIHRpbWVvdXQAT3V0IG9mIHN0cmVhbXMgcmVzb3VyY2VzAExpbmsgaGFzIGJlZW4gc2V2ZXJlZABQcm90b2NvbCBlcnJvcgBCYWQgbWVzc2FnZQBGaWxlIGRlc2NyaXB0b3IgaW4gYmFkIHN0YXRlAE5vdCBhIHNvY2tldABEZXN0aW5hdGlvbiBhZGRyZXNzIHJlcXVpcmVkAE1lc3NhZ2UgdG9vIGxhcmdlAFByb3RvY29sIHdyb25nIHR5cGUgZm9yIHNvY2tldABQcm90b2NvbCBub3QgYXZhaWxhYmxlAFByb3RvY29sIG5vdCBzdXBwb3J0ZWQAU29ja2V0IHR5cGUgbm90IHN1cHBvcnRlZABOb3Qgc3VwcG9ydGVkAFByb3RvY29sIGZhbWlseSBub3Qgc3VwcG9ydGVkAEFkZHJlc3MgZmFtaWx5IG5vdCBzdXBwb3J0ZWQgYnkgcHJvdG9jb2wAQWRkcmVzcyBub3QgYXZhaWxhYmxlAE5ldHdvcmsgaXMgZG93bgBOZXR3b3JrIHVucmVhY2hhYmxlAENvbm5lY3Rpb24gcmVzZXQgYnkgbmV0d29yawBDb25uZWN0aW9uIGFib3J0ZWQATm8gYnVmZmVyIHNwYWNlIGF2YWlsYWJsZQBTb2NrZXQgaXMgY29ubmVjdGVkAFNvY2tldCBub3QgY29ubmVjdGVkAENhbm5vdCBzZW5kIGFmdGVyIHNvY2tldCBzaHV0ZG93bgBPcGVyYXRpb24gYWxyZWFkeSBpbiBwcm9ncmVzcwBPcGVyYXRpb24gaW4gcHJvZ3Jlc3MAU3RhbGUgZmlsZSBoYW5kbGUAUmVtb3RlIEkvTyBlcnJvcgBRdW90YSBleGNlZWRlZABObyBtZWRpdW0gZm91bmQAV3JvbmcgbWVkaXVtIHR5cGUATm8gZXJyb3IgaW5mb3JtYXRpb24AAAAAAADgFgAAmRgAAGAQAAAAAAAA4BYAAEIZAABgEAAAAAAAAOAWAAAqGgAASA8AAAAAAAC4FgAANBsAAOAWAACfGgAAMAoAAAAAAADgFgAAaRsAAEgPAAAAAAAA4BYAAIobAABIDwAAAAAAALgWAAAPHAAA4BYAAHwcAABIDwAAAAAAAOAWAACVHAAASA8AAAAAAADgFgAAHh0AAEgPAAAAAAAA4BYAAHcdAABIDwAAAAAAAOAWAACQHQAASA8AAAAAAADgFgAAQh4AAEgPAAAAAAAA4BYAAIceAABgEAAAAAAAAOAWAACkHwAASA8AAAAAAAC4FgAAZyAAAOAWAADkHwAA8AoAAAAAAADgFgAAjyAAAGAQAAAAAAAAuBYAAMMiAADgFgAAAiIAABgLAAAAAAAA4BYAAOEiAABgEAAAAAAAAOAWAADQJAAAGAsAAAAAAADgFgAAkSUAAGAQAAAAAAAA4BYAAIAnAAAYCwAAAAAAAOAWAAA9KAAAYBAAAAAAAADgFgAAJCoAABgLAAAAAAAA4BYAAOkqAABgEAAAAAAAAOAWAADgLAAA8AoAAAAAAADgFgAAui0AAGAQAAAAAAAA4BYAANsvAADwCgAAAAAAAOAWAADTMAAAYBAAAAAAAADgFgAAMDMAAPAKAAAAAAAA4BYAACQ0AABgEAAAAAAAAOAWAAB5NgAA8AoAAAAAAADgFgAAizcAAGAQAAAAAAAA4BYAABw6AABgEAAAAAAAAOAWAACdOgAAYBAAAAAAAADgFgAAXjsAAPAKAAAAAAAA4BYAALU7AABgEAAAAAAAAOAWAADMPAAAGAsAAAAAAADgFgAATz0AAGAQAAAAAAAA4BYAAL4+AAAYCwAAAAAAAOAWAABBPwAAYBAAAAAAAADgFgAAsEAAABgLAAAAAAAA4BYAADNBAABgEAAAAAAAAOAWAACiQgAAGAsAAAAAAADgFgAAJUMAAGAQAAAAAAAA4BYAAJREAAAYCwAAAAAAAOAWAAAXRQAAYBAAAAAAAADgFgAAhkYAABgLAAAAAAAA4BYAAAlHAABgEAAAAAAAALgWAAB4SAAAiBcAAIBIAAAAAAAAIA0AAIgXAACJSAAAAQAAACANAAC4FgAAqkgAAIgXAAC6SAAAAAAAAEgNAACIFwAAy0gAAAEAAABIDQAAuBYAABhMAAC4FgAAN0wAALgWAABWTAAAuBYAAHVMAAC4FgAAlEwAALgWAACzTAAAuBYAANJMAAC4FgAA8UwAALgWAAAQTQAAuBYAAC9NAAC4FgAATk0AALgWAABtTQAAuBYAAIxNAACkFwAAn00AAAAAAAABAAAA8A0AAAAAAAC4FgAA4U0AAKQXAAAHTgAAAAAAAAEAAADwDQAAAAAAAKQXAABJTgAAAAAAAAEAAADwDQAAAAAAAKQXAACITgAAAAAAAAEAAADwDQAAAAAAAKQXAADHTgAAAAAAAAEAAADwDQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP//////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALgWAADNTwAA4BYAAC1QAAAADwAAAAAAAOAWAADaTwAAEA8AAAAAAAC4FgAA+08AAOAWAAAIUAAA8A4AAAAAAADgFgAAhlAAAOgOAAAAAAAA4BYAAJNQAADoDgAAAAAAAOAWAACjUAAA6A4AAAAAAADgFgAAtVAAADgPAAAAAAAA4BYAAMZQAAA4DwAAAAAAAOAWAADXUAAAAA8AAAAAAADgFgAA+VAAAHgPAAAAAAAA4BYAAB1RAAAADwAAAAAAAOAWAABCUQAAeA8AAAAAAADgFgAAjlEAAAAPAAAAAAAAbBcAALZRAABsFwAAuFEAAGwXAAC7UQAAbBcAAL1RAABsFwAAv1EAAGwXAADBUQAAbBcAAMNRAABsFwAAxVEAAGwXAADHUQAAbBcAAMlRAABsFwAAy1EAAGwXAADNUQAAbBcAAM9RAABsFwAA0VEAAOAWAADTUQAA8A4AAAAAAADgFgAARlIAAOgOAAAAAAAAuBYAAGJSAACkFwAAe1IAAAAAAAABAAAAWBAAAAAAAADgFgAA9FIAAIgQAAAAAAAA4BYAABdTAACYEAAAAAAAALgWAAAuUwAA4BYAAHBTAACIEAAAAAAAAOAWAACSUwAASA8AAAAAAAAAAAAAAAoAAAEAAAACAAAAAwAAAAEAAAAEAAAAAAAAABAKAAABAAAABQAAAAYAAAACAAAABwAAAAAAAAAgCgAACAAAAAkAAAABAAAAAAAAADgKAAAKAAAACwAAAAIAAAABAAAADAAAAA0AAAACAAAAAwAAAAMAAAAAAAAASAoAAAgAAAAOAAAAAQAAAAAAAABYCgAACAAAAA8AAAABAAAAAAAAAIAKAAAIAAAAEAAAAAEAAAAAAAAAcAoAAAgAAAARAAAAAQAAAAAAAACQCgAACAAAABIAAAABAAAAAAAAAKAKAAAIAAAAEwAAAAEAAAAAAAAAsAoAAAgAAAAUAAAAAQAAAAAAAADACgAACAAAABUAAAABAAAAAAAAANAKAAABAAAAFgAAABcAAAAEAAAAGAAAAAAAAADgCgAACAAAABkAAAABAAAAAAAAAPgKAAAFAAAAGgAAABsAAAAAAAAA8AoAAAEAAAAcAAAAHQAAAAAAAAAICwAAAQAAAB4AAAAfAAAABgAAACAAAAAAAAAAIAsAACEAAAAiAAAABwAAAAgAAAAAAAAAGAsAACMAAAAkAAAABwAAAAkAAAAAAAAAMAsAAAEAAAAlAAAAJgAAAAoAAAAnAAAAAAAAAEALAAAoAAAAKQAAAAcAAAALAAAAAAAAAFALAAABAAAAKgAAACsAAAAMAAAALAAAAAAAAABgCwAALQAAAC4AAAAHAAAADQAAAAAAAABwCwAAAQAAAC8AAAAwAAAADgAAADEAAAAAAAAAgAsAADIAAAAzAAAABwAAAA8AAAAAAAAAkAsAAAEAAAA0AAAANQAAABAAAAA2AAAAAAAAAKALAAARAAAANwAAADgAAAAAAAAAsAsAAAEAAAA5AAAAOgAAABIAAAA7AAAAAAAAAMALAAATAAAAPAAAAD0AAAAAAAAA0AsAAAEAAAA+AAAAPwAAABQAAABAAAAAAAAAAOALAAAVAAAAQQAAAEIAAAAAAAAA8AsAAAEAAABDAAAARAAAABYAAABFAAAAAAAAAAAMAAAXAAAARgAAAEcAAAAAAAAAEAwAAAEAAABIAAAASQAAABgAAABKAAAAAAAAACAMAAABAAAASwAAAEwAAAAZAAAATQAAAAAAAAAwDAAAAQAAAE4AAABPAAAAGgAAAFAAAAAAAAAAQAwAABsAAABRAAAAUgAAAAAAAABQDAAAAQAAAFMAAABUAAAAHAAAAFUAAAAAAAAAYAwAAFYAAABXAAAABwAAAB0AAAAAAAAAcAwAAAEAAABYAAAAWQAAAB4AAABaAAAAAAAAAIAMAABbAAAAXAAAAAcAAAAfAAAAAAAAAJAMAAABAAAAXQAAAF4AAAAgAAAAXwAAAAAAAACgDAAAYAAAAGEAAAAHAAAAIQAAAAAAAACwDAAAAQAAAGIAAABjAAAAIgAAAGQAAAAAAAAAwAwAAGUAAABmAAAABwAAACMAAAAAAAAA0AwAAAEAAABnAAAAaAAAACQAAABpAAAAAAAAAOAMAABqAAAAawAAAAcAAAAlAAAAAAAAAPAMAAABAAAAbAAAAG0AAAAmAAAAbgAAAAAAAAAADQAAbwAAAHAAAAAHAAAAJwAAAAAAAAAQDQAAAQAAAHEAAAByAAAAKAAAAHMAAAAoDQAAyA8AACgNAAAIEAAAEBAAACgNAABQDQAAyA8AAFANAAAgEAAAyA8AAFANAAAIEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABsVAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwDgAAdAAAAHUAAAB2AAAAdwAAAAIAAAABAAAAAQAAAAEAAAAAAAAAGA8AAHQAAAB4AAAAdgAAAHcAAAACAAAAAgAAAAIAAAACAAAAAAAAACgPAAB5AAAAegAAAAQAAAAAAAAAOA8AAHsAAAB8AAAABQAAAAAAAABIDwAACAAAAH0AAAABAAAAAAAAAFgPAAB7AAAAfgAAAAUAAAAAAAAAaA8AAHsAAAB/AAAABQAAAAAAAAC4DwAAdAAAAIAAAAB2AAAAdwAAAAMAAAAAAAAAiA8AAHQAAACBAAAAdgAAAHcAAAAEAAAAAAAAADgQAAB0AAAAggAAAHYAAAB3AAAAAgAAAAMAAAADAAAAAwAAAAAAAABIEAAAgwAAAIQAAAAGAAAAAAAAAHgQAACFAAAAhgAAAAcAAAABAAAABQAAAAYAAAACAAAAAAAAAKAQAACFAAAAhwAAAAgAAAADAAAABQAAAAYAAAAEAAAA4BcAAAQYAAAAAAAAsBAAAIgAAACJAAAAAQAAAExBU1ppcABvcGVuAGdldFBvaW50AGdldENvdW50AER5bmFtaWNMQVNaaXAAYWRkRmllbGRGbG9hdGluZwBhZGRGaWVsZFNpZ25lZABhZGRGaWVsZFVuc2lnbmVkAE5TdDNfXzIyMF9fc2hhcmVkX3B0cl9wb2ludGVySVBONmxhc3ppcDdzdHJlYW1zMTNtZW1vcnlfc3RyZWFtRU5TXzE0ZGVmYXVsdF9kZWxldGVJUzNfRUVOU185YWxsb2NhdG9ySVMzX0VFRUUATlN0M19fMjE0ZGVmYXVsdF9kZWxldGVJTjZsYXN6aXA3c3RyZWFtczEzbWVtb3J5X3N0cmVhbUVFRQBOU3QzX18yMjBfX3NoYXJlZF9wdHJfcG9pbnRlcklQTjZsYXN6aXAyaW82cmVhZGVyMTBiYXNpY19maWxlSU5TMV83c3RyZWFtczEzbWVtb3J5X3N0cmVhbUVFRU5TXzE0ZGVmYXVsdF9kZWxldGVJUzdfRUVOU185YWxsb2NhdG9ySVM3X0VFRUUATlN0M19fMjE0ZGVmYXVsdF9kZWxldGVJTjZsYXN6aXAyaW82cmVhZGVyMTBiYXNpY19maWxlSU5TMV83c3RyZWFtczEzbWVtb3J5X3N0cmVhbUVFRUVFAExBU0YATjZsYXN6aXAxM2ludmFsaWRfbWFnaWNFAGFsbG9jYXRvcjxUPjo6YWxsb2NhdGUoc2l6ZV90IG4pICduJyBleGNlZWRzIG1heGltdW0gc3VwcG9ydGVkIHNpemUARmlsZSBtYWdpYyBpcyBub3QgdmFsaWQATlN0M19fMjEwX19mdW5jdGlvbjZfX2Z1bmNJWk42bGFzemlwMmlvNnJlYWRlcjEwYmFzaWNfZmlsZUlOUzJfN3N0cmVhbXMxM21lbW9yeV9zdHJlYW1FRTExX3ZhbGlkYXRvcnNFdkVVbFJOUzNfNmhlYWRlckVFX05TXzlhbGxvY2F0b3JJU0JfRUVGdlNBX0VFRQBOU3QzX18yMTBfX2Z1bmN0aW9uNl9fYmFzZUlGdlJONmxhc3ppcDJpbzZoZWFkZXJFRUVFAE42bGFzemlwMjFvbGRfc3R5bGVfY29tcHJlc3Npb25FAE42bGFzemlwMTRub3RfY29tcHJlc3NlZEUAVGhlIGZpbGUgc2VlbXMgdG8gaGF2ZSBvbGQgc3R5bGUgY29tcHJlc3Npb24gd2hpY2ggaXMgbm90IHN1cHBvcnRlZABUaGUgZmlsZSBkb2Vzbid0IHNlZW0gdG8gYmUgY29tcHJlc3NlZABaTjZsYXN6aXAyaW82cmVhZGVyMTBiYXNpY19maWxlSU5TXzdzdHJlYW1zMTNtZW1vcnlfc3RyZWFtRUUxMV92YWxpZGF0b3JzRXZFVWxSTlMwXzZoZWFkZXJFRV8AbGFzemlwIGVuY29kZWQATjZsYXN6aXAxM25vX2xhc3ppcF92bHJFAE42bGFzemlwMjVsYXN6aXBfZm9ybWF0X3Vuc3VwcG9ydGVkRQBPbmx5IExBU3ppcCBQT0lOVFdJU0UgQ0hVTktFRCBkZWNvbXByZXNzb3IgaXMgc3VwcG9ydGVkAE5vIExBU3ppcCBWTFIgd2FzIGZvdW5kIGluIHRoZSBWTFJzIHNlY3Rpb24ATjZsYXN6aXAyMmNodW5rX3RhYmxlX3JlYWRfZXJyb3JFAENodW5rIHRhYmxlIG9mZnNldCA9PSAtMSBpcyBub3Qgc3VwcG9ydGVkIGF0IHRoaXMgdGltZQBONmxhc3ppcDEzbm90X3N1cHBvcnRlZEUATjZsYXN6aXAyNnVua25vd25fY2h1bmtfdGFibGVfZm9ybWF0RQBjaHVua19zaXplID09IHVpbnQubWF4IGlzIG5vdCBzdXBwb3J0ZWQgYXQgdGhpcyB0aW1lLgBUaGVyZSB3YXMgYSBwcm9ibGVtIHJlYWRpbmcgdGhlIGNodW5rIHRhYmxlAFRoZSBjaHVuayB0YWJsZSB2ZXJzaW9uIG51bWJlciBpcyB1bmtub3duAE42bGFzemlwMTFlbmRfb2ZfZmlsZUUAUmVhY2hlZCBFbmQgb2YgZmlsZQBJbnZhbGlkIG51bWJlciBvZiBzeW1ib2xzAE5TdDNfXzIyMF9fc2hhcmVkX3B0cl9wb2ludGVySVBONmxhc3ppcDhkZWNvZGVyczEwYXJpdGhtZXRpY0lOUzFfMmlvMThfX2lmc3RyZWFtX3dyYXBwZXJJTlMxXzdzdHJlYW1zMTNtZW1vcnlfc3RyZWFtRUVFRUVOU18xNGRlZmF1bHRfZGVsZXRlSVM5X0VFTlNfOWFsbG9jYXRvcklTOV9FRUVFAE5TdDNfXzIxNGRlZmF1bHRfZGVsZXRlSU42bGFzemlwOGRlY29kZXJzMTBhcml0aG1ldGljSU5TMV8yaW8xOF9faWZzdHJlYW1fd3JhcHBlcklOUzFfN3N0cmVhbXMxM21lbW9yeV9zdHJlYW1FRUVFRUVFAE42bGFzemlwMTl1bmtub3duX3NjaGVtYV90eXBlRQBUaGUgTEFaIHNjaGVtYSBpcyBub3QgcmVjb2duaXplZABONmxhc3ppcDdmb3JtYXRzMjZkeW5hbWljX2ZpZWxkX2RlY29tcHJlc3NvcklOU184ZGVjb2RlcnMxMGFyaXRobWV0aWNJTlNfMmlvMThfX2lmc3RyZWFtX3dyYXBwZXJJTlNfN3N0cmVhbXMxM21lbW9yeV9zdHJlYW1FRUVFRUVFAE42bGFzemlwN2Zvcm1hdHMyMGR5bmFtaWNfZGVjb21wcmVzc29yRQBOU3QzX18yMjBfX3NoYXJlZF9wdHJfcG9pbnRlcklQTjZsYXN6aXA3Zm9ybWF0czI2ZHluYW1pY19maWVsZF9kZWNvbXByZXNzb3JJTlMxXzhkZWNvZGVyczEwYXJpdGhtZXRpY0lOUzFfMmlvMThfX2lmc3RyZWFtX3dyYXBwZXJJTlMxXzdzdHJlYW1zMTNtZW1vcnlfc3RyZWFtRUVFRUVFRU5TXzE0ZGVmYXVsdF9kZWxldGVJU0NfRUVOU185YWxsb2NhdG9ySVNDX0VFRUUATlN0M19fMjE0ZGVmYXVsdF9kZWxldGVJTjZsYXN6aXA3Zm9ybWF0czI2ZHluYW1pY19maWVsZF9kZWNvbXByZXNzb3JJTlMxXzhkZWNvZGVyczEwYXJpdGhtZXRpY0lOUzFfMmlvMThfX2lmc3RyZWFtX3dyYXBwZXJJTlMxXzdzdHJlYW1zMTNtZW1vcnlfc3RyZWFtRUVFRUVFRUVFAE42bGFzemlwN2Zvcm1hdHMyNmR5bmFtaWNfZGVjb21wcmVzc29yX2ZpZWxkSU5TXzhkZWNvZGVyczEwYXJpdGhtZXRpY0lOU18yaW8xOF9faWZzdHJlYW1fd3JhcHBlcklOU183c3RyZWFtczEzbWVtb3J5X3N0cmVhbUVFRUVFTlMwXzVmaWVsZElOUzBfM2xhczdwb2ludDEwRU5TMF8yMHN0YW5kYXJkX2RpZmZfbWV0aG9kSVNDX0VFRUVFRQBONmxhc3ppcDdmb3JtYXRzMTBiYXNlX2ZpZWxkRQBOU3QzX18yMjBfX3NoYXJlZF9wdHJfcG9pbnRlcklQTjZsYXN6aXA3Zm9ybWF0czI2ZHluYW1pY19kZWNvbXByZXNzb3JfZmllbGRJTlMxXzhkZWNvZGVyczEwYXJpdGhtZXRpY0lOUzFfMmlvMThfX2lmc3RyZWFtX3dyYXBwZXJJTlMxXzdzdHJlYW1zMTNtZW1vcnlfc3RyZWFtRUVFRUVOUzJfNWZpZWxkSU5TMl8zbGFzN3BvaW50MTBFTlMyXzIwc3RhbmRhcmRfZGlmZl9tZXRob2RJU0VfRUVFRUVFTlNfMTRkZWZhdWx0X2RlbGV0ZUlTSV9FRU5TXzlhbGxvY2F0b3JJU0lfRUVFRQBOU3QzX18yMTRkZWZhdWx0X2RlbGV0ZUlONmxhc3ppcDdmb3JtYXRzMjZkeW5hbWljX2RlY29tcHJlc3Nvcl9maWVsZElOUzFfOGRlY29kZXJzMTBhcml0aG1ldGljSU5TMV8yaW8xOF9faWZzdHJlYW1fd3JhcHBlcklOUzFfN3N0cmVhbXMxM21lbW9yeV9zdHJlYW1FRUVFRU5TMl81ZmllbGRJTlMyXzNsYXM3cG9pbnQxMEVOUzJfMjBzdGFuZGFyZF9kaWZmX21ldGhvZElTRV9FRUVFRUVFRQBONmxhc3ppcDdmb3JtYXRzMjZkeW5hbWljX2RlY29tcHJlc3Nvcl9maWVsZElOU184ZGVjb2RlcnMxMGFyaXRobWV0aWNJTlNfMmlvMThfX2lmc3RyZWFtX3dyYXBwZXJJTlNfN3N0cmVhbXMxM21lbW9yeV9zdHJlYW1FRUVFRU5TMF81ZmllbGRJTlMwXzNsYXM3Z3BzdGltZUVOUzBfMjBzdGFuZGFyZF9kaWZmX21ldGhvZElTQ19FRUVFRUUATlN0M19fMjIwX19zaGFyZWRfcHRyX3BvaW50ZXJJUE42bGFzemlwN2Zvcm1hdHMyNmR5bmFtaWNfZGVjb21wcmVzc29yX2ZpZWxkSU5TMV84ZGVjb2RlcnMxMGFyaXRobWV0aWNJTlMxXzJpbzE4X19pZnN0cmVhbV93cmFwcGVySU5TMV83c3RyZWFtczEzbWVtb3J5X3N0cmVhbUVFRUVFTlMyXzVmaWVsZElOUzJfM2xhczdncHN0aW1lRU5TMl8yMHN0YW5kYXJkX2RpZmZfbWV0aG9kSVNFX0VFRUVFRU5TXzE0ZGVmYXVsdF9kZWxldGVJU0lfRUVOU185YWxsb2NhdG9ySVNJX0VFRUUATlN0M19fMjE0ZGVmYXVsdF9kZWxldGVJTjZsYXN6aXA3Zm9ybWF0czI2ZHluYW1pY19kZWNvbXByZXNzb3JfZmllbGRJTlMxXzhkZWNvZGVyczEwYXJpdGhtZXRpY0lOUzFfMmlvMThfX2lmc3RyZWFtX3dyYXBwZXJJTlMxXzdzdHJlYW1zMTNtZW1vcnlfc3RyZWFtRUVFRUVOUzJfNWZpZWxkSU5TMl8zbGFzN2dwc3RpbWVFTlMyXzIwc3RhbmRhcmRfZGlmZl9tZXRob2RJU0VfRUVFRUVFRUUATjZsYXN6aXA3Zm9ybWF0czI2ZHluYW1pY19kZWNvbXByZXNzb3JfZmllbGRJTlNfOGRlY29kZXJzMTBhcml0aG1ldGljSU5TXzJpbzE4X19pZnN0cmVhbV93cmFwcGVySU5TXzdzdHJlYW1zMTNtZW1vcnlfc3RyZWFtRUVFRUVOUzBfNWZpZWxkSU5TMF8zbGFzM3JnYkVOUzBfMjBzdGFuZGFyZF9kaWZmX21ldGhvZElTQ19FRUVFRUUATlN0M19fMjIwX19zaGFyZWRfcHRyX3BvaW50ZXJJUE42bGFzemlwN2Zvcm1hdHMyNmR5bmFtaWNfZGVjb21wcmVzc29yX2ZpZWxkSU5TMV84ZGVjb2RlcnMxMGFyaXRobWV0aWNJTlMxXzJpbzE4X19pZnN0cmVhbV93cmFwcGVySU5TMV83c3RyZWFtczEzbWVtb3J5X3N0cmVhbUVFRUVFTlMyXzVmaWVsZElOUzJfM2xhczNyZ2JFTlMyXzIwc3RhbmRhcmRfZGlmZl9tZXRob2RJU0VfRUVFRUVFTlNfMTRkZWZhdWx0X2RlbGV0ZUlTSV9FRU5TXzlhbGxvY2F0b3JJU0lfRUVFRQBOU3QzX18yMTRkZWZhdWx0X2RlbGV0ZUlONmxhc3ppcDdmb3JtYXRzMjZkeW5hbWljX2RlY29tcHJlc3Nvcl9maWVsZElOUzFfOGRlY29kZXJzMTBhcml0aG1ldGljSU5TMV8yaW8xOF9faWZzdHJlYW1fd3JhcHBlcklOUzFfN3N0cmVhbXMxM21lbW9yeV9zdHJlYW1FRUVFRU5TMl81ZmllbGRJTlMyXzNsYXMzcmdiRU5TMl8yMHN0YW5kYXJkX2RpZmZfbWV0aG9kSVNFX0VFRUVFRUVFAE42bGFzemlwN2Zvcm1hdHMyNmR5bmFtaWNfZGVjb21wcmVzc29yX2ZpZWxkSU5TXzhkZWNvZGVyczEwYXJpdGhtZXRpY0lOU18yaW8xOF9faWZzdHJlYW1fd3JhcHBlcklOU183c3RyZWFtczEzbWVtb3J5X3N0cmVhbUVFRUVFTlMwXzVmaWVsZElOUzBfM2xhczEwZXh0cmFieXRlc0VOUzBfMjBzdGFuZGFyZF9kaWZmX21ldGhvZElTQ19FRUVFRUUATlN0M19fMjIwX19zaGFyZWRfcHRyX3BvaW50ZXJJUE42bGFzemlwN2Zvcm1hdHMyNmR5bmFtaWNfZGVjb21wcmVzc29yX2ZpZWxkSU5TMV84ZGVjb2RlcnMxMGFyaXRobWV0aWNJTlMxXzJpbzE4X19pZnN0cmVhbV93cmFwcGVySU5TMV83c3RyZWFtczEzbWVtb3J5X3N0cmVhbUVFRUVFTlMyXzVmaWVsZElOUzJfM2xhczEwZXh0cmFieXRlc0VOUzJfMjBzdGFuZGFyZF9kaWZmX21ldGhvZElTRV9FRUVFRUVOU18xNGRlZmF1bHRfZGVsZXRlSVNJX0VFTlNfOWFsbG9jYXRvcklTSV9FRUVFAE5TdDNfXzIxNGRlZmF1bHRfZGVsZXRlSU42bGFzemlwN2Zvcm1hdHMyNmR5bmFtaWNfZGVjb21wcmVzc29yX2ZpZWxkSU5TMV84ZGVjb2RlcnMxMGFyaXRobWV0aWNJTlMxXzJpbzE4X19pZnN0cmVhbV93cmFwcGVySU5TMV83c3RyZWFtczEzbWVtb3J5X3N0cmVhbUVFRUVFTlMyXzVmaWVsZElOUzJfM2xhczEwZXh0cmFieXRlc0VOUzJfMjBzdGFuZGFyZF9kaWZmX21ldGhvZElTRV9FRUVFRUVFRQBONmxhc3ppcDdmb3JtYXRzMjFkeW5hbWljX2RlY29tcHJlc3NvcjFJTlNfOGRlY29kZXJzMTBhcml0aG1ldGljSU5TXzJpbzE4X19pZnN0cmVhbV93cmFwcGVySU5TXzdzdHJlYW1zMTNtZW1vcnlfc3RyZWFtRUVFRUVOUzBfMTlyZWNvcmRfZGVjb21wcmVzc29ySUpOUzBfNWZpZWxkSU5TMF8zbGFzN3BvaW50MTBFTlMwXzIwc3RhbmRhcmRfZGlmZl9tZXRob2RJU0RfRUVFRUVFRUVFAE5TdDNfXzIyMF9fc2hhcmVkX3B0cl9wb2ludGVySVBONmxhc3ppcDdmb3JtYXRzMjFkeW5hbWljX2RlY29tcHJlc3NvcjFJTlMxXzhkZWNvZGVyczEwYXJpdGhtZXRpY0lOUzFfMmlvMThfX2lmc3RyZWFtX3dyYXBwZXJJTlMxXzdzdHJlYW1zMTNtZW1vcnlfc3RyZWFtRUVFRUVOUzJfMTlyZWNvcmRfZGVjb21wcmVzc29ySUpOUzJfNWZpZWxkSU5TMl8zbGFzN3BvaW50MTBFTlMyXzIwc3RhbmRhcmRfZGlmZl9tZXRob2RJU0ZfRUVFRUVFRUVFTlNfMTRkZWZhdWx0X2RlbGV0ZUlTS19FRU5TXzlhbGxvY2F0b3JJU0tfRUVFRQBOU3QzX18yMTRkZWZhdWx0X2RlbGV0ZUlONmxhc3ppcDdmb3JtYXRzMjFkeW5hbWljX2RlY29tcHJlc3NvcjFJTlMxXzhkZWNvZGVyczEwYXJpdGhtZXRpY0lOUzFfMmlvMThfX2lmc3RyZWFtX3dyYXBwZXJJTlMxXzdzdHJlYW1zMTNtZW1vcnlfc3RyZWFtRUVFRUVOUzJfMTlyZWNvcmRfZGVjb21wcmVzc29ySUpOUzJfNWZpZWxkSU5TMl8zbGFzN3BvaW50MTBFTlMyXzIwc3RhbmRhcmRfZGlmZl9tZXRob2RJU0ZfRUVFRUVFRUVFRUUATjZsYXN6aXA3Zm9ybWF0czIxZHluYW1pY19kZWNvbXByZXNzb3IxSU5TXzhkZWNvZGVyczEwYXJpdGhtZXRpY0lOU18yaW8xOF9faWZzdHJlYW1fd3JhcHBlcklOU183c3RyZWFtczEzbWVtb3J5X3N0cmVhbUVFRUVFTlMwXzE5cmVjb3JkX2RlY29tcHJlc3NvcklKTlMwXzVmaWVsZElOUzBfM2xhczdwb2ludDEwRU5TMF8yMHN0YW5kYXJkX2RpZmZfbWV0aG9kSVNEX0VFRUVOU0JfSU5TQ183Z3BzdGltZUVOU0VfSVNIX0VFRUVFRUVFRQBOU3QzX18yMjBfX3NoYXJlZF9wdHJfcG9pbnRlcklQTjZsYXN6aXA3Zm9ybWF0czIxZHluYW1pY19kZWNvbXByZXNzb3IxSU5TMV84ZGVjb2RlcnMxMGFyaXRobWV0aWNJTlMxXzJpbzE4X19pZnN0cmVhbV93cmFwcGVySU5TMV83c3RyZWFtczEzbWVtb3J5X3N0cmVhbUVFRUVFTlMyXzE5cmVjb3JkX2RlY29tcHJlc3NvcklKTlMyXzVmaWVsZElOUzJfM2xhczdwb2ludDEwRU5TMl8yMHN0YW5kYXJkX2RpZmZfbWV0aG9kSVNGX0VFRUVOU0RfSU5TRV83Z3BzdGltZUVOU0dfSVNKX0VFRUVFRUVFRU5TXzE0ZGVmYXVsdF9kZWxldGVJU05fRUVOU185YWxsb2NhdG9ySVNOX0VFRUUATlN0M19fMjE0ZGVmYXVsdF9kZWxldGVJTjZsYXN6aXA3Zm9ybWF0czIxZHluYW1pY19kZWNvbXByZXNzb3IxSU5TMV84ZGVjb2RlcnMxMGFyaXRobWV0aWNJTlMxXzJpbzE4X19pZnN0cmVhbV93cmFwcGVySU5TMV83c3RyZWFtczEzbWVtb3J5X3N0cmVhbUVFRUVFTlMyXzE5cmVjb3JkX2RlY29tcHJlc3NvcklKTlMyXzVmaWVsZElOUzJfM2xhczdwb2ludDEwRU5TMl8yMHN0YW5kYXJkX2RpZmZfbWV0aG9kSVNGX0VFRUVOU0RfSU5TRV83Z3BzdGltZUVOU0dfSVNKX0VFRUVFRUVFRUVFAE42bGFzemlwN2Zvcm1hdHMyMWR5bmFtaWNfZGVjb21wcmVzc29yMUlOU184ZGVjb2RlcnMxMGFyaXRobWV0aWNJTlNfMmlvMThfX2lmc3RyZWFtX3dyYXBwZXJJTlNfN3N0cmVhbXMxM21lbW9yeV9zdHJlYW1FRUVFRU5TMF8xOXJlY29yZF9kZWNvbXByZXNzb3JJSk5TMF81ZmllbGRJTlMwXzNsYXM3cG9pbnQxMEVOUzBfMjBzdGFuZGFyZF9kaWZmX21ldGhvZElTRF9FRUVFTlNCX0lOU0NfM3JnYkVOU0VfSVNIX0VFRUVFRUVFRQBOU3QzX18yMjBfX3NoYXJlZF9wdHJfcG9pbnRlcklQTjZsYXN6aXA3Zm9ybWF0czIxZHluYW1pY19kZWNvbXByZXNzb3IxSU5TMV84ZGVjb2RlcnMxMGFyaXRobWV0aWNJTlMxXzJpbzE4X19pZnN0cmVhbV93cmFwcGVySU5TMV83c3RyZWFtczEzbWVtb3J5X3N0cmVhbUVFRUVFTlMyXzE5cmVjb3JkX2RlY29tcHJlc3NvcklKTlMyXzVmaWVsZElOUzJfM2xhczdwb2ludDEwRU5TMl8yMHN0YW5kYXJkX2RpZmZfbWV0aG9kSVNGX0VFRUVOU0RfSU5TRV8zcmdiRU5TR19JU0pfRUVFRUVFRUVFTlNfMTRkZWZhdWx0X2RlbGV0ZUlTTl9FRU5TXzlhbGxvY2F0b3JJU05fRUVFRQBOU3QzX18yMTRkZWZhdWx0X2RlbGV0ZUlONmxhc3ppcDdmb3JtYXRzMjFkeW5hbWljX2RlY29tcHJlc3NvcjFJTlMxXzhkZWNvZGVyczEwYXJpdGhtZXRpY0lOUzFfMmlvMThfX2lmc3RyZWFtX3dyYXBwZXJJTlMxXzdzdHJlYW1zMTNtZW1vcnlfc3RyZWFtRUVFRUVOUzJfMTlyZWNvcmRfZGVjb21wcmVzc29ySUpOUzJfNWZpZWxkSU5TMl8zbGFzN3BvaW50MTBFTlMyXzIwc3RhbmRhcmRfZGlmZl9tZXRob2RJU0ZfRUVFRU5TRF9JTlNFXzNyZ2JFTlNHX0lTSl9FRUVFRUVFRUVFRQBONmxhc3ppcDdmb3JtYXRzMjFkeW5hbWljX2RlY29tcHJlc3NvcjFJTlNfOGRlY29kZXJzMTBhcml0aG1ldGljSU5TXzJpbzE4X19pZnN0cmVhbV93cmFwcGVySU5TXzdzdHJlYW1zMTNtZW1vcnlfc3RyZWFtRUVFRUVOUzBfMTlyZWNvcmRfZGVjb21wcmVzc29ySUpOUzBfNWZpZWxkSU5TMF8zbGFzN3BvaW50MTBFTlMwXzIwc3RhbmRhcmRfZGlmZl9tZXRob2RJU0RfRUVFRU5TQl9JTlNDXzdncHN0aW1lRU5TRV9JU0hfRUVFRU5TQl9JTlNDXzNyZ2JFTlNFX0lTS19FRUVFRUVFRUUATlN0M19fMjIwX19zaGFyZWRfcHRyX3BvaW50ZXJJUE42bGFzemlwN2Zvcm1hdHMyMWR5bmFtaWNfZGVjb21wcmVzc29yMUlOUzFfOGRlY29kZXJzMTBhcml0aG1ldGljSU5TMV8yaW8xOF9faWZzdHJlYW1fd3JhcHBlcklOUzFfN3N0cmVhbXMxM21lbW9yeV9zdHJlYW1FRUVFRU5TMl8xOXJlY29yZF9kZWNvbXByZXNzb3JJSk5TMl81ZmllbGRJTlMyXzNsYXM3cG9pbnQxMEVOUzJfMjBzdGFuZGFyZF9kaWZmX21ldGhvZElTRl9FRUVFTlNEX0lOU0VfN2dwc3RpbWVFTlNHX0lTSl9FRUVFTlNEX0lOU0VfM3JnYkVOU0dfSVNNX0VFRUVFRUVFRU5TXzE0ZGVmYXVsdF9kZWxldGVJU1FfRUVOU185YWxsb2NhdG9ySVNRX0VFRUUATlN0M19fMjE0ZGVmYXVsdF9kZWxldGVJTjZsYXN6aXA3Zm9ybWF0czIxZHluYW1pY19kZWNvbXByZXNzb3IxSU5TMV84ZGVjb2RlcnMxMGFyaXRobWV0aWNJTlMxXzJpbzE4X19pZnN0cmVhbV93cmFwcGVySU5TMV83c3RyZWFtczEzbWVtb3J5X3N0cmVhbUVFRUVFTlMyXzE5cmVjb3JkX2RlY29tcHJlc3NvcklKTlMyXzVmaWVsZElOUzJfM2xhczdwb2ludDEwRU5TMl8yMHN0YW5kYXJkX2RpZmZfbWV0aG9kSVNGX0VFRUVOU0RfSU5TRV83Z3BzdGltZUVOU0dfSVNKX0VFRUVOU0RfSU5TRV8zcmdiRU5TR19JU01fRUVFRUVFRUVFRUUATlN0M19fMjIwX19zaGFyZWRfcHRyX3BvaW50ZXJJUDEwYnVmX3N0cmVhbU5TXzE0ZGVmYXVsdF9kZWxldGVJUzFfRUVOU185YWxsb2NhdG9ySVMxX0VFRUUATlN0M19fMjE0ZGVmYXVsdF9kZWxldGVJMTBidWZfc3RyZWFtRUUATlN0M19fMjIwX19zaGFyZWRfcHRyX3BvaW50ZXJJUE42bGFzemlwOGRlY29kZXJzMTBhcml0aG1ldGljSTEwYnVmX3N0cmVhbUVFTlNfMTRkZWZhdWx0X2RlbGV0ZUlTNV9FRU5TXzlhbGxvY2F0b3JJUzVfRUVFRQBOU3QzX18yMTRkZWZhdWx0X2RlbGV0ZUlONmxhc3ppcDhkZWNvZGVyczEwYXJpdGhtZXRpY0kxMGJ1Zl9zdHJlYW1FRUVFAE42bGFzemlwN2Zvcm1hdHMyNmR5bmFtaWNfZmllbGRfZGVjb21wcmVzc29ySU5TXzhkZWNvZGVyczEwYXJpdGhtZXRpY0kxMGJ1Zl9zdHJlYW1FRUVFAE5TdDNfXzIyMF9fc2hhcmVkX3B0cl9wb2ludGVySVBONmxhc3ppcDdmb3JtYXRzMjZkeW5hbWljX2ZpZWxkX2RlY29tcHJlc3NvcklOUzFfOGRlY29kZXJzMTBhcml0aG1ldGljSTEwYnVmX3N0cmVhbUVFRUVOU18xNGRlZmF1bHRfZGVsZXRlSVM4X0VFTlNfOWFsbG9jYXRvcklTOF9FRUVFAE5TdDNfXzIxNGRlZmF1bHRfZGVsZXRlSU42bGFzemlwN2Zvcm1hdHMyNmR5bmFtaWNfZmllbGRfZGVjb21wcmVzc29ySU5TMV84ZGVjb2RlcnMxMGFyaXRobWV0aWNJMTBidWZfc3RyZWFtRUVFRUVFAE42bGFzemlwN2Zvcm1hdHMyNmR5bmFtaWNfZGVjb21wcmVzc29yX2ZpZWxkSU5TXzhkZWNvZGVyczEwYXJpdGhtZXRpY0kxMGJ1Zl9zdHJlYW1FRU5TMF81ZmllbGRJaU5TMF8yMHN0YW5kYXJkX2RpZmZfbWV0aG9kSWlFRUVFRUUATlN0M19fMjIwX19zaGFyZWRfcHRyX3BvaW50ZXJJUE42bGFzemlwN2Zvcm1hdHMyNmR5bmFtaWNfZGVjb21wcmVzc29yX2ZpZWxkSU5TMV84ZGVjb2RlcnMxMGFyaXRobWV0aWNJMTBidWZfc3RyZWFtRUVOUzJfNWZpZWxkSWlOUzJfMjBzdGFuZGFyZF9kaWZmX21ldGhvZElpRUVFRUVFTlNfMTRkZWZhdWx0X2RlbGV0ZUlTQ19FRU5TXzlhbGxvY2F0b3JJU0NfRUVFRQBOU3QzX18yMTRkZWZhdWx0X2RlbGV0ZUlONmxhc3ppcDdmb3JtYXRzMjZkeW5hbWljX2RlY29tcHJlc3Nvcl9maWVsZElOUzFfOGRlY29kZXJzMTBhcml0aG1ldGljSTEwYnVmX3N0cmVhbUVFTlMyXzVmaWVsZElpTlMyXzIwc3RhbmRhcmRfZGlmZl9tZXRob2RJaUVFRUVFRUVFAE42bGFzemlwN2Zvcm1hdHMyNmR5bmFtaWNfZGVjb21wcmVzc29yX2ZpZWxkSU5TXzhkZWNvZGVyczEwYXJpdGhtZXRpY0kxMGJ1Zl9zdHJlYW1FRU5TMF81ZmllbGRJak5TMF8yMHN0YW5kYXJkX2RpZmZfbWV0aG9kSWpFRUVFRUUATlN0M19fMjIwX19zaGFyZWRfcHRyX3BvaW50ZXJJUE42bGFzemlwN2Zvcm1hdHMyNmR5bmFtaWNfZGVjb21wcmVzc29yX2ZpZWxkSU5TMV84ZGVjb2RlcnMxMGFyaXRobWV0aWNJMTBidWZfc3RyZWFtRUVOUzJfNWZpZWxkSWpOUzJfMjBzdGFuZGFyZF9kaWZmX21ldGhvZElqRUVFRUVFTlNfMTRkZWZhdWx0X2RlbGV0ZUlTQ19FRU5TXzlhbGxvY2F0b3JJU0NfRUVFRQBOU3QzX18yMTRkZWZhdWx0X2RlbGV0ZUlONmxhc3ppcDdmb3JtYXRzMjZkeW5hbWljX2RlY29tcHJlc3Nvcl9maWVsZElOUzFfOGRlY29kZXJzMTBhcml0aG1ldGljSTEwYnVmX3N0cmVhbUVFTlMyXzVmaWVsZElqTlMyXzIwc3RhbmRhcmRfZGlmZl9tZXRob2RJakVFRUVFRUVFAE42bGFzemlwN2Zvcm1hdHMyNmR5bmFtaWNfZGVjb21wcmVzc29yX2ZpZWxkSU5TXzhkZWNvZGVyczEwYXJpdGhtZXRpY0kxMGJ1Zl9zdHJlYW1FRU5TMF81ZmllbGRJYU5TMF8yMHN0YW5kYXJkX2RpZmZfbWV0aG9kSWFFRUVFRUUATlN0M19fMjIwX19zaGFyZWRfcHRyX3BvaW50ZXJJUE42bGFzemlwN2Zvcm1hdHMyNmR5bmFtaWNfZGVjb21wcmVzc29yX2ZpZWxkSU5TMV84ZGVjb2RlcnMxMGFyaXRobWV0aWNJMTBidWZfc3RyZWFtRUVOUzJfNWZpZWxkSWFOUzJfMjBzdGFuZGFyZF9kaWZmX21ldGhvZElhRUVFRUVFTlNfMTRkZWZhdWx0X2RlbGV0ZUlTQ19FRU5TXzlhbGxvY2F0b3JJU0NfRUVFRQBOU3QzX18yMTRkZWZhdWx0X2RlbGV0ZUlONmxhc3ppcDdmb3JtYXRzMjZkeW5hbWljX2RlY29tcHJlc3Nvcl9maWVsZElOUzFfOGRlY29kZXJzMTBhcml0aG1ldGljSTEwYnVmX3N0cmVhbUVFTlMyXzVmaWVsZElhTlMyXzIwc3RhbmRhcmRfZGlmZl9tZXRob2RJYUVFRUVFRUVFAE42bGFzemlwN2Zvcm1hdHMyNmR5bmFtaWNfZGVjb21wcmVzc29yX2ZpZWxkSU5TXzhkZWNvZGVyczEwYXJpdGhtZXRpY0kxMGJ1Zl9zdHJlYW1FRU5TMF81ZmllbGRJc05TMF8yMHN0YW5kYXJkX2RpZmZfbWV0aG9kSXNFRUVFRUUATlN0M19fMjIwX19zaGFyZWRfcHRyX3BvaW50ZXJJUE42bGFzemlwN2Zvcm1hdHMyNmR5bmFtaWNfZGVjb21wcmVzc29yX2ZpZWxkSU5TMV84ZGVjb2RlcnMxMGFyaXRobWV0aWNJMTBidWZfc3RyZWFtRUVOUzJfNWZpZWxkSXNOUzJfMjBzdGFuZGFyZF9kaWZmX21ldGhvZElzRUVFRUVFTlNfMTRkZWZhdWx0X2RlbGV0ZUlTQ19FRU5TXzlhbGxvY2F0b3JJU0NfRUVFRQBOU3QzX18yMTRkZWZhdWx0X2RlbGV0ZUlONmxhc3ppcDdmb3JtYXRzMjZkeW5hbWljX2RlY29tcHJlc3Nvcl9maWVsZElOUzFfOGRlY29kZXJzMTBhcml0aG1ldGljSTEwYnVmX3N0cmVhbUVFTlMyXzVmaWVsZElzTlMyXzIwc3RhbmRhcmRfZGlmZl9tZXRob2RJc0VFRUVFRUVFAE42bGFzemlwN2Zvcm1hdHMyNmR5bmFtaWNfZGVjb21wcmVzc29yX2ZpZWxkSU5TXzhkZWNvZGVyczEwYXJpdGhtZXRpY0kxMGJ1Zl9zdHJlYW1FRU5TMF81ZmllbGRJaE5TMF8yMHN0YW5kYXJkX2RpZmZfbWV0aG9kSWhFRUVFRUUATlN0M19fMjIwX19zaGFyZWRfcHRyX3BvaW50ZXJJUE42bGFzemlwN2Zvcm1hdHMyNmR5bmFtaWNfZGVjb21wcmVzc29yX2ZpZWxkSU5TMV84ZGVjb2RlcnMxMGFyaXRobWV0aWNJMTBidWZfc3RyZWFtRUVOUzJfNWZpZWxkSWhOUzJfMjBzdGFuZGFyZF9kaWZmX21ldGhvZEloRUVFRUVFTlNfMTRkZWZhdWx0X2RlbGV0ZUlTQ19FRU5TXzlhbGxvY2F0b3JJU0NfRUVFRQBOU3QzX18yMTRkZWZhdWx0X2RlbGV0ZUlONmxhc3ppcDdmb3JtYXRzMjZkeW5hbWljX2RlY29tcHJlc3Nvcl9maWVsZElOUzFfOGRlY29kZXJzMTBhcml0aG1ldGljSTEwYnVmX3N0cmVhbUVFTlMyXzVmaWVsZEloTlMyXzIwc3RhbmRhcmRfZGlmZl9tZXRob2RJaEVFRUVFRUVFAE42bGFzemlwN2Zvcm1hdHMyNmR5bmFtaWNfZGVjb21wcmVzc29yX2ZpZWxkSU5TXzhkZWNvZGVyczEwYXJpdGhtZXRpY0kxMGJ1Zl9zdHJlYW1FRU5TMF81ZmllbGRJdE5TMF8yMHN0YW5kYXJkX2RpZmZfbWV0aG9kSXRFRUVFRUUATlN0M19fMjIwX19zaGFyZWRfcHRyX3BvaW50ZXJJUE42bGFzemlwN2Zvcm1hdHMyNmR5bmFtaWNfZGVjb21wcmVzc29yX2ZpZWxkSU5TMV84ZGVjb2RlcnMxMGFyaXRobWV0aWNJMTBidWZfc3RyZWFtRUVOUzJfNWZpZWxkSXROUzJfMjBzdGFuZGFyZF9kaWZmX21ldGhvZEl0RUVFRUVFTlNfMTRkZWZhdWx0X2RlbGV0ZUlTQ19FRU5TXzlhbGxvY2F0b3JJU0NfRUVFRQBOU3QzX18yMTRkZWZhdWx0X2RlbGV0ZUlONmxhc3ppcDdmb3JtYXRzMjZkeW5hbWljX2RlY29tcHJlc3Nvcl9maWVsZElOUzFfOGRlY29kZXJzMTBhcml0aG1ldGljSTEwYnVmX3N0cmVhbUVFTlMyXzVmaWVsZEl0TlMyXzIwc3RhbmRhcmRfZGlmZl9tZXRob2RJdEVFRUVFRUVFADZMQVNaaXAAUDZMQVNaaXAAUEs2TEFTWmlwAGlpAHYAdmkAdmlpaWkAdmlpaQBpaWkAMTNEeW5hbWljTEFTWmlwAFAxM0R5bmFtaWNMQVNaaXAAUEsxM0R5bmFtaWNMQVNaaXAAdm9pZABib29sAGNoYXIAc2lnbmVkIGNoYXIAdW5zaWduZWQgY2hhcgBzaG9ydAB1bnNpZ25lZCBzaG9ydABpbnQAdW5zaWduZWQgaW50AGxvbmcAdW5zaWduZWQgbG9uZwBmbG9hdABkb3VibGUAc3RkOjpzdHJpbmcAc3RkOjpiYXNpY19zdHJpbmc8dW5zaWduZWQgY2hhcj4Ac3RkOjp3c3RyaW5nAHN0ZDo6dTE2c3RyaW5nAHN0ZDo6dTMyc3RyaW5nAGVtc2NyaXB0ZW46OnZhbABlbXNjcmlwdGVuOjptZW1vcnlfdmlldzxjaGFyPgBlbXNjcmlwdGVuOjptZW1vcnlfdmlldzxzaWduZWQgY2hhcj4AZW1zY3JpcHRlbjo6bWVtb3J5X3ZpZXc8dW5zaWduZWQgY2hhcj4AZW1zY3JpcHRlbjo6bWVtb3J5X3ZpZXc8c2hvcnQ+AGVtc2NyaXB0ZW46Om1lbW9yeV92aWV3PHVuc2lnbmVkIHNob3J0PgBlbXNjcmlwdGVuOjptZW1vcnlfdmlldzxpbnQ+AGVtc2NyaXB0ZW46Om1lbW9yeV92aWV3PHVuc2lnbmVkIGludD4AZW1zY3JpcHRlbjo6bWVtb3J5X3ZpZXc8bG9uZz4AZW1zY3JpcHRlbjo6bWVtb3J5X3ZpZXc8dW5zaWduZWQgbG9uZz4AZW1zY3JpcHRlbjo6bWVtb3J5X3ZpZXc8aW50OF90PgBlbXNjcmlwdGVuOjptZW1vcnlfdmlldzx1aW50OF90PgBlbXNjcmlwdGVuOjptZW1vcnlfdmlldzxpbnQxNl90PgBlbXNjcmlwdGVuOjptZW1vcnlfdmlldzx1aW50MTZfdD4AZW1zY3JpcHRlbjo6bWVtb3J5X3ZpZXc8aW50MzJfdD4AZW1zY3JpcHRlbjo6bWVtb3J5X3ZpZXc8dWludDMyX3Q+AGVtc2NyaXB0ZW46Om1lbW9yeV92aWV3PGZsb2F0PgBlbXNjcmlwdGVuOjptZW1vcnlfdmlldzxkb3VibGU+AGVtc2NyaXB0ZW46Om1lbW9yeV92aWV3PGxvbmcgZG91YmxlPgBOMTBlbXNjcmlwdGVuMTFtZW1vcnlfdmlld0llRUUATjEwZW1zY3JpcHRlbjExbWVtb3J5X3ZpZXdJZEVFAE4xMGVtc2NyaXB0ZW4xMW1lbW9yeV92aWV3SWZFRQBOMTBlbXNjcmlwdGVuMTFtZW1vcnlfdmlld0ltRUUATjEwZW1zY3JpcHRlbjExbWVtb3J5X3ZpZXdJbEVFAE4xMGVtc2NyaXB0ZW4xMW1lbW9yeV92aWV3SWpFRQBOMTBlbXNjcmlwdGVuMTFtZW1vcnlfdmlld0lpRUUATjEwZW1zY3JpcHRlbjExbWVtb3J5X3ZpZXdJdEVFAE4xMGVtc2NyaXB0ZW4xMW1lbW9yeV92aWV3SXNFRQBOMTBlbXNjcmlwdGVuMTFtZW1vcnlfdmlld0loRUUATjEwZW1zY3JpcHRlbjExbWVtb3J5X3ZpZXdJYUVFAE4xMGVtc2NyaXB0ZW4xMW1lbW9yeV92aWV3SWNFRQBOMTBlbXNjcmlwdGVuM3ZhbEUATlN0M19fMjEyYmFzaWNfc3RyaW5nSURpTlNfMTFjaGFyX3RyYWl0c0lEaUVFTlNfOWFsbG9jYXRvcklEaUVFRUUATlN0M19fMjIxX19iYXNpY19zdHJpbmdfY29tbW9uSUxiMUVFRQBOU3QzX18yMTJiYXNpY19zdHJpbmdJRHNOU18xMWNoYXJfdHJhaXRzSURzRUVOU185YWxsb2NhdG9ySURzRUVFRQBOU3QzX18yMTJiYXNpY19zdHJpbmdJd05TXzExY2hhcl90cmFpdHNJd0VFTlNfOWFsbG9jYXRvckl3RUVFRQBOU3QzX18yMTJiYXNpY19zdHJpbmdJaE5TXzExY2hhcl90cmFpdHNJaEVFTlNfOWFsbG9jYXRvckloRUVFRQBOU3QzX18yMTJiYXNpY19zdHJpbmdJY05TXzExY2hhcl90cmFpdHNJY0VFTlNfOWFsbG9jYXRvckljRUVFRQAtKyAgIDBYMHgAKG51bGwpAC0wWCswWCAwWC0weCsweCAweABpbmYASU5GAG5hbgBOQU4ALgB0ZXJtaW5hdGluZyB3aXRoICVzIGV4Y2VwdGlvbiBvZiB0eXBlICVzOiAlcwB0ZXJtaW5hdGluZyB3aXRoICVzIGV4Y2VwdGlvbiBvZiB0eXBlICVzAHRlcm1pbmF0aW5nIHdpdGggJXMgZm9yZWlnbiBleGNlcHRpb24AdGVybWluYXRpbmcAdW5jYXVnaHQAU3Q5ZXhjZXB0aW9uAE4xMF9fY3h4YWJpdjExNl9fc2hpbV90eXBlX2luZm9FAFN0OXR5cGVfaW5mbwBOMTBfX2N4eGFiaXYxMjBfX3NpX2NsYXNzX3R5cGVfaW5mb0UATjEwX19jeHhhYml2MTE3X19jbGFzc190eXBlX2luZm9FAHRlcm1pbmF0ZV9oYW5kbGVyIHVuZXhwZWN0ZWRseSByZXR1cm5lZABzdGQ6OmJhZF9hbGxvYwBTdDliYWRfYWxsb2MAU3QxMWxvZ2ljX2Vycm9yAFN0MTNydW50aW1lX2Vycm9yAFN0MTJsZW5ndGhfZXJyb3IAU3QxMm91dF9vZl9yYW5nZQBOMTBfX2N4eGFiaXYxMTdfX3BiYXNlX3R5cGVfaW5mb0UATjEwX19jeHhhYml2MTE5X19wb2ludGVyX3R5cGVfaW5mb0UATjEwX19jeHhhYml2MTIwX19mdW5jdGlvbl90eXBlX2luZm9FAE4xMF9fY3h4YWJpdjEyOV9fcG9pbnRlcl90b19tZW1iZXJfdHlwZV9pbmZvRQBQdXJlIHZpcnR1YWwgZnVuY3Rpb24gY2FsbGVkIQBOMTBfX2N4eGFiaXYxMjNfX2Z1bmRhbWVudGFsX3R5cGVfaW5mb0UAdgBEbgBiAGMAaABhAHMAdABpAGoAbABtAGYAZABOMTBfX2N4eGFiaXYxMjFfX3ZtaV9jbGFzc190eXBlX2luZm9FAF9fY3hhX2d1YXJkX2FjcXVpcmUgZGV0ZWN0ZWQgcmVjdXJzaXZlIGluaXRpYWxpemF0aW9uAHN0ZDo6YmFkX2Z1bmN0aW9uX2NhbGwATlN0M19fMjE3YmFkX2Z1bmN0aW9uX2NhbGxFAE5TdDNfXzIxNF9fc2hhcmVkX2NvdW50RQBOU3QzX18yMTlfX3NoYXJlZF93ZWFrX2NvdW50RQBtdXRleCBsb2NrIGZhaWxlZABiYXNpY19zdHJpbmcAdW5zcGVjaWZpZWQgZ2VuZXJpY19jYXRlZ29yeSBlcnJvcgBVbmtub3duIGVycm9yICVkAGdlbmVyaWMATlN0M19fMjI0X19nZW5lcmljX2Vycm9yX2NhdGVnb3J5RQBOU3QzX18yMTJfX2RvX21lc3NhZ2VFAE5TdDNfXzIxNGVycm9yX2NhdGVnb3J5RQB1bnNwZWNpZmllZCBzeXN0ZW1fY2F0ZWdvcnkgZXJyb3IAc3lzdGVtAE5TdDNfXzIyM19fc3lzdGVtX2Vycm9yX2NhdGVnb3J5RQBOU3QzX18yMTJzeXN0ZW1fZXJyb3JFADogAHZlY3Rvcg==";var ys=22368;function Eu(b){return Th(b)}var Jt={};function ir(b){if(b){var R=Jt[b];R.refcount++}}function sr(b){if(!b||Jt[b])return b;for(var R in Jt)for(var D=+R,y=Jt[D].adjusted,J=y.length,s=0;s<J;s++)if(y[s]===b)return D;return b}function Yn(b){var R=Jt[b];return R&&!R.caught&&(R.caught=!0,ku.uncaught_exceptions--),R&&(R.rethrown=!1),ir(sr(b)),b}function rn(b,R,D){throw Jt[b]={ptr:b,adjusted:[b],type:R,destructor:D,refcount:0,caught:!1,rethrown:!1},"uncaught_exception"in ku?ku.uncaught_exceptions++:ku.uncaught_exceptions=1,b}function oo(){return ku.uncaught_exceptions}function la(){}function Gi(b){switch(b){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+b)}}function vs(){for(var b=new Array(256),R=0;R<256;++R)b[R]=String.fromCharCode(R);pi=b}var pi=void 0;function sn(b){for(var R="",D=b;ct[D];)R+=pi[ct[D++]];return R}var on={},Mr={},Zi={},Su=48,xu=57;function ao(b){if(b===void 0)return"_unknown";b=b.replace(/[^a-zA-Z0-9_]/g,"$");var R=b.charCodeAt(0);return R>=Su&&R<=xu?"_"+b:b}function gi(b,R){return b=ao(b),new Function("body","return function "+b+`() {
    "use strict";    return body.apply(this, arguments);
};
`)(R)}function uo(b,R){var D=gi(R,function(y){this.name=R,this.message=y;var J=new Error(y).stack;J!==void 0&&(this.stack=this.toString()+`
`+J.replace(/^Error(:[^\n]*)?\n/,""))});return D.prototype=Object.create(b.prototype),D.prototype.constructor=D,D.prototype.toString=function(){return this.message===void 0?this.name:this.name+": "+this.message},D}var qr=void 0;function Xe(b){throw new qr(b)}var Kr=void 0;function Ln(b){throw new Kr(b)}function $n(b,R,D){b.forEach(function(te){Zi[te]=R});function y(te){var de=D(te);de.length!==b.length&&Ln("Mismatched type converter count");for(var ce=0;ce<b.length;++ce)Vn(b[ce],de[ce])}var J=new Array(R.length),s=[],L=0;R.forEach(function(te,de){Mr.hasOwnProperty(te)?J[de]=Mr[te]:(s.push(te),on.hasOwnProperty(te)||(on[te]=[]),on[te].push(function(){J[de]=Mr[te],++L,L===s.length&&y(J)}))}),s.length===0&&y(J)}function Vn(b,R,D){if(D=D||{},!("argPackAdvance"in R))throw new TypeError("registerType registeredInstance requires argPackAdvance");var y=R.name;if(b||Xe('type "'+y+'" must have a positive integer typeid pointer'),Mr.hasOwnProperty(b)){if(D.ignoreDuplicateRegistrations)return;Xe("Cannot register type '"+y+"' twice")}if(Mr[b]=R,delete Zi[b],on.hasOwnProperty(b)){var J=on[b];delete on[b],J.forEach(function(s){s()})}}function lo(b,R,D,y,J){var s=Gi(D);R=sn(R),Vn(b,{name:R,fromWireType:function(L){return!!L},toWireType:function(L,te){return te?y:J},argPackAdvance:8,readValueFromPointer:function(L){var te;if(D===1)te=En;else if(D===2)te=Dt;else if(D===4)te=ue;else throw new TypeError("Unknown boolean type size: "+R);return this.fromWireType(te[L>>s])},destructorFunction:null})}function co(b){if(!(this instanceof Me)||!(b instanceof Me))return!1;for(var R=this.$$.ptrType.registeredClass,D=this.$$.ptr,y=b.$$.ptrType.registeredClass,J=b.$$.ptr;R.baseClass;)D=R.upcast(D),R=R.baseClass;for(;y.baseClass;)J=y.upcast(J),y=y.baseClass;return R===y&&D===J}function _s(b){return{count:b.count,deleteScheduled:b.deleteScheduled,preservePointerOnDelete:b.preservePointerOnDelete,ptr:b.ptr,ptrType:b.ptrType,smartPtr:b.smartPtr,smartPtrType:b.smartPtrType}}function ei(b){function R(D){return D.$$.ptrType.registeredClass.name}Xe(R(b)+" instance already deleted")}var Xi=!1;function gn(b){}function Hi(b){b.smartPtr?b.smartPtrType.rawDestructor(b.smartPtr):b.ptrType.registeredClass.rawDestructor(b.ptr)}function Cr(b){b.count.value-=1;var R=b.count.value===0;R&&Hi(b)}function Rn(b){return typeof FinalizationGroup>"u"?(Rn=function(R){return R},b):(Xi=new FinalizationGroup(function(R){for(var D=R.next();!D.done;D=R.next()){var y=D.value;y.ptr?Cr(y):console.warn("object already deleted: "+y.ptr)}}),Rn=function(R){return Xi.register(R,R.$$,R.$$),R},gn=function(R){Xi.unregister(R.$$)},Rn(b))}function Ne(){if(this.$$.ptr||ei(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var b=Rn(Object.create(Object.getPrototypeOf(this),{$$:{value:_s(this.$$)}}));return b.$$.count.value+=1,b.$$.deleteScheduled=!1,b}function Re(){this.$$.ptr||ei(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&Xe("Object already scheduled for deletion"),gn(this),Cr(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)}function Te(){return!this.$$.ptr}var ke=void 0,he=[];function Ge(){for(;he.length;){var b=he.pop();b.$$.deleteScheduled=!1,b.delete()}}function ee(){return this.$$.ptr||ei(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&Xe("Object already scheduled for deletion"),he.push(this),he.length===1&&ke&&ke(Ge),this.$$.deleteScheduled=!0,this}function Ue(){Me.prototype.isAliasOf=co,Me.prototype.clone=Ne,Me.prototype.delete=Re,Me.prototype.isDeleted=Te,Me.prototype.deleteLater=ee}function Me(){}var et={};function Fe(b,R,D){if(b[R].overloadTable===void 0){var y=b[R];b[R]=function(){return b[R].overloadTable.hasOwnProperty(arguments.length)||Xe("Function '"+D+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+b[R].overloadTable+")!"),b[R].overloadTable[arguments.length].apply(this,arguments)},b[R].overloadTable=[],b[R].overloadTable[y.argCount]=y}}function Pt(b,R,D){t.hasOwnProperty(b)?((D===void 0||t[b].overloadTable!==void 0&&t[b].overloadTable[D]!==void 0)&&Xe("Cannot register public name '"+b+"' twice"),Fe(t,b,b),t.hasOwnProperty(D)&&Xe("Cannot register multiple overloads of a function with the same number of arguments ("+D+")!"),t[b].overloadTable[D]=R):(t[b]=R,D!==void 0&&(t[b].numArguments=D))}function ot(b,R,D,y,J,s,L,te){this.name=b,this.constructor=R,this.instancePrototype=D,this.rawDestructor=y,this.baseClass=J,this.getActualType=s,this.upcast=L,this.downcast=te,this.pureVirtualFunctions=[]}function ze(b,R,D){for(;R!==D;)R.upcast||Xe("Expected null or instance of "+D.name+", got an instance of "+R.name),b=R.upcast(b),R=R.baseClass;return b}function ft(b,R){if(R===null)return this.isReference&&Xe("null is not a valid "+this.name),0;R.$$||Xe('Cannot pass "'+fo(R)+'" as a '+this.name),R.$$.ptr||Xe("Cannot pass deleted object as a pointer of type "+this.name);var D=R.$$.ptrType.registeredClass,y=ze(R.$$.ptr,D,this.registeredClass);return y}function Zt(b,R){var D;if(R===null)return this.isReference&&Xe("null is not a valid "+this.name),this.isSmartPointer?(D=this.rawConstructor(),b!==null&&b.push(this.rawDestructor,D),D):0;R.$$||Xe('Cannot pass "'+fo(R)+'" as a '+this.name),R.$$.ptr||Xe("Cannot pass deleted object as a pointer of type "+this.name),!this.isConst&&R.$$.ptrType.isConst&&Xe("Cannot convert argument of type "+(R.$$.smartPtrType?R.$$.smartPtrType.name:R.$$.ptrType.name)+" to parameter type "+this.name);var y=R.$$.ptrType.registeredClass;if(D=ze(R.$$.ptr,y,this.registeredClass),this.isSmartPointer)switch(R.$$.smartPtr===void 0&&Xe("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:R.$$.smartPtrType===this?D=R.$$.smartPtr:Xe("Cannot convert argument of type "+(R.$$.smartPtrType?R.$$.smartPtrType.name:R.$$.ptrType.name)+" to parameter type "+this.name);break;case 1:D=R.$$.smartPtr;break;case 2:if(R.$$.smartPtrType===this)D=R.$$.smartPtr;else{var J=R.clone();D=this.rawShare(D,wh(function(){J.delete()})),b!==null&&b.push(this.rawDestructor,D)}break;default:Xe("Unsupporting sharing policy")}return D}function Ir(b,R){if(R===null)return this.isReference&&Xe("null is not a valid "+this.name),0;R.$$||Xe('Cannot pass "'+fo(R)+'" as a '+this.name),R.$$.ptr||Xe("Cannot pass deleted object as a pointer of type "+this.name),R.$$.ptrType.isConst&&Xe("Cannot convert argument of type "+R.$$.ptrType.name+" to parameter type "+this.name);var D=R.$$.ptrType.registeredClass,y=ze(R.$$.ptr,D,this.registeredClass);return y}function Ft(b){return this.fromWireType(Ae[b>>2])}function Un(b){return this.rawGetPointee&&(b=this.rawGetPointee(b)),b}function mi(b){this.rawDestructor&&this.rawDestructor(b)}function mn(b){b!==null&&b.delete()}function Be(b,R,D){if(R===D)return b;if(D.baseClass===void 0)return null;var y=Be(b,R,D.baseClass);return y===null?null:D.downcast(y)}function bn(){return Object.keys(Bn).length}function ti(){var b=[];for(var R in Bn)Bn.hasOwnProperty(R)&&b.push(Bn[R]);return b}function ni(b){ke=b,he.length&&ke&&ke(Ge)}function at(){t.getInheritedInstanceCount=bn,t.getLiveInheritedInstances=ti,t.flushPendingDeletes=Ge,t.setDelayFunction=ni}var Bn={};function Yi(b,R){for(R===void 0&&Xe("ptr should not be undefined");b.baseClass;)R=b.upcast(R),b=b.baseClass;return R}function P(b,R){return R=Yi(b,R),Bn[R]}function I(b,R){(!R.ptrType||!R.ptr)&&Ln("makeClassHandle requires ptr and ptrType");var D=!!R.smartPtrType,y=!!R.smartPtr;return D!==y&&Ln("Both smartPtrType and smartPtr must be specified"),R.count={value:1},Rn(Object.create(b,{$$:{value:R}}))}function z(b){var R=this.getPointee(b);if(!R)return this.destructor(b),null;var D=P(this.registeredClass,R);if(D!==void 0){if(D.$$.count.value===0)return D.$$.ptr=R,D.$$.smartPtr=b,D.clone();var y=D.clone();return this.destructor(b),y}function J(){return this.isSmartPointer?I(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:R,smartPtrType:this,smartPtr:b}):I(this.registeredClass.instancePrototype,{ptrType:this,ptr:b})}var s=this.registeredClass.getActualType(R),L=et[s];if(!L)return J.call(this);var te;this.isConst?te=L.constPointerType:te=L.pointerType;var de=Be(R,this.registeredClass,te.registeredClass);return de===null?J.call(this):this.isSmartPointer?I(te.registeredClass.instancePrototype,{ptrType:te,ptr:de,smartPtrType:this,smartPtr:b}):I(te.registeredClass.instancePrototype,{ptrType:te,ptr:de})}function Y(){ie.prototype.getPointee=Un,ie.prototype.destructor=mi,ie.prototype.argPackAdvance=8,ie.prototype.readValueFromPointer=Ft,ie.prototype.deleteObject=mn,ie.prototype.fromWireType=z}function ie(b,R,D,y,J,s,L,te,de,ce,$){this.name=b,this.registeredClass=R,this.isReference=D,this.isConst=y,this.isSmartPointer=J,this.pointeeType=s,this.sharingPolicy=L,this.rawGetPointee=te,this.rawConstructor=de,this.rawShare=ce,this.rawDestructor=$,!J&&R.baseClass===void 0?y?(this.toWireType=ft,this.destructorFunction=null):(this.toWireType=Ir,this.destructorFunction=null):this.toWireType=Zt}function me(b,R,D){t.hasOwnProperty(b)||Ln("Replacing nonexistant public symbol"),t[b].overloadTable!==void 0&&D!==void 0?t[b].overloadTable[D]=R:(t[b]=R,t[b].argCount=D)}function Oe(b,R){b=sn(b);function D(s){for(var L=[],te=1;te<b.length;++te)L.push("a"+te);var de="dynCall_"+b+"_"+R,ce="return function "+de+"("+L.join(", ")+`) {
`;return ce+="    return dynCall(rawFunction"+(L.length?", ":"")+L.join(", ")+`);
`,ce+=`};
`,new Function("dynCall","rawFunction",ce)(s,R)}var y=t["dynCall_"+b],J=D(y);return typeof J!="function"&&Xe("unknown function pointer with signature "+b+": "+R),J}var ut=void 0;function Ye(b){var R=Zx(b),D=sn(R);return Es(R),D}function Mt(b,R){var D=[],y={};function J(s){if(!y[s]&&!Mr[s]){if(Zi[s]){Zi[s].forEach(J);return}D.push(s),y[s]=!0}}throw R.forEach(J),new ut(b+": "+D.map(Ye).join([", "]))}function Dn(b,R,D,y,J,s,L,te,de,ce,$,st,At){$=sn($),s=Oe(J,s),te&&(te=Oe(L,te)),ce&&(ce=Oe(de,ce)),At=Oe(st,At);var Ot=ao($);Pt(Ot,function(){Mt("Cannot construct "+$+" due to unbound types",[y])}),$n([b,R,D],y?[y]:[],function(An){An=An[0];var Jn,ri;y?(Jn=An.registeredClass,ri=Jn.instancePrototype):ri=Me.prototype;var ho=gi(Ot,function(){if(Object.getPrototypeOf(this)!==_c)throw new qr("Use 'new' to construct "+$);if($e.constructor_body===void 0)throw new qr($+" has no accessible constructor");var tt=$e.constructor_body[arguments.length];if(tt===void 0)throw new qr("Tried to invoke ctor of "+$+" with invalid number of parameters ("+arguments.length+") - expected ("+Object.keys($e.constructor_body).toString()+") parameters instead!");return tt.apply(this,arguments)}),_c=Object.create(ri,{constructor:{value:ho}});ho.prototype=_c;var $e=new ot($,ho,_c,At,Jn,s,te,ce),$i=new ie($,$e,!0,!1,!1),zn=new ie($+"*",$e,!1,!1,!1),yt=new ie($+" const*",$e,!1,!0,!1);return et[b]={pointerType:zn,constPointerType:yt},me(Ot,ho),[$i,zn,yt]})}function Ru(b,R){for(var D=[],y=0;y<b;y++)D.push(ue[(R>>2)+y]);return D}function ca(b){for(;b.length;){var R=b.pop(),D=b.pop();D(R)}}function fa(b,R,D,y,J,s){Q(R>0);var L=Ru(R,D);J=Oe(y,J);var te=[s],de=[];$n([],[b],function(ce){ce=ce[0];var $="constructor "+ce.name;if(ce.registeredClass.constructor_body===void 0&&(ce.registeredClass.constructor_body=[]),ce.registeredClass.constructor_body[R-1]!==void 0)throw new qr("Cannot register multiple constructors with identical number of parameters ("+(R-1)+") for class '"+ce.name+"'! Overload resolution is currently only performed using the parameter count, not actual type info!");return ce.registeredClass.constructor_body[R-1]=function(){Mt("Cannot construct "+ce.name+" due to unbound types",L)},$n([],L,function(st){return ce.registeredClass.constructor_body[R-1]=function(){arguments.length!==R-1&&Xe($+" called with "+arguments.length+" arguments, expected "+(R-1)),de.length=0,te.length=R;for(var Ot=1;Ot<R;++Ot)te[Ot]=st[Ot].toWireType(de,arguments[Ot-1]);var An=J.apply(null,te);return ca(de),st[0].fromWireType(An)},[]}),[]})}function ws(b,R){if(!(b instanceof Function))throw new TypeError("new_ called with constructor type "+typeof b+" which is not a function");var D=gi(b.name||"unknownFunctionName",function(){});D.prototype=b.prototype;var y=new D,J=b.apply(y,R);return J instanceof Object?J:y}function bu(b,R,D,y,J){var s=R.length;s<2&&Xe("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var L=R[1]!==null&&D!==null,te=!1,de=1;de<R.length;++de)if(R[de]!==null&&R[de].destructorFunction===void 0){te=!0;break}for(var ce=R[0].name!=="void",$="",st="",de=0;de<s-2;++de)$+=(de!==0?", ":"")+"arg"+de,st+=(de!==0?", ":"")+"arg"+de+"Wired";var At="return function "+ao(b)+"("+$+`) {
if (arguments.length !== `+(s-2)+`) {
throwBindingError('function `+b+" called with ' + arguments.length + ' arguments, expected "+(s-2)+` args!');
}
`;te&&(At+=`var destructors = [];
`);var Ot=te?"destructors":"null",An=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],Jn=[Xe,y,J,ca,R[0],R[1]];L&&(At+="var thisWired = classParam.toWireType("+Ot+`, this);
`);for(var de=0;de<s-2;++de)At+="var arg"+de+"Wired = argType"+de+".toWireType("+Ot+", arg"+de+"); // "+R[de+2].name+`
`,An.push("argType"+de),Jn.push(R[de+2]);if(L&&(st="thisWired"+(st.length>0?", ":"")+st),At+=(ce?"var rv = ":"")+"invoker(fn"+(st.length>0?", ":"")+st+`);
`,te)At+=`runDestructors(destructors);
`;else for(var de=L?1:2;de<R.length;++de){var ri=de===1?"thisWired":"arg"+(de-2)+"Wired";R[de].destructorFunction!==null&&(At+=ri+"_dtor("+ri+"); // "+R[de].name+`
`,An.push(ri+"_dtor"),Jn.push(R[de].destructorFunction))}ce&&(At+=`var ret = retType.fromWireType(rv);
return ret;
`),At+=`}
`,An.push(At);var ho=ws(Function,An).apply(null,Jn);return ho}function yc(b,R,D,y,J,s,L,te){var de=Ru(D,y);R=sn(R),s=Oe(J,s),$n([],[b],function(ce){ce=ce[0];var $=ce.name+"."+R;te&&ce.registeredClass.pureVirtualFunctions.push(R);function st(){Mt("Cannot call "+$+" due to unbound types",de)}var At=ce.registeredClass.instancePrototype,Ot=At[R];return Ot===void 0||Ot.overloadTable===void 0&&Ot.className!==ce.name&&Ot.argCount===D-2?(st.argCount=D-2,st.className=ce.name,At[R]=st):(Fe(At,R,$),At[R].overloadTable[D-2]=st),$n([],de,function(An){var Jn=bu($,An,ce,s,L);return At[R].overloadTable===void 0?(Jn.argCount=D-2,At[R]=Jn):At[R].overloadTable[D-2]=Jn,[]}),[]})}var ha=[],or=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function Xm(b){b>4&&--or[b].refcount===0&&(or[b]=void 0,ha.push(b))}function Ex(){for(var b=0,R=5;R<or.length;++R)or[R]!==void 0&&++b;return b}function Sx(){for(var b=5;b<or.length;++b)if(or[b]!==void 0)return or[b];return null}function xx(){t.count_emval_handles=Ex,t.get_first_emval=Sx}function wh(b){switch(b){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:{var R=ha.length?ha.pop():or.length;return or[R]={refcount:1,value:b},R}}}function Rx(b,R){R=sn(R),Vn(b,{name:R,fromWireType:function(D){var y=or[D].value;return Xm(D),y},toWireType:function(D,y){return wh(y)},argPackAdvance:8,readValueFromPointer:Ft,destructorFunction:null})}function fo(b){if(b===null)return"null";var R=typeof b;return R==="object"||R==="array"||R==="function"?b.toString():""+b}function bx(b,R){switch(R){case 2:return function(D){return this.fromWireType(Ve[D>>2])};case 3:return function(D){return this.fromWireType(Ie[D>>3])};default:throw new TypeError("Unknown float type: "+b)}}function kx(b,R,D){var y=Gi(D);R=sn(R),Vn(b,{name:R,fromWireType:function(J){return J},toWireType:function(J,s){if(typeof s!="number"&&typeof s!="boolean")throw new TypeError('Cannot convert "'+fo(s)+'" to '+this.name);return s},argPackAdvance:8,readValueFromPointer:bx(R,y),destructorFunction:null})}function Px(b,R,D){switch(R){case 0:return D?function(J){return En[J]}:function(J){return ct[J]};case 1:return D?function(J){return Dt[J>>1]}:function(J){return rr[J>>1]};case 2:return D?function(J){return ue[J>>2]}:function(J){return Ae[J>>2]};default:throw new TypeError("Unknown integer type: "+b)}}function Mx(b,R,D,y,J){R=sn(R),J===-1&&(J=4294967295);var s=Gi(D),L=function(ce){return ce};if(y===0){var te=32-8*D;L=function(ce){return ce<<te>>>te}}var de=R.indexOf("unsigned")!=-1;Vn(b,{name:R,fromWireType:L,toWireType:function(ce,$){if(typeof $!="number"&&typeof $!="boolean")throw new TypeError('Cannot convert "'+fo($)+'" to '+this.name);if($<y||$>J)throw new TypeError('Passing a number "'+fo($)+'" from JS side to C/C++ side to an argument of type "'+R+'", which is outside the valid range ['+y+", "+J+"]!");return de?$>>>0:$|0},argPackAdvance:8,readValueFromPointer:Px(R,s,y!==0),destructorFunction:null})}function Cx(b,R,D){var y=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],J=y[R];function s(L){L=L>>2;var te=Ae,de=te[L],ce=te[L+1];return new J(Bt,ce,de)}D=sn(D),Vn(b,{name:D,fromWireType:s,argPackAdvance:8,readValueFromPointer:s},{ignoreDuplicateRegistrations:!0})}function Ix(b,R){R=sn(R);var D=R==="std::string";Vn(b,{name:R,fromWireType:function(y){var J=Ae[y>>2],s;if(D)for(var L=y+4,te=0;te<=J;++te){var de=y+4+te;if(ct[de]==0||te==J){var ce=de-L,$=fe(L,ce);s===void 0?s=$:(s+=String.fromCharCode(0),s+=$),L=de+1}}else{for(var st=new Array(J),te=0;te<J;++te)st[te]=String.fromCharCode(ct[y+4+te]);s=st.join("")}return Es(y),s},toWireType:function(y,J){J instanceof ArrayBuffer&&(J=new Uint8Array(J));var s,L=typeof J=="string";L||J instanceof Uint8Array||J instanceof Uint8ClampedArray||J instanceof Int8Array||Xe("Cannot pass non-string to std::string"),D&&L?s=function(){return we(J)}:s=function(){return J.length};var te=s(),de=Th(4+te+1);if(Ae[de>>2]=te,D&&L)_e(J,de+4,te+1);else if(L)for(var ce=0;ce<te;++ce){var $=J.charCodeAt(ce);$>255&&(Es(de),Xe("String has UTF-16 code units that do not fit in 8 bits")),ct[de+4+ce]=$}else for(var ce=0;ce<te;++ce)ct[de+4+ce]=J[ce];return y!==null&&y.push(Es,de),de},argPackAdvance:8,readValueFromPointer:Ft,destructorFunction:function(y){Es(y)}})}function Nx(b,R,D){D=sn(D);var y,J,s,L,te;R===2?(y=kt,J=Pe,L=Ee,s=function(){return rr},te=1):R===4&&(y=On,J=mt,L=Ht,s=function(){return Ae},te=2),Vn(b,{name:D,fromWireType:function(de){for(var ce=Ae[de>>2],$=s(),st,At=de+4,Ot=0;Ot<=ce;++Ot){var An=de+4+Ot*R;if($[An>>te]==0||Ot==ce){var Jn=An-At,ri=y(At,Jn);st===void 0?st=ri:(st+=String.fromCharCode(0),st+=ri),At=An+R}}return Es(de),st},toWireType:function(de,ce){typeof ce!="string"&&Xe("Cannot pass non-string to C++ string type "+D);var $=L(ce),st=Th(4+$+R);return Ae[st>>2]=$>>te,J(ce,st+4,$+R),de!==null&&de.push(Es,st),st},argPackAdvance:8,readValueFromPointer:Ft,destructorFunction:function(de){Es(de)}})}function Fx(b,R){R=sn(R),Vn(b,{isVoid:!0,name:R,argPackAdvance:0,fromWireType:function(){},toWireType:function(D,y){}})}function Ox(){Pr()}function Lx(){return ct.length}function Vx(b){Pr("OOM")}function Ux(b){Vx()}function Bx(){Pr("trap!")}function Dx(b,R,D){ct.copyWithin(b,R,R+D)}vs(),qr=t.BindingError=uo(Error,"BindingError"),Kr=t.InternalError=uo(Error,"InternalError"),Ue(),Y(),at(),ut=t.UnboundTypeError=uo(Error,"UnboundTypeError"),xx();function Hm(b){for(var R=[],D=0;D<b.length;D++){var y=b[D];y>255&&(y&=255),R.push(String.fromCharCode(y))}return R.join("")}var zx=typeof atob=="function"?atob:function(b){var R="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",D="",y,J,s,L,te,de,ce,$=0;b=b.replace(/[^A-Za-z0-9\+\/\=]/g,"");do L=R.indexOf(b.charAt($++)),te=R.indexOf(b.charAt($++)),de=R.indexOf(b.charAt($++)),ce=R.indexOf(b.charAt($++)),y=L<<2|te>>4,J=(te&15)<<4|de>>2,s=(de&3)<<6|ce,D=D+String.fromCharCode(y),de!==64&&(D=D+String.fromCharCode(J)),ce!==64&&(D=D+String.fromCharCode(s));while($<b.length);return D};function jx(b){if(typeof l=="boolean"&&l){var R;try{R=Buffer.from(b,"base64")}catch{R=new Buffer(b,"base64")}return new Uint8Array(R.buffer,R.byteOffset,R.byteLength)}try{for(var D=zx(b),y=new Uint8Array(D.length),J=0;J<D.length;++J)y[J]=D.charCodeAt(J);return y}catch{throw new Error("Converting base64 string to bytes failed.")}}function Ts(b){if(Wi(b))return jx(b.slice(so.length))}var Wx={Math,Int8Array,Int16Array,Int32Array,Uint8Array,Uint16Array,Float32Array,Float64Array},Gx={A:Dx,B:Ux,C:Bx,D:ys,a:Pr,b:F,c:V,d:Eu,e:Yn,f:rn,g:oo,h:ir,i:sr,j:la,k:lo,l:Dn,m:fa,n:yc,o:Rx,p:kx,q:Mx,r:Cx,s:Ix,t:Nx,u:Fx,v:Xm,w:wh,x:Ox,y:fo,z:Lx},Je=function(b,R,D){var y=new b.Int8Array(D),J=new b.Int16Array(D),s=new b.Int32Array(D),L=new b.Uint8Array(D),te=new b.Uint16Array(D),de=new b.Float32Array(D),ce=new b.Float64Array(D),$=R.D|0,st=0,At=0,Ot=0,An=0,Jn=0,ri=0,ho=0,_c=0,$e=b.Math.imul,$i=b.Math.clz32,zn=R.a,yt=R.b,tt=R.c,vt=R.d,$x=R.e,_t=R.f,Jx=R.g,tK=R.h,nK=R.i,rK=R.j,Qx=R.k,Qm=R.l,qm=R.m,da=R.n,qx=R.o,Km=R.p,Ji=R.q,Nr=R.r,e1=R.s,xh=R.t,Kx=R.u,iK=R.v,sK=R.w,eR=R.x,oK=R.y,tR=R.z,nR=R.A,rR=R.B,t1=R.C,w=22384,aK=5265264,uK=0;function iR(){D8(),z8()}function sR(){oR(0)}function oR(r){r=r|0;var o=0,u=0,c=0,h=0,p=0,m=0,A=0,_=0,E=0,k=0,O=0;r=w,w=w+16|0,o=r+8|0,u=r,O=_N()|0,p=wN()|0,h=Du()|0,m=EN()|0,A=SN()|0,_=EA()|0,E=Vc()|0,k=Uc()|0,c=Uc()|0,Qm(h|0,m|0,A|0,_|0,E|0,9,k|0,O|0,c|0,p|0,6204,SA()|0,138),CN(1),s[u>>2]=5,s[u+4>>2]=0,s[o>>2]=s[u>>2],s[o+4>>2]=s[u+4>>2],UN(6211,o),s[u>>2]=3,s[u+4>>2]=0,s[o>>2]=s[u>>2],s[o+4>>2]=s[u+4>>2],GN(6216,o),s[u>>2]=10,s[u+4>>2]=0,s[o>>2]=s[u>>2],s[o+4>>2]=s[u+4>>2],JN(6225,o),p=s8()|0,c=o8()|0,O=zu()|0,k=u8()|0,E=l8()|0,_=EA()|0,A=Vc()|0,m=Uc()|0,h=Uc()|0,Qm(O|0,k|0,E|0,_|0,A|0,11,m|0,p|0,h|0,c|0,6234,SA()|0,139),m8(2),s[u>>2]=6,s[u+4>>2]=0,s[o>>2]=s[u>>2],s[o+4>>2]=s[u+4>>2],E8(6211,o),s[u>>2]=4,s[u+4>>2]=0,s[o>>2]=s[u>>2],s[o+4>>2]=s[u+4>>2],Qh(6248,o),s[u>>2]=5,s[u+4>>2]=0,s[o>>2]=s[u>>2],s[o+4>>2]=s[u+4>>2],Qh(6265,o),s[u>>2]=6,s[u+4>>2]=0,s[o>>2]=s[u>>2],s[o+4>>2]=s[u+4>>2],Qh(6280,o),s[u>>2]=7,s[u+4>>2]=0,s[o>>2]=s[u>>2],s[o+4>>2]=s[u+4>>2],F8(6216,o),w=r}function aR(r,o,u){r=r|0,o=o|0,u=u|0;var c=0,h=0,p=0,m=0,A=0;c=w,w=w+32|0,m=c+16|0,h=c+8|0,A=c,p=ge(20)|0,gR(p,o,u),s[A>>2]=0,s[m>>2]=s[A>>2],AR(h,p,m),o=s[h>>2]|0,s[h>>2]=s[r>>2],s[r>>2]=o,o=h+4|0,u=r+4|0,p=s[o>>2]|0,s[o>>2]=s[u>>2],s[u>>2]=p,Rh(h),u=ge(352)|0,mR(u,s[r>>2]|0),p=r+8|0,s[A>>2]=0,s[m>>2]=s[A>>2],SR(h,u,m),u=s[h>>2]|0,s[h>>2]=s[p>>2],s[p>>2]=u,p=h+4|0,u=r+12|0,o=s[p>>2]|0,s[p>>2]=s[u>>2],s[u>>2]=o,bh(h),w=c}function uR(r,o){r=r|0,o=o|0,tk(s[r+8>>2]|0,o)}function lR(r){return r=r|0,r=(sC(s[r+8>>2]|0)|0)+107|0,L[r>>0]|L[r+1>>0]<<8|L[r+2>>0]<<16|L[r+3>>0]<<24|0}function cR(r,o,u){r=r|0,o=o|0,u=u|0;var c=0,h=0,p=0,m=0,A=0;c=w,w=w+32|0,p=c+16|0,h=c+8|0,m=c,A=ge(12)|0,oC(A,o,u),s[m>>2]=0,s[p>>2]=s[m>>2],lC(h,A,p),A=s[h>>2]|0,s[h>>2]=s[r>>2],s[r>>2]=A,A=h+4|0,u=r+4|0,o=s[A>>2]|0,s[A>>2]=s[u>>2],s[u>>2]=o,Gh(h),u=r+8|0,o=ge(12)|0,aC(o,s[r>>2]|0),s[m>>2]=0,s[p>>2]=s[m>>2],gC(h,o,p),o=s[h>>2]|0,s[h>>2]=s[u>>2],s[u>>2]=o,o=h+4|0,m=r+12|0,A=s[o>>2]|0,s[o>>2]=s[m>>2],s[m>>2]=A,pA(h),uC(h,s[u>>2]|0),u=r+16|0,m=s[h>>2]|0,A=h+4|0,o=s[A>>2]|0,s[h>>2]=0,s[A>>2]=0,s[p>>2]=s[u>>2],s[u>>2]=m,u=r+20|0,s[p+4>>2]=s[u>>2],s[u>>2]=o,Bu(p),Bu(h),w=c}function fR(r,o){r=r|0,o=o|0;var u=0;r=r+16|0,u=s[r>>2]|0;e:do if(u|0)switch(o|0){case 4:{Zh(u);break e}case 8:{Oc(u),Oc(s[r>>2]|0);break e}default:break e}while(0)}function hR(r,o){r=r|0,o=o|0;var u=0;u=r+16|0,r=s[u>>2]|0;e:do if(r|0){switch(o|0){case 1:{lI(r);break e}case 2:{cI(r);break e}case 8:{Zh(r),r=s[u>>2]|0;break}case 4:break;default:break e}Zh(r)}while(0)}function dR(r,o){r=r|0,o=o|0;var u=0;u=r+16|0,r=s[u>>2]|0;e:do if(r|0){switch(o|0){case 1:{WI(r);break e}case 2:{GI(r);break e}case 8:{Oc(r),r=s[u>>2]|0;break}case 4:break;default:break e}Oc(r)}while(0)}function pR(r,o){r=r|0,o=o|0,r=s[r+16>>2]|0,r|0&&Zu[s[s[r>>2]>>2]&63](r,o)|0}function gR(r,o,u){r=r|0,o=o|0,u=u|0,s[r>>2]=o,s[r+4>>2]=u,s[r+8>>2]=0,y[r+12>>0]=0,y[r+13>>0]=0,s[r+16>>2]=0}function mR(r,o){r=r|0,o=o|0,s[r>>2]=o,i1(r+4|0,o),FR(r+247|0),s[r+288>>2]=0,s[r+292>>2]=0,s[r+296>>2]=0,s1(r+300|0),o=r+312|0,s[o>>2]=0,s[o+4>>2]=0,s[o+8>>2]=0,s[o+12>>2]=0,OR(r+328|0),LR(r)}function AR(r,o,u){r=r|0,o=o|0,u=u|0;var c=0,h=0;u=w,w=w+16|0,c=u,s[r>>2]=o,h=ge(16)|0,s[h+4>>2]=0,s[h+8>>2]=0,s[h>>2]=4296,s[h+12>>2]=o,s[r+4>>2]=h,s[c>>2]=o,s[c+4>>2]=o,yR(r,c),w=u}function Rh(r){r=r|0;var o=0,u=0;r=s[r+4>>2]|0,r|0&&(u=r+4|0,o=s[u>>2]|0,s[u>>2]=o+-1,(o|0)==0)&&(ht[s[(s[r>>2]|0)+8>>2]&255](r),Qi(r))}function yR(r,o){r=r|0,o=o|0}function lK(r){r=r|0,$x(r|0)|0,f5()}function vR(r){r=r|0,jt(r),pe(r)}function _R(r){r=r|0,r=s[r+12>>2]|0,r|0&&pe(r)}function wR(r,o){return r=r|0,o=o|0,((s[o+4>>2]|0)==6407?r+12|0:0)|0}function TR(r){r=r|0,He(r,16)}function He(r,o){r=r|0,o=o|0,ER(r)}function ER(r){r=r|0,pe(r)}function SR(r,o,u){r=r|0,o=o|0,u=u|0;var c=0,h=0;u=w,w=w+16|0,c=u,s[r>>2]=o,h=ge(16)|0,s[h+4>>2]=0,s[h+8>>2]=0,s[h>>2]=4324,s[h+12>>2]=o,s[r+4>>2]=h,s[c>>2]=o,s[c+4>>2]=o,xR(r,c),w=u}function bh(r){r=r|0;var o=0,u=0;r=s[r+4>>2]|0,r|0&&(u=r+4|0,o=s[u>>2]|0,s[u>>2]=o+-1,(o|0)==0)&&(ht[s[(s[r>>2]|0)+8>>2]&255](r),Qi(r))}function xR(r,o){r=r|0,o=o|0}function RR(r){r=r|0,jt(r),pe(r)}function bR(r){r=r|0,r=s[r+12>>2]|0,r|0&&(MR(r),pe(r))}function kR(r,o){return r=r|0,o=o|0,((s[o+4>>2]|0)==6605?r+12|0:0)|0}function PR(r){r=r|0,He(r,16)}function MR(r){r=r|0,wc(r+320|0),kh(r+312|0),n1(r+300|0),NR(r+288|0),CR(r+247|0),r1(r+4|0)}function wc(r){r=r|0;var o=0,u=0;r=s[r+4>>2]|0,r|0&&(u=r+4|0,o=s[u>>2]|0,s[u>>2]=o+-1,(o|0)==0)&&(ht[s[(s[r>>2]|0)+8>>2]&255](r),Qi(r))}function kh(r){r=r|0;var o=0,u=0;r=s[r+4>>2]|0,r|0&&(u=r+4|0,o=s[u>>2]|0,s[u>>2]=o+-1,(o|0)==0)&&(ht[s[(s[r>>2]|0)+8>>2]&255](r),Qi(r))}function n1(r){r=r|0,IR(r)}function CR(r){r=r|0,r=r+34|0,r=L[r>>0]|L[r+1>>0]<<8|L[r+2>>0]<<16|L[r+3>>0]<<24,r|0&&ey(r)}function r1(r){r=r|0,Tc(s[r+12>>2]|0)}function IR(r){r=r|0;var o=0,u=0;o=s[r>>2]|0,u=o,o|0&&(s[r+4>>2]=u,He(o,(s[r+8>>2]|0)-u|0))}function NR(r){r=r|0;var o=0,u=0;o=s[r>>2]|0,u=o,o|0&&(s[r+4>>2]=u,He(o,(s[r+8>>2]|0)-u|0))}function Tc(r){r=r|0,sd(s[r+-4>>2]|0)}function i1(r,o){r=r|0,o=o|0,s[r>>2]=o,s[r+4>>2]=0,s[r+8>>2]=0,s[r+12>>2]=po(1048576)|0}function FR(r){r=r|0;var o=0;o=r+32|0,y[o>>0]=0,y[o+1>>0]=0,r=r+34|0,y[r>>0]=0,y[r+1>>0]=0,y[r+2>>0]=0,y[r+3>>0]=0}function s1(r){r=r|0,s[r>>2]=0,s[r+4>>2]=0,s[r+8>>2]=0}function OR(r){r=r|0,s[r>>2]=0,s[r+4>>2]=0,s[r+8>>2]=0,s[r+12>>2]=0,r=r+16|0,s[r>>2]=-1,s[r+4>>2]=-1}function LR(r){r=r|0;var o=0,u=0,c=0,h=0,p=0,m=0;if(m=w,w=w+64|0,h=m+32|0,u=m+56|0,o=m+16|0,p=m,go(s[r>>2]|0,u,4),XR(h,u,u+4|0),u=pa(6693)|0,c=y[h+11>>0]|0,(u|0)==((c<<24>>24<0?s[h+4>>2]|0:c&255)|0)){if(c=(s6(h,0,-1,6693,u)|0)==0,Gu(h),c){if(u=s[r>>2]|0,s[o>>2]=0,s[o+4>>2]=0,s[o+8>>2]=0,s[o+12>>2]=0,s[h>>2]=s[o>>2],s[h+4>>2]=s[o+4>>2],s[h+8>>2]=s[o+8>>2],s[h+12>>2]=s[o+12>>2],Pu(u,h),u=r+20|0,go(s[r>>2]|0,u,227),UR(r,u),c=BR()|0,o=s[c>>2]|0,c=s[c+4>>2]|0,(o|0)!=(c|0))do DR(h,o),zR(h,u),Ph(h),o=o+24|0;while((o|0)!=(c|0));jR(r),WR(r),GR(s[r>>2]|0),c=s[r>>2]|0,o=(s[r+116>>2]|0)+8|0,u=p,s[u>>2]=0,s[u+4>>2]=0,u=p+8|0,s[u>>2]=o,s[u+4>>2]=0,s[h>>2]=s[p>>2],s[h+4>>2]=s[p+4>>2],s[h+8>>2]=s[p+8>>2],s[h+12>>2]=s[p+12>>2],Pu(c,h),ZR(r+4|0),w=m;return}}else Gu(h);m=vt(8)|0,VR(m),_t(m|0,2592,8)}function po(r){r=r|0;var o=0;return o=Wc(r+68|0)|0,r=o+68&-64,s[r+-4>>2]=o,r|0}function go(r,o,u){r=r|0,o=o|0,u=u|0;var c=0,h=0,p=0,m=0,A=0,_=0;m=r+13|0,y[m>>0]|0?y[r+12>>0]=1:(p=r+4|0,c=s[p>>2]|0,A=r+8|0,h=s[A>>2]|0,_=c-h|0,u=(_|0)<(u|0)?_:u,u&&(Ur(o|0,(s[r>>2]|0)+h|0,u|0)|0,h=s[A>>2]|0,c=s[p>>2]|0),_=h+u|0,s[A>>2]=_,s[r+16>>2]=u,(_|0)>=(c|0)&&(y[m>>0]=1))}function VR(r){r=r|0,ii(r,6791),s[r>>2]=4352}function Pu(r,o){r=r|0,o=o|0;var u=0,c=0,h=0;h=o+8|0,o=s[h>>2]|0,h=s[h+4>>2]|0,u=s[r+4>>2]|0,c=((u|0)<0)<<31>>31,(h|0)<(c|0)|(h|0)==(c|0)&o>>>0<u>>>0?s[r+8>>2]=o:y[r+12>>0]=1}function UR(r,o){r=r|0,o=o|0;var u=0,c=0,h=0,p=0,m=0,A=0,_=0,E=0,k=0,O=0;k=o+179|0,y[$>>0]=y[k>>0],y[$+1>>0]=y[k+1>>0],y[$+2>>0]=y[k+2>>0],y[$+3>>0]=y[k+3>>0],y[$+4>>0]=y[k+4>>0],y[$+5>>0]=y[k+5>>0],y[$+6>>0]=y[k+6>>0],y[$+7>>0]=y[k+7>>0],E=+ce[$>>3],m=o+187|0,y[$>>0]=y[m>>0],y[$+1>>0]=y[m+1>>0],y[$+2>>0]=y[m+2>>0],y[$+3>>0]=y[m+3>>0],y[$+4>>0]=y[m+4>>0],y[$+5>>0]=y[m+5>>0],y[$+6>>0]=y[m+6>>0],y[$+7>>0]=y[m+7>>0],O=+ce[$>>3],r=o+195|0,y[$>>0]=y[r>>0],y[$+1>>0]=y[r+1>>0],y[$+2>>0]=y[r+2>>0],y[$+3>>0]=y[r+3>>0],y[$+4>>0]=y[r+4>>0],y[$+5>>0]=y[r+5>>0],y[$+6>>0]=y[r+6>>0],y[$+7>>0]=y[r+7>>0],p=+ce[$>>3],_=o+203|0,y[$>>0]=y[_>>0],y[$+1>>0]=y[_+1>>0],y[$+2>>0]=y[_+2>>0],y[$+3>>0]=y[_+3>>0],y[$+4>>0]=y[_+4>>0],y[$+5>>0]=y[_+5>>0],y[$+6>>0]=y[_+6>>0],y[$+7>>0]=y[_+7>>0],A=+ce[$>>3],h=o+211|0,y[$>>0]=y[h>>0],y[$+1>>0]=y[h+1>>0],y[$+2>>0]=y[h+2>>0],y[$+3>>0]=y[h+3>>0],y[$+4>>0]=y[h+4>>0],y[$+5>>0]=y[h+5>>0],y[$+6>>0]=y[h+6>>0],y[$+7>>0]=y[h+7>>0],u=+ce[$>>3],o=o+219|0,y[$>>0]=y[o>>0],y[$+1>>0]=y[o+1>>0],y[$+2>>0]=y[o+2>>0],y[$+3>>0]=y[o+3>>0],y[$+4>>0]=y[o+4>>0],y[$+5>>0]=y[o+5>>0],y[$+6>>0]=y[o+6>>0],y[$+7>>0]=y[o+7>>0],c=+ce[$>>3],ce[$>>3]=O,y[k>>0]=y[$>>0],y[k+1>>0]=y[$+1>>0],y[k+2>>0]=y[$+2>>0],y[k+3>>0]=y[$+3>>0],y[k+4>>0]=y[$+4>>0],y[k+5>>0]=y[$+5>>0],y[k+6>>0]=y[$+6>>0],y[k+7>>0]=y[$+7>>0],ce[$>>3]=E,y[_>>0]=y[$>>0],y[_+1>>0]=y[$+1>>0],y[_+2>>0]=y[$+2>>0],y[_+3>>0]=y[$+3>>0],y[_+4>>0]=y[$+4>>0],y[_+5>>0]=y[$+5>>0],y[_+6>>0]=y[$+6>>0],y[_+7>>0]=y[$+7>>0],ce[$>>3]=A,y[m>>0]=y[$>>0],y[m+1>>0]=y[$+1>>0],y[m+2>>0]=y[$+2>>0],y[m+3>>0]=y[$+3>>0],y[m+4>>0]=y[$+4>>0],y[m+5>>0]=y[$+5>>0],y[m+6>>0]=y[$+6>>0],y[m+7>>0]=y[$+7>>0],ce[$>>3]=p,y[h>>0]=y[$>>0],y[h+1>>0]=y[$+1>>0],y[h+2>>0]=y[$+2>>0],y[h+3>>0]=y[$+3>>0],y[h+4>>0]=y[$+4>>0],y[h+5>>0]=y[$+5>>0],y[h+6>>0]=y[$+6>>0],y[h+7>>0]=y[$+7>>0],ce[$>>3]=c,y[r>>0]=y[$>>0],y[r+1>>0]=y[$+1>>0],y[r+2>>0]=y[$+2>>0],y[r+3>>0]=y[$+3>>0],y[r+4>>0]=y[$+4>>0],y[r+5>>0]=y[$+5>>0],y[r+6>>0]=y[$+6>>0],y[r+7>>0]=y[$+7>>0],ce[$>>3]=u,y[o>>0]=y[$>>0],y[o+1>>0]=y[$+1>>0],y[o+2>>0]=y[$+2>>0],y[o+3>>0]=y[$+3>>0],y[o+4>>0]=y[$+4>>0],y[o+5>>0]=y[$+5>>0],y[o+6>>0]=y[$+6>>0],y[o+7>>0]=y[$+7>>0]}function BR(){var r=0,o=0,u=0,c=0,h=0,p=0,m=0,A=0;if(h=w,w=w+48|0,u=h+24|0,c=h,r=h+44|0,!(y[21440]|0)&&Eo(21440)|0&&(s[5374]=0,s[5375]=0,s[5376]=0,So(21440)),!(y[21448]|0)&&Eo(21448)|0&&So(21448),(s[5374]|0)==(s[5375]|0)){if(Q5(21508),(s[5374]|0)==(s[5375]|0)){y[u>>0]=y[r>>0]|0,YR(c,u),r=s[5375]|0;do if(r>>>0>=(s[5376]|0)>>>0)if(r=((r-(s[5374]|0)|0)/24|0)+1|0,o=eb(21496)|0,o>>>0<r>>>0)Pn(21496);else{p=s[5374]|0,A=((s[5376]|0)-p|0)/24|0,m=A<<1,QR(u,A>>>0<o>>>1>>>0?m>>>0<r>>>0?r:m:o,((s[5375]|0)-p|0)/24|0,21504),o=u+8|0,Mh(s[o>>2]|0,c),s[o>>2]=(s[o>>2]|0)+24,qR(21496,u),KR(u);break}else $R(u,21496,1),A=u+4|0,Mh(s[A>>2]|0,c),s[A>>2]=(s[A>>2]|0)+24,JR(u);while(0);Ph(c)}q5(21508)}return w=h,21496}function DR(r,o){r=r|0,o=o|0;var u=0,c=0;u=o+16|0,c=s[u>>2]|0;do if(c)if((o|0)==(c|0)){c=o1(r)|0,s[r+16>>2]=c,u=s[u>>2]|0,bs[s[(s[u>>2]|0)+12>>2]&15](u,c);break}else{s[r+16>>2]=Zc[s[(s[c>>2]|0)+8>>2]&15](c)|0;break}else s[r+16>>2]=0;while(0)}function zR(r,o){if(r=r|0,o=o|0,r=s[r+16>>2]|0,!r)o=vt(4)|0,s[o>>2]=0,mb(o),_t(o|0,4168,131);else{bs[s[(s[r>>2]|0)+24>>2]&15](r,o);return}}function Ph(r){r=r|0;var o=0;o=s[r+16>>2]|0,(r|0)!=(o|0)?o|0&&ht[s[(s[o>>2]|0)+20>>2]&255](o):ht[s[(s[o>>2]|0)+16>>2]&255](o)}function jR(r){r=r|0;var o=0,u=0,c=0,h=0,p=0,m=0,A=0,_=0,E=0,k=0,O=0,U=0;U=w,w=w+96|0,h=U+16|0,k=U,A=U+72|0,p=s[r>>2]|0,_=te[r+114>>1]|0,E=k,s[E>>2]=0,s[E+4>>2]=0,E=k+8|0,s[E>>2]=_,s[E+4>>2]=0,s[h>>2]=s[k>>2],s[h+4>>2]=s[k+4>>2],s[h+8>>2]=s[k+8>>2],s[h+12>>2]=s[k+12>>2],Pu(p,h),p=r+120|0;e:do if(s[p>>2]|0){for(m=h+2|0,_=h+16|0,E=h+20|0,k=h+18|0,u=0;;){if(!(Ec(s[r>>2]|0)|0)||Ab(s[r>>2]|0)|0)break e;for(go(s[r>>2]|0,h,54),o=7277,c=m;(y[c>>0]|0)==(y[o>>0]|0);)if(c=c+1|0,(c|0)==(_|0)){O=8;break}else o=o+1|0;if((O|0)==8&&(O=0,(L[k>>0]|L[k+1>>0]<<8)<<16>>16==22204))break;if(vb(s[r>>2]|0,(L[E>>0]|L[E+1>>0]<<8)&65535,0,1),u=u+1|0,u>>>0>=(s[p>>2]|0)>>>0)break e}k=(L[E>>0]|L[E+1>>0]<<8)&65535,O=KA(k)|0,go(s[r>>2]|0,O,k),yb(r,O),pe(O),O=r+125|0,wb(A,r+247|0,(L[O>>0]|L[O+1>>0]<<8)&65535),Tb(r+300|0,A)|0,n1(A),w=U;return}while(0);U=vt(8)|0,_b(U),_t(U|0,2672,8)}function WR(r){r=r|0;var o=0,u=0,c=0,h=0,p=0,m=0,A=0,_=0,E=0,k=0,O=0,U=0;if(O=w,w=w+176|0,h=O+40|0,p=O+24|0,o=O+16|0,c=O,_=O+152|0,E=O+136|0,k=O+56|0,A=s[r>>2]|0,m=r+116|0,U=s[m>>2]|0,u=p,s[u>>2]=0,s[u+4>>2]=0,u=p+8|0,s[u>>2]=U,s[u+4>>2]=0,s[h>>2]=s[p>>2],s[h+4>>2]=s[p+4>>2],s[h+8>>2]=s[p+8>>2],s[h+12>>2]=s[p+12>>2],Pu(A,h),A=o,s[A>>2]=0,s[A+4>>2]=0,go(s[r>>2]|0,o,8),Ec(s[r>>2]|0)|0||(U=vt(8)|0,Ch(U),_t(U|0,2704,8)),u=o,o=s[u>>2]|0,u=s[u+4>>2]|0,(o|0)==-1&(u|0)==-1&&(U=vt(8)|0,l1(U,7488),_t(U|0,2720,8)),U=s[r>>2]|0,A=c,s[A>>2]=0,s[A+4>>2]=0,A=c+8|0,s[A>>2]=o,s[A+4>>2]=u,s[h>>2]=s[c>>2],s[h+4>>2]=s[c+4>>2],s[h+8>>2]=s[c+8>>2],s[h+12>>2]=s[c+12>>2],Pu(U,h),Ec(s[r>>2]|0)|0||(U=vt(8)|0,Ch(U),_t(U|0,2704,8)),go(s[r>>2]|0,h,8),Ec(s[r>>2]|0)|0||(U=vt(8)|0,Ch(U),_t(U|0,2704,8)),s[h>>2]|0&&(U=vt(8)|0,Fb(U),_t(U|0,2736,8)),p=r+288|0,A=r+292|0,s[A>>2]=s[p>>2],U=r+259|0,(L[U>>0]|L[U+1>>0]<<8|L[U+2>>0]<<16|L[U+3>>0]<<24|0)==-1&&(U=vt(8)|0,l1(U,7606),_t(U|0,2720,8)),c=h+4|0,Ob(p,(s[c>>2]|0)+1|0),U=s[p>>2]|0,s[U>>2]=(s[m>>2]|0)+8,s[U+4>>2]=0,(s[c>>2]|0)>>>0>1){if(i1(_,s[r>>2]|0),c1(E,_),ar(k,32,2,8,0),Ih(E),ur(k),!(s[c>>2]|0))p=s[p>>2]|0,u=p;else{u=1;do u>>>0>1?o=s[(s[p>>2]|0)+(u+-1<<3)>>2]|0:o=0,m=kn(k,E,o,1)|0,o=s[p>>2]|0,U=o+(u<<3)|0,s[U>>2]=m,s[U+4>>2]=((m|0)<0)<<31>>31,u=u+1|0;while(u>>>0<=(s[c>>2]|0)>>>0);u=o,p=o}if(o=s[A>>2]|0,o-u>>3>>>0>1){h=o-p>>3,c=p,o=1,u=s[c>>2]|0,c=s[c+4>>2]|0;do U=p+(o<<3)|0,A=U,u=Vr(s[A>>2]|0,s[A+4>>2]|0,u|0,c|0)|0,c=tt()|0,s[U>>2]=u,s[U+4>>2]=c,o=o+1|0;while(o>>>0<h>>>0)}lr(k),f1(E),r1(_)}w=O}function GR(r){r=r|0,y[r+12>>0]=0,y[r+13>>0]=0}function ZR(r){r=r|0,s[r+8>>2]=0,s[r+4>>2]=0}function pa(r){return r=r|0,Bc(r)|0}function XR(r,o,u){r=r|0,o=o|0,u=u|0;var c=0,h=0,p=0,m=0,A=0,_=0;if(m=w,w=w+16|0,h=o,p=m,c=u-h|0,c>>>0>4294967279&&id(r),c>>>0<11?y[r+11>>0]=c:(_=c+16&-16,A=ge(_)|0,s[r>>2]=A,s[r+8>>2]=_|-2147483648,s[r+4>>2]=c,r=A),(o|0)!=(u|0)){for(h=u-h|0,c=r;Mu(c,o),o=o+1|0,(o|0)!=(u|0);)c=c+1|0;r=r+h|0}y[p>>0]=0,Mu(r,p),w=m}function Mu(r,o){r=r|0,o=o|0,y[r>>0]=y[o>>0]|0}function HR(r){r=r|0,fr(r),pe(r)}function YR(r,o){r=r|0,o=o|0,s[r>>2]=4372,s[r+16>>2]=r}function $R(r,o,u){r=r|0,o=o|0,u=u|0,s[r>>2]=o,o=s[o+4>>2]|0,s[r+4>>2]=o,s[r+8>>2]=o+(u*24|0)}function JR(r){r=r|0,s[(s[r>>2]|0)+4>>2]=s[r+4>>2]}function Mh(r,o){r=r|0,o=o|0;var u=0,c=0;u=o+16|0,c=s[u>>2]|0;do if(c)if((o|0)==(c|0)){c=o1(r)|0,s[r+16>>2]=c,u=s[u>>2]|0,bs[s[(s[u>>2]|0)+12>>2]&15](u,c);break}else{s[r+16>>2]=c,s[u>>2]=0;break}else s[r+16>>2]=0;while(0)}function o1(r){return r=r|0,r|0}function QR(r,o,u,c){r=r|0,o=o|0,u=u|0,c=c|0;var h=0;h=r+12|0,s[h>>2]=0,s[r+16>>2]=c;do if(o)if(o>>>0>178956970)h=vt(8)|0,qi(h,6723),s[h>>2]=5956,_t(h|0,3928,123);else{c=ge(o*24|0)|0;break}else c=0;while(0);s[r>>2]=c,u=c+(u*24|0)|0,s[r+8>>2]=u,s[r+4>>2]=u,s[h>>2]=c+(o*24|0)}function qR(r,o){r=r|0,o=o|0;var u=0,c=0,h=0,p=0,m=0,A=0,_=0;if(A=s[r>>2]|0,_=r+4|0,u=s[_>>2]|0,m=o+4|0,(u|0)==(A|0))h=m,p=r,c=s[m>>2]|0,u=A;else{c=s[m>>2]|0;do u=u+-24|0,Mh(c+-24|0,u),c=(s[m>>2]|0)+-24|0,s[m>>2]=c;while((u|0)!=(A|0));h=m,p=r,u=s[r>>2]|0}s[p>>2]=c,s[h>>2]=u,A=o+8|0,m=s[_>>2]|0,s[_>>2]=s[A>>2],s[A>>2]=m,A=r+8|0,_=o+12|0,r=s[A>>2]|0,s[A>>2]=s[_>>2],s[_>>2]=r,s[o>>2]=s[h>>2]}function KR(r){r=r|0;var o=0,u=0,c=0,h=0;if(u=s[r+4>>2]|0,c=r+8|0,o=s[c>>2]|0,(o|0)!=(u|0))do h=o+-24|0,s[c>>2]=h,Ph(h),o=s[c>>2]|0;while((o|0)!=(u|0));o=s[r>>2]|0,o|0&&He(o,(s[r+12>>2]|0)-o|0)}function eb(r){return r=r|0,178956970}function tb(r){r=r|0,pe(r)}function nb(r){return r=r|0,r=ge(8)|0,s[r>>2]=4372,r|0}function rb(r,o){r=r|0,o=o|0,s[o>>2]=4372}function ib(r){r=r|0}function sb(r){r=r|0,He(r,8)}function ob(r,o){r=r|0,o=o|0,cb(r+4|0,o)}function ab(r,o){return r=r|0,o=o|0,((s[o+4>>2]|0)==7183?r+4|0:0)|0}function ub(r){return r=r|0,2664}function lb(r){r=r|0}function cb(r,o){r=r|0,o=o|0,fb(r,o)}function fb(r,o){r=r|0,o=o|0;var u=0,c=0;if(r=o+104|0,o=L[r>>0]|0,u=o>>>7,c=o>>>6&1,(u|0)==1&(c|0)!=0&&(c=vt(8)|0,hb(c),_t(c|0,2632,8)),(u|0)==(c|0))c=vt(8)|0,db(c),_t(c|0,2648,8);else{y[r>>0]=o&63;return}}function hb(r){r=r|0,ii(r,7076),s[r>>2]=4416}function db(r){r=r|0,ii(r,7144),s[r>>2]=4436}function pb(r){r=r|0,fr(r),pe(r)}function gb(r){r=r|0,fr(r),pe(r)}function mb(r){r=r|0,s[r>>2]=6092}function Ec(r){r=r|0;var o=0;return o=r+12|0,r=(y[o>>0]|0)==0,y[o>>0]=0,r|0}function Ab(r){return r=r|0,(y[r+13>>0]|0)!=0|0}function yb(r,o){r=r|0,o=o|0,r=r+247|0,Eb(r,o),(L[r>>0]|L[r+1>>0]<<8)<<16>>16!=2&&(o=vt(8)|0,a1(o),_t(o|0,2688,8))}function vb(r,o,u,c){r=r|0,o=o|0,u=u|0,c=c|0;var h=0,p=0;switch(c|0){case 0:break;case 2:{c=s[r+4>>2]|0,o=Vr(Vr(o|0,u|0,-1,-1)|0,tt()|0,c|0,((c|0)<0)<<31>>31|0)|0,u=tt()|0;break}case 1:{c=s[r+8>>2]|0,o=Vr(c|0,((c|0)<0)<<31>>31|0,o|0,u|0)|0,u=tt()|0;break}default:u=0,o=0}h=s[r+4>>2]|0,p=((h|0)<0)<<31>>31,c=r+12|0,(u|0)<0|((u|0)>(p|0)|(u|0)==(p|0)&o>>>0>=h>>>0)?y[c>>0]=1:(y[c>>0]=0,s[r+8>>2]=o)}function _b(r){r=r|0,ii(r,7410),s[r>>2]=4476}function wb(r,o,u){r=r|0,o=o|0,u=u|0;var c=0,h=0,p=0,m=0,A=0,_=0,E=0;if(m=w,w=w+16|0,p=m,s1(r),h=o+32|0,(L[h>>0]|L[h+1>>0]<<8)<<16>>16){c=o+34|0,o=0;do _=L[c>>0]|L[c+1>>0]<<8|L[c+2>>0]<<16|L[c+3>>0]<<24,E=_+(o*6|0)|0,A=_+(o*6|0)+2|0,_=_+(o*6|0)+4|0,Cu(p,(L[E>>0]|L[E+1>>0]<<8)&65535,(L[A>>0]|L[A+1>>0]<<8)&65535,(L[_>>0]|L[_+1>>0]<<8)&65535),u1(r,p),u=u-((L[A>>0]|L[A+1>>0]<<8)&65535)|0,o=o+1|0;while(o>>>0<((L[h>>0]|L[h+1>>0]<<8)&65535)>>>0)}(u|0)<0&&(E=vt(8)|0,a1(E),_t(E|0,2688,8)),u|0&&(Cu(p,0,u,2),u1(r,p)),w=m}function Tb(r,o){r=r|0,o=o|0;var u=0,c=0;return u=w,w=w+16|0,c=u+1|0,y[c>>0]=y[u>>0]|0,Ib(r,o,c),w=u,r|0}function Eb(r,o){r=r|0,o=o|0;var u=0,c=0,h=0,p=0,m=0,A=0,_=0;if(c=o+2|0,p=L[o>>0]|L[o+1>>0]<<8,y[r>>0]=p,y[r+1>>0]=p>>8,p=r+2|0,c=L[c>>0]|L[c+1>>0]<<8,y[p>>0]=c,y[p+1>>0]=c>>8,y[r+4>>0]=y[o+4>>0]|0,p=o+6|0,y[r+5>>0]=y[o+5>>0]|0,c=o+8|0,u=r+6|0,p=L[p>>0]|L[p+1>>0]<<8,y[u>>0]=p,y[u+1>>0]=p>>8,u=o+12|0,p=r+8|0,c=L[c>>0]|L[c+1>>0]<<8|L[c+2>>0]<<16|L[c+3>>0]<<24,y[p>>0]=c,y[p+1>>0]=c>>8,y[p+2>>0]=c>>16,y[p+3>>0]=c>>24,p=r+12|0,u=L[u>>0]|L[u+1>>0]<<8|L[u+2>>0]<<16|L[u+3>>0]<<24,y[p>>0]=u,y[p+1>>0]=u>>8,y[p+2>>0]=u>>16,y[p+3>>0]=u>>24,p=o+16|0,u=p,u=L[u>>0]|L[u+1>>0]<<8|L[u+2>>0]<<16|L[u+3>>0]<<24,p=p+4|0,p=L[p>>0]|L[p+1>>0]<<8|L[p+2>>0]<<16|L[p+3>>0]<<24,c=r+16|0,m=c,y[m>>0]=u,y[m+1>>0]=u>>8,y[m+2>>0]=u>>16,y[m+3>>0]=u>>24,c=c+4|0,y[c>>0]=p,y[c+1>>0]=p>>8,y[c+2>>0]=p>>16,y[c+3>>0]=p>>24,c=o+32|0,p=o+24|0,m=p,m=L[m>>0]|L[m+1>>0]<<8|L[m+2>>0]<<16|L[m+3>>0]<<24,p=p+4|0,p=L[p>>0]|L[p+1>>0]<<8|L[p+2>>0]<<16|L[p+3>>0]<<24,u=r+24|0,h=u,y[h>>0]=m,y[h+1>>0]=m>>8,y[h+2>>0]=m>>16,y[h+3>>0]=m>>24,u=u+4|0,y[u>>0]=p,y[u+1>>0]=p>>8,y[u+2>>0]=p>>16,y[u+3>>0]=p>>24,u=o+34|0,p=r+32|0,c=L[c>>0]|L[c+1>>0]<<8,y[p>>0]=c,y[p+1>>0]=c>>8,h=r+34|0,r=L[h>>0]|L[h+1>>0]<<8|L[h+2>>0]<<16|L[h+3>>0]<<24,r?(ey(r),r=L[p>>0]|L[p+1>>0]<<8):r=c,c=KA((r&65535)*6|0)|0,y[h>>0]=c,y[h+1>>0]=c>>8,y[h+2>>0]=c>>16,y[h+3>>0]=c>>24,r<<16>>16&&(r=o+36|0,m=L[u>>0]|L[u+1>>0]<<8,y[c>>0]=m,y[c+1>>0]=m>>8,o=o+38|0,m=c+2|0,r=L[r>>0]|L[r+1>>0]<<8,y[m>>0]=r,y[m+1>>0]=r>>8,m=c+4|0,o=L[o>>0]|L[o+1>>0]<<8,y[m>>0]=o,y[m+1>>0]=o>>8,((L[p>>0]|L[p+1>>0]<<8)&65535)>1)){r=1;do o=u,u=u+6|0,m=L[h>>0]|L[h+1>>0]<<8|L[h+2>>0]<<16|L[h+3>>0]<<24,A=o+8|0,c=m+(r*6|0)|0,_=L[u>>0]|L[u+1>>0]<<8,y[c>>0]=_,y[c+1>>0]=_>>8,o=o+10|0,c=m+(r*6|0)+2|0,A=L[A>>0]|L[A+1>>0]<<8,y[c>>0]=A,y[c+1>>0]=A>>8,m=m+(r*6|0)+4|0,o=L[o>>0]|L[o+1>>0]<<8,y[m>>0]=o,y[m+1>>0]=o>>8,r=r+1|0;while(r>>>0<((L[p>>0]|L[p+1>>0]<<8)&65535)>>>0)}}function a1(r){r=r|0,ii(r,7354),s[r>>2]=4456}function Sb(r){r=r|0,fr(r),pe(r)}function xb(r){r=r|0,fr(r),pe(r)}function u1(r,o){r=r|0,o=o|0;var u=0,c=0,h=0,p=0,m=0,A=0,_=0,E=0;A=w,w=w+32|0,h=A,p=r+4|0,u=s[p>>2]|0,m=r+8|0;do if((u|0)==(s[m>>2]|0))if(u=((u-(s[r>>2]|0)|0)/12|0)+1|0,c=Cb(r)|0,c>>>0<u>>>0)Pn(r);else{_=s[r>>2]|0,E=((s[m>>2]|0)-_|0)/12|0,m=E<<1,kb(h,E>>>0<c>>>1>>>0?m>>>0<u>>>0?u:m:c,((s[p>>2]|0)-_|0)/12|0,r+8|0),m=h+8|0,p=s[m>>2]|0,s[p>>2]=s[o>>2],s[p+4>>2]=s[o+4>>2],s[p+8>>2]=s[o+8>>2],s[m>>2]=(s[m>>2]|0)+12,Pb(r,h),Mb(h);break}else Rb(h,r,1),E=h+4|0,_=s[E>>2]|0,s[_>>2]=s[o>>2],s[_+4>>2]=s[o+4>>2],s[_+8>>2]=s[o+8>>2],s[E>>2]=(s[E>>2]|0)+12,bb(h);while(0);w=A}function Cu(r,o,u,c){r=r|0,o=o|0,u=u|0,c=c|0,s[r>>2]=o,s[r+4>>2]=u,s[r+8>>2]=c}function Rb(r,o,u){r=r|0,o=o|0,u=u|0,s[r>>2]=o,o=s[o+4>>2]|0,s[r+4>>2]=o,s[r+8>>2]=o+(u*12|0)}function bb(r){r=r|0,s[(s[r>>2]|0)+4>>2]=s[r+4>>2]}function kb(r,o,u,c){r=r|0,o=o|0,u=u|0,c=c|0;var h=0;h=r+12|0,s[h>>2]=0,s[r+16>>2]=c;do if(o)if(o>>>0>357913941)h=vt(8)|0,qi(h,6723),s[h>>2]=5956,_t(h|0,3928,123);else{c=ge(o*12|0)|0;break}else c=0;while(0);s[r>>2]=c,u=c+(u*12|0)|0,s[r+8>>2]=u,s[r+4>>2]=u,s[h>>2]=c+(o*12|0)}function Pb(r,o){r=r|0,o=o|0;var u=0,c=0,h=0,p=0,m=0;c=s[r>>2]|0,m=r+4|0,p=o+4|0,h=(s[m>>2]|0)-c|0,u=(s[p>>2]|0)+(((h|0)/-12|0)*12|0)|0,s[p>>2]=u,(h|0)>0?(hr(u|0,c|0,h|0)|0,c=p,u=s[p>>2]|0):c=p,p=s[r>>2]|0,s[r>>2]=u,s[c>>2]=p,p=o+8|0,h=s[m>>2]|0,s[m>>2]=s[p>>2],s[p>>2]=h,p=r+8|0,m=o+12|0,r=s[p>>2]|0,s[p>>2]=s[m>>2],s[m>>2]=r,s[o>>2]=s[c>>2]}function Mb(r){r=r|0;var o=0,u=0,c=0;o=s[r+4>>2]|0,u=r+8|0,c=s[u>>2]|0,(c|0)!=(o|0)&&(s[u>>2]=c+(~(((c+-12-o|0)>>>0)/12|0)*12|0)),o=s[r>>2]|0,o|0&&He(o,(s[r+12>>2]|0)-o|0)}function Cb(r){return r=r|0,357913941}function Ib(r,o,u){r=r|0,o=o|0,u=u|0;var c=0;Nb(r),s[r>>2]=s[o>>2],u=o+4|0,s[r+4>>2]=s[u>>2],c=o+8|0,s[r+8>>2]=s[c>>2],s[c>>2]=0,s[u>>2]=0,s[o>>2]=0}function Nb(r){r=r|0;var o=0,u=0,c=0,h=0;o=s[r>>2]|0,u=o,o|0&&(c=r+4|0,s[c>>2]=u,h=r+8|0,He(o,(s[h>>2]|0)-u|0),s[h>>2]=0,s[c>>2]=0,s[r>>2]=0)}function Ch(r){r=r|0,ii(r,7660),s[r>>2]=4496}function l1(r,o){r=r|0,o=o|0,ii(r,o),s[r>>2]=4516}function Fb(r){r=r|0,ii(r,7704),s[r>>2]=4536}function Ob(r,o){r=r|0,o=o|0;var u=0,c=0,h=0;u=r+4|0,h=s[r>>2]|0,c=(s[u>>2]|0)-h>>3,c>>>0>=o>>>0?c>>>0>o>>>0&&(s[u>>2]=h+(o<<3)):Bb(r,o-c|0)}function c1(r,o){r=r|0,o=o|0,s[r>>2]=o,s[r+4>>2]=0,s[r+8>>2]=-1}function ar(r,o,u,c,h){r=r|0,o=o|0,u=u|0,c=c|0,h=h|0;var p=0;s[r+4>>2]=o,s[r+8>>2]=u,s[r+12>>2]=c,s[r+16>>2]=h,s[r+36>>2]=0,s[r+40>>2]=0,s[r+44>>2]=0,h1(r+48|0),s[r+68>>2]=0,s[r+72>>2]=0,s[r+76>>2]=0;do if(h){for(c=r+20|0,s[c>>2]=0,s[r+24>>2]=h,u=h,p=0;u=u>>>1,o=p+1|0,u;)p=o;s[c>>2]=(1<<p|0)==(h|0)?p:o,u=h>>>1,s[r+28>>2]=0-u,u=h+-1-u|0}else if(u=r+20|0,(o+-1|0)>>>0<31){s[u>>2]=o,h=1<<o,s[r+24>>2]=h,u=h>>>1,s[r+28>>2]=0-u,u=h+-1-u|0;break}else{s[u>>2]=32,s[r+24>>2]=0,s[r+28>>2]=-2147483648,u=2147483647;break}while(0);s[r+32>>2]=u,s[r>>2]=0}function Ih(r){r=r|0;var o=0;o=((Iu(s[r>>2]|0)|0)&255)<<24,o=((Iu(s[r>>2]|0)|0)&255)<<16|o,o=o|((Iu(s[r>>2]|0)|0)&255)<<8,s[r+4>>2]=o|(Iu(s[r>>2]|0)|0)&255}function ur(r){r=r|0;var o=0,u=0,c=0,h=0,p=0,m=0,A=0,_=0,E=0,k=0,O=0,U=0,Z=0,H=0,G=0,be=0,oe=0,re=0;G=w,w=w+64|0,Z=G+44|0,H=G,E=r+36|0,k=r+40|0;e:do if((s[E>>2]|0)==(s[k>>2]|0)){O=r+8|0;t:do if(!(s[O>>2]|0))U=r+20|0;else{for(h=r+20|0,p=r+44|0,m=Z+4|0,A=r+44|0,_=Z+8|0,c=0;;){if(an(H,(s[h>>2]|0)+1|0,0,0),o=s[k>>2]|0,o>>>0<(s[p>>2]|0)>>>0)p1(Z,E,1),xc(s[m>>2]|0,H),s[m>>2]=(s[m>>2]|0)+44,g1(Z);else{if(o=((o-(s[E>>2]|0)|0)/44|0)+1|0,u=v1(E)|0,u>>>0<o>>>0)break;be=s[E>>2]|0,re=((s[p>>2]|0)-be|0)/44|0,oe=re<<1,m1(Z,re>>>0<u>>>1>>>0?oe>>>0<o>>>0?o:oe:u,((s[k>>2]|0)-be|0)/44|0,A),xc(s[_>>2]|0,H),s[_>>2]=(s[_>>2]|0)+44,A1(E,Z),y1(Z)}if(Lt(H),c=c+1|0,c>>>0>=(s[O>>2]|0)>>>0){U=h;break t}}Pn(E)}while(0);if(s[U>>2]|0){for(m=r+12|0,A=r+68|0,_=r+72|0,E=r+76|0,k=Z+4|0,h=r+76|0,p=Z+8|0,c=1;;){if(o=s[m>>2]|0,an(H,1<<(c>>>0>o>>>0?o:c),0,0),o=s[_>>2]|0,o>>>0<(s[E>>2]|0)>>>0)p1(Z,A,1),xc(s[k>>2]|0,H),s[k>>2]=(s[k>>2]|0)+44,g1(Z);else{if(o=((o-(s[A>>2]|0)|0)/44|0)+1|0,u=v1(A)|0,u>>>0<o>>>0)break;re=s[A>>2]|0,be=((s[E>>2]|0)-re|0)/44|0,oe=be<<1,m1(Z,be>>>0<u>>>1>>>0?oe>>>0<o>>>0?o:oe:u,((s[_>>2]|0)-re|0)/44|0,h),xc(s[p>>2]|0,H),s[p>>2]=(s[p>>2]|0)+44,A1(A,Z),y1(Z)}if(Lt(H),c=c+1|0,c>>>0>(s[U>>2]|0)>>>0)break e}Pn(A)}}while(0);w=G}function kn(r,o,u,c){return r=r|0,o=o|0,u=u|0,c=c|0,u=(Kb(r,o,(s[r+36>>2]|0)+(c*44|0)|0)|0)+u|0,o=s[r+24>>2]|0,(u|0)<0?u+o|0:u-(u>>>0<o>>>0?0:o)|0}function lr(r){r=r|0,Sc(r+68|0),Sc(r+36|0)}function f1(r){r=r|0}function Lb(r){r=r|0,fr(r),pe(r)}function Vb(r){r=r|0,fr(r),pe(r)}function Ub(r){r=r|0,fr(r),pe(r)}function Bb(r,o){r=r|0,o=o|0;var u=0,c=0,h=0,p=0,m=0,A=0,_=0,E=0;A=w,w=w+32|0,h=A,p=r+8|0,m=r+4|0,u=s[m>>2]|0;do if((s[p>>2]|0)-u>>3>>>0<o>>>0)if(u=(u-(s[r>>2]|0)>>3)+o|0,c=Hb(r)|0,c>>>0<u>>>0)Pn(r);else{_=s[r>>2]|0,E=(s[p>>2]|0)-_|0,p=E>>2,zb(h,E>>3>>>0<c>>>1>>>0?p>>>0<u>>>0?u:p:c,(s[m>>2]|0)-_>>3,r+8|0),jb(h,o),Wb(r,h),Gb(h);break}else Db(r,o);while(0);w=A}function Db(r,o){r=r|0,o=o|0;var u=0,c=0,h=0;h=w,w=w+16|0,c=h,Zb(c,r,o),r=c+4|0,o=s[r>>2]|0,u=s[c+8>>2]|0,(o|0)!=(u|0)&&(u=u+-8-o|0,Ro(o|0,0,u+8&-8|0)|0,s[r>>2]=o+((u>>>3)+1<<3)),Xb(c),w=h}function zb(r,o,u,c){r=r|0,o=o|0,u=u|0,c=c|0;var h=0;h=r+12|0,s[h>>2]=0,s[r+16>>2]=c;do if(o)if(o>>>0>536870911)h=vt(8)|0,qi(h,6723),s[h>>2]=5956,_t(h|0,3928,123);else{c=ge(o<<3)|0;break}else c=0;while(0);s[r>>2]=c,u=c+(u<<3)|0,s[r+8>>2]=u,s[r+4>>2]=u,s[h>>2]=c+(o<<3)}function jb(r,o){r=r|0,o=o|0;var u=0,c=0;c=w,w=w+16|0,u=c,Yb(u,r+8|0,o),r=s[u>>2]|0,o=s[u+4>>2]|0,(r|0)!=(o|0)&&(o=o+-8-r|0,Ro(r|0,0,o+8&-8|0)|0,s[u>>2]=r+((o>>>3)+1<<3)),$b(u),w=c}function Wb(r,o){r=r|0,o=o|0;var u=0,c=0,h=0,p=0,m=0;c=s[r>>2]|0,m=r+4|0,p=o+4|0,h=(s[m>>2]|0)-c|0,u=(s[p>>2]|0)+(0-(h>>3)<<3)|0,s[p>>2]=u,(h|0)>0?(hr(u|0,c|0,h|0)|0,c=p,u=s[p>>2]|0):c=p,p=s[r>>2]|0,s[r>>2]=u,s[c>>2]=p,p=o+8|0,h=s[m>>2]|0,s[m>>2]=s[p>>2],s[p>>2]=h,p=r+8|0,m=o+12|0,r=s[p>>2]|0,s[p>>2]=s[m>>2],s[m>>2]=r,s[o>>2]=s[c>>2]}function Gb(r){r=r|0;var o=0,u=0,c=0;o=s[r+4>>2]|0,u=r+8|0,c=s[u>>2]|0,(c|0)!=(o|0)&&(s[u>>2]=c+(~((c+-8-o|0)>>>3)<<3)),o=s[r>>2]|0,o|0&&He(o,(s[r+12>>2]|0)-o|0)}function Zb(r,o,u){r=r|0,o=o|0,u=u|0,s[r>>2]=o,o=s[o+4>>2]|0,s[r+4>>2]=o,s[r+8>>2]=o+(u<<3)}function Xb(r){r=r|0,s[(s[r>>2]|0)+4>>2]=s[r+4>>2]}function Hb(r){return r=r|0,536870911}function Yb(r,o,u){r=r|0,o=o|0,u=u|0,s[r>>2]=s[o>>2],s[r+4>>2]=(s[o>>2]|0)+(u<<3),s[r+8>>2]=o}function $b(r){r=r|0,s[s[r+8>>2]>>2]=s[r>>2]}function h1(r){r=r|0,s[r+12>>2]=1,s[r+16>>2]=2,s[r+8>>2]=4096,s[r+4>>2]=4,s[r>>2]=4}function Sc(r){r=r|0;var o=0,u=0,c=0;if(u=s[r>>2]|0,u|0){if(c=r+4|0,o=s[c>>2]|0,(o|0)==(u|0))o=u;else{do o=o+-44|0,Lt(o);while((o|0)!=(u|0));o=s[r>>2]|0}s[c>>2]=u,He(o,(s[r+8>>2]|0)-o|0)}}function Lt(r){r=r|0;var o=0;o=s[r+8>>2]|0,o|0&&Tc(o),o=s[r+12>>2]|0,o|0&&Tc(o),o=s[r+16>>2]|0,o|0&&Tc(o)}function Iu(r){r=r|0;var o=0,u=0;return u=r+4|0,o=s[u>>2]|0,(o|0)>=(s[r+8>>2]|0)&&(d1(r),o=s[u>>2]|0),r=s[r+12>>2]|0,s[u>>2]=o+1,y[r+o>>0]|0}function d1(r){r=r|0;var o=0;if(s[r+4>>2]=0,go(s[r>>2]|0,s[r+12>>2]|0,1048576),o=Jb(s[r>>2]|0)|0,s[r+8>>2]=o,!o)o=vt(8)|0,Qb(o),_t(o|0,2752,8);else return}function Jb(r){return r=r|0,s[r+16>>2]|0}function Qb(r){r=r|0,ii(r,7769),s[r>>2]=4556}function qb(r){r=r|0,fr(r),pe(r)}function an(r,o,u,c){r=r|0,o=o|0,u=u|0,c=c|0;var h=0,p=0,m=0;if(s[r>>2]=o,y[r+4>>0]=u&1,p=r+8|0,s[p>>2]=0,m=r+12|0,s[m>>2]=0,h=r+16|0,s[h>>2]=0,(o+-2|0)>>>0>2046&&(r=vt(8)|0,ii(r,7789),_t(r|0,3912,8)),s[r+32>>2]=o+-1,o>>>0>16&(u^1)){for(u=3;1<<u+2>>>0<o>>>0;)u=u+1|0;o=1<<u,s[r+36>>2]=o,s[r+40>>2]=15-u,s[h>>2]=po((o<<2)+8|0)|0,o=s[r>>2]|0}else s[h>>2]=0,s[r+40>>2]=0,s[r+36>>2]=0;if(s[p>>2]=po(o<<2)|0,h=po(s[r>>2]<<2)|0,s[m>>2]=h,s[r+20>>2]=0,o=s[r>>2]|0,u=r+24|0,s[u>>2]=o,o=(o|0)!=0,c){if(o){o=0;do s[h+(o<<2)>>2]=s[c+(o<<2)>>2],o=o+1|0;while(o>>>0<(s[r>>2]|0)>>>0)}}else if(o){o=0;do s[h+(o<<2)>>2]=1,o=o+1|0;while(o>>>0<(s[r>>2]|0)>>>0)}Fh(r),c=((s[r>>2]|0)+6|0)>>>1,s[u>>2]=c,s[r+28>>2]=c}function p1(r,o,u){r=r|0,o=o|0,u=u|0,s[r>>2]=o,o=s[o+4>>2]|0,s[r+4>>2]=o,s[r+8>>2]=o+(u*44|0)}function g1(r){r=r|0,s[(s[r>>2]|0)+4>>2]=s[r+4>>2]}function xc(r,o){r=r|0,o=o|0;var u=0;s[r>>2]=s[o>>2],y[r+4>>0]=y[o+4>>0]|0,u=o+8|0,s[r+8>>2]=s[u>>2],s[r+12>>2]=s[o+12>>2],s[r+16>>2]=s[o+16>>2],s[r+20>>2]=s[o+20>>2],s[r+24>>2]=s[o+24>>2],s[r+28>>2]=s[o+28>>2],s[r+32>>2]=s[o+32>>2],s[r+36>>2]=s[o+36>>2],s[r+40>>2]=s[o+40>>2],s[u>>2]=0,s[u+4>>2]=0,s[u+8>>2]=0}function m1(r,o,u,c){r=r|0,o=o|0,u=u|0,c=c|0;var h=0;h=r+12|0,s[h>>2]=0,s[r+16>>2]=c;do if(o)if(o>>>0>97612893)h=vt(8)|0,qi(h,6723),s[h>>2]=5956,_t(h|0,3928,123);else{c=ge(o*44|0)|0;break}else c=0;while(0);s[r>>2]=c,u=c+(u*44|0)|0,s[r+8>>2]=u,s[r+4>>2]=u,s[h>>2]=c+(o*44|0)}function A1(r,o){r=r|0,o=o|0;var u=0,c=0,h=0,p=0,m=0,A=0,_=0;if(A=s[r>>2]|0,_=r+4|0,u=s[_>>2]|0,m=o+4|0,(u|0)==(A|0))h=m,p=r,c=s[m>>2]|0,u=A;else{c=s[m>>2]|0;do u=u+-44|0,Nh(c+-44|0,u),c=(s[m>>2]|0)+-44|0,s[m>>2]=c;while((u|0)!=(A|0));h=m,p=r,u=s[r>>2]|0}s[p>>2]=c,s[h>>2]=u,A=o+8|0,m=s[_>>2]|0,s[_>>2]=s[A>>2],s[A>>2]=m,A=r+8|0,_=o+12|0,r=s[A>>2]|0,s[A>>2]=s[_>>2],s[_>>2]=r,s[o>>2]=s[h>>2]}function y1(r){r=r|0;var o=0,u=0,c=0,h=0;if(u=s[r+4>>2]|0,c=r+8|0,o=s[c>>2]|0,(o|0)!=(u|0))do h=o+-44|0,s[c>>2]=h,Lt(h),o=s[c>>2]|0;while((o|0)!=(u|0));o=s[r>>2]|0,o|0&&He(o,(s[r+12>>2]|0)-o|0)}function v1(r){return r=r|0,97612893}function Nh(r,o){r=r|0,o=o|0;var u=0,c=0,h=0,p=0;u=s[o>>2]|0,s[r>>2]=u,y[r+4>>0]=y[o+4>>0]|0,s[r+20>>2]=s[o+20>>2],s[r+24>>2]=s[o+24>>2],s[r+28>>2]=s[o+28>>2],s[r+32>>2]=s[o+32>>2],p=r+36|0,s[p>>2]=s[o+36>>2],s[r+40>>2]=s[o+40>>2],u=u<<2,c=po(u)|0,s[r+8>>2]=c,h=s[r>>2]|0,h|0&&Ur(c|0,s[o+8>>2]|0,h<<2|0)|0,u=po(u)|0,s[r+12>>2]=u,c=s[r>>2]|0,c|0&&Ur(u|0,s[o+12>>2]|0,c<<2|0)|0,u=s[p>>2]|0,u?(c=po((u<<2)+8|0)|0,s[r+16>>2]=c,u=(s[p>>2]<<2)+8|0,u|0&&Ur(c|0,s[o+16>>2]|0,u|0)|0):s[r+16>>2]=0}function Fh(r){r=r|0;var o=0,u=0,c=0,h=0,p=0,m=0,A=0,_=0,E=0,k=0,O=0,U=0,Z=0,H=0;if(H=r+24|0,h=r+20|0,o=(s[h>>2]|0)+(s[H>>2]|0)|0,s[h>>2]=o,o>>>0>32768)if(s[h>>2]=0,!(s[r>>2]|0))o=0;else{c=s[r+12>>2]|0,u=0;do O=c+(u<<2)|0,o=((s[O>>2]|0)+1|0)>>>1,s[O>>2]=o,o=(s[h>>2]|0)+o|0,s[h>>2]=o,u=u+1|0;while(u>>>0<(s[r>>2]|0)>>>0)}O=2147483648/(o>>>0)|0;do if(!(y[r+4>>0]|0)&&(U=r+36|0,(s[U>>2]|0)!=0)){if(s[r>>2]|0){A=s[r+8>>2]|0,_=s[r+12>>2]|0,E=r+40|0,k=r+16|0,o=0,p=0,m=0;do{if(u=($e(p,O)|0)>>>16,s[A+(m<<2)>>2]=u,p=(s[_+(m<<2)>>2]|0)+p|0,u=u>>>(s[E>>2]|0),o>>>0<u>>>0){c=m+-1|0,h=s[k>>2]|0;do o=o+1|0,s[h+(o<<2)>>2]=c;while((o|0)!=(u|0));o=u}m=m+1|0}while(m>>>0<(s[r>>2]|0)>>>0);if(u=s[k>>2]|0,s[u>>2]=0,o>>>0>(s[U>>2]|0)>>>0){o=r;break}}else u=s[r+16>>2]|0,s[u>>2]=0,o=0;do o=o+1|0,s[u+(o<<2)>>2]=(s[r>>2]|0)+-1;while(o>>>0<=(s[U>>2]|0)>>>0);o=r}else Z=7;while(0);if((Z|0)==7)if(!(s[r>>2]|0))o=r;else{c=s[r+8>>2]|0,h=s[r+12>>2]|0,o=0,u=0;do s[c+(o<<2)>>2]=($e(u,O)|0)>>>16,u=(s[h+(o<<2)>>2]|0)+u|0,o=o+1|0;while(o>>>0<(s[r>>2]|0)>>>0);o=r}Z=((s[H>>2]|0)*5|0)>>>2,U=(s[o>>2]<<3)+48|0,Z=Z>>>0>U>>>0?U:Z,s[H>>2]=Z,s[r+28>>2]=Z}function Kb(r,o,u){r=r|0,o=o|0,u=u|0;var c=0;u=un(o,u)|0,s[r>>2]=u;do if(u){if(u>>>0>=32){u=s[r+28>>2]|0;break}if(c=s[r+12>>2]|0,u>>>0>c>>>0?(c=u-c|0,u=un(o,(s[r+68>>2]|0)+((u+-1|0)*44|0)|0)|0,c=u<<c|(_1(o,c)|0)):c=un(o,(s[r+68>>2]|0)+((u+-1|0)*44|0)|0)|0,u=s[r>>2]|0,(c|0)<(1<<u+-1|0)){u=c+1+(-1<<u)|0;break}else{u=c+1|0;break}}else u=ek(o,r+48|0)|0;while(0);return u|0}function un(r,o){r=r|0,o=o|0;var u=0,c=0,h=0,p=0,m=0,A=0,_=0,E=0,k=0,O=0,U=0,Z=0;if(U=r+8|0,O=s[U>>2]|0,h=s[o+16>>2]|0,h){if(c=r+4|0,u=s[c>>2]|0,k=O>>>15,s[U>>2]=k,_=(u>>>0)/(k>>>0)|0,A=_>>>(s[o+40>>2]|0),p=s[h+(A<<2)>>2]|0,A=(s[h+(A+1<<2)>>2]|0)+1|0,m=p+1|0,E=s[o+8>>2]|0,A>>>0>m>>>0){h=p,p=A;do m=(p+h|0)>>>1,A=(s[E+(m<<2)>>2]|0)>>>0>_>>>0,h=A?h:m,p=A?m:p,m=h+1|0;while(p>>>0>m>>>0);p=h}h=$e(s[E+(p<<2)>>2]|0,k)|0,(p|0)==(s[o+32>>2]|0)?m=O:m=$e(s[E+(m<<2)>>2]|0,k)|0}else{E=O>>>15,s[U>>2]=E,A=s[o>>2]|0,k=s[o+8>>2]|0,c=r+4|0,u=s[c>>2]|0,_=A>>>1,h=0,m=O,p=0;do Z=$e(s[k+(_<<2)>>2]|0,E)|0,O=Z>>>0>u>>>0,m=O?Z:m,h=O?h:Z,p=O?p:_,A=O?_:A,_=(p+A|0)>>>1;while((_|0)!=(p|0))}return s[c>>2]=u-h,Z=m-h|0,s[U>>2]=Z,Z>>>0<16777216&&Rc(r),U=(s[o+12>>2]|0)+(p<<2)|0,s[U>>2]=(s[U>>2]|0)+1,U=o+28|0,Z=(s[U>>2]|0)+-1|0,s[U>>2]=Z,Z||Fh(o),p|0}function _1(r,o){r=r|0,o=o|0;var u=0,c=0,h=0,p=0;return o>>>0>19?(u=(Oh(r)|0)&65535,(_1(r,o+-16|0)|0)<<16|u|0):(c=r+4|0,h=s[c>>2]|0,p=r+8|0,u=(s[p>>2]|0)>>>o,s[p>>2]=u,o=(h>>>0)/(u>>>0)|0,s[c>>2]=h-($e(o,u)|0),u>>>0<16777216&&Rc(r),o|0)}function ek(r,o){r=r|0,o=o|0;var u=0,c=0,h=0,p=0,m=0,A=0;return c=r+8|0,h=s[c>>2]|0,u=$e(h>>>13,s[o+8>>2]|0)|0,p=r+4|0,m=s[p>>2]|0,A=m>>>0>=u>>>0,A?(s[p>>2]=m-u,u=h-u|0,s[c>>2]=u):(s[c>>2]=u,m=o+12|0,s[m>>2]=(s[m>>2]|0)+1),u>>>0<16777216&&Rc(r),m=o+4|0,r=(s[m>>2]|0)+-1|0,s[m>>2]=r,r||w1(o),A&1|0}function Rc(r){r=r|0;var o=0,u=0,c=0,h=0;o=r+4|0,u=r+8|0,c=s[o>>2]|0;do c=c<<8|(Iu(s[r>>2]|0)|0)&255,s[o>>2]=c,h=s[u>>2]<<8,s[u>>2]=h;while(h>>>0<16777216)}function Oh(r){r=r|0;var o=0,u=0,c=0,h=0;return u=r+4|0,h=s[u>>2]|0,o=r+8|0,c=(s[o>>2]|0)>>>16,s[o>>2]=c,o=(h>>>0)/(c>>>0)|0,s[u>>2]=h-($e(o,c)|0),Rc(r),o&65535|0}function w1(r){r=r|0;var o=0,u=0,c=0,h=0,p=0;h=s[r>>2]|0,u=r+16|0,o=(s[u>>2]|0)+h|0,s[u>>2]=o,o>>>0>8192?(c=(o+1|0)>>>1,s[u>>2]=c,p=r+12|0,o=((s[p>>2]|0)+1|0)>>>1,s[p>>2]=o,(o|0)==(c|0)?(o=c+1|0,s[u>>2]=o,u=o,o=c):u=c):(u=o,o=s[r+12>>2]|0),s[r+8>>2]=($e(o,2147483648/(u>>>0)|0)|0)>>>18,p=h*5|0,p=p>>>0>259?64:p>>>2,s[r>>2]=p,s[r+4>>2]=p}function tk(r,o){r=r|0,o=o|0;var u=0,c=0,h=0,p=0,m=0,A=0,_=0,E=0,k=0,O=0,U=0;k=w,w=w+32|0,p=k+16|0,m=k+8|0,A=k,_=r+336|0,c=_,h=r+259|0,!(s[c+4>>2]|0)&&(s[c>>2]|0)==(L[h>>0]|L[h+1>>0]<<8|L[h+2>>0]<<16|L[h+3>>0]<<24|0)?(c=r+320|0,u=s[r+320>>2]|0,E=5):(c=r+320|0,u=s[c>>2]|0,h=u,u|0&&s[r+312>>2]|0||(u=h,E=5)),(E|0)==5&&(E=r+320|0,s[p>>2]=u,s[E>>2]=0,u=r+324|0,s[p+4>>2]=s[u>>2],s[u>>2]=0,wc(p),h=r+312|0,s[p>>2]=s[h>>2],s[h>>2]=0,O=r+316|0,s[p+4>>2]=s[O>>2],s[O>>2]=0,kh(p),U=ge(12)|0,c1(U,r+4|0),s[A>>2]=0,s[p>>2]=s[A>>2],rk(m,U,p),U=s[m>>2]|0,s[m>>2]=s[h>>2],s[h>>2]=U,U=m+4|0,A=s[U>>2]|0,s[U>>2]=s[O>>2],s[O>>2]=A,kh(m),nk(m,s[h>>2]|0,r+300|0),h=s[m>>2]|0,O=m+4|0,A=s[O>>2]|0,s[m>>2]=0,s[O>>2]=0,s[p>>2]=s[E>>2],s[E>>2]=h,s[p+4>>2]=s[u>>2],s[u>>2]=A,wc(p),wc(m),u=r+328|0,A=u,A=Vr(s[A>>2]|0,s[A+4>>2]|0,1,0)|0,E=tt()|0,s[u>>2]=A,s[u+4>>2]=E,u=_,s[u>>2]=0,s[u+4>>2]=0,u=s[c>>2]|0),Zu[s[s[u>>2]>>2]&63](u,o)|0,E=_,E=Vr(s[E>>2]|0,s[E+4>>2]|0,1,0)|0,O=tt()|0,U=_,s[U>>2]=E,s[U+4>>2]=O,w=k}function nk(r,o,u){r=r|0,o=o|0,u=u|0;var c=0,h=0,p=0,m=0;m=w,w=w+64|0,c=m+56|0,h=m,p=lk(u)|0,(p|0)==-1&&(m=vt(8)|0,ck(m),_t(m|0,2784,8)),u=T1(u)|0;e:do if(u)fk(c,o),hk(s[c>>2]|0),(p|2|0)==3&&dk(s[c>>2]|0),(p|1|0)==3&&pk(s[c>>2]|0),p=s[c>>2]|0,mk(h,u),gk(p,h),E1(h),s[r>>2]=s[c>>2],p=c+4|0,s[r+4>>2]=s[p>>2],s[c>>2]=0,s[p>>2]=0,Ak(c);else switch(p|0){case 0:{p=ge(4788)|0,vk(p),yk(r,o,p);break e}case 1:{p=ge(5116)|0,wk(p),_k(r,o,p);break e}case 2:{p=ge(5104)|0,Ek(p),Tk(r,o,p);break e}case 3:{p=ge(5432)|0,xk(p),Sk(r,o,p);break e}default:{s[r>>2]=0,s[r+4>>2]=0;break e}}while(0);w=m}function rk(r,o,u){r=r|0,o=o|0,u=u|0;var c=0,h=0;u=w,w=w+16|0,c=u,s[r>>2]=o,h=ge(16)|0,s[h+4>>2]=0,s[h+8>>2]=0,s[h>>2]=4576,s[h+12>>2]=o,s[r+4>>2]=h,s[c>>2]=o,s[c+4>>2]=o,ik(r,c),w=u}function ik(r,o){r=r|0,o=o|0}function sk(r){r=r|0,jt(r),pe(r)}function ok(r){r=r|0,r=s[r+12>>2]|0,r|0&&(f1(r),pe(r))}function ak(r,o){return r=r|0,o=o|0,((s[o+4>>2]|0)==7983?r+12|0:0)|0}function uk(r){r=r|0,He(r,16)}function lk(r){r=r|0;var o=0,u=0;o=(s[r+4>>2]|0)-(s[r>>2]|0)|0;e:do if(o|0&&(u=((o|0)/12|0)+(((T1(r)|0)!=0)<<31>>31)|0,(u|0)!=0)&&(o=s[r>>2]|0,!(Rk(o,bk()|0)|0))){switch(u|0){case 1:{r=0;break e}case 2:{if(Nu((s[r>>2]|0)+12|0,S1()|0)|0){r=1;break e}if(Nu((s[r>>2]|0)+12|0,x1()|0)|0){r=2;break e}break}case 3:{if(Nu((s[r>>2]|0)+12|0,S1()|0)|0&&(u=(s[r>>2]|0)+24|0,Nu(u,x1()|0)|0)){r=3;break e}break}default:}r=-1}else r=-1;while(0);return r|0}function ck(r){r=r|0,ii(r,8131),s[r>>2]=4604}function T1(r){r=r|0;var o=0,u=0;return o=s[r+4>>2]|0,(o|0)!=(s[r>>2]|0)&&(u=o,(s[u+-12>>2]|0)==0)&&(s[u+-4>>2]|0)==2?r=s[u+-8>>2]|0:r=0,r|0}function fk(r,o){r=r|0,o=o|0;var u=0,c=0,h=0,p=0;u=w,w=w+16|0,c=u+4|0,p=u,h=ge(24)|0,Pk(h,o),s[p>>2]=0,s[c>>2]=s[p>>2],Mk(r,h,c),w=u}function hk(r){r=r|0;var o=0,u=0,c=0,h=0,p=0,m=0,A=0,_=0,E=0,k=0;_=w,w=w+32|0,c=_+12|0,h=_,o=_+8|0,m=ge(4792)|0,Bk(m,s[r+4>>2]|0),p=r+8|0,s[o>>2]=0,s[c>>2]=s[o>>2],Dk(h,m,c),m=r+12|0,o=s[m>>2]|0,A=r+16|0;do if(o>>>0>=(s[A>>2]|0)>>>0)if(o=(o-(s[p>>2]|0)>>3)+1|0,u=Ti(p)|0,u>>>0<o>>>0)Pn(p);else{E=s[p>>2]|0,k=(s[A>>2]|0)-E|0,A=k>>2,vi(c,k>>3>>>0<u>>>1>>>0?A>>>0<o>>>0?o:A:u,(s[m>>2]|0)-E>>3,r+16|0),A=c+8|0,m=s[A>>2]|0,s[m>>2]=s[h>>2],r=h+4|0,s[m+4>>2]=s[r>>2],s[h>>2]=0,s[r>>2]=0,s[A>>2]=m+8,_i(p,c),wi(c);break}else Ai(c,p,1),k=c+4|0,E=s[k>>2]|0,s[E>>2]=s[h>>2],A=h+4|0,s[E+4>>2]=s[A>>2],s[h>>2]=0,s[A>>2]=0,s[k>>2]=E+8,yi(c);while(0);Qn(h),w=_}function dk(r){r=r|0;var o=0,u=0,c=0,h=0,p=0,m=0,A=0,_=0,E=0,k=0;_=w,w=w+32|0,c=_+12|0,h=_,o=_+8|0,m=ge(336)|0,aP(m,s[r+4>>2]|0),p=r+8|0,s[o>>2]=0,s[c>>2]=s[o>>2],uP(h,m,c),m=r+12|0,o=s[m>>2]|0,A=r+16|0;do if(o>>>0>=(s[A>>2]|0)>>>0)if(o=(o-(s[p>>2]|0)>>3)+1|0,u=Ti(p)|0,u>>>0<o>>>0)Pn(p);else{E=s[p>>2]|0,k=(s[A>>2]|0)-E|0,A=k>>2,vi(c,k>>3>>>0<u>>>1>>>0?A>>>0<o>>>0?o:A:u,(s[m>>2]|0)-E>>3,r+16|0),A=c+8|0,m=s[A>>2]|0,s[m>>2]=s[h>>2],r=h+4|0,s[m+4>>2]=s[r>>2],s[h>>2]=0,s[r>>2]=0,s[A>>2]=m+8,_i(p,c),wi(c);break}else Ai(c,p,1),k=c+4|0,E=s[k>>2]|0,s[E>>2]=s[h>>2],A=h+4|0,s[E+4>>2]=s[A>>2],s[h>>2]=0,s[A>>2]=0,s[k>>2]=E+8,yi(c);while(0);Qn(h),w=_}function pk(r){r=r|0;var o=0,u=0,c=0,h=0,p=0,m=0,A=0,_=0,E=0,k=0;_=w,w=w+32|0,c=_+12|0,h=_,o=_+8|0,m=ge(324)|0,RP(m,s[r+4>>2]|0),p=r+8|0,s[o>>2]=0,s[c>>2]=s[o>>2],bP(h,m,c),m=r+12|0,o=s[m>>2]|0,A=r+16|0;do if(o>>>0>=(s[A>>2]|0)>>>0)if(o=(o-(s[p>>2]|0)>>3)+1|0,u=Ti(p)|0,u>>>0<o>>>0)Pn(p);else{E=s[p>>2]|0,k=(s[A>>2]|0)-E|0,A=k>>2,vi(c,k>>3>>>0<u>>>1>>>0?A>>>0<o>>>0?o:A:u,(s[m>>2]|0)-E>>3,r+16|0),A=c+8|0,m=s[A>>2]|0,s[m>>2]=s[h>>2],r=h+4|0,s[m+4>>2]=s[r>>2],s[h>>2]=0,s[r>>2]=0,s[A>>2]=m+8,_i(p,c),wi(c);break}else Ai(c,p,1),k=c+4|0,E=s[k>>2]|0,s[E>>2]=s[h>>2],A=h+4|0,s[E+4>>2]=s[A>>2],s[h>>2]=0,s[A>>2]=0,s[k>>2]=E+8,yi(c);while(0);Qn(h),w=_}function gk(r,o){r=r|0,o=o|0;var u=0,c=0,h=0,p=0,m=0,A=0,_=0,E=0,k=0;_=w,w=w+32|0,m=_+12|0,A=_,c=_+8|0,p=ge(64)|0,VP(p,s[r+4>>2]|0,o),h=r+8|0,s[c>>2]=0,s[m>>2]=s[c>>2],UP(A,p,m),p=r+12|0,o=s[p>>2]|0,c=r+16|0;do if(o>>>0>=(s[c>>2]|0)>>>0)if(o=(o-(s[h>>2]|0)>>3)+1|0,u=Ti(h)|0,u>>>0<o>>>0)Pn(h);else{E=s[h>>2]|0,k=(s[c>>2]|0)-E|0,c=k>>2,vi(m,k>>3>>>0<u>>>1>>>0?c>>>0<o>>>0?o:c:u,(s[p>>2]|0)-E>>3,r+16|0),r=m+8|0,p=s[r>>2]|0,s[p>>2]=s[A>>2],c=A+4|0,s[p+4>>2]=s[c>>2],s[A>>2]=0,s[c>>2]=0,s[r>>2]=p+8,_i(h,m),wi(m);break}else Ai(m,h,1),k=m+4|0,E=s[k>>2]|0,s[E>>2]=s[A>>2],r=A+4|0,s[E+4>>2]=s[r>>2],s[A>>2]=0,s[r>>2]=0,s[k>>2]=E+8,yi(m);while(0);Qn(A),w=_}function mk(r,o){r=r|0,o=o|0;var u=0,c=0;u=w,w=w+48|0,c=u,s[r>>2]=o,y[r+4>>0]=0,oA(r+8|0,o),oA(r+20|0,o),an(c,256,0,0),lM(r+32|0,o,c),Lt(c),w=u}function E1(r){r=r|0,hM(r+32|0),Y1(r+20|0),Y1(r+8|0)}function Ak(r){r=r|0;var o=0,u=0;r=s[r+4>>2]|0,r|0&&(u=r+4|0,o=s[u>>2]|0,s[u>>2]=o+-1,(o|0)==0)&&(ht[s[(s[r>>2]|0)+8>>2]&255](r),Qi(r))}function yk(r,o,u){r=r|0,o=o|0,u=u|0;var c=0,h=0,p=0,m=0;c=w,w=w+16|0,h=c+4|0,m=c,p=ge(12)|0,dM(p,o,u),s[m>>2]=0,s[h>>2]=s[m>>2],pM(r,p,h),w=c}function vk(r){r=r|0,Fu(r),Wh(r+4784|0)}function _k(r,o,u){r=r|0,o=o|0,u=u|0;var c=0,h=0,p=0,m=0;c=w,w=w+16|0,h=c+4|0,m=c,p=ge(12)|0,EM(p,o,u),s[m>>2]=0,s[h>>2]=s[m>>2],SM(r,p,h),w=c}function wk(r){r=r|0,Fu(r),OM(r+4784|0)}function Tk(r,o,u){r=r|0,o=o|0,u=u|0;var c=0,h=0,p=0,m=0;c=w,w=w+16|0,h=c+4|0,m=c,p=ge(12)|0,LM(p,o,u),s[m>>2]=0,s[h>>2]=s[m>>2],VM(r,p,h),w=c}function Ek(r){r=r|0,Fu(r),hA(r+4784|0)}function Sk(r,o,u){r=r|0,o=o|0,u=u|0;var c=0,h=0,p=0,m=0;c=w,w=w+16|0,h=c+4|0,m=c,p=ge(12)|0,XM(p,o,u),s[m>>2]=0,s[h>>2]=s[m>>2],HM(r,p,h),w=c}function xk(r){r=r|0,Fu(r),iC(r+4784|0)}function Rk(r,o){return r=r|0,o=o|0,(Nu(r,o)|0)^1|0}function bk(){return!(y[21456]|0)&&Eo(21456)|0&&(Cu(21536,6,20,2),So(21456)),21536}function Nu(r,o){return r=r|0,o=o|0,(s[r>>2]|0)==(s[o>>2]|0)&&(s[r+8>>2]|0)==(s[o+8>>2]|0)?r=(s[r+4>>2]|0)==(s[o+4>>2]|0):r=0,r|0}function S1(){return!(y[21464]|0)&&Eo(21464)|0&&(Cu(21548,7,8,2),So(21464)),21548}function x1(){return!(y[21472]|0)&&Eo(21472)|0&&(Cu(21560,8,6,2),So(21472)),21560}function kk(r){r=r|0,fr(r),pe(r)}function Pk(r,o){r=r|0,o=o|0,ga(r),s[r>>2]=4624,s[r+4>>2]=o,s[r+8>>2]=0,s[r+12>>2]=0,s[r+16>>2]=0,y[r+20>>0]=1}function Mk(r,o,u){r=r|0,o=o|0,u=u|0;var c=0,h=0;u=w,w=w+16|0,c=u,s[r>>2]=o,h=ge(16)|0,s[h+4>>2]=0,s[h+8>>2]=0,s[h>>2]=4664,s[h+12>>2]=o,s[r+4>>2]=h,s[c>>2]=o,s[c+4>>2]=o,Fk(r,c),w=u}function ga(r){r=r|0,s[r>>2]=4644}function Ck(r,o){r=r|0,o=o|0;var u=0,c=0,h=0,p=0,m=0,A=0,_=0;if(_=w,w=w+16|0,p=_,u=s[r+8>>2]|0,m=s[r+12>>2]|0,(u|0)!=(m|0)){A=p+4|0;do c=s[u>>2]|0,s[p>>2]=c,h=s[u+4>>2]|0,s[A>>2]=h,h|0&&(h=h+4|0,s[h>>2]=(s[h>>2]|0)+1),o=Zu[s[(s[c>>2]|0)+12>>2]&63](c,o)|0,Qn(p),u=u+8|0;while((u|0)!=(m|0))}return u=r+20|0,y[u>>0]|0&&(y[u>>0]=0,Ih(s[r+4>>2]|0)),w=_,o|0}function R1(r){r=r|0,s[r>>2]=4624,b1(r+8|0),mo(r)}function Ik(r){r=r|0,R1(r),pe(r)}function mo(r){r=r|0}function Nk(r){r=r|0,t1()}function Qn(r){r=r|0;var o=0,u=0;r=s[r+4>>2]|0,r|0&&(u=r+4|0,o=s[u>>2]|0,s[u>>2]=o+-1,(o|0)==0)&&(ht[s[(s[r>>2]|0)+8>>2]&255](r),Qi(r))}function b1(r){r=r|0;var o=0,u=0,c=0;if(u=s[r>>2]|0,u|0){if(c=r+4|0,o=s[c>>2]|0,(o|0)==(u|0))o=u;else{do o=o+-8|0,Qn(o);while((o|0)!=(u|0));o=s[r>>2]|0}s[c>>2]=u,He(o,(s[r+8>>2]|0)-o|0)}}function Fk(r,o){r=r|0,o=o|0}function Ok(r){r=r|0,jt(r),pe(r)}function Lk(r){r=r|0,r=s[r+12>>2]|0,r|0&&ht[s[(s[r>>2]|0)+8>>2]&255](r)}function Vk(r,o){return r=r|0,o=o|0,((s[o+4>>2]|0)==8546?r+12|0:0)|0}function Uk(r){r=r|0,He(r,16)}function Bk(r,o){r=r|0,o=o|0,Ei(r),s[r>>2]=4692,s[r+4>>2]=o,Fu(r+8|0)}function Dk(r,o,u){r=r|0,o=o|0,u=u|0;var c=0,h=0;u=w,w=w+16|0,c=u,s[r>>2]=o,h=ge(16)|0,s[h+4>>2]=0,s[h+8>>2]=0,s[h>>2]=4740,s[h+12>>2]=o,s[r+4>>2]=h,s[c>>2]=o,s[c+4>>2]=o,Si(r,c),w=u}function Ai(r,o,u){r=r|0,o=o|0,u=u|0,s[r>>2]=o,o=s[o+4>>2]|0,s[r+4>>2]=o,s[r+8>>2]=o+(u<<3)}function yi(r){r=r|0,s[(s[r>>2]|0)+4>>2]=s[r+4>>2]}function vi(r,o,u,c){r=r|0,o=o|0,u=u|0,c=c|0;var h=0;h=r+12|0,s[h>>2]=0,s[r+16>>2]=c;do if(o)if(o>>>0>536870911)h=vt(8)|0,qi(h,6723),s[h>>2]=5956,_t(h|0,3928,123);else{c=ge(o<<3)|0;break}else c=0;while(0);s[r>>2]=c,u=c+(u<<3)|0,s[r+8>>2]=u,s[r+4>>2]=u,s[h>>2]=c+(o<<3)}function _i(r,o){r=r|0,o=o|0;var u=0,c=0,h=0,p=0,m=0,A=0,_=0;if(A=s[r>>2]|0,_=r+4|0,u=s[_>>2]|0,m=o+4|0,(u|0)==(A|0))h=m,p=r,c=s[m>>2]|0,u=A;else{c=s[m>>2]|0;do p=u,u=u+-8|0,s[c+-8>>2]=s[u>>2],p=p+-4|0,s[c+-4>>2]=s[p>>2],s[u>>2]=0,s[p>>2]=0,c=(s[m>>2]|0)+-8|0,s[m>>2]=c;while((u|0)!=(A|0));h=m,p=r,u=s[r>>2]|0}s[p>>2]=c,s[h>>2]=u,A=o+8|0,m=s[_>>2]|0,s[_>>2]=s[A>>2],s[A>>2]=m,A=r+8|0,_=o+12|0,r=s[A>>2]|0,s[A>>2]=s[_>>2],s[_>>2]=r,s[o>>2]=s[h>>2]}function wi(r){r=r|0;var o=0,u=0,c=0,h=0;if(u=s[r+4>>2]|0,c=r+8|0,o=s[c>>2]|0,(o|0)!=(u|0))do h=o+-8|0,s[c>>2]=h,Qn(h),o=s[c>>2]|0;while((o|0)!=(u|0));o=s[r>>2]|0,o|0&&He(o,(s[r+12>>2]|0)-o|0)}function Ti(r){return r=r|0,536870911}function Ei(r){r=r|0,s[r>>2]=4716}function Fu(r){r=r|0,Xk(r),Hk(r+3980|0),Yk(r+4380|0),y[r+4780>>0]=0,y[r+4781>>0]=0}function k1(r){r=r|0,s[r>>2]=4692,Ou(r+8|0),Fr(r)}function zk(r){r=r|0,k1(r),pe(r)}function jk(r,o){return r=r|0,o=o|0,o|0}function Wk(r,o){return r=r|0,o=o|0,Lu(r+8|0,s[r+4>>2]|0,o)|0}function Fr(r){r=r|0}function Gk(r){r=r|0,Fr(r),pe(r)}function Zk(r,o){return r=r|0,o=o|0,o|0}function Xk(r){r=r|0;var o=0,u=0;P1(r),M1(r+52|0),M1(r+436|0),an(r+852|0,64,0,0),y[r+3976>>0]=0,o=r+20|0,u=o+32|0;do J[o>>1]=0,o=o+2|0;while((o|0)<(u|0));o=ge(44)|0,an(o,256,0,0),s[r+896>>2]=o,o=ge(44)|0,an(o,256,0,0),s[r+900>>2]=o,o=r+820|0,s[o>>2]=0,s[o+4>>2]=0,s[o+8>>2]=0,s[o+12>>2]=0,s[o+16>>2]=0,s[o+20>>2]=0,s[o+24>>2]=0,s[o+28>>2]=0,o=0;do u=ge(44)|0,an(u,256,0,0),s[r+904+(o<<2)>>2]=u,u=ge(44)|0,an(u,256,0,0),s[r+1928+(o<<2)>>2]=u,u=ge(44)|0,an(u,256,0,0),s[r+2952+(o<<2)>>2]=u,o=o+1|0;while(o>>>0<256)}function Hk(r){r=r|0,Or(r,16,4,8,0),Or(r+80|0,16,1,8,0),Or(r+160|0,32,2,8,0),Or(r+240|0,32,22,8,0),Or(r+320|0,32,20,8,0)}function Yk(r){r=r|0,ar(r,16,4,8,0),ar(r+80|0,16,1,8,0),ar(r+160|0,32,2,8,0),ar(r+240|0,32,22,8,0),ar(r+320|0,32,20,8,0)}function $k(r){r=r|0,Lr(r+320|0),Lr(r+240|0),Lr(r+160|0),Lr(r+80|0),Lr(r)}function Jk(r){r=r|0;var o=0,u=0;o=s[r+896>>2]|0,o|0&&(Lt(o),pe(o)),o=s[r+900>>2]|0,o|0&&(Lt(o),pe(o)),u=0;do o=s[r+904+(u<<2)>>2]|0,o|0&&(Lt(o),pe(o)),o=s[r+1928+(u<<2)>>2]|0,o|0&&(Lt(o),pe(o)),o=s[r+2952+(u<<2)>>2]|0,o|0&&(Lt(o),pe(o)),u=u+1|0;while((u|0)!=256);Lt(r+852|0)}function P1(r){r=r|0;var o=0;y[r>>0]=0,y[r+1>>0]=0,y[r+2>>0]=0,y[r+3>>0]=0,o=r+4|0,y[o>>0]=0,y[o+1>>0]=0,y[o+2>>0]=0,y[o+3>>0]=0,r=r+12|0,o=r,y[o>>0]=0,y[o+1>>0]=0,y[o+2>>0]=0,y[o+3>>0]=0,r=r+4|0,y[r>>0]=0,y[r+1>>0]=0,y[r+2>>0]=0,y[r+3>>0]=0}function M1(r){r=r|0;var o=0;o=r+384|0;do Qk(r),r=r+24|0;while((r|0)!=(o|0))}function Qk(r){r=r|0,qk(r)}function qk(r){r=r|0,s[r>>2]=0,s[r+4>>2]=0,s[r+8>>2]=0,s[r+12>>2]=0,s[r+16>>2]=0,y[r+20>>0]=1}function Or(r,o,u,c,h){r=r|0,o=o|0,u=u|0,c=c|0,h=h|0;var p=0;s[r+4>>2]=o,s[r+8>>2]=u,s[r+12>>2]=c,s[r+16>>2]=h,s[r+36>>2]=0,s[r+40>>2]=0,s[r+44>>2]=0,h1(r+48|0),s[r+68>>2]=0,s[r+72>>2]=0,s[r+76>>2]=0;do if(h){for(c=r+20|0,s[c>>2]=0,s[r+24>>2]=h,u=h,p=0;u=u>>>1,o=p+1|0,u;)p=o;s[c>>2]=(1<<p|0)==(h|0)?p:o,u=h>>>1,s[r+28>>2]=0-u,u=h+-1-u|0}else if(u=r+20|0,(o+-1|0)>>>0<31){s[u>>2]=o,h=1<<o,s[r+24>>2]=h,u=h>>>1,s[r+28>>2]=0-u,u=h+-1-u|0;break}else{s[u>>2]=32,s[r+24>>2]=0,s[r+28>>2]=-2147483648,u=2147483647;break}while(0);s[r+32>>2]=u,s[r>>2]=0}function Lr(r){r=r|0;var o=0,u=0,c=0,h=0,p=0;if(p=r+36|0,u=s[p>>2]|0,c=r+40|0,o=s[c>>2]|0,(o|0)!=(u|0))do o=o+-44|0,Lt(o);while((o|0)!=(u|0));if(s[c>>2]=u,c=r+68|0,h=s[c>>2]|0,u=r+72|0,o=s[u>>2]|0,(o|0)!=(h|0))do o=o+-44|0,Lt(o);while((o|0)!=(h|0));s[u>>2]=h,Sc(c),Sc(p)}function Ou(r){r=r|0,Kk(r+4380|0),$k(r+3980|0),Jk(r)}function Kk(r){r=r|0,lr(r+320|0),lr(r+240|0),lr(r+160|0),lr(r+80|0),lr(r)}function Lu(r,o,u){r=r|0,o=o|0,u=u|0;var c=0,h=0,p=0,m=0,A=0,_=0,E=0,k=0,O=0;if(k=w,w=w+32|0,E=k,c=r+4781|0,y[c>>0]|0||(eP(r+4380|0),y[c>>0]=1),c=r+3976|0,y[c>>0]|0)A=un(o,r+852|0)|0,A?(A&32|0&&I1((un(o,s[r+904+(((C1(r)|0)&255)<<2)>>2]|0)|0)&255,r),_=r+14|0,p=y[_>>0]|0,c=p&7,p=(p&255)>>>3&7,h=L[16+(p<<3)+c>>0]|0,c=L[80+(p<<3)+c>>0]|0,A&16?(O=r+20+(h<<1)|0,m=(kn(r+4380|0,o,te[O>>1]|0,h>>>0<3?h:3)|0)&65535,J[O>>1]=m):m=J[r+20+(h<<1)>>1]|0,J[r+12>>1]=m,A&8|0&&(O=r+15|0,y[O>>0]=un(o,s[r+1928+(L[O>>0]<<2)>>2]|0)|0),A&4|0&&(_=un(o,s[r+896+(((L[_>>0]|0)>>>6&1)<<2)>>2]|0)|0,O=r+16|0,y[O>>0]=Ao(_+(y[O>>0]|0)|0)|0),A&2|0&&(O=r+17|0,y[O>>0]=un(o,s[r+2952+(L[O>>0]<<2)>>2]|0)|0),A&1&&(O=r+18|0,J[O>>1]=kn(r+4460|0,o,te[O>>1]|0,0)|0)):(O=y[r+14>>0]|0,c=O&7,O=(O&255)>>>3&7,p=O,h=L[16+(O<<3)+c>>0]|0,c=L[80+(O<<3)+c>>0]|0),m=r+52+(h*24|0)|0,A=r+4540|0,_=(p|0)==1&1,p=kn(A,o,N1(m)|0,_)|0,s[E>>2]=p,s[r>>2]=(s[r>>2]|0)+p,F1(m,E),m=r+436+(h*24|0)|0,p=N1(m)|0,h=Lh(A)|0,O=r+4620|0,h=kn(O,o,p,(h>>>0<20?h&-2:20)|_)|0,s[E>>2]=h,p=r+4|0,s[p>>2]=(s[p>>2]|0)+h,F1(m,E),E=Lh(A)|0,E=(Lh(O)|0)+E|0,O=r+820+(c<<2)|0,E=kn(r+4700|0,o,s[O>>2]|0,(E>>>0<36?E>>>1&2147483646:18)|_)|0,s[r+8>>2]=E,s[O>>2]=E,nP(r,u);else{y[c>>0]=1,kc(bc(o)|0,u,20),tP(E,u),p=r,c=E,h=p+20|0;do y[p>>0]=y[c>>0]|0,p=p+1|0,c=c+1|0;while((p|0)<(h|0));J[r+12>>1]=0}return w=k,u+20|0}function eP(r){r=r|0,ur(r),ur(r+80|0),ur(r+160|0),ur(r+240|0),ur(r+320|0)}function bc(r){return r=r|0,s[r>>2]|0}function kc(r,o,u){r=r|0,o=o|0,u=u|0;var c=0,h=0,p=0,m=0,A=0,_=0;if(_=r+4|0,c=s[_>>2]|0,A=(s[r+8>>2]|0)-c|0,A=A>>>0>u>>>0?u:A,m=r+12|0,h=(s[m>>2]|0)+c|0,p=h+A|0,A){for(c=h,h=o;y[h>>0]=y[c>>0]|0,c=c+1|0,(c|0)!=(p|0);)h=h+1|0;c=s[_>>2]|0}if(s[_>>2]=c+A,u=u-A|0,u|0){for(d1(r),h=(s[m>>2]|0)+(s[_>>2]|0)|0,p=h+u|0,c=o+A|0;y[c>>0]=y[h>>0]|0,h=h+1|0,(h|0)!=(p|0);)c=c+1|0;s[_>>2]=(s[_>>2]|0)+u}}function tP(r,o){r=r|0,o=o|0,P1(r),s[r>>2]=Pc(o)|0,s[r+4>>2]=Pc(o+4|0)|0,s[r+8>>2]=Pc(o+8|0)|0,J[r+12>>1]=yo(o+12|0)|0,I1(Vh(o+14|0)|0,r),y[r+15>>0]=Vh(o+15|0)|0,y[r+16>>0]=O1(o+16|0)|0,y[r+17>>0]=O1(o+17|0)|0,J[r+18>>1]=yo(o+18|0)|0}function C1(r){return r=r|0,y[r+14>>0]|0}function I1(r,o){r=r|0,o=o|0,y[o+14>>0]=r}function Ao(r){return r=r|0,r&255|0}function N1(r){return r=r|0,s[r+8>>2]|0}function F1(r,o){r=r|0,o=o|0;var u=0,c=0,h=0,p=0,m=0,A=0,_=0;_=r+20|0;do if(y[_>>0]|0){if(h=s[o>>2]|0,m=r+8|0,u=s[m>>2]|0,p=r+12|0,c=s[p>>2]|0,(h|0)>=(u|0)){u=r+16|0,(h|0)<(c|0)?(s[u>>2]=c,s[p>>2]=s[o>>2]):s[u>>2]=h,y[_>>0]=0;break}if(s[r+16>>2]=c,s[p>>2]=u,u=s[o>>2]|0,c=s[r>>2]|0,h=r+4|0,p=s[h>>2]|0,(u|0)<(c|0)){s[m>>2]=p,s[h>>2]=c,s[r>>2]=s[o>>2];break}if((u|0)<(p|0)){s[m>>2]=p,s[h>>2]=s[o>>2];break}else{s[m>>2]=u;break}}else{if(A=r+8|0,u=s[A>>2]|0,c=s[o>>2]|0,h=r+4|0,p=s[h>>2]|0,(u|0)>=(c|0)){(p|0)<(c|0)?(s[r>>2]=p,s[h>>2]=s[o>>2]):s[r>>2]=c,y[_>>0]=1;break}if(s[r>>2]=p,s[h>>2]=u,h=r+16|0,p=s[h>>2]|0,m=s[o>>2]|0,u=r+12|0,c=s[u>>2]|0,(p|0)<(m|0)){s[A>>2]=c,s[u>>2]=p,s[h>>2]=s[o>>2];break}if((c|0)<(m|0)){s[A>>2]=c,s[u>>2]=s[o>>2];break}else{s[A>>2]=m;break}}while(0)}function Lh(r){return r=r|0,s[r>>2]|0}function nP(r,o){r=r|0,o=o|0;var u=0;Cc(L[r>>0]|L[r+1>>0]<<8|L[r+2>>0]<<16|L[r+3>>0]<<24,o),u=r+4|0,Cc(L[u>>0]|L[u+1>>0]<<8|L[u+2>>0]<<16|L[u+3>>0]<<24,o+4|0),u=r+8|0,Cc(L[u>>0]|L[u+1>>0]<<8|L[u+2>>0]<<16|L[u+3>>0]<<24,o+8|0),u=r+12|0,vo(L[u>>0]|L[u+1>>0]<<8,o+12|0),Uh(C1(r)|0,o+14|0),Uh(y[r+15>>0]|0,o+15|0),L1(y[r+16>>0]|0,o+16|0),L1(y[r+17>>0]|0,o+17|0),r=r+18|0,vo(L[r>>0]|L[r+1>>0]<<8,o+18|0)}function Pc(r){return r=r|0,Mc(r)|0}function yo(r){return r=r|0,(y[r+1>>0]<<8|L[r>>0])&65535|0}function Vh(r){return r=r|0,y[r>>0]|0}function O1(r){return r=r|0,y[r>>0]|0}function Mc(r){return r=r|0,(L[r+1>>0]|0)<<8|(L[r>>0]|0)|(L[r+2>>0]|0)<<16|(L[r+3>>0]|0)<<24|0}function Cc(r,o){r=r|0,o=o|0,Ic(r,o)}function vo(r,o){r=r|0,o=o|0,y[o+1>>0]=(r&65535)>>>8,y[o>>0]=r}function Uh(r,o){r=r|0,o=o|0,y[o>>0]=r}function L1(r,o){r=r|0,o=o|0,y[o>>0]=r}function Ic(r,o){r=r|0,o=o|0,y[o+3>>0]=r>>>24,y[o+2>>0]=r>>>16,y[o+1>>0]=r>>>8,y[o>>0]=r}function Si(r,o){r=r|0,o=o|0}function rP(r){r=r|0,jt(r),pe(r)}function iP(r){r=r|0,r=s[r+12>>2]|0,r|0&&ht[s[(s[r>>2]|0)+4>>2]&255](r)}function sP(r,o){return r=r|0,o=o|0,((s[o+4>>2]|0)==9202?r+12|0:0)|0}function oP(r){r=r|0,He(r,16)}function aP(r,o){r=r|0,o=o|0,Ei(r),s[r>>2]=4768,s[r+4>>2]=o,Bh(r+8|0)}function uP(r,o,u){r=r|0,o=o|0,u=u|0;var c=0,h=0;u=w,w=w+16|0,c=u,s[r>>2]=o,h=ge(16)|0,s[h+4>>2]=0,s[h+8>>2]=0,s[h>>2]=4792,s[h+12>>2]=o,s[r+4>>2]=h,s[c>>2]=o,s[c+4>>2]=o,Si(r,c),w=u}function Bh(r){r=r|0,fP(r),hP(r+164|0),dP(r+244|0),y[r+324>>0]=0,y[r+325>>0]=0}function V1(r){r=r|0,s[r>>2]=4768,Dh(r+8|0),Fr(r)}function lP(r){r=r|0,V1(r),pe(r)}function cP(r,o){return r=r|0,o=o|0,Vu(r+8|0,s[r+4>>2]|0,o)|0}function fP(r){r=r|0;var o=0,u=0,c=0,h=0,p=0,m=0,A=0;for(p=w,w=w+16|0,c=p,y[r>>0]=0,an(r+4|0,516,0,0),an(r+48|0,6,0,0),s[r+92>>2]=0,s[r+96>>2]=0,u=r+100|0,mP(u),U1(c),h=s[c>>2]|0,c=s[c+4>>2]|0,o=4;m=u,A=m,y[A>>0]=h,y[A+1>>0]=h>>8,y[A+2>>0]=h>>16,y[A+3>>0]=h>>24,m=m+4|0,y[m>>0]=c,y[m+1>>0]=c>>8,y[m+2>>0]=c>>16,y[m+3>>0]=c>>24,o=o+-1|0,o;)u=u+8|0;A=r+132|0,s[A>>2]=0,s[A+4>>2]=0,s[A+8>>2]=0,s[A+12>>2]=0,s[A+16>>2]=0,s[A+20>>2]=0,s[A+24>>2]=0,s[A+28>>2]=0,w=p}function hP(r){r=r|0,Or(r,32,9,8,0)}function dP(r){r=r|0,ar(r,32,9,8,0)}function pP(r){r=r|0,Lr(r)}function gP(r){r=r|0,Lt(r+48|0),Lt(r+4|0)}function mP(r){r=r|0;var o=0;o=r+32|0;do U1(r),r=r+8|0;while((r|0)!=(o|0))}function U1(r){r=r|0;var o=0;o=r,y[o>>0]=0,y[o+1>>0]=0,y[o+2>>0]=0,y[o+3>>0]=0,r=r+4|0,y[r>>0]=0,y[r+1>>0]=0,y[r+2>>0]=0,y[r+3>>0]=0}function Dh(r){r=r|0,AP(r+244|0),pP(r+164|0),gP(r)}function AP(r){r=r|0,lr(r)}function Vu(r,o,u){r=r|0,o=o|0,u=u|0;var c=0,h=0,p=0,m=0,A=0;if(c=r+325|0,y[c>>0]|0||(yP(r+244|0),y[c>>0]=1),!(y[r>>0]|0))y[r>>0]=1,kc(bc(o)|0,u,8),p=vP(u)|0,m=tt()|0,r=r+100|0,o=r,y[o>>0]=p,y[o+1>>0]=p>>8,y[o+2>>0]=p>>16,y[o+3>>0]=p>>24,r=r+4|0,y[r>>0]=m,y[r+1>>0]=m>>8,y[r+2>>0]=m>>16,y[r+3>>0]=m>>24;else{m=r+92|0;e:do if(s[r+132+(s[m>>2]<<2)>>2]|0){if(p=un(o,r+4|0)|0,(p|0)==1){c=kn(r+244|0,o,s[r+132+(s[m>>2]<<2)>>2]|0,1)|0,A=s[m>>2]|0,o=r+100+(A<<3)|0,p=o,h=p,p=p+4|0,c=Vr(L[h>>0]|L[h+1>>0]<<8|L[h+2>>0]<<16|L[h+3>>0]<<24|0,L[p>>0]|L[p+1>>0]<<8|L[p+2>>0]<<16|L[p+3>>0]<<24|0,c|0,((c|0)<0)<<31>>31|0)|0,p=tt()|0,h=o,y[h>>0]=c,y[h+1>>0]=c>>8,y[h+2>>0]=c>>16,y[h+3>>0]=c>>24,o=o+4|0,y[o>>0]=p,y[o+1>>0]=p>>8,y[o+2>>0]=p>>16,y[o+3>>0]=p>>24,s[r+148+(A<<2)>>2]=0;break}if((p|0)>=511){if((p|0)==512){A=r+96|0,s[A>>2]=(s[A>>2]|0)+1&3,p=r+100+(s[m>>2]<<3)+4|0,p=kn(r+244|0,o,L[p>>0]|L[p+1>>0]<<8|L[p+2>>0]<<16|L[p+3>>0]<<24,8)|0,c=r+100+(s[A>>2]<<3)|0,h=c,y[h>>0]=0,y[h+1>>0]=0,y[h+2>>0]=0,y[h+3>>0]=0,c=c+4|0,y[c>>0]=p,y[c+1>>0]=p>>8,y[c+2>>0]=p>>16,y[c+3>>0]=p>>24,c=B1(o)|0,A=s[A>>2]|0,o=r+100+(A<<3)|0,p=o,h=p,p=p+4|0,p=L[p>>0]|L[p+1>>0]<<8|L[p+2>>0]<<16|L[p+3>>0]<<24,c=L[h>>0]|L[h+1>>0]<<8|L[h+2>>0]<<16|L[h+3>>0]<<24|c,h=o,y[h>>0]=c,y[h+1>>0]=c>>8,y[h+2>>0]=c>>16,y[h+3>>0]=c>>24,o=o+4|0,y[o>>0]=p,y[o+1>>0]=p>>8,y[o+2>>0]=p>>16,y[o+3>>0]=p>>24,s[m>>2]=A,s[r+132+(A<<2)>>2]=0,s[r+148+(s[m>>2]<<2)>>2]=0;break}if((p|0)<=511)break;s[m>>2]=(s[m>>2]|0)+p&3,Vu(r,o,u)|0;break}do if(!p)c=kn(r+244|0,o,0,7)|0,h=r+148+(s[m>>2]<<2)|0,s[h>>2]=(s[h>>2]|0)+1,h=s[m>>2]|0,(s[r+148+(h<<2)>>2]|0)>3&&(s[r+132+(h<<2)>>2]=c,s[r+148+(s[m>>2]<<2)>>2]=0);else{if((p|0)<500)if(c=r+244|0,h=$e(s[r+132+(s[m>>2]<<2)>>2]|0,p)|0,(p|0)<10){c=kn(c,o,h,2)|0;break}else{c=kn(c,o,h,3)|0;break}if((p|0)==500){if(c=kn(r+244|0,o,(s[r+132+(s[m>>2]<<2)>>2]|0)*500|0,4)|0,h=r+148+(s[m>>2]<<2)|0,s[h>>2]=(s[h>>2]|0)+1,h=s[m>>2]|0,(s[r+148+(h<<2)>>2]|0)<=3)break;s[r+132+(h<<2)>>2]=c,s[r+148+(s[m>>2]<<2)>>2]=0;break}if(c=500-p|0,h=r+244|0,p=s[r+132+(s[m>>2]<<2)>>2]|0,(c|0)>-10){c=kn(h,o,$e(p,c)|0,5)|0;break}c=kn(h,o,$e(p,-10)|0,6)|0,h=r+148+(s[m>>2]<<2)|0,s[h>>2]=(s[h>>2]|0)+1,h=s[m>>2]|0,(s[r+148+(h<<2)>>2]|0)>3&&(s[r+132+(h<<2)>>2]=c,s[r+148+(s[m>>2]<<2)>>2]=0)}while(0);A=r+100+(s[m>>2]<<3)|0,h=A,o=h,h=h+4|0,h=Vr(L[o>>0]|L[o+1>>0]<<8|L[o+2>>0]<<16|L[o+3>>0]<<24|0,L[h>>0]|L[h+1>>0]<<8|L[h+2>>0]<<16|L[h+3>>0]<<24|0,c|0,((c|0)<0)<<31>>31|0)|0,o=tt()|0,p=A,y[p>>0]=h,y[p+1>>0]=h>>8,y[p+2>>0]=h>>16,y[p+3>>0]=h>>24,A=A+4|0,y[A>>0]=o,y[A+1>>0]=o>>8,y[A+2>>0]=o>>16,y[A+3>>0]=o>>24}else switch(c=un(o,r+48|0)|0,c|0){case 1:{o=kn(r+244|0,o,0,0)|0,s[r+132+(s[m>>2]<<2)>>2]=o,o=s[m>>2]|0,A=s[r+132+(o<<2)>>2]|0,p=r+100+(o<<3)|0,h=p,c=h,h=h+4|0,A=Vr(L[c>>0]|L[c+1>>0]<<8|L[c+2>>0]<<16|L[c+3>>0]<<24|0,L[h>>0]|L[h+1>>0]<<8|L[h+2>>0]<<16|L[h+3>>0]<<24|0,A|0,((A|0)<0)<<31>>31|0)|0,h=tt()|0,c=p,y[c>>0]=A,y[c+1>>0]=A>>8,y[c+2>>0]=A>>16,y[c+3>>0]=A>>24,p=p+4|0,y[p>>0]=h,y[p+1>>0]=h>>8,y[p+2>>0]=h>>16,y[p+3>>0]=h>>24,s[r+148+(o<<2)>>2]=0;break e}case 2:{A=r+96|0,s[A>>2]=(s[A>>2]|0)+1&3,p=r+100+(s[m>>2]<<3)+4|0,p=kn(r+244|0,o,L[p>>0]|L[p+1>>0]<<8|L[p+2>>0]<<16|L[p+3>>0]<<24,8)|0,c=r+100+(s[A>>2]<<3)|0,h=c,y[h>>0]=0,y[h+1>>0]=0,y[h+2>>0]=0,y[h+3>>0]=0,c=c+4|0,y[c>>0]=p,y[c+1>>0]=p>>8,y[c+2>>0]=p>>16,y[c+3>>0]=p>>24,c=B1(o)|0,A=s[A>>2]|0,o=r+100+(A<<3)|0,p=o,h=p,p=p+4|0,p=L[p>>0]|L[p+1>>0]<<8|L[p+2>>0]<<16|L[p+3>>0]<<24,c=L[h>>0]|L[h+1>>0]<<8|L[h+2>>0]<<16|L[h+3>>0]<<24|c,h=o,y[h>>0]=c,y[h+1>>0]=c>>8,y[h+2>>0]=c>>16,y[h+3>>0]=c>>24,o=o+4|0,y[o>>0]=p,y[o+1>>0]=p>>8,y[o+2>>0]=p>>16,y[o+3>>0]=p>>24,s[m>>2]=A,s[r+132+(A<<2)>>2]=0,s[r+148+(s[m>>2]<<2)>>2]=0;break e}default:{if((c|0)<=2)break e;s[m>>2]=c+2+(s[m>>2]|0)&3,Vu(r,o,u)|0;break e}}while(0);_P(r+100+(s[m>>2]<<3)|0,u)}return u+8|0}function yP(r){r=r|0,ur(r)}function vP(r){r=r|0;var o=0,u=0,c=0;return o=w,w=w+16|0,u=o,c=Mc(r)|0,wP(u,c,Mc(r+4|0)|0),r=s[u>>2]|0,yt(s[u+4>>2]|0),w=o,r|0}function B1(r){r=r|0;var o=0;return o=(Oh(r)|0)&65535,((Oh(r)|0)&65535)<<16|o|0}function _P(r,o){r=r|0,o=o|0;var u=0;u=r,Ic(L[u>>0]|L[u+1>>0]<<8|L[u+2>>0]<<16|L[u+3>>0]<<24,o),r=r+4|0,Ic(L[r>>0]|L[r+1>>0]<<8|L[r+2>>0]<<16|L[r+3>>0]<<24,o+4|0)}function wP(r,o,u){r=r|0,o=o|0,u=u|0;var c=0;c=r,y[c>>0]=o,y[c+1>>0]=o>>8,y[c+2>>0]=o>>16,y[c+3>>0]=o>>24,o=r+4|0,y[o>>0]=u,y[o+1>>0]=u>>8,y[o+2>>0]=u>>16,y[o+3>>0]=u>>24}function TP(r){r=r|0,jt(r),pe(r)}function EP(r){r=r|0,r=s[r+12>>2]|0,r|0&&ht[s[(s[r>>2]|0)+4>>2]&255](r)}function SP(r,o){return r=r|0,o=o|0,((s[o+4>>2]|0)==9890?r+12|0:0)|0}function xP(r){r=r|0,He(r,16)}function RP(r,o){r=r|0,o=o|0,Ei(r),s[r>>2]=4820,s[r+4>>2]=o,D1(r+8|0)}function bP(r,o,u){r=r|0,o=o|0,u=u|0;var c=0,h=0;u=w,w=w+16|0,c=u,s[r>>2]=o,h=ge(16)|0,s[h+4>>2]=0,s[h+8>>2]=0,s[h>>2]=4844,s[h+12>>2]=o,s[r+4>>2]=h,s[c>>2]=o,s[c+4>>2]=o,Si(r,c),w=u}function D1(r){r=r|0,y[r>>0]=0,j1(r+1|0),an(r+8|0,128,0,0),an(r+52|0,256,0,0),an(r+96|0,256,0,0),an(r+140|0,256,0,0),an(r+184|0,256,0,0),an(r+228|0,256,0,0),an(r+272|0,256,0,0)}function z1(r){r=r|0,s[r>>2]=4820,W1(r+8|0),Fr(r)}function kP(r){r=r|0,z1(r),pe(r)}function PP(r,o){return r=r|0,o=o|0,G1(r+8|0,s[r+4>>2]|0,o)|0}function j1(r){r=r|0;var o=0;y[r>>0]=0,y[r+1>>0]=0,o=r+2|0,y[o>>0]=0,y[o+1>>0]=0,r=r+4|0,y[r>>0]=0,y[r+1>>0]=0}function W1(r){r=r|0,Lt(r+272|0),Lt(r+228|0),Lt(r+184|0),Lt(r+140|0),Lt(r+96|0),Lt(r+52|0),Lt(r+8|0)}function G1(r,o,u){r=r|0,o=o|0,u=u|0;var c=0,h=0,p=0,m=0,A=0,_=0,E=0,k=0,O=0;if(k=w,w=w+16|0,_=k,!(y[r>>0]|0))y[r>>0]=1,kc(bc(o)|0,u,6),MP(_,u),E=r+1|0,y[E>>0]=y[_>>0]|0,y[E+1>>0]=y[_+1>>0]|0,y[E+2>>0]=y[_+2>>0]|0,y[E+3>>0]=y[_+3>>0]|0,y[E+4>>0]=y[_+4>>0]|0,y[E+5>>0]=y[_+5>>0]|0;else{E=un(o,r+8|0)|0,j1(_),E&1?(A=(un(o,r+52|0)|0)&255,c=r+1|0,c=(Ao(A+((L[c>>0]|L[c+1>>0]<<8)&255)|0)|0)&255):(c=r+1|0,c=(L[c>>0]|L[c+1>>0]<<8)&255),J[_>>1]=c,E&2?(c=(un(o,r+96|0)|0)&255,A=r+1|0,c=((Ao((((L[A>>0]|L[A+1>>0]<<8)&65535)>>>8)+c|0)|0)&255)<<8,c=(c|te[_>>1])&65535):(A=r+1|0,c=c|(L[A>>0]|L[A+1>>0]<<8)&-256),J[_>>1]=c;do if(E&64)if(m=r+1|0,h=(c&255)-((L[m>>0]|L[m+1>>0]<<8)&255)|0,E&4?(c=(un(o,r+140|0)|0)&255,A=r+3|0,A=h+((L[A>>0]|L[A+1>>0]<<8)&255)|0,c=(Ao(((A|0)<1?0:(A|0)>254?255:A&255)+c|0)|0)&255):(c=r+3|0,c=(L[c>>0]|L[c+1>>0]<<8)&255),A=_+2|0,J[A>>1]=c,E&16?(c=un(o,r+228|0)|0,O=r+3|0,p=r+5|0,p=((h+(J[A>>1]&255)-((L[O>>0]|L[O+1>>0]<<8)&255)|0)/2|0)+((L[p>>0]|L[p+1>>0]<<8)&255)|0,c=(Ao(((p|0)<1?0:(p|0)>254?255:p&255)+(c&255)|0)|0)&255):(c=r+5|0,c=(L[c>>0]|L[c+1>>0]<<8)&255),p=_+4|0,J[p>>1]=c,c=((te[_>>1]|0)>>>8)-(((L[m>>0]|L[m+1>>0]<<8)&65535)>>>8)|0,E&8?(h=(un(o,r+184|0)|0)&255,O=r+3|0,O=(((L[O>>0]|L[O+1>>0]<<8)&65535)>>>8)+c|0,h=((Ao(((O|0)<1?0:(O|0)>254?255:O&255)+h|0)|0)&255)<<8,h=(h|te[A>>1])&65535):(h=r+3|0,h=J[A>>1]|(L[h>>0]|L[h+1>>0]<<8)&-256),J[A>>1]=h,E&32){O=un(o,r+272|0)|0,o=r+3|0,E=r+5|0,E=((((te[A>>1]|0)>>>8)+c-(((L[o>>0]|L[o+1>>0]<<8)&65535)>>>8)|0)/2|0)+(((L[E>>0]|L[E+1>>0]<<8)&65535)>>>8)|0,O=((Ao(((E|0)<1?0:(E|0)>254?255:E&255)+(O&255)|0)|0)&255)<<8,J[p>>1]=O|te[p>>1];break}else{O=r+5|0,J[p>>1]=J[p>>1]|(L[O>>0]|L[O+1>>0]<<8)&-256;break}else J[_+2>>1]=c,J[_+4>>1]=c;while(0);O=r+1|0,y[O>>0]=y[_>>0]|0,y[O+1>>0]=y[_+1>>0]|0,y[O+2>>0]=y[_+2>>0]|0,y[O+3>>0]=y[_+3>>0]|0,y[O+4>>0]=y[_+4>>0]|0,y[O+5>>0]=y[_+5>>0]|0,CP(O,u)}return w=k,u+6|0}function MP(r,o){r=r|0,o=o|0;var u=0,c=0;c=yo(o)|0,u=yo(o+2|0)|0,IP(r,c,u,yo(o+4|0)|0)}function CP(r,o){r=r|0,o=o|0;var u=0;vo(L[r>>0]|L[r+1>>0]<<8,o),u=r+2|0,vo(L[u>>0]|L[u+1>>0]<<8,o+2|0),r=r+4|0,vo(L[r>>0]|L[r+1>>0]<<8,o+4|0)}function IP(r,o,u,c){r=r|0,o=o|0,u=u|0,c=c|0,y[r>>0]=o,y[r+1>>0]=o>>8,o=r+2|0,y[o>>0]=u,y[o+1>>0]=u>>8,u=r+4|0,y[u>>0]=c,y[u+1>>0]=c>>8}function NP(r){r=r|0,jt(r),pe(r)}function FP(r){r=r|0,r=s[r+12>>2]|0,r|0&&ht[s[(s[r>>2]|0)+4>>2]&255](r)}function OP(r,o){return r=r|0,o=o|0,((s[o+4>>2]|0)==10570?r+12|0:0)|0}function LP(r){r=r|0,He(r,16)}function VP(r,o,u){r=r|0,o=o|0,u=u|0,Ei(r),s[r>>2]=4872,s[r+4>>2]=o,BP(r+8|0,u)}function UP(r,o,u){r=r|0,o=o|0,u=u|0;var c=0,h=0;u=w,w=w+16|0,c=u,s[r>>2]=o,h=ge(16)|0,s[h+4>>2]=0,s[h+8>>2]=0,s[h>>2]=4896,s[h+12>>2]=o,s[r+4>>2]=h,s[c>>2]=o,s[c+4>>2]=o,Si(r,c),w=u}function BP(r,o){r=r|0,o=o|0,s[r>>2]=s[o>>2],y[r+4>>0]=y[o+4>>0]|0,X1(r+8|0,o+8|0),X1(r+20|0,o+20|0),jP(r+32|0,o+32|0)}function Z1(r){r=r|0,s[r>>2]=4872,E1(r+8|0),Fr(r)}function DP(r){r=r|0,Z1(r),pe(r)}function zP(r,o){return r=r|0,o=o|0,rM(r+8|0,s[r+4>>2]|0,o)|0}function X1(r,o){r=r|0,o=o|0;var u=0,c=0;s[r>>2]=0,s[r+4>>2]=0,s[r+8>>2]=0,u=o+4|0,c=(s[u>>2]|0)-(s[o>>2]|0)|0,c|0&&(H1(r,c),WP(r,s[o>>2]|0,s[u>>2]|0,c))}function jP(r,o){r=r|0,o=o|0;var u=0,c=0,h=0,p=0,m=0;u=w,w=w+32|0,c=u+24|0,h=u+16|0,m=u+8|0,p=u,s[r>>2]=0,s[r+4>>2]=0,s[r+8>>2]=0,s[r+12>>2]=0,s[r+16>>2]=0,s[r+20>>2]=0,eM(m,o),tM(p,o),s[h>>2]=s[m>>2],s[h+4>>2]=s[m+4>>2],s[c>>2]=s[p>>2],s[c+4>>2]=s[p+4>>2],ZP(r,h,c,0),w=u}function H1(r,o){r=r|0,o=o|0;var u=0;if((GP(r)|0)>>>0<o>>>0)Pn(r);else{u=ge(o)|0,s[r+4>>2]=u,s[r>>2]=u,s[r+8>>2]=u+o;return}}function WP(r,o,u,c){r=r|0,o=o|0,u=u|0,c=c|0;var h=0,p=0;p=w,w=w+16|0,h=p,$1(h,r,c),c=h+4|0,r=u-o|0,(r|0)>0&&(hr(s[c>>2]|0,o|0,r|0)|0,s[c>>2]=(s[c>>2]|0)+r),J1(h),w=p}function Y1(r){r=r|0;var o=0,u=0;o=s[r>>2]|0,u=o,o|0&&(s[r+4>>2]=u,He(o,(s[r+8>>2]|0)-u|0))}function GP(r){return r=r|0,2147483647}function $1(r,o,u){r=r|0,o=o|0,u=u|0,s[r>>2]=o,o=s[o+4>>2]|0,s[r+4>>2]=o,s[r+8>>2]=o+u}function J1(r){r=r|0,s[(s[r>>2]|0)+4>>2]=s[r+4>>2]}function ZP(r,o,u,c){r=r|0,o=o|0,u=u|0,c=c|0;var h=0,p=0,m=0,A=0,_=0,E=0,k=0,O=0,U=0,Z=0,H=0,G=0;if(G=w,w=w+96|0,H=G+80|0,O=G+64|0,_=G+48|0,E=G+40|0,k=G+8|0,A=G,U=G+32|0,Z=G+16|0,m=o,p=s[m>>2]|0,m=s[m+4>>2]|0,h=u,u=s[h>>2]|0,h=s[h+4>>2]|0,c=p,(h|0)==(m|0)?m=0:m=((h-(s[u>>2]|0)|0)/44|0)+((u-p>>2)*93|0)+((m-(s[p>>2]|0)|0)/-44|0)|0,u=(s[r+8>>2]|0)-(s[r+4>>2]|0)|0,u=(u|0?((u>>2)*93|0)+-1|0:0)-((s[r+20>>2]|0)+(s[r+16>>2]|0))|0,m>>>0>u>>>0&&Q1(r,m-u|0),Uu(E,r),Uu(A,r),h=A,u=s[h>>2]|0,h=s[h+4>>2]|0,p=k,s[p>>2]=u,s[p+4>>2]=h,p=u,m|0&&(u=((h-(s[u>>2]|0)|0)/44|0)+m|0,(u|0)>0?(A=(u>>>0)/93|0,m=p+(A<<2)|0,s[k>>2]=m,u=(s[m>>2]|0)+((u-(A*93|0)|0)*44|0)|0):(u=92-u|0,A=p+(((u|0)/-93|0)<<2)|0,s[k>>2]=A,u=(s[A>>2]|0)+((92-((u|0)%93|0)|0)*44|0)|0),s[k+4>>2]=u),s[O>>2]=s[E>>2],s[O+4>>2]=s[E+4>>2],s[H>>2]=s[k>>2],s[H+4>>2]=s[k+4>>2],zh(_,O,H),q1(H,_),K1(O,_),Nc(H,O)|0){p=Z+4|0,m=o+4|0;do{if(eA(U,H),tA(Z,r,U),u=s[Z>>2]|0,(u|0)!=(s[p>>2]|0)){h=s[m>>2]|0;do Nh(u,h),u=(s[Z>>2]|0)+44|0,s[Z>>2]=u,h=h+44|0,s[m>>2]=h,(h-(s[c>>2]|0)|0)==4092&&(c=c+4|0,s[o>>2]=c,h=s[c>>2]|0,s[m>>2]=h);while((u|0)!=(s[p>>2]|0))}nA(Z),rA(H)|0}while(Nc(H,O)|0)}w=G}function XP(r){r=r|0;var o=0,u=0,c=0;o=s[r+4>>2]|0,u=r+8|0,c=s[u>>2]|0,(c|0)!=(o|0)&&(s[u>>2]=c+(~((c+-4-o|0)>>>2)<<2)),o=s[r>>2]|0,o|0&&He(o,(s[r+12>>2]|0)-o|0)}function Q1(r,o){r=r|0,o=o|0;var u=0,c=0,h=0,p=0,m=0,A=0,_=0,E=0,k=0,O=0,U=0,Z=0,H=0,G=0,be=0,oe=0,re=0,ye=0,q=0,nt=0,Rt=0,rt=0,We=0,wt=0,Ce=0;wt=w,w=w+64|0,ye=wt+52|0,re=wt+48|0,q=wt+28|0,nt=wt+24|0,Rt=wt+20|0,H=wt,rt=r+8|0,u=s[rt>>2]|0,We=r+4|0,_=s[We>>2]|0,be=((u|0)==(_|0)&1)+o|0,m=(be>>>0)/93|0,m=m+((be-(m*93|0)|0)!=0&1)|0,be=r+16|0,c=s[be>>2]|0,A=(c>>>0)/93|0,G=m>>>0<A>>>0?m:A,o=m-G|0,p=u;e:do if(o)if(oe=r+12|0,c=s[oe>>2]|0,h=c-(s[r>>2]|0)|0,u=p-_>>2,o>>>0>((h>>2)-u|0)>>>0){Z=h>>1,U=u+o|0,Ss(H,Z>>>0<U>>>0?U:Z,u-G|0,r+12|0);do s[ye>>2]=ge(4092)|0,$P(H,ye),o=o+-1|0;while(o|0);if(!G)u=s[We>>2]|0;else{A=H+8|0,_=H+12|0,E=H+4|0,k=H+16|0,O=q+4|0,U=q+8|0,Z=q+12|0,m=G,o=s[A>>2]|0,u=s[We>>2]|0;do{p=s[_>>2]|0,c=p;do if((o|0)==(p|0)){if(h=s[E>>2]|0,p=s[H>>2]|0,o=p,h>>>0<=p>>>0){o=c-o|0,o=o|0?o>>1:1,Ss(q,o,o>>>2,s[k>>2]|0),s[nt>>2]=s[E>>2],s[Rt>>2]=s[A>>2],s[re>>2]=s[nt>>2],s[ye>>2]=s[Rt>>2],_o(q,re,ye),o=s[H>>2]|0,s[H>>2]=s[q>>2],s[q>>2]=o,o=s[E>>2]|0,s[E>>2]=s[O>>2],s[O>>2]=o,o=s[A>>2]|0,s[A>>2]=s[U>>2],s[U>>2]=o,o=s[_>>2]|0,s[_>>2]=s[Z>>2],s[Z>>2]=o,xs(q),o=s[A>>2]|0;break}Ce=h,o=((Ce-o>>2)+1|0)/-2|0,p=h+(o<<2)|0,c=c-Ce|0,c?(Ur(p|0,h|0,c|0)|0,o=(s[E>>2]|0)+(o<<2)|0):o=p,Ce=p+(c>>2<<2)|0,s[A>>2]=Ce,s[E>>2]=o,o=Ce}while(0);s[o>>2]=s[u>>2],o=(s[A>>2]|0)+4|0,s[A>>2]=o,u=(s[We>>2]|0)+4|0,s[We>>2]=u,m=m+-1|0}while(m|0)}if(o=s[rt>>2]|0,(o|0)!=(u|0)){do o=o+-4|0,JP(H,o),u=s[We>>2]|0;while((o|0)!=(u|0));o=s[rt>>2]|0}Ce=s[r>>2]|0,s[r>>2]=s[H>>2],s[H>>2]=Ce,Ce=H+4|0,s[We>>2]=s[Ce>>2],s[Ce>>2]=u,Ce=H+8|0,s[rt>>2]=s[Ce>>2],s[Ce>>2]=o,Ce=H+12|0,We=s[oe>>2]|0,s[oe>>2]=s[Ce>>2],s[Ce>>2]=We,s[be>>2]=(s[be>>2]|0)+($e(G,-93)|0),xs(H);break}else{t:do if((c|0)==(p|0))E=18;else{for(;s[ye>>2]=ge(4092)|0,HP(r,ye),o=o+-1|0,!!o;)if((s[oe>>2]|0)==(s[rt>>2]|0)){E=18;break t}u=G,o=s[be>>2]|0}while(0);if((E|0)==18){c=~(m>>>0>A>>>0?A:m),u=o;do s[ye>>2]=ge(4092)|0,YP(r,ye),u=u+-1|0,h=(((s[rt>>2]|0)-(s[We>>2]|0)|0)==4?92:93)+(s[be>>2]|0)|0,s[be>>2]=h;while(u|0);u=o+-1-c|0,o=h}if(s[be>>2]=o+($e(u,-93)|0),!u)break;A=r+12|0,_=q+4|0,E=q+8|0,k=q+12|0,o=s[rt>>2]|0;do{p=s[We>>2]|0,m=s[p>>2]|0,p=p+4|0,s[We>>2]=p,Ce=s[oe>>2]|0,c=Ce;do if((o|0)==(Ce|0)){if(Ce=s[r>>2]|0,o=Ce,p>>>0<=Ce>>>0){o=c-o|0,o=o|0?o>>1:1,Ss(q,o,o>>>2,A),s[nt>>2]=s[We>>2],s[Rt>>2]=s[rt>>2],s[re>>2]=s[nt>>2],s[ye>>2]=s[Rt>>2],_o(q,re,ye),o=s[r>>2]|0,s[r>>2]=s[q>>2],s[q>>2]=o,o=s[We>>2]|0,s[We>>2]=s[_>>2],s[_>>2]=o,o=s[rt>>2]|0,s[rt>>2]=s[E>>2],s[E>>2]=o,o=s[oe>>2]|0,s[oe>>2]=s[k>>2],s[k>>2]=o,xs(q),o=s[rt>>2]|0;break}Ce=p,o=((Ce-o>>2)+1|0)/-2|0,h=p+(o<<2)|0,c=c-Ce|0,c?(Ur(h|0,p|0,c|0)|0,o=(s[We>>2]|0)+(o<<2)|0):o=h,Ce=h+(c>>2<<2)|0,s[rt>>2]=Ce,s[We>>2]=o,o=Ce}while(0);s[o>>2]=m,o=(s[rt>>2]|0)+4|0,s[rt>>2]=o,u=u+-1|0}while(u|0)}else if(s[be>>2]=($e(G,-93)|0)+c,G|0)for(A=r+12|0,E=r+12|0,k=q+4|0,O=q+8|0,U=q+12|0,o=G,c=_;;){m=s[c>>2]|0,p=c+4|0,s[We>>2]=p,oe=s[A>>2]|0,c=oe;do if((u|0)==(oe|0)){if(oe=s[r>>2]|0,u=oe,p>>>0<=oe>>>0){u=c-u|0,u=u|0?u>>1:1,Ss(q,u,u>>>2,E),s[nt>>2]=s[We>>2],s[Rt>>2]=s[rt>>2],s[re>>2]=s[nt>>2],s[ye>>2]=s[Rt>>2],_o(q,re,ye),u=s[r>>2]|0,s[r>>2]=s[q>>2],s[q>>2]=u,u=s[We>>2]|0,s[We>>2]=s[k>>2],s[k>>2]=u,u=s[rt>>2]|0,s[rt>>2]=s[O>>2],s[O>>2]=u,u=s[A>>2]|0,s[A>>2]=s[U>>2],s[U>>2]=u,xs(q),u=s[rt>>2]|0;break}oe=p,u=((oe-u>>2)+1|0)/-2|0,h=p+(u<<2)|0,c=c-oe|0,c?(Ur(h|0,p|0,c|0)|0,u=(s[We>>2]|0)+(u<<2)|0):u=h,oe=h+(c>>2<<2)|0,s[rt>>2]=oe,s[We>>2]=u,u=oe}while(0);if(s[u>>2]=m,u=(s[rt>>2]|0)+4|0,s[rt>>2]=u,o=o+-1|0,!o)break e;c=s[We>>2]|0}while(0);w=wt}function Uu(r,o){r=r|0,o=o|0;var u=0,c=0,h=0,p=0;u=(s[o+16>>2]|0)+(s[o+20>>2]|0)|0,p=s[o+4>>2]|0,c=(u>>>0)/93|0,h=p+(c<<2)|0,(s[o+8>>2]|0)==(p|0)?o=0:o=(s[h>>2]|0)+((u-(c*93|0)|0)*44|0)|0,s[r>>2]=h,s[r+4>>2]=o}function zh(r,o,u){r=r|0,o=o|0,u=u|0;var c=0,h=0;h=o,o=s[h+4>>2]|0,c=r,s[c>>2]=s[h>>2],s[c+4>>2]=o,c=u,o=s[c+4>>2]|0,u=r+8|0,s[u>>2]=s[c>>2],s[u+4>>2]=o}function q1(r,o){r=r|0,o=o|0,s[r>>2]=s[o>>2],s[r+4>>2]=s[o+4>>2],s[r+8>>2]=s[o+8>>2],s[r+12>>2]=s[o+12>>2]}function K1(r,o){r=r|0,o=o|0;var u=0,c=0,h=0,p=0,m=0,A=0,_=0;u=w,w=w+32|0,c=u+24|0,h=u+16|0,m=u+8|0,p=u,A=o+8|0,_=s[A>>2]|0,A=s[A+4>>2]|0,o=m,s[o>>2]=_,s[o+4>>2]=A,o=p,s[o>>2]=_,s[o+4>>2]=A,s[h>>2]=s[m>>2],s[h+4>>2]=s[m+4>>2],s[c>>2]=s[p>>2],s[c+4>>2]=s[p+4>>2],zh(r,h,c),w=u}function Nc(r,o){return r=r|0,o=o|0,(KP(r,o)|0)^1|0}function eA(r,o){r=r|0,o=o|0;var u=0,c=0;u=s[o>>2]|0,c=s[o+4>>2]|0,(u|0)==(s[o+8>>2]|0)?iA(r,c,s[o+12>>2]|0):iA(r,c,(s[u>>2]|0)+4092|0)}function tA(r,o,u){r=r|0,o=o|0,u=u|0;var c=0;c=s[u>>2]|0,s[r>>2]=c,s[r+4>>2]=s[u+4>>2],s[r+8>>2]=c,s[r+12>>2]=o}function nA(r){r=r|0;var o=0;o=(s[r+12>>2]|0)+20|0,s[o>>2]=(s[o>>2]|0)+(((s[r>>2]|0)-(s[r+8>>2]|0)|0)/44|0)}function rA(r){r=r|0;var o=0,u=0,c=0;return o=s[r>>2]|0,u=r+8|0,(o|0)==(s[u>>2]|0)?(c=u,o=s[c+4>>2]|0,u=r,s[u>>2]=s[c>>2],s[u+4>>2]=o):(c=o+4|0,s[r>>2]=c,s[r+4>>2]=s[c>>2]),r|0}function HP(r,o){r=r|0,o=o|0;var u=0,c=0,h=0,p=0,m=0,A=0,_=0,E=0,k=0,O=0,U=0,Z=0,H=0,G=0;H=w,w=w+48|0,h=H+32|0,c=H+28|0,A=H+8|0,_=H+4|0,E=H,Z=r+8|0,u=s[Z>>2]|0,k=r+12|0,U=s[k>>2]|0,p=U;do if((u|0)==(U|0)){if(U=r+4|0,O=s[U>>2]|0,G=s[r>>2]|0,m=G,O>>>0<=G>>>0){u=p-m|0,u=u|0?u>>1:1,Ss(A,u,u>>>2,r+12|0),s[_>>2]=s[U>>2],s[E>>2]=s[Z>>2],s[c>>2]=s[_>>2],s[h>>2]=s[E>>2],_o(A,c,h),u=s[r>>2]|0,s[r>>2]=s[A>>2],s[A>>2]=u,u=A+4|0,G=s[U>>2]|0,s[U>>2]=s[u>>2],s[u>>2]=G,u=A+8|0,G=s[Z>>2]|0,s[Z>>2]=s[u>>2],s[u>>2]=G,u=A+12|0,G=s[k>>2]|0,s[k>>2]=s[u>>2],s[u>>2]=G,xs(A),u=s[Z>>2]|0;break}h=O,c=((h-m>>2)+1|0)/-2|0,r=O+(c<<2)|0,h=u-h|0,h?(Ur(r|0,O|0,h|0)|0,u=(s[U>>2]|0)+(c<<2)|0):u=r,G=r+(h>>2<<2)|0,s[Z>>2]=G,s[U>>2]=u,u=G}while(0);s[u>>2]=s[o>>2],s[Z>>2]=(s[Z>>2]|0)+4,w=H}function YP(r,o){r=r|0,o=o|0;var u=0,c=0,h=0,p=0,m=0,A=0,_=0,E=0,k=0,O=0,U=0,Z=0,H=0,G=0;H=w,w=w+48|0,c=H+32|0,u=H+28|0,m=H+8|0,A=H+4|0,_=H,Z=r+4|0,O=s[Z>>2]|0,U=s[r>>2]|0,E=U;do if((O|0)==(U|0)){if(U=r+8|0,k=s[U>>2]|0,p=r+12|0,G=s[p>>2]|0,h=G,k>>>0>=G>>>0){G=h-E|0,G=G|0?G>>1:1,Ss(m,G,(G+3|0)>>>2,r+12|0),s[A>>2]=s[Z>>2],s[_>>2]=s[U>>2],s[u>>2]=s[A>>2],s[c>>2]=s[_>>2],_o(m,u,c),u=s[r>>2]|0,s[r>>2]=s[m>>2],s[m>>2]=u,u=m+4|0,G=s[Z>>2]|0,s[Z>>2]=s[u>>2],s[u>>2]=G,u=m+8|0,G=s[U>>2]|0,s[U>>2]=s[u>>2],s[u>>2]=G,u=m+12|0,G=s[p>>2]|0,s[p>>2]=s[u>>2],s[u>>2]=G,xs(m),u=s[Z>>2]|0;break}c=k,r=((h-c>>2)+1|0)/2|0,h=k+(r<<2)|0,c=c-O|0,u=h+(0-(c>>2)<<2)|0,c?(Ur(u|0,O|0,c|0)|0,c=(s[U>>2]|0)+(r<<2)|0):(u=h,c=h),s[Z>>2]=u,s[U>>2]=c}else u=O;while(0);s[u+-4>>2]=s[o>>2],s[Z>>2]=(s[Z>>2]|0)+-4,w=H}function Ss(r,o,u,c){r=r|0,o=o|0,u=u|0,c=c|0;var h=0;h=r+12|0,s[h>>2]=0,s[r+16>>2]=c;do if(o)if(o>>>0>1073741823)h=vt(8)|0,qi(h,6723),s[h>>2]=5956,_t(h|0,3928,123);else{c=ge(o<<2)|0;break}else c=0;while(0);s[r>>2]=c,u=c+(u<<2)|0,s[r+8>>2]=u,s[r+4>>2]=u,s[h>>2]=c+(o<<2)}function $P(r,o){r=r|0,o=o|0;var u=0,c=0,h=0,p=0,m=0,A=0,_=0,E=0,k=0,O=0,U=0,Z=0,H=0,G=0;H=w,w=w+48|0,h=H+32|0,c=H+28|0,A=H+8|0,_=H+4|0,E=H,Z=r+8|0,u=s[Z>>2]|0,k=r+12|0,U=s[k>>2]|0,p=U;do if((u|0)==(U|0)){if(U=r+4|0,O=s[U>>2]|0,G=s[r>>2]|0,m=G,O>>>0<=G>>>0){u=p-m|0,u=u|0?u>>1:1,Ss(A,u,u>>>2,s[r+16>>2]|0),s[_>>2]=s[U>>2],s[E>>2]=s[Z>>2],s[c>>2]=s[_>>2],s[h>>2]=s[E>>2],_o(A,c,h),u=s[r>>2]|0,s[r>>2]=s[A>>2],s[A>>2]=u,u=A+4|0,G=s[U>>2]|0,s[U>>2]=s[u>>2],s[u>>2]=G,u=A+8|0,G=s[Z>>2]|0,s[Z>>2]=s[u>>2],s[u>>2]=G,u=A+12|0,G=s[k>>2]|0,s[k>>2]=s[u>>2],s[u>>2]=G,xs(A),u=s[Z>>2]|0;break}h=O,c=((h-m>>2)+1|0)/-2|0,r=O+(c<<2)|0,h=u-h|0,h?(Ur(r|0,O|0,h|0)|0,u=(s[U>>2]|0)+(c<<2)|0):u=r,G=r+(h>>2<<2)|0,s[Z>>2]=G,s[U>>2]=u,u=G}while(0);s[u>>2]=s[o>>2],s[Z>>2]=(s[Z>>2]|0)+4,w=H}function JP(r,o){r=r|0,o=o|0;var u=0,c=0,h=0,p=0,m=0,A=0,_=0,E=0,k=0,O=0,U=0,Z=0,H=0,G=0;H=w,w=w+48|0,c=H+32|0,u=H+28|0,m=H+8|0,A=H+4|0,_=H,Z=r+4|0,O=s[Z>>2]|0,U=s[r>>2]|0,E=U;do if((O|0)==(U|0)){if(U=r+8|0,k=s[U>>2]|0,p=r+12|0,G=s[p>>2]|0,h=G,k>>>0>=G>>>0){G=h-E|0,G=G|0?G>>1:1,Ss(m,G,(G+3|0)>>>2,s[r+16>>2]|0),s[A>>2]=s[Z>>2],s[_>>2]=s[U>>2],s[u>>2]=s[A>>2],s[c>>2]=s[_>>2],_o(m,u,c),u=s[r>>2]|0,s[r>>2]=s[m>>2],s[m>>2]=u,u=m+4|0,G=s[Z>>2]|0,s[Z>>2]=s[u>>2],s[u>>2]=G,u=m+8|0,G=s[U>>2]|0,s[U>>2]=s[u>>2],s[u>>2]=G,u=m+12|0,G=s[p>>2]|0,s[p>>2]=s[u>>2],s[u>>2]=G,xs(m),u=s[Z>>2]|0;break}c=k,r=((h-c>>2)+1|0)/2|0,h=k+(r<<2)|0,c=c-O|0,u=h+(0-(c>>2)<<2)|0,c?(Ur(u|0,O|0,c|0)|0,c=(s[U>>2]|0)+(r<<2)|0):(u=h,c=h),s[Z>>2]=u,s[U>>2]=c}else u=O;while(0);s[u+-4>>2]=s[o>>2],s[Z>>2]=(s[Z>>2]|0)+-4,w=H}function xs(r){r=r|0;var o=0,u=0,c=0;o=s[r+4>>2]|0,u=r+8|0,c=s[u>>2]|0,(c|0)!=(o|0)&&(s[u>>2]=c+(~((c+-4-o|0)>>>2)<<2)),o=s[r>>2]|0,o|0&&He(o,(s[r+12>>2]|0)-o|0)}function _o(r,o,u){r=r|0,o=o|0,u=u|0;var c=0,h=0,p=0,m=0;if(m=w,w=w+16|0,p=m,h=s[o>>2]|0,QP(p,r+8|0,(s[u>>2]|0)-h>>2),r=s[p>>2]|0,c=p+4|0,(r|0)!=(s[c>>2]|0)){u=h;do s[r>>2]=s[u>>2],r=(s[p>>2]|0)+4|0,s[p>>2]=r,u=u+4|0;while((r|0)!=(s[c>>2]|0));s[o>>2]=u}qP(p),w=m}function QP(r,o,u){r=r|0,o=o|0,u=u|0,s[r>>2]=s[o>>2],s[r+4>>2]=(s[o>>2]|0)+(u<<2),s[r+8>>2]=o}function qP(r){r=r|0,s[s[r+8>>2]>>2]=s[r>>2]}function KP(r,o){return r=r|0,o=o|0,(s[r+4>>2]|0)==(s[o+4>>2]|0)|0}function iA(r,o,u){r=r|0,o=o|0,u=u|0,s[r>>2]=o,s[r+4>>2]=u}function eM(r,o){r=r|0,o=o|0;var u=0,c=0,h=0,p=0;p=s[o+4>>2]|0,u=s[o+16>>2]|0,c=(u>>>0)/93|0,h=p+(c<<2)|0,(s[o+8>>2]|0)==(p|0)?o=0:o=(s[h>>2]|0)+((u-(c*93|0)|0)*44|0)|0,s[r>>2]=h,s[r+4>>2]=o}function tM(r,o){r=r|0,o=o|0;var u=0,c=0,h=0,p=0;u=(s[o+16>>2]|0)+(s[o+20>>2]|0)|0,p=s[o+4>>2]|0,c=(u>>>0)/93|0,h=p+(c<<2)|0,(s[o+8>>2]|0)==(p|0)?o=0:o=(s[h>>2]|0)+((u-(c*93|0)|0)*44|0)|0,s[r>>2]=h,s[r+4>>2]=o}function nM(r){r=r|0;var o=0,u=0,c=0,h=0,p=0,m=0,A=0;if(A=w,w=w+16|0,c=A+8|0,p=A,sA(c,r),Uu(p,r),h=c+4|0,o=s[h>>2]|0,p=p+4|0,(o|0)!=(s[p>>2]|0))do Lt(o),o=(s[h>>2]|0)+44|0,s[h>>2]=o,u=s[c>>2]|0,(o-(s[u>>2]|0)|0)==4092&&(o=u+4|0,s[c>>2]=o,o=s[o>>2]|0,s[h>>2]=o);while((o|0)!=(s[p>>2]|0));if(s[r+20>>2]=0,h=r+8|0,c=r+4|0,u=s[c>>2]|0,o=(s[h>>2]|0)-u>>2,o>>>0>2)do He(s[u>>2]|0,4092),u=(s[c>>2]|0)+4|0,s[c>>2]=u,o=(s[h>>2]|0)-u>>2;while(o>>>0>2);switch(o|0){case 1:{o=46,m=11;break}case 2:{o=93,m=11;break}default:}(m|0)==11&&(s[r+16>>2]=o),w=A}function sA(r,o){r=r|0,o=o|0;var u=0,c=0,h=0,p=0;p=s[o+4>>2]|0,u=s[o+16>>2]|0,c=(u>>>0)/93|0,h=p+(c<<2)|0,(s[o+8>>2]|0)==(p|0)?o=0:o=(s[h>>2]|0)+((u-(c*93|0)|0)*44|0)|0,s[r>>2]=h,s[r+4>>2]=o}function rM(r,o,u){r=r|0,o=o|0,u=u|0;var c=0,h=0,p=0,m=0,A=0,_=0,E=0;if(E=w,w=w+16|0,_=E,m=r+4|0,y[m>>0]|0){if(h=s[r+20>>2]|0,c=s[r+8>>2]|0,sA(_,r+32|0),r=r+12|0,(c|0)!=(s[r>>2]|0))for(A=_+4|0,m=c,p=h,c=s[A>>2]|0;h=L[m>>0]|0,h=iM((un(o,c)|0)+h|0)|0,y[p>>0]=h,y[u>>0]=h,y[m>>0]=h,m=m+1|0,u=u+1|0,h=s[_>>2]|0,c=(s[A>>2]|0)+44|0,s[A>>2]=c,(c-(s[h>>2]|0)|0)==4092&&(c=h+4|0,s[_>>2]=c,c=s[c>>2]|0,s[A>>2]=c),(m|0)!=(s[r>>2]|0);)p=p+1|0}else{if(_=bc(o)|0,kc(_,u,s[r>>2]|0),_=s[r>>2]|0,p=u+_|0,!_)c=0;else{for(c=u,h=s[r+8>>2]|0;y[h>>0]=y[c>>0]|0,c=c+1|0,(c|0)!=(p|0);)h=h+1|0;c=s[r>>2]|0}y[m>>0]=1,u=u+c|0}return w=E,u|0}function iM(r){return r=r|0,r&255|0}function sM(r){r=r|0,jt(r),pe(r)}function oM(r){r=r|0,r=s[r+12>>2]|0,r|0&&ht[s[(s[r>>2]|0)+4>>2]&255](r)}function aM(r,o){return r=r|0,o=o|0,((s[o+4>>2]|0)==11262?r+12|0:0)|0}function uM(r){r=r|0,He(r,16)}function oA(r,o){r=r|0,o=o|0,s[r>>2]=0,s[r+4>>2]=0,s[r+8>>2]=0,o|0&&(H1(r,o),cM(r,o))}function lM(r,o,u){r=r|0,o=o|0,u=u|0,s[r>>2]=0,s[r+4>>2]=0,s[r+8>>2]=0,s[r+12>>2]=0,s[r+16>>2]=0,s[r+20>>2]=0,o|0&&fM(r,o,u)}function cM(r,o){r=r|0,o=o|0;var u=0,c=0,h=0;if(h=w,w=w+16|0,c=h,$1(c,r,o),o=c+4|0,r=s[o>>2]|0,u=c+8|0,(r|0)!=(s[u>>2]|0))do y[r>>0]=0,r=(s[o>>2]|0)+1|0,s[o>>2]=r;while((r|0)!=(s[u>>2]|0));J1(c),w=h}function fM(r,o,u){r=r|0,o=o|0,u=u|0;var c=0,h=0,p=0,m=0,A=0,_=0,E=0,k=0,O=0,U=0,Z=0;if(Z=w,w=w+96|0,U=Z+80|0,E=Z+64|0,m=Z+48|0,A=Z+40|0,_=Z+8|0,h=Z,k=Z+32|0,O=Z+16|0,c=(s[r+8>>2]|0)-(s[r+4>>2]|0)|0,c=(c|0?((c>>2)*93|0)+-1|0:0)-((s[r+20>>2]|0)+(s[r+16>>2]|0))|0,c>>>0<o>>>0&&Q1(r,o-c|0),Uu(A,r),Uu(h,r),c=s[h>>2]|0,h=s[h+4>>2]|0,p=_,s[p>>2]=c,s[p+4>>2]=h,p=c,o|0&&(c=((h-(s[c>>2]|0)|0)/44|0)+o|0,(c|0)>0?(o=(c>>>0)/93|0,p=p+(o<<2)|0,s[_>>2]=p,c=(s[p>>2]|0)+((c-(o*93|0)|0)*44|0)|0):(c=92-c|0,o=p+(((c|0)/-93|0)<<2)|0,s[_>>2]=o,c=(s[o>>2]|0)+((92-((c|0)%93|0)|0)*44|0)|0),s[_+4>>2]=c),s[E>>2]=s[A>>2],s[E+4>>2]=s[A+4>>2],s[U>>2]=s[_>>2],s[U+4>>2]=s[_+4>>2],zh(m,E,U),q1(U,m),K1(E,m),Nc(U,E)|0){h=O+4|0;do{if(eA(k,U),tA(O,r,k),c=s[O>>2]|0,(c|0)!=(s[h>>2]|0))do Nh(c,u),c=(s[O>>2]|0)+44|0,s[O>>2]=c;while((c|0)!=(s[h>>2]|0));nA(O),rA(U)|0}while(Nc(U,E)|0)}w=Z}function hM(r){r=r|0;var o=0,u=0;if(nM(r),o=s[r+4>>2]|0,u=s[r+8>>2]|0,(o|0)!=(u|0))do He(s[o>>2]|0,4092),o=o+4|0;while((o|0)!=(u|0));XP(r)}function dM(r,o,u){r=r|0,o=o|0,u=u|0,ga(r),s[r>>2]=4924,s[r+4>>2]=o,s[r+8>>2]=u}function pM(r,o,u){r=r|0,o=o|0,u=u|0;var c=0,h=0;u=w,w=w+16|0,c=u,s[r>>2]=o,h=ge(16)|0,s[h+4>>2]=0,s[h+8>>2]=0,s[h>>2]=4944,s[h+12>>2]=o,s[r+4>>2]=h,s[c>>2]=o,s[c+4>>2]=o,Fc(r,c),w=u}function gM(r,o){return r=r|0,o=o|0,AM(s[r+8>>2]|0,s[r+4>>2]|0,o)|0}function aA(r){r=r|0;var o=0,u=0;s[r>>2]=4924,u=r+8|0,o=s[u>>2]|0,s[u>>2]=0,o|0&&(yM(o),pe(o)),mo(r)}function mM(r){r=r|0,aA(r),pe(r)}function AM(r,o,u){return r=r|0,o=o|0,u=u|0,jh(r+4784|0,o,Lu(r,o,u)|0)|0}function jh(r,o,u){return r=r|0,o=o|0,u=u|0,y[r>>0]|0&&(Ih(o),y[r>>0]=0),u|0}function yM(r){r=r|0,Ou(r)}function Fc(r,o){r=r|0,o=o|0}function vM(r){r=r|0,jt(r),pe(r)}function _M(r){r=r|0,r=s[r+12>>2]|0,r|0&&ht[s[(s[r>>2]|0)+8>>2]&255](r)}function wM(r,o){return r=r|0,o=o|0,((s[o+4>>2]|0)==12004?r+12|0:0)|0}function TM(r){r=r|0,He(r,16)}function Wh(r){r=r|0,y[r>>0]=1}function EM(r,o,u){r=r|0,o=o|0,u=u|0,ga(r),s[r>>2]=4972,s[r+4>>2]=o,s[r+8>>2]=u}function SM(r,o,u){r=r|0,o=o|0,u=u|0;var c=0,h=0;u=w,w=w+16|0,c=u,s[r>>2]=o,h=ge(16)|0,s[h+4>>2]=0,s[h+8>>2]=0,s[h>>2]=4992,s[h+12>>2]=o,s[r+4>>2]=h,s[c>>2]=o,s[c+4>>2]=o,Fc(r,c),w=u}function xM(r,o){return r=r|0,o=o|0,bM(s[r+8>>2]|0,s[r+4>>2]|0,o)|0}function uA(r){r=r|0;var o=0,u=0;s[r>>2]=4972,u=r+8|0,o=s[u>>2]|0,s[u>>2]=0,o|0&&(PM(o),pe(o)),mo(r)}function RM(r){r=r|0,uA(r),pe(r)}function bM(r,o,u){return r=r|0,o=o|0,u=u|0,kM(r+4784|0,o,Lu(r,o,u)|0)|0}function kM(r,o,u){return r=r|0,o=o|0,u=u|0,jh(r+328|0,o,Vu(r,o,u)|0)|0}function PM(r){r=r|0,MM(r+4784|0),Ou(r)}function MM(r){r=r|0,Dh(r)}function CM(r){r=r|0,jt(r),pe(r)}function IM(r){r=r|0,r=s[r+12>>2]|0,r|0&&ht[s[(s[r>>2]|0)+8>>2]&255](r)}function NM(r,o){return r=r|0,o=o|0,((s[o+4>>2]|0)==12827?r+12|0:0)|0}function FM(r){r=r|0,He(r,16)}function OM(r){r=r|0,Bh(r),Wh(r+328|0)}function LM(r,o,u){r=r|0,o=o|0,u=u|0,ga(r),s[r>>2]=5020,s[r+4>>2]=o,s[r+8>>2]=u}function VM(r,o,u){r=r|0,o=o|0,u=u|0;var c=0,h=0;u=w,w=w+16|0,c=u,s[r>>2]=o,h=ge(16)|0,s[h+4>>2]=0,s[h+8>>2]=0,s[h>>2]=5040,s[h+12>>2]=o,s[r+4>>2]=h,s[c>>2]=o,s[c+4>>2]=o,Fc(r,c),w=u}function UM(r,o){return r=r|0,o=o|0,DM(s[r+8>>2]|0,s[r+4>>2]|0,o)|0}function lA(r){r=r|0;var o=0,u=0;s[r>>2]=5020,u=r+8|0,o=s[u>>2]|0,s[u>>2]=0,o|0&&(zM(o),pe(o)),mo(r)}function BM(r){r=r|0,lA(r),pe(r)}function DM(r,o,u){return r=r|0,o=o|0,u=u|0,cA(r+4784|0,o,Lu(r,o,u)|0)|0}function cA(r,o,u){return r=r|0,o=o|0,u=u|0,jh(r+316|0,o,G1(r,o,u)|0)|0}function zM(r){r=r|0,fA(r+4784|0),Ou(r)}function fA(r){r=r|0,W1(r)}function jM(r){r=r|0,jt(r),pe(r)}function WM(r){r=r|0,r=s[r+12>>2]|0,r|0&&ht[s[(s[r>>2]|0)+8>>2]&255](r)}function GM(r,o){return r=r|0,o=o|0,((s[o+4>>2]|0)==13672?r+12|0:0)|0}function ZM(r){r=r|0,He(r,16)}function hA(r){r=r|0,D1(r),Wh(r+316|0)}function XM(r,o,u){r=r|0,o=o|0,u=u|0,ga(r),s[r>>2]=5068,s[r+4>>2]=o,s[r+8>>2]=u}function HM(r,o,u){r=r|0,o=o|0,u=u|0;var c=0,h=0;u=w,w=w+16|0,c=u,s[r>>2]=o,h=ge(16)|0,s[h+4>>2]=0,s[h+8>>2]=0,s[h>>2]=5088,s[h+12>>2]=o,s[r+4>>2]=h,s[c>>2]=o,s[c+4>>2]=o,Fc(r,c),w=u}function YM(r,o){return r=r|0,o=o|0,JM(s[r+8>>2]|0,s[r+4>>2]|0,o)|0}function dA(r){r=r|0;var o=0,u=0;s[r>>2]=5068,u=r+8|0,o=s[u>>2]|0,s[u>>2]=0,o|0&&(qM(o),pe(o)),mo(r)}function $M(r){r=r|0,dA(r),pe(r)}function JM(r,o,u){return r=r|0,o=o|0,u=u|0,QM(r+4784|0,o,Lu(r,o,u)|0)|0}function QM(r,o,u){return r=r|0,o=o|0,u=u|0,cA(r+328|0,o,Vu(r,o,u)|0)|0}function qM(r){r=r|0,KM(r+4784|0),Ou(r)}function KM(r){r=r|0,fA(r+328|0),Dh(r)}function eC(r){r=r|0,jt(r),pe(r)}function tC(r){r=r|0,r=s[r+12>>2]|0,r|0&&ht[s[(s[r>>2]|0)+8>>2]&255](r)}function nC(r,o){return r=r|0,o=o|0,((s[o+4>>2]|0)==14573?r+12|0:0)|0}function rC(r){r=r|0,He(r,16)}function iC(r){r=r|0,Bh(r),hA(r+328|0)}function sC(r){return r=r|0,r+20|0}function oC(r,o,u){r=r|0,o=o|0,u=u|0,s[r>>2]=o,s[r+4>>2]=u,s[r+8>>2]=0}function aC(r,o){r=r|0,o=o|0,s[r>>2]=o,s[r+4>>2]=0,s[r+8>>2]=-1}function uC(r,o){r=r|0,o=o|0;var u=0,c=0,h=0,p=0;u=w,w=w+16|0,c=u+4|0,p=u,h=ge(24)|0,TC(h,o),s[p>>2]=0,s[c>>2]=s[p>>2],EC(r,h,c),w=u}function Bu(r){r=r|0;var o=0,u=0;r=s[r+4>>2]|0,r|0&&(u=r+4|0,o=s[u>>2]|0,s[u>>2]=o+-1,(o|0)==0)&&(ht[s[(s[r>>2]|0)+8>>2]&255](r),Qi(r))}function lC(r,o,u){r=r|0,o=o|0,u=u|0;var c=0,h=0;u=w,w=w+16|0,c=u,s[r>>2]=o,h=ge(16)|0,s[h+4>>2]=0,s[h+8>>2]=0,s[h>>2]=5116,s[h+12>>2]=o,s[r+4>>2]=h,s[c>>2]=o,s[c+4>>2]=o,cC(r,c),w=u}function Gh(r){r=r|0;var o=0,u=0;r=s[r+4>>2]|0,r|0&&(u=r+4|0,o=s[u>>2]|0,s[u>>2]=o+-1,(o|0)==0)&&(ht[s[(s[r>>2]|0)+8>>2]&255](r),Qi(r))}function cC(r,o){r=r|0,o=o|0}function fC(r){r=r|0,jt(r),pe(r)}function hC(r){r=r|0,r=s[r+12>>2]|0,r|0&&pe(r)}function dC(r,o){return r=r|0,o=o|0,((s[o+4>>2]|0)==14966?r+12|0:0)|0}function pC(r){r=r|0,He(r,16)}function gC(r,o,u){r=r|0,o=o|0,u=u|0;var c=0,h=0;u=w,w=w+16|0,c=u,s[r>>2]=o,h=ge(16)|0,s[h+4>>2]=0,s[h+8>>2]=0,s[h>>2]=5144,s[h+12>>2]=o,s[r+4>>2]=h,s[c>>2]=o,s[c+4>>2]=o,mC(r,c),w=u}function pA(r){r=r|0;var o=0,u=0;r=s[r+4>>2]|0,r|0&&(u=r+4|0,o=s[u>>2]|0,s[u>>2]=o+-1,(o|0)==0)&&(ht[s[(s[r>>2]|0)+8>>2]&255](r),Qi(r))}function mC(r,o){r=r|0,o=o|0}function AC(r){r=r|0,jt(r),pe(r)}function yC(r){r=r|0,r=s[r+12>>2]|0,r|0&&(wC(r),pe(r))}function vC(r,o){return r=r|0,o=o|0,((s[o+4>>2]|0)==15127?r+12|0:0)|0}function _C(r){r=r|0,He(r,16)}function wC(r){r=r|0}function TC(r,o){r=r|0,o=o|0,ga(r),s[r>>2]=5172,s[r+4>>2]=o,s[r+8>>2]=0,s[r+12>>2]=0,s[r+16>>2]=0,y[r+20>>0]=1}function EC(r,o,u){r=r|0,o=o|0,u=u|0;var c=0,h=0;u=w,w=w+16|0,c=u,s[r>>2]=o,h=ge(16)|0,s[h+4>>2]=0,s[h+8>>2]=0,s[h>>2]=5192,s[h+12>>2]=o,s[r+4>>2]=h,s[c>>2]=o,s[c+4>>2]=o,bC(r,c),w=u}function SC(r,o){r=r|0,o=o|0;var u=0,c=0,h=0,p=0,m=0,A=0,_=0;if(_=w,w=w+16|0,p=_,u=s[r+8>>2]|0,m=s[r+12>>2]|0,(u|0)!=(m|0)){A=p+4|0;do c=s[u>>2]|0,s[p>>2]=c,h=s[u+4>>2]|0,s[A>>2]=h,h|0&&(h=h+4|0,s[h>>2]=(s[h>>2]|0)+1),o=Zu[s[(s[c>>2]|0)+12>>2]&63](c,o)|0,Qn(p),u=u+8|0;while((u|0)!=(m|0))}return u=r+20|0,y[u>>0]|0&&(y[u>>0]=0,RC(s[r+4>>2]|0)),w=_,o|0}function gA(r){r=r|0,s[r>>2]=5172,b1(r+8|0),mo(r)}function xC(r){r=r|0,gA(r),pe(r)}function RC(r){r=r|0;var o=0;o=((ma(s[r>>2]|0)|0)&255)<<24,o=((ma(s[r>>2]|0)|0)&255)<<16|o,o=o|((ma(s[r>>2]|0)|0)&255)<<8,s[r+4>>2]=o|(ma(s[r>>2]|0)|0)&255}function ma(r){r=r|0;var o=0,u=0;return o=s[r>>2]|0,u=r+8|0,r=s[u>>2]|0,s[u>>2]=r+1,y[o+r>>0]|0}function bC(r,o){r=r|0,o=o|0}function kC(r){r=r|0,jt(r),pe(r)}function PC(r){r=r|0,r=s[r+12>>2]|0,r|0&&ht[s[(s[r>>2]|0)+8>>2]&255](r)}function MC(r,o){return r=r|0,o=o|0,((s[o+4>>2]|0)==15450?r+12|0:0)|0}function CC(r){r=r|0,He(r,16)}function Zh(r){r=r|0;var o=0,u=0,c=0,h=0,p=0,m=0,A=0,_=0,E=0,k=0;_=w,w=w+32|0,c=_+12|0,h=_,o=_+8|0,m=ge(180)|0,IC(m,s[r+4>>2]|0),p=r+8|0,s[o>>2]=0,s[c>>2]=s[o>>2],NC(h,m,c),m=r+12|0,o=s[m>>2]|0,A=r+16|0;do if(o>>>0>=(s[A>>2]|0)>>>0)if(o=(o-(s[p>>2]|0)>>3)+1|0,u=Ti(p)|0,u>>>0<o>>>0)Pn(p);else{E=s[p>>2]|0,k=(s[A>>2]|0)-E|0,A=k>>2,vi(c,k>>3>>>0<u>>>1>>>0?A>>>0<o>>>0?o:A:u,(s[m>>2]|0)-E>>3,r+16|0),A=c+8|0,m=s[A>>2]|0,s[m>>2]=s[h>>2],r=h+4|0,s[m+4>>2]=s[r>>2],s[h>>2]=0,s[r>>2]=0,s[A>>2]=m+8,_i(p,c),wi(c);break}else Ai(c,p,1),k=c+4|0,E=s[k>>2]|0,s[E>>2]=s[h>>2],A=h+4|0,s[E+4>>2]=s[A>>2],s[h>>2]=0,s[A>>2]=0,s[k>>2]=E+8,yi(c);while(0);Qn(h),w=_}function Oc(r){r=r|0;var o=0,u=0,c=0,h=0,p=0,m=0,A=0,_=0,E=0,k=0;_=w,w=w+32|0,c=_+12|0,h=_,o=_+8|0,m=ge(180)|0,$C(m,s[r+4>>2]|0),p=r+8|0,s[o>>2]=0,s[c>>2]=s[o>>2],JC(h,m,c),m=r+12|0,o=s[m>>2]|0,A=r+16|0;do if(o>>>0>=(s[A>>2]|0)>>>0)if(o=(o-(s[p>>2]|0)>>3)+1|0,u=Ti(p)|0,u>>>0<o>>>0)Pn(p);else{E=s[p>>2]|0,k=(s[A>>2]|0)-E|0,A=k>>2,vi(c,k>>3>>>0<u>>>1>>>0?A>>>0<o>>>0?o:A:u,(s[m>>2]|0)-E>>3,r+16|0),A=c+8|0,m=s[A>>2]|0,s[m>>2]=s[h>>2],r=h+4|0,s[m+4>>2]=s[r>>2],s[h>>2]=0,s[r>>2]=0,s[A>>2]=m+8,_i(p,c),wi(c);break}else Ai(c,p,1),k=c+4|0,E=s[k>>2]|0,s[E>>2]=s[h>>2],A=h+4|0,s[E+4>>2]=s[A>>2],s[h>>2]=0,s[A>>2]=0,s[k>>2]=E+8,yi(c);while(0);Qn(h),w=_}function IC(r,o){r=r|0,o=o|0,Ei(r),s[r>>2]=5220,s[r+4>>2]=o,FC(r+8|0)}function NC(r,o,u){r=r|0,o=o|0,u=u|0;var c=0,h=0;u=w,w=w+16|0,c=u,s[r>>2]=o,h=ge(16)|0,s[h+4>>2]=0,s[h+8>>2]=0,s[h>>2]=5244,s[h+12>>2]=o,s[r+4>>2]=h,s[c>>2]=o,s[c+4>>2]=o,Si(r,c),w=u}function FC(r){r=r|0,Or(r,32,1,8,0),ar(r+80|0,32,1,8,0),y[r+160>>0]=0,y[r+161>>0]=0,VC(r+164|0)}function mA(r){r=r|0,s[r>>2]=5220,UC(r+8|0),Fr(r)}function OC(r){r=r|0,mA(r),pe(r)}function LC(r,o){return r=r|0,o=o|0,BC(r+8|0,s[r+4>>2]|0,o)|0}function VC(r){r=r|0,y[r+4>>0]=0}function UC(r){r=r|0,lr(r+80|0),Lr(r)}function BC(r,o,u){r=r|0,o=o|0,u=u|0;var c=0,h=0,p=0;return p=w,w=w+16|0,c=p,y[r+161>>0]|0||ur(r+80|0),h=r+164|0,DC(h)|0?(o=Aa(r+80|0,o,s[h>>2]|0,0)|0,s[c>>2]=o,Cc(o,u)):(va(ya(o)|0,u,4),s[c>>2]=Pc(u)|0),zC(h,c),w=p,u+4|0}function DC(r){return r=r|0,(y[r+4>>0]|0)!=0|0}function Aa(r,o,u,c){return r=r|0,o=o|0,u=u|0,c=c|0,u=(jC(r,o,(s[r+36>>2]|0)+(c*44|0)|0)|0)+u|0,o=s[r+24>>2]|0,(u|0)<0?u+o|0:u-(u>>>0<o>>>0?0:o)|0}function ya(r){return r=r|0,s[r>>2]|0}function va(r,o,u){r=r|0,o=o|0,u=u|0;var c=0;if((u|0)>0){c=0;do y[o+c>>0]=ma(r)|0,c=c+1|0;while((c|0)!=(u|0))}}function zC(r,o){r=r|0,o=o|0;var u=0;u=r+4|0,y[u>>0]|0||(y[u>>0]=1),s[r>>2]=s[o>>2]}function jC(r,o,u){r=r|0,o=o|0,u=u|0;var c=0;u=Xh(o,u)|0,s[r>>2]=u;do if(u){if(u>>>0>=32){u=s[r+28>>2]|0;break}if(c=s[r+12>>2]|0,u>>>0>c>>>0?(c=u-c|0,u=Xh(o,(s[r+68>>2]|0)+((u+-1|0)*44|0)|0)|0,c=u<<c|(AA(o,c)|0)):c=Xh(o,(s[r+68>>2]|0)+((u+-1|0)*44|0)|0)|0,u=s[r>>2]|0,(c|0)<(1<<u+-1|0)){u=c+1+(-1<<u)|0;break}else{u=c+1|0;break}}else u=WC(o,r+48|0)|0;while(0);return u|0}function Xh(r,o){r=r|0,o=o|0;var u=0,c=0,h=0,p=0,m=0,A=0,_=0,E=0,k=0,O=0,U=0,Z=0;if(U=r+8|0,O=s[U>>2]|0,h=s[o+16>>2]|0,h){if(c=r+4|0,u=s[c>>2]|0,k=O>>>15,s[U>>2]=k,_=(u>>>0)/(k>>>0)|0,A=_>>>(s[o+40>>2]|0),p=s[h+(A<<2)>>2]|0,A=(s[h+(A+1<<2)>>2]|0)+1|0,m=p+1|0,E=s[o+8>>2]|0,A>>>0>m>>>0){h=p,p=A;do m=(p+h|0)>>>1,A=(s[E+(m<<2)>>2]|0)>>>0>_>>>0,h=A?h:m,p=A?m:p,m=h+1|0;while(p>>>0>m>>>0);p=h}h=$e(s[E+(p<<2)>>2]|0,k)|0,(p|0)==(s[o+32>>2]|0)?m=O:m=$e(s[E+(m<<2)>>2]|0,k)|0}else{E=O>>>15,s[U>>2]=E,A=s[o>>2]|0,k=s[o+8>>2]|0,c=r+4|0,u=s[c>>2]|0,_=A>>>1,h=0,m=O,p=0;do Z=$e(s[k+(_<<2)>>2]|0,E)|0,O=Z>>>0>u>>>0,m=O?Z:m,h=O?h:Z,p=O?p:_,A=O?_:A,_=(p+A|0)>>>1;while((_|0)!=(p|0))}return s[c>>2]=u-h,Z=m-h|0,s[U>>2]=Z,Z>>>0<16777216&&Lc(r),U=(s[o+12>>2]|0)+(p<<2)|0,s[U>>2]=(s[U>>2]|0)+1,U=o+28|0,Z=(s[U>>2]|0)+-1|0,s[U>>2]=Z,Z||Fh(o),p|0}function AA(r,o){r=r|0,o=o|0;var u=0,c=0,h=0,p=0;return o>>>0>19?(u=(GC(r)|0)&65535,(AA(r,o+-16|0)|0)<<16|u|0):(c=r+4|0,h=s[c>>2]|0,p=r+8|0,u=(s[p>>2]|0)>>>o,s[p>>2]=u,o=(h>>>0)/(u>>>0)|0,s[c>>2]=h-($e(o,u)|0),u>>>0<16777216&&Lc(r),o|0)}function WC(r,o){r=r|0,o=o|0;var u=0,c=0,h=0,p=0,m=0,A=0;return c=r+8|0,h=s[c>>2]|0,u=$e(h>>>13,s[o+8>>2]|0)|0,p=r+4|0,m=s[p>>2]|0,A=m>>>0>=u>>>0,A?(s[p>>2]=m-u,u=h-u|0,s[c>>2]=u):(s[c>>2]=u,m=o+12|0,s[m>>2]=(s[m>>2]|0)+1),u>>>0<16777216&&Lc(r),m=o+4|0,r=(s[m>>2]|0)+-1|0,s[m>>2]=r,r||w1(o),A&1|0}function Lc(r){r=r|0;var o=0,u=0,c=0,h=0;o=r+4|0,u=r+8|0,c=s[o>>2]|0;do c=c<<8|(ma(s[r>>2]|0)|0)&255,s[o>>2]=c,h=s[u>>2]<<8,s[u>>2]=h;while(h>>>0<16777216)}function GC(r){r=r|0;var o=0,u=0,c=0,h=0;return u=r+4|0,h=s[u>>2]|0,o=r+8|0,c=(s[o>>2]|0)>>>16,s[o>>2]=c,o=(h>>>0)/(c>>>0)|0,s[u>>2]=h-($e(o,c)|0),Lc(r),o&65535|0}function ZC(r){r=r|0,jt(r),pe(r)}function XC(r){r=r|0,r=s[r+12>>2]|0,r|0&&ht[s[(s[r>>2]|0)+4>>2]&255](r)}function HC(r,o){return r=r|0,o=o|0,((s[o+4>>2]|0)==15904?r+12|0:0)|0}function YC(r){r=r|0,He(r,16)}function $C(r,o){r=r|0,o=o|0,Ei(r),s[r>>2]=5272,s[r+4>>2]=o,QC(r+8|0)}function JC(r,o,u){r=r|0,o=o|0,u=u|0;var c=0,h=0;u=w,w=w+16|0,c=u,s[r>>2]=o,h=ge(16)|0,s[h+4>>2]=0,s[h+8>>2]=0,s[h>>2]=5296,s[h+12>>2]=o,s[r+4>>2]=h,s[c>>2]=o,s[c+4>>2]=o,Si(r,c),w=u}function QC(r){r=r|0,Or(r,32,1,8,0),ar(r+80|0,32,1,8,0),y[r+160>>0]=0,y[r+161>>0]=0,eI(r+164|0)}function yA(r){r=r|0,s[r>>2]=5272,tI(r+8|0),Fr(r)}function qC(r){r=r|0,yA(r),pe(r)}function KC(r,o){return r=r|0,o=o|0,nI(r+8|0,s[r+4>>2]|0,o)|0}function eI(r){r=r|0,y[r+4>>0]=0}function tI(r){r=r|0,lr(r+80|0),Lr(r)}function nI(r,o,u){r=r|0,o=o|0,u=u|0;var c=0,h=0,p=0;return p=w,w=w+16|0,c=p,y[r+161>>0]|0||ur(r+80|0),h=r+164|0,rI(h)|0?(o=Aa(r+80|0,o,s[h>>2]|0,0)|0,s[c>>2]=o,Ic(o,u)):(va(ya(o)|0,u,4),s[c>>2]=Mc(u)|0),iI(h,c),w=p,u+4|0}function rI(r){return r=r|0,(y[r+4>>0]|0)!=0|0}function iI(r,o){r=r|0,o=o|0;var u=0;u=r+4|0,y[u>>0]|0||(y[u>>0]=1),s[r>>2]=s[o>>2]}function sI(r){r=r|0,jt(r),pe(r)}function oI(r){r=r|0,r=s[r+12>>2]|0,r|0&&ht[s[(s[r>>2]|0)+4>>2]&255](r)}function aI(r,o){return r=r|0,o=o|0,((s[o+4>>2]|0)==16402?r+12|0:0)|0}function uI(r){r=r|0,He(r,16)}function lI(r){r=r|0;var o=0,u=0,c=0,h=0,p=0,m=0,A=0,_=0,E=0,k=0;_=w,w=w+32|0,c=_+12|0,h=_,o=_+8|0,m=ge(172)|0,fI(m,s[r+4>>2]|0),p=r+8|0,s[o>>2]=0,s[c>>2]=s[o>>2],hI(h,m,c),m=r+12|0,o=s[m>>2]|0,A=r+16|0;do if(o>>>0>=(s[A>>2]|0)>>>0)if(o=(o-(s[p>>2]|0)>>3)+1|0,u=Ti(p)|0,u>>>0<o>>>0)Pn(p);else{E=s[p>>2]|0,k=(s[A>>2]|0)-E|0,A=k>>2,vi(c,k>>3>>>0<u>>>1>>>0?A>>>0<o>>>0?o:A:u,(s[m>>2]|0)-E>>3,r+16|0),A=c+8|0,m=s[A>>2]|0,s[m>>2]=s[h>>2],r=h+4|0,s[m+4>>2]=s[r>>2],s[h>>2]=0,s[r>>2]=0,s[A>>2]=m+8,_i(p,c),wi(c);break}else Ai(c,p,1),k=c+4|0,E=s[k>>2]|0,s[E>>2]=s[h>>2],A=h+4|0,s[E+4>>2]=s[A>>2],s[h>>2]=0,s[A>>2]=0,s[k>>2]=E+8,yi(c);while(0);Qn(h),w=_}function cI(r){r=r|0;var o=0,u=0,c=0,h=0,p=0,m=0,A=0,_=0,E=0,k=0;_=w,w=w+32|0,c=_+12|0,h=_,o=_+8|0,m=ge(176)|0,bI(m,s[r+4>>2]|0),p=r+8|0,s[o>>2]=0,s[c>>2]=s[o>>2],kI(h,m,c),m=r+12|0,o=s[m>>2]|0,A=r+16|0;do if(o>>>0>=(s[A>>2]|0)>>>0)if(o=(o-(s[p>>2]|0)>>3)+1|0,u=Ti(p)|0,u>>>0<o>>>0)Pn(p);else{E=s[p>>2]|0,k=(s[A>>2]|0)-E|0,A=k>>2,vi(c,k>>3>>>0<u>>>1>>>0?A>>>0<o>>>0?o:A:u,(s[m>>2]|0)-E>>3,r+16|0),A=c+8|0,m=s[A>>2]|0,s[m>>2]=s[h>>2],r=h+4|0,s[m+4>>2]=s[r>>2],s[h>>2]=0,s[r>>2]=0,s[A>>2]=m+8,_i(p,c),wi(c);break}else Ai(c,p,1),k=c+4|0,E=s[k>>2]|0,s[E>>2]=s[h>>2],A=h+4|0,s[E+4>>2]=s[A>>2],s[h>>2]=0,s[A>>2]=0,s[k>>2]=E+8,yi(c);while(0);Qn(h),w=_}function fI(r,o){r=r|0,o=o|0,Ei(r),s[r>>2]=5324,s[r+4>>2]=o,dI(r+8|0)}function hI(r,o,u){r=r|0,o=o|0,u=u|0;var c=0,h=0;u=w,w=w+16|0,c=u,s[r>>2]=o,h=ge(16)|0,s[h+4>>2]=0,s[h+8>>2]=0,s[h>>2]=5348,s[h+12>>2]=o,s[r+4>>2]=h,s[c>>2]=o,s[c+4>>2]=o,Si(r,c),w=u}function dI(r){r=r|0,Or(r,8,1,8,0),ar(r+80|0,8,1,8,0),y[r+160>>0]=0,y[r+161>>0]=0,mI(r+162|0)}function vA(r){r=r|0,s[r>>2]=5324,AI(r+8|0),Fr(r)}function pI(r){r=r|0,vA(r),pe(r)}function gI(r,o){return r=r|0,o=o|0,yI(r+8|0,s[r+4>>2]|0,o)|0}function mI(r){r=r|0,y[r+1>>0]=0}function AI(r){r=r|0,lr(r+80|0),Lr(r)}function yI(r,o,u){r=r|0,o=o|0,u=u|0;var c=0,h=0,p=0;return p=w,w=w+16|0,c=p,y[r+161>>0]|0||ur(r+80|0),h=r+162|0,vI(h)|0?(o=(Aa(r+80|0,o,y[h>>0]|0,0)|0)&255,y[c>>0]=o,_I(o,u)):(va(ya(o)|0,u,1),y[c>>0]=wI(u)|0),TI(h,c),w=p,u+1|0}function vI(r){return r=r|0,(y[r+1>>0]|0)!=0|0}function _I(r,o){r=r|0,o=o|0,y[o>>0]=r}function wI(r){return r=r|0,y[r>>0]|0}function TI(r,o){r=r|0,o=o|0;var u=0;u=r+1|0,y[u>>0]|0||(y[u>>0]=1),y[r>>0]=y[o>>0]|0}function EI(r){r=r|0,jt(r),pe(r)}function SI(r){r=r|0,r=s[r+12>>2]|0,r|0&&ht[s[(s[r>>2]|0)+4>>2]&255](r)}function xI(r,o){return r=r|0,o=o|0,((s[o+4>>2]|0)==16900?r+12|0:0)|0}function RI(r){r=r|0,He(r,16)}function bI(r,o){r=r|0,o=o|0,Ei(r),s[r>>2]=5376,s[r+4>>2]=o,PI(r+8|0)}function kI(r,o,u){r=r|0,o=o|0,u=u|0;var c=0,h=0;u=w,w=w+16|0,c=u,s[r>>2]=o,h=ge(16)|0,s[h+4>>2]=0,s[h+8>>2]=0,s[h>>2]=5400,s[h+12>>2]=o,s[r+4>>2]=h,s[c>>2]=o,s[c+4>>2]=o,Si(r,c),w=u}function PI(r){r=r|0,Or(r,16,1,8,0),ar(r+80|0,16,1,8,0),y[r+160>>0]=0,y[r+161>>0]=0,II(r+162|0)}function _A(r){r=r|0,s[r>>2]=5376,NI(r+8|0),Fr(r)}function MI(r){r=r|0,_A(r),pe(r)}function CI(r,o){return r=r|0,o=o|0,FI(r+8|0,s[r+4>>2]|0,o)|0}function II(r){r=r|0,y[r+2>>0]=0}function NI(r){r=r|0,lr(r+80|0),Lr(r)}function FI(r,o,u){r=r|0,o=o|0,u=u|0;var c=0,h=0,p=0;return p=w,w=w+16|0,c=p,y[r+161>>0]|0||ur(r+80|0),h=r+162|0,OI(h)|0?(o=(Aa(r+80|0,o,J[h>>1]|0,0)|0)&65535,J[c>>1]=o,LI(o,u)):(va(ya(o)|0,u,2),J[c>>1]=VI(u)|0),UI(h,c),w=p,u+2|0}function OI(r){return r=r|0,(y[r+2>>0]|0)!=0|0}function LI(r,o){r=r|0,o=o|0,vo(r,o)}function VI(r){return r=r|0,yo(r)|0}function UI(r,o){r=r|0,o=o|0;var u=0;u=r+2|0,y[u>>0]|0||(y[u>>0]=1),J[r>>1]=J[o>>1]|0}function BI(r){r=r|0,jt(r),pe(r)}function DI(r){r=r|0,r=s[r+12>>2]|0,r|0&&ht[s[(s[r>>2]|0)+4>>2]&255](r)}function zI(r,o){return r=r|0,o=o|0,((s[o+4>>2]|0)==17398?r+12|0:0)|0}function jI(r){r=r|0,He(r,16)}function WI(r){r=r|0;var o=0,u=0,c=0,h=0,p=0,m=0,A=0,_=0,E=0,k=0;_=w,w=w+32|0,c=_+12|0,h=_,o=_+8|0,m=ge(172)|0,ZI(m,s[r+4>>2]|0),p=r+8|0,s[o>>2]=0,s[c>>2]=s[o>>2],XI(h,m,c),m=r+12|0,o=s[m>>2]|0,A=r+16|0;do if(o>>>0>=(s[A>>2]|0)>>>0)if(o=(o-(s[p>>2]|0)>>3)+1|0,u=Ti(p)|0,u>>>0<o>>>0)Pn(p);else{E=s[p>>2]|0,k=(s[A>>2]|0)-E|0,A=k>>2,vi(c,k>>3>>>0<u>>>1>>>0?A>>>0<o>>>0?o:A:u,(s[m>>2]|0)-E>>3,r+16|0),A=c+8|0,m=s[A>>2]|0,s[m>>2]=s[h>>2],r=h+4|0,s[m+4>>2]=s[r>>2],s[h>>2]=0,s[r>>2]=0,s[A>>2]=m+8,_i(p,c),wi(c);break}else Ai(c,p,1),k=c+4|0,E=s[k>>2]|0,s[E>>2]=s[h>>2],A=h+4|0,s[E+4>>2]=s[A>>2],s[h>>2]=0,s[A>>2]=0,s[k>>2]=E+8,yi(c);while(0);Qn(h),w=_}function GI(r){r=r|0;var o=0,u=0,c=0,h=0,p=0,m=0,A=0,_=0,E=0,k=0;_=w,w=w+32|0,c=_+12|0,h=_,o=_+8|0,m=ge(176)|0,sN(m,s[r+4>>2]|0),p=r+8|0,s[o>>2]=0,s[c>>2]=s[o>>2],oN(h,m,c),m=r+12|0,o=s[m>>2]|0,A=r+16|0;do if(o>>>0>=(s[A>>2]|0)>>>0)if(o=(o-(s[p>>2]|0)>>3)+1|0,u=Ti(p)|0,u>>>0<o>>>0)Pn(p);else{E=s[p>>2]|0,k=(s[A>>2]|0)-E|0,A=k>>2,vi(c,k>>3>>>0<u>>>1>>>0?A>>>0<o>>>0?o:A:u,(s[m>>2]|0)-E>>3,r+16|0),A=c+8|0,m=s[A>>2]|0,s[m>>2]=s[h>>2],r=h+4|0,s[m+4>>2]=s[r>>2],s[h>>2]=0,s[r>>2]=0,s[A>>2]=m+8,_i(p,c),wi(c);break}else Ai(c,p,1),k=c+4|0,E=s[k>>2]|0,s[E>>2]=s[h>>2],A=h+4|0,s[E+4>>2]=s[A>>2],s[h>>2]=0,s[A>>2]=0,s[k>>2]=E+8,yi(c);while(0);Qn(h),w=_}function ZI(r,o){r=r|0,o=o|0,Ei(r),s[r>>2]=5428,s[r+4>>2]=o,HI(r+8|0)}function XI(r,o,u){r=r|0,o=o|0,u=u|0;var c=0,h=0;u=w,w=w+16|0,c=u,s[r>>2]=o,h=ge(16)|0,s[h+4>>2]=0,s[h+8>>2]=0,s[h>>2]=5452,s[h+12>>2]=o,s[r+4>>2]=h,s[c>>2]=o,s[c+4>>2]=o,Si(r,c),w=u}function HI(r){r=r|0,Or(r,8,1,8,0),ar(r+80|0,8,1,8,0),y[r+160>>0]=0,y[r+161>>0]=0,JI(r+162|0)}function wA(r){r=r|0,s[r>>2]=5428,QI(r+8|0),Fr(r)}function YI(r){r=r|0,wA(r),pe(r)}function $I(r,o){return r=r|0,o=o|0,qI(r+8|0,s[r+4>>2]|0,o)|0}function JI(r){r=r|0,y[r+1>>0]=0}function QI(r){r=r|0,lr(r+80|0),Lr(r)}function qI(r,o,u){r=r|0,o=o|0,u=u|0;var c=0,h=0,p=0;return p=w,w=w+16|0,c=p,y[r+161>>0]|0||ur(r+80|0),h=r+162|0,KI(h)|0?(o=(Aa(r+80|0,o,L[h>>0]|0,0)|0)&255,y[c>>0]=o,Uh(o,u)):(va(ya(o)|0,u,1),y[c>>0]=Vh(u)|0),eN(h,c),w=p,u+1|0}function KI(r){return r=r|0,(y[r+1>>0]|0)!=0|0}function eN(r,o){r=r|0,o=o|0;var u=0;u=r+1|0,y[u>>0]|0||(y[u>>0]=1),y[r>>0]=y[o>>0]|0}function tN(r){r=r|0,jt(r),pe(r)}function nN(r){r=r|0,r=s[r+12>>2]|0,r|0&&ht[s[(s[r>>2]|0)+4>>2]&255](r)}function rN(r,o){return r=r|0,o=o|0,((s[o+4>>2]|0)==17896?r+12|0:0)|0}function iN(r){r=r|0,He(r,16)}function sN(r,o){r=r|0,o=o|0,Ei(r),s[r>>2]=5480,s[r+4>>2]=o,aN(r+8|0)}function oN(r,o,u){r=r|0,o=o|0,u=u|0;var c=0,h=0;u=w,w=w+16|0,c=u,s[r>>2]=o,h=ge(16)|0,s[h+4>>2]=0,s[h+8>>2]=0,s[h>>2]=5504,s[h+12>>2]=o,s[r+4>>2]=h,s[c>>2]=o,s[c+4>>2]=o,Si(r,c),w=u}function aN(r){r=r|0,Or(r,16,1,8,0),ar(r+80|0,16,1,8,0),y[r+160>>0]=0,y[r+161>>0]=0,cN(r+162|0)}function TA(r){r=r|0,s[r>>2]=5480,fN(r+8|0),Fr(r)}function uN(r){r=r|0,TA(r),pe(r)}function lN(r,o){return r=r|0,o=o|0,hN(r+8|0,s[r+4>>2]|0,o)|0}function cN(r){r=r|0,y[r+2>>0]=0}function fN(r){r=r|0,lr(r+80|0),Lr(r)}function hN(r,o,u){r=r|0,o=o|0,u=u|0;var c=0,h=0,p=0;return p=w,w=w+16|0,c=p,y[r+161>>0]|0||ur(r+80|0),h=r+162|0,dN(h)|0?(o=(Aa(r+80|0,o,te[h>>1]|0,0)|0)&65535,J[c>>1]=o,vo(o,u)):(va(ya(o)|0,u,2),J[c>>1]=yo(u)|0),pN(h,c),w=p,u+2|0}function dN(r){return r=r|0,(y[r+2>>0]|0)!=0|0}function pN(r,o){r=r|0,o=o|0;var u=0;u=r+2|0,y[u>>0]|0||(y[u>>0]=1),J[r>>1]=J[o>>1]|0}function gN(r){r=r|0,jt(r),pe(r)}function mN(r){r=r|0,r=s[r+12>>2]|0,r|0&&ht[s[(s[r>>2]|0)+4>>2]&255](r)}function AN(r,o){return r=r|0,o=o|0,((s[o+4>>2]|0)==18394?r+12|0:0)|0}function yN(r){r=r|0,He(r,16)}function cK(){}function vN(r){return r=r|0,xN(r)|0}function _N(){return 0}function wN(){return 0}function TN(r){r=r|0,r|0&&(RN(r),pe(r))}function Du(){return bN()|0}function EN(){return kN()|0}function SN(){return PN()|0}function EA(){return 0}function xN(r){return r=r|0,3360}function RN(r){r=r|0;var o=0,u=0,c=0,h=0;o=w,w=w+16|0,c=o,s[c>>2]=s[r>>2],s[r>>2]=0,u=r+4|0,s[c+4>>2]=s[u>>2],s[u>>2]=0,Rh(c),u=r+8|0,s[c>>2]=s[u>>2],s[u>>2]=0,h=r+12|0,s[c+4>>2]=s[h>>2],s[h>>2]=0,bh(c),bh(u),Rh(r),w=o}function bN(){return 3360}function kN(){return 3368}function PN(){return 3384}function Vc(){return 18579}function Uc(){return 18582}function SA(){return 18584}function MN(){var r=0;return r=ge(16)|0,VN(r),r|0}function CN(r){r=r|0;var o=0,u=0,c=0,h=0;o=w,w=w+16|0,u=o,h=Du()|0,c=NN(u)|0,u=FN(u)|0,qm(h|0,c|0,u|0,Vc()|0,12,r|0),w=o}function IN(r){return r=r|0,ON(cd[r&3]()|0)|0}function NN(r){return r=r|0,1}function FN(r){return r=r|0,LN()|0}function ON(r){return r=r|0,r|0}function LN(){return 5524}function VN(r){r=r|0,s[r>>2]=0,s[r+4>>2]=0,s[r+8>>2]=0,s[r+12>>2]=0}function UN(r,o){r=r|0,o=o|0;var u=0,c=0,h=0,p=0,m=0;u=w,w=w+16|0,c=u,h=u+8|0,m=s[o+4>>2]|0,s[c>>2]=s[o>>2],s[c+4>>2]=m,m=Du()|0,p=DN(h)|0,h=zN(h)|0,o=RA()|0,da(m|0,r|0,p|0,h|0,o|0,4,jN(c)|0,0),w=u}function BN(r,o,u,c){r=r|0,o=o|0,u=u|0,c=c|0;var h=0,p=0;p=Hh(o)|0,o=s[r>>2]|0,h=s[r+4>>2]|0,r=p+(h>>1)|0,h&1&&(o=s[(s[r>>2]|0)+o>>2]|0),h=xA(u)|0,p=Yh(c)|0,Xu[o&15](r,h,p)}function DN(r){return r=r|0,4}function zN(r){return r=r|0,WN()|0}function jN(r){r=r|0;var o=0,u=0;return o=ge(8)|0,u=s[r+4>>2]|0,s[o>>2]=s[r>>2],s[o+4>>2]=u,o|0}function Hh(r){return r=r|0,r|0}function xA(r){return r=r|0,r|0}function Yh(r){return r=r|0,r|0}function WN(){return 144}function RA(){return 18587}function GN(r,o){r=r|0,o=o|0;var u=0,c=0,h=0,p=0,m=0;u=w,w=w+16|0,c=u,h=u+8|0,m=s[o+4>>2]|0,s[c>>2]=s[o>>2],s[c+4>>2]=m,m=Du()|0,p=XN(h)|0,h=HN(h)|0,o=$h()|0,da(m|0,r|0,p|0,h|0,o|0,7,YN(c)|0,0),w=u}function ZN(r,o,u){r=r|0,o=o|0,u=u|0;var c=0,h=0;h=Hh(o)|0,o=s[r>>2]|0,c=s[r+4>>2]|0,r=h+(c>>1)|0,c&1&&(o=s[(s[r>>2]|0)+o>>2]|0),h=bA(u)|0,bs[o&15](r,h)}function XN(r){return r=r|0,3}function HN(r){return r=r|0,$N()|0}function YN(r){r=r|0;var o=0,u=0;return o=ge(8)|0,u=s[r+4>>2]|0,s[o>>2]=s[r>>2],s[o+4>>2]=u,o|0}function bA(r){return r=r|0,r|0}function $N(){return 5528}function $h(){return 18593}function JN(r,o){r=r|0,o=o|0;var u=0,c=0,h=0,p=0,m=0;u=w,w=w+16|0,c=u,h=u+8|0,m=s[o+4>>2]|0,s[c>>2]=s[o>>2],s[c+4>>2]=m,m=Du()|0,p=qN(h)|0,h=KN(h)|0,o=r8()|0,da(m|0,r|0,p|0,h|0,o|0,41,e8(c)|0,0),w=u}function QN(r,o){r=r|0,o=o|0;var u=0,c=0,h=0,p=0;return c=w,w=w+16|0,u=c,p=Hh(o)|0,o=s[r>>2]|0,h=s[r+4>>2]|0,r=p+(h>>1)|0,h&1&&(o=s[(s[r>>2]|0)+o>>2]|0),s[u>>2]=Zc[o&15](r)|0,p=t8(u)|0,w=c,p|0}function qN(r){return r=r|0,2}function KN(r){return r=r|0,n8()|0}function e8(r){r=r|0;var o=0,u=0;return o=ge(8)|0,u=s[r+4>>2]|0,s[o>>2]=s[r>>2],s[o+4>>2]=u,o|0}function t8(r){return r=r|0,s[r>>2]|0}function n8(){return 5540}function r8(){return 18598}function fK(){}function i8(r){return r=r|0,c8(r)|0}function s8(){return 0}function o8(){return 0}function a8(r){r=r|0,r|0&&(f8(r),pe(r))}function zu(){return h8()|0}function u8(){return d8()|0}function l8(){return p8()|0}function c8(r){return r=r|0,3400}function f8(r){r=r|0;var o=0,u=0,c=0,h=0;o=w,w=w+16|0,c=o,s[c>>2]=s[r>>2],s[r>>2]=0,u=r+4|0,s[c+4>>2]=s[u>>2],s[u>>2]=0,Gh(c),u=r+16|0,s[c>>2]=s[u>>2],s[u>>2]=0,h=r+20|0,s[c+4>>2]=s[h>>2],s[h>>2]=0,Bu(c),s[c>>2]=s[u>>2],s[u>>2]=0,s[c+4>>2]=s[h>>2],s[h>>2]=0,Bu(c),Bu(u),pA(r+8|0),Gh(r),w=o}function h8(){return 3400}function d8(){return 3408}function p8(){return 3424}function g8(){var r=0;return r=ge(24)|0,T8(r),r|0}function m8(r){r=r|0;var o=0,u=0,c=0,h=0;o=w,w=w+16|0,u=o,h=zu()|0,c=y8(u)|0,u=v8(u)|0,qm(h|0,c|0,u|0,Vc()|0,13,r|0),w=o}function A8(r){return r=r|0,_8(cd[r&3]()|0)|0}function y8(r){return r=r|0,1}function v8(r){return r=r|0,w8()|0}function _8(r){return r=r|0,r|0}function w8(){return 5548}function T8(r){r=r|0,s[r>>2]=0,s[r+4>>2]=0,s[r+8>>2]=0,s[r+12>>2]=0,s[r+16>>2]=0,s[r+20>>2]=0}function E8(r,o){r=r|0,o=o|0;var u=0,c=0,h=0,p=0,m=0;u=w,w=w+16|0,c=u,h=u+8|0,m=s[o+4>>2]|0,s[c>>2]=s[o>>2],s[c+4>>2]=m,m=zu()|0,p=x8(h)|0,h=R8(h)|0,o=RA()|0,da(m|0,r|0,p|0,h|0,o|0,5,b8(c)|0,0),w=u}function S8(r,o,u,c){r=r|0,o=o|0,u=u|0,c=c|0;var h=0,p=0;p=Jh(o)|0,o=s[r>>2]|0,h=s[r+4>>2]|0,r=p+(h>>1)|0,h&1&&(o=s[(s[r>>2]|0)+o>>2]|0),h=xA(u)|0,p=Yh(c)|0,Xu[o&15](r,h,p)}function x8(r){return r=r|0,4}function R8(r){return r=r|0,k8()|0}function b8(r){r=r|0;var o=0,u=0;return o=ge(8)|0,u=s[r+4>>2]|0,s[o>>2]=s[r>>2],s[o+4>>2]=u,o|0}function Jh(r){return r=r|0,r|0}function k8(){return 160}function Qh(r,o){r=r|0,o=o|0;var u=0,c=0,h=0,p=0,m=0;u=w,w=w+16|0,c=u,h=u+8|0,m=s[o+4>>2]|0,s[c>>2]=s[o>>2],s[c+4>>2]=m,m=zu()|0,p=M8(h)|0,h=C8(h)|0,o=$h()|0,da(m|0,r|0,p|0,h|0,o|0,8,I8(c)|0,0),w=u}function P8(r,o,u){r=r|0,o=o|0,u=u|0;var c=0,h=0;h=Jh(o)|0,o=s[r>>2]|0,c=s[r+4>>2]|0,r=h+(c>>1)|0,c&1&&(o=s[(s[r>>2]|0)+o>>2]|0),h=Yh(u)|0,bs[o&15](r,h)}function M8(r){return r=r|0,3}function C8(r){return r=r|0,N8()|0}function I8(r){r=r|0;var o=0,u=0;return o=ge(8)|0,u=s[r+4>>2]|0,s[o>>2]=s[r>>2],s[o+4>>2]=u,o|0}function N8(){return 5552}function F8(r,o){r=r|0,o=o|0;var u=0,c=0,h=0,p=0,m=0;u=w,w=w+16|0,c=u,h=u+8|0,m=s[o+4>>2]|0,s[c>>2]=s[o>>2],s[c+4>>2]=m,m=zu()|0,p=L8(h)|0,h=V8(h)|0,o=$h()|0,da(m|0,r|0,p|0,h|0,o|0,9,U8(c)|0,0),w=u}function O8(r,o,u){r=r|0,o=o|0,u=u|0;var c=0,h=0;h=Jh(o)|0,o=s[r>>2]|0,c=s[r+4>>2]|0,r=h+(c>>1)|0,c&1&&(o=s[(s[r>>2]|0)+o>>2]|0),h=bA(u)|0,bs[o&15](r,h)}function L8(r){return r=r|0,3}function V8(r){return r=r|0,B8()|0}function U8(r){r=r|0;var o=0,u=0;return o=ge(8)|0,u=s[r+4>>2]|0,s[o>>2]=s[r>>2],s[o+4>>2]=u,o|0}function B8(){return 5564}function D8(){sR()}function z8(){j8()}function j8(){W8(22144)}function W8(r){r=r|0;var o=0;o=w,w=w+16|0,s[o>>2]=r,kA(),w=o}function kA(){Kx(G8()|0,18653),Qx(Z8()|0,18658,1,1,0),X8(18663),H8(18668),Y8(18680),$8(18694),J8(18700),Q8(18715),q8(18719),K8(18732),eF(18737),tF(18751),nF(18757),e1(rF()|0,18764),e1(iF()|0,18776),xh(sF()|0,4,18809),xh(oF()|0,2,18822),xh(aF()|0,4,18837),qx(uF()|0,18852),lF(18868),PA(18898),MA(18935),CA(18974),IA(19005),NA(19045),FA(19074),cF(19112),fF(19142),PA(19181),MA(19213),CA(19246),IA(19279),NA(19313),FA(19346),hF(19380),dF(19411),pF(19443)}function G8(){return RO()|0}function Z8(){return xO()|0}function X8(r){r=r|0;var o=0,u=0;o=w,w=w+16|0,u=o,s[u>>2]=r,r=EO()|0,Ji(r|0,s[u>>2]|0,1,-128<<24>>24|0,127<<24>>24|0),w=o}function H8(r){r=r|0;var o=0,u=0;o=w,w=w+16|0,u=o,s[u>>2]=r,r=wO()|0,Ji(r|0,s[u>>2]|0,1,-128<<24>>24|0,127<<24>>24|0),w=o}function Y8(r){r=r|0;var o=0,u=0;o=w,w=w+16|0,u=o,s[u>>2]=r,r=vO()|0,Ji(r|0,s[u>>2]|0,1,0,255),w=o}function $8(r){r=r|0;var o=0,u=0;o=w,w=w+16|0,u=o,s[u>>2]=r,r=AO()|0,Ji(r|0,s[u>>2]|0,2,-32768<<16>>16|0,32767<<16>>16|0),w=o}function J8(r){r=r|0;var o=0,u=0;o=w,w=w+16|0,u=o,s[u>>2]=r,r=gO()|0,Ji(r|0,s[u>>2]|0,2,0,65535),w=o}function Q8(r){r=r|0;var o=0,u=0;o=w,w=w+16|0,u=o,s[u>>2]=r,r=dO()|0,Ji(r|0,s[u>>2]|0,4,-2147483648,2147483647),w=o}function q8(r){r=r|0;var o=0,u=0;o=w,w=w+16|0,u=o,s[u>>2]=r,r=fO()|0,Ji(r|0,s[u>>2]|0,4,0,-1),w=o}function K8(r){r=r|0;var o=0,u=0;o=w,w=w+16|0,u=o,s[u>>2]=r,r=lO()|0,Ji(r|0,s[u>>2]|0,4,-2147483648,2147483647),w=o}function eF(r){r=r|0;var o=0,u=0;o=w,w=w+16|0,u=o,s[u>>2]=r,r=aO()|0,Ji(r|0,s[u>>2]|0,4,0,-1),w=o}function tF(r){r=r|0;var o=0,u=0;o=w,w=w+16|0,u=o,s[u>>2]=r,r=sO()|0,Km(r|0,s[u>>2]|0,4),w=o}function nF(r){r=r|0;var o=0,u=0;o=w,w=w+16|0,u=o,s[u>>2]=r,r=rO()|0,Km(r|0,s[u>>2]|0,8),w=o}function rF(){return nO()|0}function iF(){return tO()|0}function sF(){return eO()|0}function oF(){return KF()|0}function aF(){return qF()|0}function uF(){return QF()|0}function lF(r){r=r|0;var o=0,u=0,c=0;o=w,w=w+16|0,u=o,s[u>>2]=r,c=YF()|0,r=$F()|0,Nr(c|0,r|0,s[u>>2]|0),w=o}function PA(r){r=r|0;var o=0,u=0,c=0;o=w,w=w+16|0,u=o,s[u>>2]=r,c=ZF()|0,r=XF()|0,Nr(c|0,r|0,s[u>>2]|0),w=o}function MA(r){r=r|0;var o=0,u=0,c=0;o=w,w=w+16|0,u=o,s[u>>2]=r,c=jF()|0,r=WF()|0,Nr(c|0,r|0,s[u>>2]|0),w=o}function CA(r){r=r|0;var o=0,u=0,c=0;o=w,w=w+16|0,u=o,s[u>>2]=r,c=BF()|0,r=DF()|0,Nr(c|0,r|0,s[u>>2]|0),w=o}function IA(r){r=r|0;var o=0,u=0,c=0;o=w,w=w+16|0,u=o,s[u>>2]=r,c=LF()|0,r=VF()|0,Nr(c|0,r|0,s[u>>2]|0),w=o}function NA(r){r=r|0;var o=0,u=0,c=0;o=w,w=w+16|0,u=o,s[u>>2]=r,c=NF()|0,r=FF()|0,Nr(c|0,r|0,s[u>>2]|0),w=o}function FA(r){r=r|0;var o=0,u=0,c=0;o=w,w=w+16|0,u=o,s[u>>2]=r,c=MF()|0,r=CF()|0,Nr(c|0,r|0,s[u>>2]|0),w=o}function cF(r){r=r|0;var o=0,u=0,c=0;o=w,w=w+16|0,u=o,s[u>>2]=r,c=bF()|0,r=kF()|0,Nr(c|0,r|0,s[u>>2]|0),w=o}function fF(r){r=r|0;var o=0,u=0,c=0;o=w,w=w+16|0,u=o,s[u>>2]=r,c=SF()|0,r=xF()|0,Nr(c|0,r|0,s[u>>2]|0),w=o}function hF(r){r=r|0;var o=0,u=0,c=0;o=w,w=w+16|0,u=o,s[u>>2]=r,c=wF()|0,r=TF()|0,Nr(c|0,r|0,s[u>>2]|0),w=o}function dF(r){r=r|0;var o=0,u=0,c=0;o=w,w=w+16|0,u=o,s[u>>2]=r,c=yF()|0,r=vF()|0,Nr(c|0,r|0,s[u>>2]|0),w=o}function pF(r){r=r|0;var o=0,u=0,c=0;o=w,w=w+16|0,u=o,s[u>>2]=r,c=gF()|0,r=mF()|0,Nr(c|0,r|0,s[u>>2]|0),w=o}function gF(){return AF()|0}function mF(){return 7}function AF(){return 3440}function yF(){return _F()|0}function vF(){return 7}function _F(){return 3448}function wF(){return EF()|0}function TF(){return 6}function EF(){return 3456}function SF(){return RF()|0}function xF(){return 5}function RF(){return 3464}function bF(){return PF()|0}function kF(){return 4}function PF(){return 3472}function MF(){return IF()|0}function CF(){return 5}function IF(){return 3480}function NF(){return OF()|0}function FF(){return 4}function OF(){return 3488}function LF(){return UF()|0}function VF(){return 3}function UF(){return 3496}function BF(){return zF()|0}function DF(){return 2}function zF(){return 3504}function jF(){return GF()|0}function WF(){return 1}function GF(){return 3512}function ZF(){return HF()|0}function XF(){return 0}function HF(){return 3520}function YF(){return JF()|0}function $F(){return 0}function JF(){return 3528}function QF(){return 3536}function qF(){return 3544}function KF(){return 3576}function eO(){return 3600}function tO(){return 3624}function nO(){return 3648}function rO(){return iO()|0}function iO(){return 4144}function sO(){return oO()|0}function oO(){return 4136}function aO(){return uO()|0}function uO(){return 4128}function lO(){return cO()|0}function cO(){return 4120}function fO(){return hO()|0}function hO(){return 4112}function dO(){return pO()|0}function pO(){return 4104}function gO(){return mO()|0}function mO(){return 4096}function AO(){return yO()|0}function yO(){return 4088}function vO(){return _O()|0}function _O(){return 4072}function wO(){return TO()|0}function TO(){return 4080}function EO(){return SO()|0}function SO(){return 4064}function xO(){return 4056}function RO(){return 4040}function bO(r){r=r|0;var o=0,u=0,c=0,h=0;return o=w,w=w+16|0,u=o+8|0,c=o+4|0,h=o,s[h>>2]=r,s[c>>2]=s[h>>2],s[u>>2]=s[(s[c>>2]|0)+4>>2],r=HO(s[u>>2]|0)|0,w=o,r|0}function xi(){return 21636}function ju(r){return r=r|0,(r+-48|0)>>>0<10|0}function OA(){return 5576}function LA(r,o){r=r|0,o=o|0;var u=0,c=0;if(u=y[r>>0]|0,c=y[o>>0]|0,!(u<<24>>24)||u<<24>>24!=c<<24>>24)r=c;else{do r=r+1|0,o=o+1|0,u=y[r>>0]|0,c=y[o>>0]|0;while(!(!(u<<24>>24)||u<<24>>24!=c<<24>>24));r=c}return(u&255)-(r&255)|0}function Bc(r){r=r|0;var o=0,u=0,c=0;c=r;e:do if(!(c&3))u=5;else for(o=c;;){if(!(y[r>>0]|0)){r=o;break e}if(r=r+1|0,o=r,!(o&3)){u=5;break}}while(0);if((u|0)==5){for(;o=s[r>>2]|0,!((o&-2139062144^-2139062144)&o+-16843009);)r=r+4|0;if((o&255)<<24>>24)do r=r+1|0;while(y[r>>0]|0)}return r-c|0}function kO(r){r=r|0}function PO(r){return r=r|0,1}function MO(r){r=r|0;var o=0,u=0;return o=r+74|0,u=y[o>>0]|0,y[o>>0]=u+255|u,o=s[r>>2]|0,o&8?(s[r>>2]=o|32,r=-1):(s[r+8>>2]=0,s[r+4>>2]=0,u=s[r+44>>2]|0,s[r+28>>2]=u,s[r+20>>2]=u,s[r+16>>2]=u+(s[r+48>>2]|0),r=0),r|0}function CO(r,o,u){r=r|0,o=o|0,u=u|0;var c=0,h=0,p=0,m=0,A=0;c=u+16|0,h=s[c>>2]|0,h?p=5:MO(u)|0?c=0:(h=s[c>>2]|0,p=5);e:do if((p|0)==5){if(A=u+20|0,m=s[A>>2]|0,c=m,(h-m|0)>>>0<o>>>0){c=Ea[s[u+36>>2]&7](u,r,o)|0;break}t:do if((y[u+75>>0]|0)<0|(o|0)==0)p=0,h=r;else{for(m=o;h=m+-1|0,(y[r+h>>0]|0)!=10;)if(h)m=h;else{p=0,h=r;break t}if(c=Ea[s[u+36>>2]&7](u,r,m)|0,c>>>0<m>>>0)break e;p=m,h=r+m|0,o=o-m|0,c=s[A>>2]|0}while(0);hr(c|0,h|0,o|0)|0,s[A>>2]=(s[A>>2]|0)+o,c=p+o|0}while(0);return c|0}function IO(r,o){return r=r|0,o=o|0,o?o=NO(s[o>>2]|0,s[o+4>>2]|0,r)|0:o=0,(o|0?o:r)|0}function NO(r,o,u){r=r|0,o=o|0,u=u|0;var c=0,h=0,p=0,m=0,A=0,_=0,E=0,k=0,O=0,U=0;U=(s[r>>2]|0)+1794895138|0,p=wo(s[r+8>>2]|0,U)|0,c=wo(s[r+12>>2]|0,U)|0,h=wo(s[r+16>>2]|0,U)|0;e:do if(p>>>0<o>>>2>>>0&&(O=o-(p<<2)|0,c>>>0<O>>>0&h>>>0<O>>>0)&&!((h|c)&3|0)){for(O=c>>>2,k=h>>>2,E=0;;){if(A=p>>>1,_=E+A|0,m=_<<1,h=m+O|0,c=wo(s[r+(h<<2)>>2]|0,U)|0,h=wo(s[r+(h+1<<2)>>2]|0,U)|0,!(h>>>0<o>>>0&c>>>0<(o-h|0)>>>0)){c=0;break e}if(y[r+(h+c)>>0]|0){c=0;break e}if(c=LA(u,r+h|0)|0,!c)break;if(c=(c|0)<0,(p|0)==1){c=0;break e}E=c?E:_,p=c?A:p-A|0}c=m+k|0,h=wo(s[r+(c<<2)>>2]|0,U)|0,c=wo(s[r+(c+1<<2)>>2]|0,U)|0,c>>>0<o>>>0&h>>>0<(o-c|0)>>>0?c=y[r+(c+h)>>0]|0?0:r+c|0:c=0}else c=0;while(0);return c|0}function wo(r,o){r=r|0,o=o|0;var u=0;return u=ly(r|0)|0,(o|0?u:r)|0}function FO(r,o,u){r=r|0,o=o|0,u=u|0;var c=0,h=0,p=0;p=o&255,c=(u|0)!=0;e:do if(c&(r&3|0)!=0)for(h=o&255;;){if((y[r>>0]|0)==h<<24>>24){h=6;break e}if(r=r+1|0,u=u+-1|0,c=(u|0)!=0,!(c&(r&3|0)!=0)){h=5;break}}else h=5;while(0);(h|0)==5&&(c?h=6:r=0);e:do if((h|0)==6){if((y[r>>0]|0)!=(o&255)<<24>>24){c=$e(p,16843009)|0;t:do if(u>>>0>3)do{if(p=s[r>>2]^c,(p&-2139062144^-2139062144)&p+-16843009|0)break t;r=r+4|0,u=u+-4|0}while(u>>>0>3);while(0)}if(!u)r=0;else for(c=o&255;;){if((y[r>>0]|0)==c<<24>>24)break e;if(u=u+-1|0,u)r=r+1|0;else{r=0;break}}}while(0);return r|0}function OO(r,o,u){return r=r|0,o=o|0,u=u|0,UO(r,o,u,1,8)|0}function LO(r,o,u,c,h,p){r=r|0,o=+o,u=u|0,c=c|0,h=h|0,p=p|0;var m=0,A=0,_=0,E=0,k=0,O=0,U=0,Z=0,H=0,G=0,be=0,oe=0,re=0,ye=0,q=0,nt=0,Rt=0,rt=0,We=0,wt=0,Ce=0,Le=0,si=0;si=w,w=w+560|0,_=si+32|0,oe=si+536|0,Le=si,Ce=Le,E=si+540|0,s[oe>>2]=0,wt=E+12|0,DA(o)|0,m=tt()|0,(m|0)<0?(o=-o,DA(o)|0,We=1,rt=20247,m=tt()|0):(We=(h&2049|0)!=0&1,rt=h&2048|0?20250:h&1|0?20253:20248);do if(!0&(m&2146435072|0)==2146435072)Le=(p&32|0)!=0,m=We+3|0,ln(r,32,u,m,h&-65537),Qt(r,rt,We),Qt(r,o!=o|!1?Le?20274:20278:Le?20266:20270,3),ln(r,32,u,m,h^8192);else{if(Z=+zA(o,oe)*2,m=Z!=0,m&&(s[oe>>2]=(s[oe>>2]|0)+-1),be=p|32,(be|0)==97){O=p&32,H=O|0?rt+9|0:rt,U=We|2,m=12-c|0;do if(c>>>0>11|(m|0)==0)o=Z;else{o=8;do m=m+-1|0,o=o*16;while(m|0);if((y[H>>0]|0)==45){o=-(o+(-Z-o));break}else{o=Z+o-o;break}}while(0);A=s[oe>>2]|0,m=(A|0)<0?0-A|0:A,m=_a(m,((m|0)<0)<<31>>31,wt)|0,(m|0)==(wt|0)&&(m=E+11|0,y[m>>0]=48),y[m+-1>>0]=(A>>31&2)+43,k=m+-2|0,y[k>>0]=p+15,A=(c|0)<1,_=(h&8|0)==0,E=Le;do We=~~o,m=E+1|0,y[E>>0]=O|L[640+We>>0],o=(o-+(We|0))*16,(m-Ce|0)==1&&!(_&(A&o==0))?(y[m>>0]=46,E=E+2|0):E=m;while(o!=0);c|0&&(-2-Ce+E|0)<(c|0)?(A=wt,_=k,m=c+2+A-_|0):(A=wt,_=k,m=A-Ce-_+E|0),wt=m+U|0,ln(r,32,u,wt,h),Qt(r,H,U),ln(r,48,u,wt,h^65536),Ce=E-Ce|0,Qt(r,Le,Ce),Le=A-_|0,ln(r,48,m-(Ce+Le)|0,0,0),Qt(r,k,Le),ln(r,32,u,wt,h^8192),m=wt;break}A=(c|0)<0?6:c,m?(m=(s[oe>>2]|0)+-28|0,s[oe>>2]=m,o=Z*268435456):(o=Z,m=s[oe>>2]|0),Rt=(m|0)<0?_:_+288|0,_=Rt;do q=~~o>>>0,s[_>>2]=q,_=_+4|0,o=(o-+(q>>>0))*1e9;while(o!=0);if(q=Rt,(m|0)>0)for(O=Rt;;){if(k=(m|0)<29?m:29,m=_+-4|0,m>>>0>=O>>>0){E=0;do G=ay(s[m>>2]|0,0,k|0)|0,G=Vr(G|0,tt()|0,E|0,0)|0,re=tt()|0,E=ad(G|0,re|0,1e9,0)|0,ye=od(E|0,tt()|0,1e9,0)|0,ye=Ta(G|0,re|0,ye|0,tt()|0)|0,tt()|0,s[m>>2]=ye,m=m+-4|0;while(m>>>0>=O>>>0);E?(ye=O+-4|0,s[ye>>2]=E,E=ye):E=O}else E=O;e:do if(_>>>0>E>>>0)for(m=_;;){if(_=m+-4|0,s[_>>2]|0){_=m;break e}if(_>>>0>E>>>0)m=_;else break}while(0);if(m=(s[oe>>2]|0)-k|0,s[oe>>2]=m,(m|0)>0)O=E;else break}else E=Rt;if((m|0)<0){c=((A+25|0)/9|0)+1|0,G=(be|0)==102;do{if(H=0-m|0,H=(H|0)<9?H:9,E>>>0<_>>>0){k=(1<<H)+-1|0,O=1e9>>>H,U=0,m=E;do ye=s[m>>2]|0,s[m>>2]=(ye>>>H)+U,U=$e(ye&k,O)|0,m=m+4|0;while(m>>>0<_>>>0);E=s[E>>2]|0?E:E+4|0,U&&(s[_>>2]=U,_=_+4|0)}else E=s[E>>2]|0?E:E+4|0;m=G?Rt:E,_=(_-m>>2|0)>(c|0)?m+(c<<2)|0:_,m=(s[oe>>2]|0)+H|0,s[oe>>2]=m}while((m|0)<0);G=E}else G=E;if(G>>>0<_>>>0){if(m=(q-G>>2)*9|0,k=s[G>>2]|0,k>>>0>=10){E=10;do E=E*10|0,m=m+1|0;while(k>>>0>=E>>>0)}}else m=0;if(re=(be|0)==103,ye=(A|0)!=0,E=A-((be|0)==102?0:m)+((ye&re)<<31>>31)|0,(E|0)<(((_-q>>2)*9|0)+-9|0)){if(oe=E+9216|0,E=(oe|0)/9|0,c=Rt+4+(E+-1024<<2)|0,E=oe-(E*9|0)|0,(E|0)<8)for(k=10;k=k*10|0,(E|0)<7;)E=E+1|0;else k=10;if(U=s[c>>2]|0,E=(U>>>0)/(k>>>0)|0,H=U-($e(E,k)|0)|0,O=(c+4|0)==(_|0),O&(H|0)==0)E=c,k=G;else if(Z=E&1|0?9007199254740994:9007199254740992,oe=k>>>1,o=H>>>0<oe>>>0?.5:O&(H|0)==(oe|0)?1:1.5,We&&(oe=(y[rt>>0]|0)==45,o=oe?-o:o,Z=oe?-Z:Z),E=U-H|0,s[c>>2]=E,Z+o!=Z){if(oe=E+k|0,s[c>>2]=oe,oe>>>0>999999999)for(k=c,m=G;;)if(E=k+-4|0,s[k>>2]=0,E>>>0<m>>>0&&(m=m+-4|0,s[m>>2]=0),oe=(s[E>>2]|0)+1|0,s[E>>2]=oe,oe>>>0>999999999)k=E;else{k=m;break}else E=c,k=G;if(m=(q-k>>2)*9|0,U=s[k>>2]|0,U>>>0>=10){O=10;do O=O*10|0,m=m+1|0;while(U>>>0>=O>>>0)}}else E=c,k=G;oe=E+4|0,_=_>>>0>oe>>>0?oe:_}else k=G;c=0-m|0;e:do if(_>>>0>k>>>0)for(;;){if(E=_+-4|0,s[E>>2]|0){oe=_,be=1;break e}if(E>>>0>k>>>0)_=E;else{oe=E,be=0;break}}else oe=_,be=0;while(0);do if(re){if(A=A+((ye^1)&1)|0,(A|0)>(m|0)&(m|0)>-5?(O=p+-1|0,A=A+-1-m|0):(O=p+-2|0,A=A+-1|0),!(h&8)){if(be&&(nt=s[oe+-4>>2]|0,(nt|0)!=0))if((nt>>>0)%10|0)E=0;else{E=0,_=10;do _=_*10|0,E=E+1|0;while(!((nt>>>0)%(_>>>0)|0|0))}else E=9;if(_=((oe-q>>2)*9|0)+-9|0,(O|32|0)==102){p=_-E|0,p=(p|0)>0?p:0,A=(A|0)<(p|0)?A:p;break}else{p=_+m-E|0,p=(p|0)>0?p:0,A=(A|0)<(p|0)?A:p;break}}}else O=p;while(0);if(G=(A|0)!=0,U=G?1:h>>>3&1,H=(O|32|0)==102,H)re=0,m=(m|0)>0?m:0;else{if(_=(m|0)<0?c:m,_=_a(_,((_|0)<0)<<31>>31,wt)|0,E=wt,(E-_|0)<2)do _=_+-1|0,y[_>>0]=48;while((E-_|0)<2);y[_+-1>>0]=(m>>31&2)+43,m=_+-2|0,y[m>>0]=O,re=m,m=E-m|0}if(m=We+1+A+U+m|0,ln(r,32,u,m,h),Qt(r,rt,We),ln(r,48,u,m,h^65536),H){U=k>>>0>Rt>>>0?Rt:k,H=Le+9|0,k=H,O=Le+8|0,E=U;do{if(_=_a(s[E>>2]|0,0,H)|0,(E|0)==(U|0))(_|0)==(H|0)&&(y[O>>0]=48,_=O);else if(_>>>0>Le>>>0){Ro(Le|0,48,_-Ce|0)|0;do _=_+-1|0;while(_>>>0>Le>>>0)}Qt(r,_,k-_|0),E=E+4|0}while(E>>>0<=Rt>>>0);if((h&8|0)==0&(G^1)||Qt(r,20282,1),E>>>0<oe>>>0&(A|0)>0)for(;;){if(_=_a(s[E>>2]|0,0,H)|0,_>>>0>Le>>>0){Ro(Le|0,48,_-Ce|0)|0;do _=_+-1|0;while(_>>>0>Le>>>0)}if(Qt(r,_,(A|0)<9?A:9),E=E+4|0,_=A+-9|0,E>>>0<oe>>>0&(A|0)>9)A=_;else{A=_;break}}ln(r,48,A+9|0,9,0)}else{if(oe=be?oe:k+4|0,k>>>0<oe>>>0&(A|0)>-1){c=Le+9|0,G=(h&8|0)==0,be=c,U=0-Ce|0,H=Le+8|0,O=k;do{_=_a(s[O>>2]|0,0,c)|0,(_|0)==(c|0)&&(y[H>>0]=48,_=H);do if((O|0)==(k|0)){if(E=_+1|0,Qt(r,_,1),G&(A|0)<1){_=E;break}Qt(r,20282,1),_=E}else{if(_>>>0<=Le>>>0)break;Ro(Le|0,48,_+U|0)|0;do _=_+-1|0;while(_>>>0>Le>>>0)}while(0);Ce=be-_|0,Qt(r,_,(A|0)>(Ce|0)?Ce:A),A=A-Ce|0,O=O+4|0}while(O>>>0<oe>>>0&(A|0)>-1)}ln(r,48,A+18|0,18,0),Qt(r,re,wt-re|0)}ln(r,32,u,m,h^8192)}while(0);return w=si,((m|0)<(u|0)?u:m)|0}function VO(r,o){r=r|0,o=o|0;var u=0,c=0;c=(s[o>>2]|0)+(8-1)&~(8-1),u=+ce[c>>3],s[o>>2]=c+8,ce[r>>3]=u}function UO(r,o,u,c,h){r=r|0,o=o|0,u=u|0,c=c|0,h=h|0;var p=0,m=0,A=0,_=0,E=0,k=0,O=0,U=0,Z=0,H=0,G=0,be=0,oe=0;oe=w,w=w+224|0,Z=oe+208|0,H=oe+160|0,G=oe+80|0,be=oe,p=H,m=p+40|0;do s[p>>2]=0,p=p+4|0;while((p|0)<(m|0));return s[Z>>2]=s[u>>2],(qh(0,o,Z,G,H,c,h)|0)<0?u=-1:((s[r+76>>2]|0)>-1?U=PO(r)|0:U=0,u=s[r>>2]|0,O=u&32,(y[r+74>>0]|0)<1&&(s[r>>2]=u&-33),p=r+48|0,s[p>>2]|0?u=qh(r,o,Z,G,H,c,h)|0:(m=r+44|0,A=s[m>>2]|0,s[m>>2]=be,_=r+28|0,s[_>>2]=be,E=r+20|0,s[E>>2]=be,s[p>>2]=80,k=r+16|0,s[k>>2]=be+80,u=qh(r,o,Z,G,H,c,h)|0,A&&(Ea[s[r+36>>2]&7](r,0,0)|0,u=s[E>>2]|0?u:-1,s[m>>2]=A,s[p>>2]=0,s[k>>2]=0,s[_>>2]=0,s[E>>2]=0)),p=s[r>>2]|0,s[r>>2]=p|O,U|0&&kO(r),u=p&32|0?-1:u),w=oe,u|0}function qh(r,o,u,c,h,p,m){r=r|0,o=o|0,u=u|0,c=c|0,h=h|0,p=p|0,m=m|0;var A=0,_=0,E=0,k=0,O=0,U=0,Z=0,H=0,G=0,be=0,oe=0,re=0,ye=0,q=0,nt=0,Rt=0,rt=0,We=0,wt=0,Ce=0,Le=0,si=0,Ct=0,ko=0,Br=0;ko=w,w=w+64|0,Le=ko+56|0,Ct=ko+40|0,Rt=ko,We=ko+48|0,wt=ko+60|0,s[Le>>2]=o,ye=(r|0)!=0,q=Rt+40|0,nt=q,Rt=Rt+39|0,rt=We+4|0,A=0,o=0,E=0;e:for(;;){do{do if((o|0)>-1)if((A|0)>(2147483647-o|0)){s[(xi()|0)>>2]=61,o=-1;break}else{o=A+o|0;break}while(0);if(Z=s[Le>>2]|0,A=y[Z>>0]|0,!(A<<24>>24)){re=92;break e}_=Z;t:for(;;){switch(A<<24>>24){case 37:{re=10;break t}case 0:{A=_;break t}default:}oe=_+1|0,s[Le>>2]=oe,A=y[oe>>0]|0,_=oe}t:do if((re|0)==10){re=0,A=_;do{if((y[_+1>>0]|0)!=37)break t;A=A+1|0,_=_+2|0,s[Le>>2]=_}while((y[_>>0]|0)==37)}while(0);A=A-Z|0,ye&&Qt(r,Z,A)}while(A|0);if(oe=(ju(y[(s[Le>>2]|0)+1>>0]|0)|0)==0,_=s[Le>>2]|0,!oe&&(y[_+2>>0]|0)==36?(G=(y[_+1>>0]|0)+-48|0,O=1,A=3):(G=-1,O=E,A=1),A=_+A|0,s[Le>>2]=A,_=y[A>>0]|0,E=(_<<24>>24)+-32|0,E>>>0>31|(1<<E&75913|0)==0)k=0;else{k=0;do k=1<<E|k,A=A+1|0,s[Le>>2]=A,_=y[A>>0]|0,E=(_<<24>>24)+-32|0;while(!(E>>>0>31|(1<<E&75913|0)==0))}if(_<<24>>24==42){if(ju(y[A+1>>0]|0)|0&&(si=s[Le>>2]|0,(y[si+2>>0]|0)==36))A=si+1|0,s[h+((y[A>>0]|0)+-48<<2)>>2]=10,A=s[c+((y[A>>0]|0)+-48<<3)>>2]|0,E=1,_=si+3|0;else{if(O|0){o=-1;break}ye?(oe=(s[u>>2]|0)+(4-1)&~(4-1),A=s[oe>>2]|0,s[u>>2]=oe+4):A=0,E=0,_=(s[Le>>2]|0)+1|0}s[Le>>2]=_,oe=(A|0)<0,be=oe?0-A|0:A,k=oe?k|8192:k,oe=E}else{if(A=VA(Le)|0,(A|0)<0){o=-1;break}be=A,oe=O,_=s[Le>>2]|0}do if((y[_>>0]|0)==46){if(A=_+1|0,(y[A>>0]|0)!=42){s[Le>>2]=A,A=VA(Le)|0,_=s[Le>>2]|0;break}if(ju(y[_+2>>0]|0)|0&&(Ce=s[Le>>2]|0,(y[Ce+3>>0]|0)==36)){A=Ce+2|0,s[h+((y[A>>0]|0)+-48<<2)>>2]=10,A=s[c+((y[A>>0]|0)+-48<<3)>>2]|0,_=Ce+4|0,s[Le>>2]=_;break}if(oe|0){o=-1;break e}ye?(H=(s[u>>2]|0)+(4-1)&~(4-1),A=s[H>>2]|0,s[u>>2]=H+4):A=0,_=(s[Le>>2]|0)+2|0,s[Le>>2]=_}else A=-1;while(0);for(H=0;;){if(((y[_>>0]|0)+-65|0)>>>0>57){o=-1;break e}if(E=_,_=_+1|0,s[Le>>2]=_,E=y[(y[E>>0]|0)+-65+(176+(H*58|0))>>0]|0,O=E&255,(O+-1|0)>>>0>=8)break;H=O}if(!(E<<24>>24)){o=-1;break}U=(G|0)>-1;do if(E<<24>>24==19)if(U){o=-1;break e}else re=54;else{if(U){s[h+(G<<2)>>2]=O,U=c+(G<<3)|0,G=s[U+4>>2]|0,re=Ct,s[re>>2]=s[U>>2],s[re+4>>2]=G,re=54;break}if(!ye){o=0;break e}UA(Ct,O,u,m),_=s[Le>>2]|0,re=55}while(0);(re|0)==54&&(re=0,ye?re=55:A=0);t:do if((re|0)==55){re=0,_=y[_+-1>>0]|0,_=(H|0)!=0&(_&15|0)==3?_&-33:_,E=k&-65537,G=k&8192|0?E:k;n:do switch(_|0){case 110:switch((H&255)<<24>>24){case 0:{s[s[Ct>>2]>>2]=o,A=0;break t}case 1:{s[s[Ct>>2]>>2]=o,A=0;break t}case 2:{A=s[Ct>>2]|0,s[A>>2]=o,s[A+4>>2]=((o|0)<0)<<31>>31,A=0;break t}case 3:{J[s[Ct>>2]>>1]=o,A=0;break t}case 4:{y[s[Ct>>2]>>0]=o,A=0;break t}case 6:{s[s[Ct>>2]>>2]=o,A=0;break t}case 7:{A=s[Ct>>2]|0,s[A>>2]=o,s[A+4>>2]=((o|0)<0)<<31>>31,A=0;break t}default:{A=0;break t}}case 112:{_=120,A=A>>>0>8?A:8,E=G|8,re=67;break}case 88:case 120:{E=G,re=67;break}case 111:{U=Ct,U=DO(s[U>>2]|0,s[U+4>>2]|0,q)|0,E=nt-U|0,k=0,O=20230,A=(G&8|0)==0|(A|0)>(E|0)?A:E+1|0,E=G,re=73;break}case 105:case 100:if(E=Ct,_=s[E>>2]|0,E=s[E+4>>2]|0,(E|0)<0){_=Ta(0,0,_|0,E|0)|0,E=tt()|0,k=Ct,s[k>>2]=_,s[k+4>>2]=E,k=1,O=20230,re=72;break n}else{k=(G&2049|0)!=0&1,O=G&2048|0?20231:G&1|0?20232:20230,re=72;break n}case 117:{E=Ct,k=0,O=20230,_=s[E>>2]|0,E=s[E+4>>2]|0,re=72;break}case 99:{y[Rt>>0]=s[Ct>>2],Z=Rt,k=0,O=20230,U=1,_=E,A=nt;break}case 115:{H=s[Ct>>2]|0,H=H|0?H:20240,G=FO(H,0,A)|0,Br=(G|0)==0,Z=H,k=0,O=20230,U=Br?A:G-H|0,_=E,A=Br?H+A|0:G;break}case 67:{s[We>>2]=s[Ct>>2],s[rt>>2]=0,s[Ct>>2]=We,O=-1,re=79;break}case 83:{A?(O=A,re=79):(ln(r,32,be,0,G),A=0,re=89);break}case 65:case 71:case 70:case 69:case 97:case 103:case 102:case 101:{A=dy[p&1](r,+ce[Ct>>3],be,A,G,_)|0;break t}default:k=0,O=20230,U=A,_=G,A=nt}while(0);n:do if((re|0)==67)U=Ct,U=BO(s[U>>2]|0,s[U+4>>2]|0,q,_&32)|0,O=Ct,O=(E&8|0)==0|(s[O>>2]|0)==0&(s[O+4>>2]|0)==0,k=O?0:2,O=O?20230:20230+(_>>>4)|0,re=73;else if((re|0)==72)U=_a(_,E,q)|0,E=G,re=73;else if((re|0)==79){for(re=0,k=s[Ct>>2]|0,A=0;_=s[k>>2]|0,!!_;){if(_=BA(wt,_)|0,E=(_|0)<0,E|_>>>0>(O-A|0)>>>0){re=83;break}if(A=_+A|0,O>>>0>A>>>0)k=k+4|0;else break}if((re|0)==83&&(re=0,E)){o=-1;break e}if(ln(r,32,be,A,G),!A)A=0,re=89;else for(E=s[Ct>>2]|0,k=0;;){if(_=s[E>>2]|0,!_){re=89;break n}if(_=BA(wt,_)|0,k=_+k|0,(k|0)>(A|0)){re=89;break n}if(Qt(r,wt,_),k>>>0>=A>>>0){re=89;break}else E=E+4|0}}while(0);if((re|0)==73)re=0,_=Ct,_=(s[_>>2]|0)!=0|(s[_+4>>2]|0)!=0,Br=(A|0)!=0|_,_=nt-U+((_^1)&1)|0,Z=Br?U:q,U=Br?(A|0)>(_|0)?A:_:0,_=(A|0)>-1?E&-65537:E,A=nt;else if((re|0)==89){re=0,ln(r,32,be,A,G^8192),A=(be|0)>(A|0)?be:A;break}G=A-Z|0,H=(U|0)<(G|0)?G:U,Br=H+k|0,A=(be|0)<(Br|0)?Br:be,ln(r,32,A,Br,_),Qt(r,O,k),ln(r,48,A,Br,_^65536),ln(r,48,H,G,0),Qt(r,Z,G),ln(r,32,A,Br,_^8192)}while(0);E=oe}e:do if((re|0)==92&&!r)if(!E)o=0;else{for(o=1;A=s[h+(o<<2)>>2]|0,!!A;)if(UA(c+(o<<3)|0,A,u,m),o=o+1|0,o>>>0>=10){o=1;break e}for(;;){if(s[h+(o<<2)>>2]|0){o=-1;break e}if(o=o+1|0,o>>>0>=10){o=1;break}}}while(0);return w=ko,o|0}function Qt(r,o,u){r=r|0,o=o|0,u=u|0,s[r>>2]&32||CO(o,u,r)|0}function VA(r){r=r|0;var o=0,u=0;if(!(ju(y[s[r>>2]>>0]|0)|0))o=0;else{o=0;do u=s[r>>2]|0,o=(o*10|0)+-48+(y[u>>0]|0)|0,u=u+1|0,s[r>>2]=u;while(ju(y[u>>0]|0)|0)}return o|0}function UA(r,o,u,c){r=r|0,o=o|0,u=u|0,c=c|0;var h=0,p=0;e:do if(o>>>0<=20)do switch(o|0){case 9:{o=(s[u>>2]|0)+(4-1)&~(4-1),c=s[o>>2]|0,s[u>>2]=o+4,s[r>>2]=c;break e}case 10:{c=(s[u>>2]|0)+(4-1)&~(4-1),o=s[c>>2]|0,s[u>>2]=c+4,c=r,s[c>>2]=o,s[c+4>>2]=((o|0)<0)<<31>>31;break e}case 11:{c=(s[u>>2]|0)+(4-1)&~(4-1),o=s[c>>2]|0,s[u>>2]=c+4,c=r,s[c>>2]=o,s[c+4>>2]=0;break e}case 12:{c=(s[u>>2]|0)+(8-1)&~(8-1),o=c,h=s[o>>2]|0,o=s[o+4>>2]|0,s[u>>2]=c+8,c=r,s[c>>2]=h,s[c+4>>2]=o;break e}case 13:{h=(s[u>>2]|0)+(4-1)&~(4-1),c=s[h>>2]|0,s[u>>2]=h+4,c=(c&65535)<<16>>16,h=r,s[h>>2]=c,s[h+4>>2]=((c|0)<0)<<31>>31;break e}case 14:{h=(s[u>>2]|0)+(4-1)&~(4-1),c=s[h>>2]|0,s[u>>2]=h+4,h=r,s[h>>2]=c&65535,s[h+4>>2]=0;break e}case 15:{h=(s[u>>2]|0)+(4-1)&~(4-1),c=s[h>>2]|0,s[u>>2]=h+4,c=(c&255)<<24>>24,h=r,s[h>>2]=c,s[h+4>>2]=((c|0)<0)<<31>>31;break e}case 16:{h=(s[u>>2]|0)+(4-1)&~(4-1),c=s[h>>2]|0,s[u>>2]=h+4,h=r,s[h>>2]=c&255,s[h+4>>2]=0;break e}case 17:{h=(s[u>>2]|0)+(8-1)&~(8-1),p=+ce[h>>3],s[u>>2]=h+8,ce[r>>3]=p;break e}case 18:{bs[c&15](r,u);break e}default:break e}while(0);while(0)}function BO(r,o,u,c){if(r=r|0,o=o|0,u=u|0,c=c|0,!((r|0)==0&(o|0)==0))do u=u+-1|0,y[u>>0]=L[640+(r&15)>>0]|0|c,r=Gc(r|0,o|0,4)|0,o=tt()|0;while(!((r|0)==0&(o|0)==0));return u|0}function DO(r,o,u){if(r=r|0,o=o|0,u=u|0,!((r|0)==0&(o|0)==0))do u=u+-1|0,y[u>>0]=r&7|48,r=Gc(r|0,o|0,3)|0,o=tt()|0;while(!((r|0)==0&(o|0)==0));return u|0}function _a(r,o,u){r=r|0,o=o|0,u=u|0;var c=0,h=0,p=0;if(o>>>0>0|(o|0)==0&r>>>0>4294967295){do c=r,r=ad(r|0,o|0,10,0)|0,h=o,o=tt()|0,p=od(r|0,o|0,10,0)|0,p=Ta(c|0,h|0,p|0,tt()|0)|0,tt()|0,u=u+-1|0,y[u>>0]=p&255|48;while(h>>>0>9|(h|0)==9&c>>>0>4294967295);o=r}else o=r;if(o)do p=o,o=(o>>>0)/10|0,u=u+-1|0,y[u>>0]=p-(o*10|0)|48;while(p>>>0>=10);return u|0}function ln(r,o,u,c,h){r=r|0,o=o|0,u=u|0,c=c|0,h=h|0;var p=0,m=0;if(m=w,w=w+256|0,p=m,(u|0)>(c|0)&(h&73728|0)==0){if(h=u-c|0,Ro(p|0,o<<24>>24|0,(h>>>0<256?h:256)|0)|0,h>>>0>255){o=u-c|0;do Qt(r,p,256),h=h+-256|0;while(h>>>0>255);h=o&255}Qt(r,p,h)}w=m}function BA(r,o){return r=r|0,o=o|0,r?r=zO(r,o,0)|0:r=0,r|0}function zO(r,o,u){r=r|0,o=o|0,u=u|0;do if(r){if(o>>>0<128){y[r>>0]=o,r=1;break}if(!(s[s[(jO()|0)+176>>2]>>2]|0))if((o&-128|0)==57216){y[r>>0]=o,r=1;break}else{s[(xi()|0)>>2]=25,r=-1;break}if(o>>>0<2048){y[r>>0]=o>>>6|192,y[r+1>>0]=o&63|128,r=2;break}if(o>>>0<55296|(o&-8192|0)==57344){y[r>>0]=o>>>12|224,y[r+1>>0]=o>>>6&63|128,y[r+2>>0]=o&63|128,r=3;break}if((o+-65536|0)>>>0<1048576){y[r>>0]=o>>>18|240,y[r+1>>0]=o>>>12&63|128,y[r+2>>0]=o>>>6&63|128,y[r+3>>0]=o&63|128,r=4;break}else{s[(xi()|0)>>2]=25,r=-1;break}}else r=1;while(0);return r|0}function jO(){return OA()|0}function DA(r){r=+r;var o=0;return ce[$>>3]=r,o=s[$>>2]|0,yt(s[$+4>>2]|0),o|0}function zA(r,o){r=+r,o=o|0;var u=0,c=0,h=0;switch(ce[$>>3]=r,u=s[$>>2]|0,c=s[$+4>>2]|0,h=Gc(u|0,c|0,52)|0,tt()|0,h&2047){case 0:{r!=0?(r=+zA(r*18446744073709552e3,o),u=(s[o>>2]|0)+-64|0):u=0,s[o>>2]=u;break}case 2047:break;default:s[o>>2]=(h&2047)+-1022,s[$>>2]=u,s[$+4>>2]=c&-2146435073|1071644672,r=+ce[$>>3]}return+r}function WO(r,o,u){r=r|0,o=o|0,u=u|0;var c=0,h=0;e:do if(!u)r=0;else{for(;c=y[r>>0]|0,h=y[o>>0]|0,c<<24>>24==h<<24>>24;)if(u=u+-1|0,u)r=r+1|0,o=o+1|0;else{r=0;break e}r=(c&255)-(h&255)|0}while(0);return r|0}function GO(r,o,u,c){r=r|0,o=o|0,u=u|0,c=c|0;var h=0,p=0;return h=w,w=w+16|0,p=h,s[p>>2]=c,c=ZO(r,o,u,p)|0,w=h,c|0}function ZO(r,o,u,c){r=r|0,o=o|0,u=u|0,c=c|0;var h=0,p=0,m=0,A=0;return A=w,w=w+160|0,h=A+144|0,m=A,hr(m|0,3672,144)|0,(o+-1|0)>>>0>2147483646?o?(s[(xi()|0)>>2]=61,o=-1):(r=h,o=1,p=4):p=4,(p|0)==4&&(p=-2-r|0,p=o>>>0>p>>>0?p:o,s[m+48>>2]=p,h=m+20|0,s[h>>2]=r,s[m+44>>2]=r,o=r+p|0,r=m+16|0,s[r>>2]=o,s[m+28>>2]=o,o=OO(m,u,c)|0,p&&(m=s[h>>2]|0,y[m+(((m|0)==(s[r>>2]|0))<<31>>31)>>0]=0)),w=A,o|0}function XO(r,o,u){r=r|0,o=o|0,u=u|0;var c=0,h=0;return c=r+20|0,h=s[c>>2]|0,r=(s[r+16>>2]|0)-h|0,r=r>>>0>u>>>0?u:r,hr(h|0,o|0,r|0)|0,s[c>>2]=(s[c>>2]|0)+r,u|0}function HO(r){r=r|0;var o=0,u=0;return o=(Bc(r)|0)+1|0,u=Wc(o)|0,u?r=hr(u|0,r|0,o|0)|0:r=0,r|0}function YO(r,o){r=r|0,o=o|0;var u=0,c=0;for(u=0;;){if((L[656+u>>0]|0)==(r|0)){c=4;break}if(u=u+1|0,(u|0)==87){r=87,c=5;break}}if((c|0)==4&&(u?(r=u,c=5):u=752),(c|0)==5){u=752;do{do c=u,u=u+1|0;while(y[c>>0]|0);r=r+-1|0}while(r|0)}return $O(u,s[o+20>>2]|0)|0}function $O(r,o){return r=r|0,o=o|0,IO(r,o)|0}function JO(r){return r=r|0,YO(r,s[(QO()|0)+176>>2]|0)|0}function QO(){return OA()|0}function qO(r,o,u){r=r|0,o=o|0,u=u|0;var c=0;return c=JO(r)|0,r=Bc(c)|0,r>>>0>=u>>>0?(r=u+-1|0,u&&(hr(o|0,c|0,r|0)|0,y[o+r>>0]=0),r=68):(hr(o|0,c|0,r+1|0)|0,r=0),r|0}function KO(){var r=0,o=0,u=0,c=0,h=0,p=0,m=0;c=w,w=w+48|0,p=c+32|0,o=c+24|0,m=c+16|0,h=c,c=c+36|0,r=jA()|0,r|0&&(u=s[r>>2]|0,u|0)&&(r=u+48|0,WA(r)|0||(s[o>>2]=20420,To(20370,o)),o=GA(r)|0,(o|0)==1126902529&(tt()|0)==1129074247?r=s[u+44>>2]|0:r=u+80|0,s[c>>2]=r,u=s[u>>2]|0,r=s[u+4>>2]|0,Ea[s[(s[954]|0)+16>>2]&7](3816,u,c)|0?(m=s[c>>2]|0,m=Zc[s[(s[m>>2]|0)+8>>2]&15](m)|0,s[h>>2]=20420,s[h+4>>2]=r,s[h+8>>2]=m,To(20284,h)):(s[m>>2]=20420,s[m+4>>2]=r,To(20329,m))),To(20408,p)}function jA(){return 21640}function WA(r){return r=r|0,r=GA(r)|0,(r&-256|0)==1126902528&(tt()|0)==1129074247|0}function GA(r){r=r|0;var o=0;return o=r,r=s[o>>2]|0,yt(s[o+4>>2]|0),r|0}function To(r,o){r=r|0,o=o|0,t1()}function wa(r){r=r|0}function e5(r){r=r|0,wa(r),pe(r)}function t5(r){r=r|0}function n5(r){r=r|0}function r5(r,o,u){r=r|0,o=o|0,u=u|0;var c=0,h=0,p=0,m=0,A=0,_=0;if(_=w,w=w+64|0,m=_,zt(r,o,0)|0)r=1;else if(o|0&&(A=cr(o,3840,3824,0)|0,(A|0)!=0)){s[m>>2]=A,s[m+4>>2]=0,s[m+8>>2]=r,s[m+12>>2]=-1,r=m+16|0,o=m+24|0,c=m+48|0,h=r,p=h+36|0;do s[h>>2]=0,h=h+4|0;while((h|0)<(p|0));J[r+36>>1]=0,y[r+38>>0]=0,s[c>>2]=1,Hu[s[(s[A>>2]|0)+28>>2]&7](A,m,s[u>>2]|0,1),(s[o>>2]|0)==1?(s[u>>2]=s[r>>2],r=1):r=0}else r=0;return w=_,r|0}function i5(r,o,u,c,h,p){r=r|0,o=o|0,u=u|0,c=c|0,h=h|0,p=p|0,zt(r,s[o+8>>2]|0,p)|0&&td(0,o,u,c,h)}function s5(r,o,u,c,h){r=r|0,o=o|0,u=u|0,c=c|0,h=h|0;var p=0;do if(zt(r,s[o+8>>2]|0,h)|0)ed(0,o,u,c);else if(zt(r,s[o>>2]|0,h)|0){if((s[o+16>>2]|0)!=(u|0)&&(p=o+20|0,(s[p>>2]|0)!=(u|0))){s[o+32>>2]=c,s[p>>2]=u,h=o+40|0,s[h>>2]=(s[h>>2]|0)+1,(s[o+36>>2]|0)==1&&(s[o+24>>2]|0)==2&&(y[o+54>>0]=1),s[o+44>>2]=4;break}(c|0)==1&&(s[o+32>>2]=1)}while(0)}function o5(r,o,u,c){r=r|0,o=o|0,u=u|0,c=c|0,zt(r,s[o+8>>2]|0,0)|0&&Kh(0,o,u,c)}function zt(r,o,u){return r=r|0,o=o|0,u=u|0,u?(r|0)==(o|0)?r=1:r=(LA(s[r+4>>2]|0,s[o+4>>2]|0)|0)==0:r=(s[r+4>>2]|0)==(s[o+4>>2]|0),r|0}function Kh(r,o,u,c){r=r|0,o=o|0,u=u|0,c=c|0;var h=0;r=o+16|0,h=s[r>>2]|0;do if(h){if((h|0)!=(u|0)){c=o+36|0,s[c>>2]=(s[c>>2]|0)+1,s[o+24>>2]=2,y[o+54>>0]=1;break}r=o+24|0,(s[r>>2]|0)==2&&(s[r>>2]=c)}else s[r>>2]=u,s[o+24>>2]=c,s[o+36>>2]=1;while(0)}function ed(r,o,u,c){r=r|0,o=o|0,u=u|0,c=c|0;var h=0;(s[o+4>>2]|0)==(u|0)&&(h=o+28|0,(s[h>>2]|0)!=1)&&(s[h>>2]=c)}function td(r,o,u,c,h){r=r|0,o=o|0,u=u|0,c=c|0,h=h|0,y[o+53>>0]=1;do if((s[o+4>>2]|0)==(c|0)){if(y[o+52>>0]=1,r=o+16|0,c=s[r>>2]|0,!c){if(s[r>>2]=u,s[o+24>>2]=h,s[o+36>>2]=1,!((h|0)==1&&(s[o+48>>2]|0)==1))break;y[o+54>>0]=1;break}if((c|0)!=(u|0)){h=o+36|0,s[h>>2]=(s[h>>2]|0)+1,y[o+54>>0]=1;break}c=o+24|0,r=s[c>>2]|0,(r|0)==2&&(s[c>>2]=h,r=h),(r|0)==1&&(s[o+48>>2]|0)==1&&(y[o+54>>0]=1)}while(0)}function cr(r,o,u,c){r=r|0,o=o|0,u=u|0,c=c|0;var h=0,p=0,m=0,A=0,_=0,E=0,k=0,O=0,U=0;U=w,w=w+64|0,k=U,E=s[r>>2]|0,O=r+(s[E+-8>>2]|0)|0,E=s[E+-4>>2]|0,s[k>>2]=u,s[k+4>>2]=r,s[k+8>>2]=o,s[k+12>>2]=c,r=k+16|0,o=k+20|0,c=k+24|0,h=k+28|0,p=k+32|0,m=k+40|0,A=r,_=A+36|0;do s[A>>2]=0,A=A+4|0;while((A|0)<(_|0));J[r+36>>1]=0,y[r+38>>0]=0;e:do if(zt(E,u,0)|0)s[k+48>>2]=1,Yu[s[(s[E>>2]|0)+20>>2]&3](E,k,O,O,1,0),r=(s[c>>2]|0)==1?O:0;else{switch(Xc[s[(s[E>>2]|0)+24>>2]&3](E,k,O,1,0),s[k+36>>2]|0){case 0:{r=(s[m>>2]|0)==1&(s[h>>2]|0)==1&(s[p>>2]|0)==1?s[o>>2]|0:0;break e}case 1:break;default:{r=0;break e}}if((s[c>>2]|0)!=1&&!((s[m>>2]|0)==0&(s[h>>2]|0)==1&(s[p>>2]|0)==1)){r=0;break}r=s[r>>2]|0}while(0);return w=U,r|0}function a5(r){r=r|0,wa(r),pe(r)}function u5(r,o,u,c,h,p){r=r|0,o=o|0,u=u|0,c=c|0,h=h|0,p=p|0,zt(r,s[o+8>>2]|0,p)|0?td(0,o,u,c,h):(r=s[r+8>>2]|0,Yu[s[(s[r>>2]|0)+20>>2]&3](r,o,u,c,h,p))}function l5(r,o,u,c,h){r=r|0,o=o|0,u=u|0,c=c|0,h=h|0;var p=0,m=0,A=0;e:do if(zt(r,s[o+8>>2]|0,h)|0)ed(0,o,u,c);else{if(!(zt(r,s[o>>2]|0,h)|0)){m=s[r+8>>2]|0,Xc[s[(s[m>>2]|0)+24>>2]&3](m,o,u,c,h);break}if((s[o+16>>2]|0)!=(u|0)&&(m=o+20|0,(s[m>>2]|0)!=(u|0))){s[o+32>>2]=c,c=o+44|0;do if((s[c>>2]|0)!=4)if(p=o+52|0,y[p>>0]=0,A=o+53|0,y[A>>0]=0,r=s[r+8>>2]|0,Yu[s[(s[r>>2]|0)+20>>2]&3](r,o,u,u,1,h),y[A>>0]|0){if(A=(y[p>>0]|0)==0,s[c>>2]=3,A)break;break e}else{s[c>>2]=4;break}while(0);if(s[m>>2]=u,A=o+40|0,s[A>>2]=(s[A>>2]|0)+1,(s[o+36>>2]|0)!=1||(s[o+24>>2]|0)!=2)break;y[o+54>>0]=1;break}(c|0)==1&&(s[o+32>>2]=1)}while(0)}function c5(r,o,u,c){r=r|0,o=o|0,u=u|0,c=c|0,zt(r,s[o+8>>2]|0,0)|0?Kh(0,o,u,c):(r=s[r+8>>2]|0,Hu[s[(s[r>>2]|0)+28>>2]&7](r,o,u,c))}function pe(r){r=r|0,sd(r)}function hK(r){r=r|0}function f5(){var r=0,o=0;r=jA()|0,r|0&&(o=s[r>>2]|0,o|0)&&WA(o+48|0)|0&&ZA(s[o+12>>2]|0),ZA(h5()|0)}function ZA(r){r=r|0;var o=0;o=w,w=w+16|0,fd[r&3](),To(20559,o)}function h5(){return 2}function d5(r){r=r|0}function p5(r){r=r|0,pe(r)}function g5(r){return r=r|0,20599}function Dc(r){r=r|0,s[r>>2]=5916,HA(r+4|0)}function m5(r){r=r|0,Dc(r),pe(r)}function A5(r){return r=r|0,XA(r+4|0)|0}function XA(r){return r=r|0,s[r>>2]|0}function HA(r){r=r|0;var o=0,u=0;y5(r)|0&&(o=v5(s[r>>2]|0)|0,u=o+8|0,r=s[u>>2]|0,s[u>>2]=r+-1,(r|0)<1)&&pe(o)}function y5(r){return r=r|0,1}function v5(r){return r=r|0,r+-12|0}function fr(r){r=r|0,s[r>>2]=5936,HA(r+4|0)}function _5(r){r=r|0,fr(r),pe(r)}function w5(r){return r=r|0,XA(r+4|0)|0}function T5(r){r=r|0,Dc(r),pe(r)}function E5(r){r=r|0,Dc(r),pe(r)}function S5(){var r=0;r=w,w=w+16|0,To(20848,r)}function x5(r){r=r|0,wa(r),pe(r)}function R5(r,o,u){return r=r|0,o=o|0,u=u|0,zt(r,o,0)|0}function b5(r){r=r|0,wa(r),pe(r)}function k5(r,o,u){r=r|0,o=o|0,u=u|0;var c=0,h=0,p=0,m=0,A=0,_=0,E=0,k=0;k=w,w=w+64|0,_=k;do if(zt(o,4048,0)|0)s[u>>2]=0,o=1;else{if(P5(r,o,0)|0){if(o=s[u>>2]|0,!o){o=1;break}s[u>>2]=s[o>>2],o=1;break}if(o|0&&(c=cr(o,3840,3976,0)|0,(c|0)!=0))if(o=s[u>>2]|0,o|0&&(s[u>>2]=s[o>>2]),o=s[c+8>>2]|0,p=r+8|0,h=s[p>>2]|0,!(o&7&(h^7)|0)&&!((o&96^96)&h|0))if(h=r+12|0,r=s[h>>2]|0,c=c+12|0,o=s[c>>2]|0,zt(r,o,0)|0)o=1;else{if(zt(r,4040,0)|0){if(!o){o=1;break}o=(cr(o,3840,3992,0)|0)==0;break}if(r){if(o=cr(r,3840,3976,0)|0,o|0){if(!(s[p>>2]&1)){o=0;break}o=M5(o,s[c>>2]|0)|0;break}if(o=s[h>>2]|0,o){if(o=cr(o,3840,4008,0)|0,o|0){if(!(s[p>>2]&1)){o=0;break}o=YA(o,s[c>>2]|0)|0;break}if(o=s[h>>2]|0,o|0&&(m=cr(o,3840,3824,0)|0,(m|0)!=0)&&(A=s[c>>2]|0,(A|0)!=0)&&(E=cr(A,3840,3824,0)|0,(E|0)!=0)){s[_>>2]=E,s[_+4>>2]=0,s[_+8>>2]=m,s[_+12>>2]=-1,o=_+16|0,r=_+24|0,c=_+48|0,h=o,p=h+36|0;do s[h>>2]=0,h=h+4|0;while((h|0)<(p|0));J[o+36>>1]=0,y[o+38>>0]=0,s[c>>2]=1,Hu[s[(s[E>>2]|0)+28>>2]&7](E,_,s[u>>2]|0,1);do if((s[r>>2]|0)==1){if(!(s[u>>2]|0)){o=1;break}s[u>>2]=s[o>>2],o=1}else o=0;while(0)}else o=0}else o=0}else o=0}else o=0;else o=0}while(0);return w=k,o|0}function P5(r,o,u){r=r|0,o=o|0,u=u|0;var c=0,h=0;return s[r+8>>2]&24?(u=1,h=5):o|0&&(c=cr(o,3840,3960,0)|0,(c|0)!=0)?(u=(s[c+8>>2]&24|0)!=0,h=5):u=0,(h|0)==5&&(u=zt(r,o,u)|0),u|0}function M5(r,o){r=r|0,o=o|0;for(var u=0,c=0,h=0,p=0,m=0;;){if(!o){o=0;break}if(u=cr(o,3840,3976,0)|0,!u){o=0;break}if(h=s[r+8>>2]|0,s[u+8>>2]&~h|0){o=0;break}if(c=r+12|0,o=s[c>>2]|0,u=u+12|0,zt(o,s[u>>2]|0,0)|0){o=1;break}if((h&1|0)==0|(o|0)==0){o=0;break}if(r=cr(o,3840,3976,0)|0,!r){m=9;break}o=s[u>>2]|0}return(m|0)==9&&(o=s[c>>2]|0,o|0&&(p=cr(o,3840,4008,0)|0,(p|0)!=0)?o=YA(p,s[u>>2]|0)|0:o=0),o|0}function YA(r,o){r=r|0,o=o|0;var u=0;return o|0&&(u=cr(o,3840,4008,0)|0,(u|0)!=0)&&!(s[u+8>>2]&~s[r+8>>2]|0)&&zt(s[r+12>>2]|0,s[u+12>>2]|0,0)|0?r=zt(s[r+16>>2]|0,s[u+16>>2]|0,0)|0:r=0,r|0}function C5(r){r=r|0,wa(r),pe(r)}function I5(r,o,u,c,h,p){r=r|0,o=o|0,u=u|0,c=c|0,h=h|0,p=p|0;var m=0,A=0,_=0,E=0,k=0,O=0,U=0,Z=0,H=0,G=0;if(zt(r,s[o+8>>2]|0,p)|0)td(0,o,u,c,h);else{G=o+52|0,A=y[G>>0]|0,H=o+53|0,m=y[H>>0]|0,Z=s[r+12>>2]|0,k=r+16+(Z<<3)|0,y[G>>0]=0,y[H>>0]=0,nd(r+16|0,o,u,c,h,p),_=y[G>>0]|0,A=_|A,E=y[H>>0]|0,m=E|m;e:do if((Z|0)>1){O=o+24|0,U=r+8|0,Z=o+54|0,r=r+24|0;do{if(m=m&1,A=A&1,y[Z>>0]|0)break e;if(_<<24>>24){if((s[O>>2]|0)==1||!(s[U>>2]&2))break e}else if(E<<24>>24&&!(s[U>>2]&1|0))break e;y[G>>0]=0,y[H>>0]=0,nd(r,o,u,c,h,p),_=y[G>>0]|0,A=_|A,E=y[H>>0]|0,m=E|m,r=r+8|0}while(r>>>0<k>>>0)}while(0);y[G>>0]=A<<24>>24!=0&1,y[H>>0]=m<<24>>24!=0&1}}function N5(r,o,u,c,h){r=r|0,o=o|0,u=u|0,c=c|0,h=h|0;var p=0,m=0,A=0,_=0,E=0,k=0,O=0,U=0,Z=0;e:do if(zt(r,s[o+8>>2]|0,h)|0)ed(0,o,u,c);else{if(!(zt(r,s[o>>2]|0,h)|0)){if(Z=s[r+12>>2]|0,_=r+16+(Z<<3)|0,zc(r+16|0,o,u,c,h),p=r+24|0,(Z|0)<=1)break;if(r=s[r+8>>2]|0,!(r&2|0)&&(A=o+36|0,(s[A>>2]|0)!=1)){if(!(r&1)){for(r=o+54|0;;)if(y[r>>0]|0||(s[A>>2]|0)==1||(zc(p,o,u,c,h),p=p+8|0,p>>>0>=_>>>0))break e}for(r=o+24|0,m=o+54|0;;)if(y[m>>0]|0||(s[A>>2]|0)==1&&(s[r>>2]|0)==1||(zc(p,o,u,c,h),p=p+8|0,p>>>0>=_>>>0))break e}for(r=o+54|0;;)if(y[r>>0]|0||(zc(p,o,u,c,h),p=p+8|0,p>>>0>=_>>>0))break e}if((s[o+16>>2]|0)!=(u|0)&&(Z=o+20|0,(s[Z>>2]|0)!=(u|0))){if(s[o+32>>2]=c,U=o+44|0,(s[U>>2]|0)!=4){A=r+16+(s[r+12>>2]<<3)|0,_=o+52|0,c=o+53|0,E=o+54|0,k=r+8|0,O=o+24|0,p=0,m=r+16|0,r=0;t:for(;;){if(m>>>0>=A>>>0){m=18;break}if(y[_>>0]=0,y[c>>0]=0,nd(m,o,u,u,1,h),y[E>>0]|0){m=18;break}do if(y[c>>0]|0){if(!(y[_>>0]|0))if(s[k>>2]&1){r=1;break}else{m=19;break t}if((s[O>>2]|0)==1){p=1,m=19;break t}if(s[k>>2]&2)p=1,r=1;else{p=1,m=19;break t}}while(0);m=m+8|0}if((m|0)==18&&(r?m=19:r=4),(m|0)==19&&(r=3),s[U>>2]=r,p&1)break}if(s[Z>>2]=u,u=o+40|0,s[u>>2]=(s[u>>2]|0)+1,(s[o+36>>2]|0)!=1||(s[o+24>>2]|0)!=2)break;y[o+54>>0]=1;break}(c|0)==1&&(s[o+32>>2]=1)}while(0)}function F5(r,o,u,c){r=r|0,o=o|0,u=u|0,c=c|0;var h=0,p=0;e:do if(zt(r,s[o+8>>2]|0,0)|0)Kh(0,o,u,c);else if(p=s[r+12>>2]|0,h=r+16+(p<<3)|0,$A(r+16|0,o,u,c),(p|0)>1){p=o+54|0,r=r+24|0;do{if($A(r,o,u,c),y[p>>0]|0)break e;r=r+8|0}while(r>>>0<h>>>0)}while(0)}function $A(r,o,u,c){r=r|0,o=o|0,u=u|0,c=c|0;var h=0,p=0;p=s[r+4>>2]|0,u?(h=p>>8,p&1&&(h=s[(s[u>>2]|0)+h>>2]|0)):h=0,r=s[r>>2]|0,Hu[s[(s[r>>2]|0)+28>>2]&7](r,o,u+h|0,p&2|0?c:2)}function nd(r,o,u,c,h,p){r=r|0,o=o|0,u=u|0,c=c|0,h=h|0,p=p|0;var m=0,A=0;A=s[r+4>>2]|0,m=A>>8,A&1&&(m=s[(s[c>>2]|0)+m>>2]|0),r=s[r>>2]|0,Yu[s[(s[r>>2]|0)+20>>2]&3](r,o,u,c+m|0,A&2|0?h:2,p)}function zc(r,o,u,c,h){r=r|0,o=o|0,u=u|0,c=c|0,h=h|0;var p=0,m=0;m=s[r+4>>2]|0,p=m>>8,m&1&&(p=s[(s[u>>2]|0)+p>>2]|0),r=s[r>>2]|0,Xc[s[(s[r>>2]|0)+24>>2]&3](r,o,u+p|0,m&2|0?c:2,h)}function O5(r){r=r|0,s[r>>2]=5896}function Eo(r){r=r|0;var o=0,u=0;return o=w,w=w+16|0,u=o,JA(u,r),r=L5(u)|0,w=o,r|0}function JA(r,o){r=r|0,o=o|0,B5(r,o)}function L5(r){r=r|0;var o=0,u=0;return o=w,w=w+16|0,u=o,QA(u,s[r+4>>2]|0),(V5(u)|0)<<24>>24?r=0:r=U5(qA(r)|0)|0,w=o,r|0}function QA(r,o){r=r|0,o=o|0,s[r>>2]=o}function V5(r){return r=r|0,y[s[r>>2]>>0]|0}function qA(r){return r=r|0,r|0}function U5(r){r=r|0;var o=0,u=0,c=0,h=0;h=w,w=w+16|0,c=h,r=s[r+8>>2]|0,o=y[r>>0]|0;do if(o<<24>>24!=1)if(o&2)To(20985,c);else{y[r>>0]=2,u=1;break}else u=0;while(0);return w=h,u|0}function B5(r,o){r=r|0,o=o|0,s[r>>2]=o,s[r+4>>2]=o,s[r+8>>2]=o+1,s[r+12>>2]=0}function So(r){r=r|0;var o=0,u=0;o=w,w=w+16|0,u=o,JA(u,r),D5(u),w=o}function D5(r){r=r|0;var o=0,u=0;o=w,w=w+16|0,u=o,QA(u,s[r+4>>2]|0),z5(u),j5(qA(r)|0),w=o}function z5(r){r=r|0,y[s[r>>2]>>0]=1}function j5(r){r=r|0,y[s[r+8>>2]>>0]=1}function W5(){return 0}function ge(r){r=r|0;var o=0,u=0;for(u=r|0?r:1;;){if(o=Wc(u)|0,o|0){r=6;break}if(r=W5()|0,!r){r=5;break}fd[r&3]()}if((r|0)==5)u=vt(4)|0,O5(u),_t(u|0,3880,121);else if((r|0)==6)return o|0;return 0}function KA(r){return r=r|0,ge(r)|0}function ey(r){r=r|0,pe(r)}function G5(r,o,u){r=r|0,o=o|0,u=u|0;var c=0,h=0;return h=w,w=w+16|0,c=h,s[c>>2]=s[u>>2],r=Ea[s[(s[r>>2]|0)+16>>2]&7](r,o,c)|0,r&&(s[u>>2]=s[c>>2]),w=h,r&1|0}function Z5(r){return r=r|0,r?r=(cr(r,3840,3976,0)|0)!=0&1:r=0,r|0}function X5(r){return r=r|0,0}function H5(){return(Y5()|0)>0|0}function Y5(){return Jx()|0}function ty(r){r=r|0}function $5(r){r=r|0,ty(r),pe(r)}function J5(r){return r=r|0,21039}function jt(r){r=r|0}function Qi(r){r=r|0;var o=0,u=0;o=r+8|0,s[o>>2]|0&&(u=s[o>>2]|0,s[o>>2]=u+-1,(u|0)!=0)||ht[s[(s[r>>2]|0)+16>>2]&255](r)}function Q5(r){if(r=r|0,r=X5(r)|0,r)S6(r,21145);else return}function q5(r){r=r|0}function rd(r,o){r=r|0,o=o|0;var u=0,c=0;c=Bc(o)|0,u=ge(c+13|0)|0,s[u>>2]=c,s[u+4>>2]=c,s[u+8>>2]=0,u=K5(u)|0,hr(u|0,o|0,c+1|0)|0,s[r>>2]=u}function K5(r){return r=r|0,r+12|0}function qi(r,o){r=r|0,o=o|0,s[r>>2]=5916,rd(r+4|0,o)}function e6(r,o){r=r|0,o=o|0,s[r>>2]=5936,rd(r+4|0,(y[o+11>>0]|0)<0?s[o>>2]|0:o)}function ii(r,o){r=r|0,o=o|0,s[r>>2]=5936,rd(r+4|0,o)}function id(r){r=r|0,r=vt(8)|0,qi(r,21163),s[r>>2]=5956,_t(r|0,3928,123)}function t6(r){r=r|0,r=vt(8)|0,qi(r,21163),s[r>>2]=5976,_t(r|0,3944,123)}function jc(r,o,u){r=r|0,o=o|0,u=u|0;var c=0,h=0,p=0,m=0;h=w,w=w+16|0,c=h,u>>>0>4294967279&&id(r),u>>>0<11?y[r+11>>0]=u:(m=u+16&-16,p=ge(m)|0,s[r>>2]=p,s[r+8>>2]=m|-2147483648,s[r+4>>2]=u,r=p),Wu(r,o,u)|0,y[c>>0]=0,Mu(r+u|0,c),w=h}function Wu(r,o,u){return r=r|0,o=o|0,u=u|0,u|0&&hr(r|0,o|0,u|0)|0,r|0}function Gu(r){r=r|0,(y[r+11>>0]|0)<0&&He(s[r>>2]|0,s[r+8>>2]&2147483647)}function n6(r,o,u,c,h,p,m,A){r=r|0,o=o|0,u=u|0,c=c|0,h=h|0,p=p|0,m=m|0,A=A|0;var _=0,E=0,k=0,O=0,U=0;U=w,w=w+16|0,O=U,(-18-o|0)>>>0<u>>>0&&id(r),(y[r+11>>0]|0)<0?k=s[r>>2]|0:k=r,o>>>0<2147483623?(_=u+o|0,E=o<<1,_=_>>>0<E>>>0?E:_,_=_>>>0<11?11:_+16&-16):_=-17,E=ge(_)|0,h|0&&Wu(E,k,h)|0,m|0&&Wu(E+h|0,A,m)|0,c=c-p|0,u=c-h|0,u|0&&Wu(E+h+m|0,k+h+p|0,u)|0,u=o+1|0,(u|0)!=11&&He(k,u),s[r>>2]=E,s[r+8>>2]=_|-2147483648,m=c+m|0,s[r+4>>2]=m,y[O>>0]=0,Mu(E+m|0,O),w=U}function ny(r,o,u){r=r|0,o=o|0,u=u|0;var c=0,h=0,p=0,m=0,A=0,_=0;return _=w,w=w+16|0,m=_,A=r+11|0,c=y[A>>0]|0,p=c<<24>>24<0,p?(h=(s[r+8>>2]&2147483647)+-1|0,c=s[r+4>>2]|0):(h=10,c=c&255),(h-c|0)>>>0>=u>>>0?u|0&&(p?h=s[r>>2]|0:h=r,Wu(h+c|0,o,u)|0,c=c+u|0,(y[A>>0]|0)<0?s[r+4>>2]=c:y[A>>0]=c,y[m>>0]=0,Mu(h+c|0,m)):n6(r,h,c+u-h|0,c,c,0,u,o),w=_,r|0}function r6(r,o){return r=r|0,o=o|0,ny(r,o,pa(o)|0)|0}function i6(r,o,u){return r=r|0,o=o|0,u=u|0,u?r=WO(r,o,u)|0:r=0,r|0}function s6(r,o,u,c,h){r=r|0,o=o|0,u=u|0,c=c|0,h=h|0;var p=0,m=0;return p=y[r+11>>0]|0,m=p<<24>>24<0,m?p=s[r+4>>2]|0:p=p&255,(h|0)==-1|p>>>0<o>>>0&&t6(r),p=p-o|0,u=p>>>0<u>>>0?p:u,m&&(r=s[r>>2]|0),p=u>>>0>h>>>0,r=i6(r+o|0,c,p?h:u)|0,r?r|0:(u>>>0<h>>>0?-1:p&1)|0}function o6(r){r=r|0}function a6(r){r=r|0,pe(r)}function u6(r){return r=r|0,21228}function l6(r,o,u){r=r|0,o=o|0,u=u|0,s[r>>2]=u,s[r+4>>2]=o}function c6(r,o,u){r=r|0,o=o|0,u=u|0;var c=0,h=0;return h=w,w=w+16|0,c=h,Xu[s[(s[r>>2]|0)+12>>2]&15](c,r,o),(s[c+4>>2]|0)==(s[u+4>>2]|0)?r=(s[c>>2]|0)==(s[u>>2]|0):r=0,w=h,r|0}function f6(r,o,u){return r=r|0,o=o|0,u=u|0,((s[o>>2]|0)==(u|0)?(s[o+4>>2]|0)==(r|0):0)|0}function h6(r,o,u){r=r|0,o=o|0,u=u|0,(u|0)>256?jc(r,21176,pa(21176)|0):ry(r,0,u)}function ry(r,o,u){r=r|0,o=o|0,u=u|0,d6(r,u)}function d6(r,o){r=r|0,o=o|0;var u=0,c=0,h=0,p=0,m=0;m=w,w=w+1040|0,h=m+1024|0,u=m,p=s[(xi()|0)>>2]|0,c=p6(qO(o,u,1024)|0,u)|0,y[c>>0]|0?u=c:(s[h>>2]=o,GO(u,1024,21211,h)|0),s[(xi()|0)>>2]=p,jc(r,u,pa(u)|0),w=m}function p6(r,o){r=r|0,o=o|0;var u=0,c=0;switch(r|0){case 0:{u=o;break}case-1:{r=s[(xi()|0)>>2]|0,c=3;break}default:c=3}return(c|0)==3&&((r|0)==28?u=22145:eR()),u|0}function g6(r){r=r|0,pe(r)}function m6(r){return r=r|0,21353}function A6(r,o,u){r=r|0,o=o|0,u=u|0,(u|0)>256?(iy()|0,o=6180):(v6()|0,o=6176),s[r>>2]=u,s[r+4>>2]=o}function y6(r,o,u){r=r|0,o=o|0,u=u|0,(u|0)>256?jc(r,21319,pa(21319)|0):ry(r,0,u)}function iy(){return!(y[21488]|0)&&Eo(21488)|0&&So(21488),6180}function v6(){return!(y[21480]|0)&&Eo(21480)|0&&So(21480),6176}function sy(r){r=r|0,fr(r)}function _6(r){r=r|0,sy(r),pe(r)}function w6(r,o){r=r|0,o=o|0;var u=0;u=s[o+4>>2]|0,Xu[s[(s[u>>2]|0)+24>>2]&15](r,u,s[o>>2]|0)}function T6(r,o,u){r=r|0,o=o|0,u=u|0;var c=0,h=0,p=0;for(p=w,w=w+16|0,h=p,s[o>>2]|0&&(c=y[u+11>>0]|0,c<<24>>24<0?c=s[u+4>>2]|0:c=c&255,c|0&&r6(u,21417)|0,w6(h,o),o=y[h+11>>0]|0,c=o<<24>>24<0,ny(u,c?s[h>>2]|0:h,c?s[h+4>>2]|0:o&255)|0,Gu(h)),s[r>>2]=s[u>>2],s[r+4>>2]=s[u+4>>2],s[r+8>>2]=s[u+8>>2],c=0;(c|0)!=3;)s[u+(c<<2)>>2]=0,c=c+1|0;w=p}function E6(r,o,u){r=r|0,o=o|0,u=u|0;var c=0,h=0,p=0;c=w,w=w+32|0,p=c+12|0,h=c,jc(h,u,pa(u)|0),T6(p,o,h),e6(r,p),Gu(p),Gu(h),s[r>>2]=6192,h=o,o=s[h+4>>2]|0,u=r+8|0,s[u>>2]=s[h>>2],s[u+4>>2]=o,w=c}function S6(r,o){r=r|0,o=o|0;var u=0,c=0,h=0;h=w,w=w+16|0,c=h+8|0,u=vt(16)|0,iy()|0,s[h>>2]=r,s[h+4>>2]=6180,s[c>>2]=s[h>>2],s[c+4>>2]=s[h+4>>2],E6(u,c,o),_t(u|0,4272,136)}function Pn(r){r=r|0,r=vt(8)|0,qi(r,21420),s[r>>2]=5956,_t(r|0,3928,123)}function Wc(r){r=r|0;var o=0,u=0,c=0,h=0,p=0,m=0,A=0,_=0,E=0,k=0,O=0,U=0,Z=0,H=0,G=0,be=0,oe=0,re=0,ye=0,q=0,nt=0;nt=w,w=w+16|0,U=nt;do if(r>>>0<245){if(E=r>>>0<11?16:r+11&-8,r=E>>>3,O=s[5412]|0,u=O>>>r,u&3|0)return o=(u&1^1)+r|0,r=21688+(o<<1<<2)|0,u=r+8|0,c=s[u>>2]|0,h=c+8|0,p=s[h>>2]|0,(p|0)==(r|0)?s[5412]=O&~(1<<o):(s[p+12>>2]=r,s[u>>2]=p),q=o<<3,s[c+4>>2]=q|3,q=c+q+4|0,s[q>>2]=s[q>>2]|1,q=h,w=nt,q|0;if(k=s[5414]|0,E>>>0>k>>>0){if(u|0)return o=2<<r,o=u<<r&(o|0-o),o=(o&0-o)+-1|0,A=o>>>12&16,o=o>>>A,u=o>>>5&8,o=o>>>u,p=o>>>2&4,o=o>>>p,r=o>>>1&2,o=o>>>r,c=o>>>1&1,c=(u|A|p|r|c)+(o>>>c)|0,o=21688+(c<<1<<2)|0,r=o+8|0,p=s[r>>2]|0,A=p+8|0,u=s[A>>2]|0,(u|0)==(o|0)?(r=O&~(1<<c),s[5412]=r):(s[u+12>>2]=o,s[r>>2]=u,r=O),q=c<<3,m=q-E|0,s[p+4>>2]=E|3,h=p+E|0,s[h+4>>2]=m|1,s[p+q>>2]=m,k|0&&(c=s[5417]|0,o=k>>>3,u=21688+(o<<1<<2)|0,o=1<<o,r&o?(r=u+8|0,o=s[r>>2]|0):(s[5412]=r|o,o=u,r=u+8|0),s[r>>2]=c,s[o+12>>2]=c,s[c+8>>2]=o,s[c+12>>2]=u),s[5414]=m,s[5417]=h,q=A,w=nt,q|0;if(p=s[5413]|0,p){for(u=(p&0-p)+-1|0,h=u>>>12&16,u=u>>>h,c=u>>>5&8,u=u>>>c,m=u>>>2&4,u=u>>>m,A=u>>>1&2,u=u>>>A,_=u>>>1&1,_=s[21952+((c|h|m|A|_)+(u>>>_)<<2)>>2]|0,u=_,A=_,_=(s[_+4>>2]&-8)-E|0;r=s[u+16>>2]|0,!(!r&&(r=s[u+20>>2]|0,!r));)m=(s[r+4>>2]&-8)-E|0,h=m>>>0<_>>>0,u=r,A=h?r:A,_=h?m:_;if(m=A+E|0,m>>>0>A>>>0){h=s[A+24>>2]|0,o=s[A+12>>2]|0;do if((o|0)==(A|0)){if(r=A+20|0,o=s[r>>2]|0,!o&&(r=A+16|0,o=s[r>>2]|0,!o)){u=0;break}for(;;)if(c=o+20|0,u=s[c>>2]|0,u)o=u,r=c;else if(c=o+16|0,u=s[c>>2]|0,u)o=u,r=c;else break;s[r>>2]=0,u=o}else u=s[A+8>>2]|0,s[u+12>>2]=o,s[o+8>>2]=u,u=o;while(0);do if(h|0){if(o=s[A+28>>2]|0,r=21952+(o<<2)|0,(A|0)==(s[r>>2]|0)){if(s[r>>2]=u,!u){s[5413]=p&~(1<<o);break}}else if(q=h+16|0,s[((s[q>>2]|0)==(A|0)?q:h+20|0)>>2]=u,!u)break;s[u+24>>2]=h,o=s[A+16>>2]|0,o|0&&(s[u+16>>2]=o,s[o+24>>2]=u),o=s[A+20>>2]|0,o|0&&(s[u+20>>2]=o,s[o+24>>2]=u)}while(0);return _>>>0<16?(q=_+E|0,s[A+4>>2]=q|3,q=A+q+4|0,s[q>>2]=s[q>>2]|1):(s[A+4>>2]=E|3,s[m+4>>2]=_|1,s[m+_>>2]=_,k|0&&(c=s[5417]|0,o=k>>>3,u=21688+(o<<1<<2)|0,o=1<<o,o&O?(r=u+8|0,o=s[r>>2]|0):(s[5412]=o|O,o=u,r=u+8|0),s[r>>2]=c,s[o+12>>2]=c,s[c+8>>2]=o,s[c+12>>2]=u),s[5414]=_,s[5417]=m),q=A+8|0,w=nt,q|0}else O=E}else O=E}else O=E}else if(r>>>0<=4294967231)if(r=r+11|0,E=r&-8,c=s[5413]|0,c){h=0-E|0,r=r>>>8,r?E>>>0>16777215?_=31:(O=(r+1048320|0)>>>16&8,G=r<<O,A=(G+520192|0)>>>16&4,G=G<<A,_=(G+245760|0)>>>16&2,_=14-(A|O|_)+(G<<_>>>15)|0,_=E>>>(_+7|0)&1|_<<1):_=0,u=s[21952+(_<<2)>>2]|0;e:do if(!u)u=0,r=0,G=61;else for(r=0,A=E<<((_|0)==31?0:25-(_>>>1)|0),p=0;;){if(m=(s[u+4>>2]&-8)-E|0,m>>>0<h>>>0)if(m)r=u,h=m;else{r=u,h=0,G=65;break e}if(G=s[u+20>>2]|0,u=s[u+16+(A>>>31<<2)>>2]|0,p=(G|0)==0|(G|0)==(u|0)?p:G,u)A=A<<1;else{u=p,G=61;break}}while(0);if((G|0)==61){if((u|0)==0&(r|0)==0){if(r=2<<_,r=(r|0-r)&c,!r){O=E;break}O=(r&0-r)+-1|0,m=O>>>12&16,O=O>>>m,p=O>>>5&8,O=O>>>p,A=O>>>2&4,O=O>>>A,_=O>>>1&2,O=O>>>_,u=O>>>1&1,r=0,u=s[21952+((p|m|A|_|u)+(O>>>u)<<2)>>2]|0}u?G=65:(A=r,m=h)}if((G|0)==65)for(p=u;;)if(O=(s[p+4>>2]&-8)-E|0,u=O>>>0<h>>>0,h=u?O:h,r=u?p:r,u=s[p+16>>2]|0,u||(u=s[p+20>>2]|0),u)p=u;else{A=r,m=h;break}if(A|0&&m>>>0<((s[5414]|0)-E|0)>>>0&&(k=A+E|0,k>>>0>A>>>0)){p=s[A+24>>2]|0,o=s[A+12>>2]|0;do if((o|0)==(A|0)){if(r=A+20|0,o=s[r>>2]|0,!o&&(r=A+16|0,o=s[r>>2]|0,!o)){o=0;break}for(;;)if(h=o+20|0,u=s[h>>2]|0,u)o=u,r=h;else if(h=o+16|0,u=s[h>>2]|0,u)o=u,r=h;else break;s[r>>2]=0}else q=s[A+8>>2]|0,s[q+12>>2]=o,s[o+8>>2]=q;while(0);do if(p){if(r=s[A+28>>2]|0,u=21952+(r<<2)|0,(A|0)==(s[u>>2]|0)){if(s[u>>2]=o,!o){c=c&~(1<<r),s[5413]=c;break}}else if(q=p+16|0,s[((s[q>>2]|0)==(A|0)?q:p+20|0)>>2]=o,!o)break;s[o+24>>2]=p,r=s[A+16>>2]|0,r|0&&(s[o+16>>2]=r,s[r+24>>2]=o),r=s[A+20>>2]|0,r&&(s[o+20>>2]=r,s[r+24>>2]=o)}while(0);e:do if(m>>>0<16)q=m+E|0,s[A+4>>2]=q|3,q=A+q+4|0,s[q>>2]=s[q>>2]|1;else{if(s[A+4>>2]=E|3,s[k+4>>2]=m|1,s[k+m>>2]=m,o=m>>>3,m>>>0<256){u=21688+(o<<1<<2)|0,r=s[5412]|0,o=1<<o,r&o?(r=u+8|0,o=s[r>>2]|0):(s[5412]=r|o,o=u,r=u+8|0),s[r>>2]=k,s[o+12>>2]=k,s[k+8>>2]=o,s[k+12>>2]=u;break}if(o=m>>>8,o?m>>>0>16777215?u=31:(ye=(o+1048320|0)>>>16&8,q=o<<ye,re=(q+520192|0)>>>16&4,q=q<<re,u=(q+245760|0)>>>16&2,u=14-(re|ye|u)+(q<<u>>>15)|0,u=m>>>(u+7|0)&1|u<<1):u=0,o=21952+(u<<2)|0,s[k+28>>2]=u,r=k+16|0,s[r+4>>2]=0,s[r>>2]=0,r=1<<u,!(c&r)){s[5413]=c|r,s[o>>2]=k,s[k+24>>2]=o,s[k+12>>2]=k,s[k+8>>2]=k;break}o=s[o>>2]|0;t:do if((s[o+4>>2]&-8|0)!=(m|0)){for(c=m<<((u|0)==31?0:25-(u>>>1)|0);u=o+16+(c>>>31<<2)|0,r=s[u>>2]|0,!!r;)if((s[r+4>>2]&-8|0)==(m|0)){o=r;break t}else c=c<<1,o=r;s[u>>2]=k,s[k+24>>2]=o,s[k+12>>2]=k,s[k+8>>2]=k;break e}while(0);ye=o+8|0,q=s[ye>>2]|0,s[q+12>>2]=k,s[ye>>2]=k,s[k+8>>2]=q,s[k+12>>2]=o,s[k+24>>2]=0}while(0);return q=A+8|0,w=nt,q|0}else O=E}else O=E;else O=-1;while(0);if(u=s[5414]|0,u>>>0>=O>>>0)return o=u-O|0,r=s[5417]|0,o>>>0>15?(q=r+O|0,s[5417]=q,s[5414]=o,s[q+4>>2]=o|1,s[r+u>>2]=o,s[r+4>>2]=O|3):(s[5414]=0,s[5417]=0,s[r+4>>2]=u|3,q=r+u+4|0,s[q>>2]=s[q>>2]|1),q=r+8|0,w=nt,q|0;if(m=s[5415]|0,m>>>0>O>>>0)return re=m-O|0,s[5415]=re,q=s[5418]|0,ye=q+O|0,s[5418]=ye,s[ye+4>>2]=re|1,s[q+4>>2]=O|3,q=q+8|0,w=nt,q|0;if(s[5530]|0?r=s[5532]|0:(s[5532]=4096,s[5531]=4096,s[5533]=-1,s[5534]=-1,s[5535]=0,s[5523]=0,s[5530]=U&-16^1431655768,r=4096),A=O+48|0,_=O+47|0,p=r+_|0,h=0-r|0,E=p&h,E>>>0<=O>>>0||(r=s[5522]|0,r|0&&(k=s[5520]|0,U=k+E|0,U>>>0<=k>>>0|U>>>0>r>>>0)))return q=0,w=nt,q|0;e:do if(s[5523]&4)o=0,G=143;else{u=s[5418]|0;t:do if(u){for(c=22096;U=s[c>>2]|0,!(U>>>0<=u>>>0&&(U+(s[c+4>>2]|0)|0)>>>0>u>>>0);)if(r=s[c+8>>2]|0,r)c=r;else{G=128;break t}if(o=p-m&h,o>>>0<2147483647)if(r=xo(o)|0,(r|0)==((s[c>>2]|0)+(s[c+4>>2]|0)|0)){if((r|0)!=-1){m=o,p=r,G=145;break e}}else c=r,G=136;else o=0}else G=128;while(0);do if((G|0)==128)if(u=xo(0)|0,(u|0)!=-1&&(o=u,Z=s[5531]|0,H=Z+-1|0,o=(H&o|0?(H+o&0-Z)-o|0:0)+E|0,Z=s[5520]|0,H=o+Z|0,o>>>0>O>>>0&o>>>0<2147483647)){if(U=s[5522]|0,U|0&&H>>>0<=Z>>>0|H>>>0>U>>>0){o=0;break}if(r=xo(o)|0,(r|0)==(u|0)){m=o,p=u,G=145;break e}else c=r,G=136}else o=0;while(0);do if((G|0)==136){if(u=0-o|0,!(A>>>0>o>>>0&(o>>>0<2147483647&(c|0)!=-1)))if((c|0)==-1){o=0;break}else{m=o,p=c,G=145;break e}if(r=s[5532]|0,r=_-o+r&0-r,r>>>0>=2147483647){m=o,p=c,G=145;break e}if((xo(r)|0)==-1){xo(u)|0,o=0;break}else{m=r+o|0,p=c,G=145;break e}}while(0);s[5523]=s[5523]|4,G=143}while(0);if((G|0)==143&&E>>>0<2147483647&&(re=xo(E)|0,H=xo(0)|0,be=H-re|0,oe=be>>>0>(O+40|0)>>>0,!((re|0)==-1|oe^1|re>>>0<H>>>0&((re|0)!=-1&(H|0)!=-1)^1))&&(m=oe?be:o,p=re,G=145),(G|0)==145){o=(s[5520]|0)+m|0,s[5520]=o,o>>>0>(s[5521]|0)>>>0&&(s[5521]=o),_=s[5418]|0;e:do if(_){for(o=22096;;){if(r=s[o>>2]|0,u=s[o+4>>2]|0,(p|0)==(r+u|0)){G=154;break}if(c=s[o+8>>2]|0,c)o=c;else break}if((G|0)==154&&(ye=o+4|0,(s[o+12>>2]&8|0)==0)&&p>>>0>_>>>0&r>>>0<=_>>>0){s[ye>>2]=u+m,q=(s[5415]|0)+m|0,re=_+8|0,re=re&7|0?0-re&7:0,ye=_+re|0,re=q-re|0,s[5418]=ye,s[5415]=re,s[ye+4>>2]=re|1,s[_+q+4>>2]=40,s[5419]=s[5534];break}for(p>>>0<(s[5416]|0)>>>0&&(s[5416]=p),u=p+m|0,o=22096;;){if((s[o>>2]|0)==(u|0)){G=162;break}if(r=s[o+8>>2]|0,r)o=r;else break}if((G|0)==162&&!(s[o+12>>2]&8|0)){s[o>>2]=p,k=o+4|0,s[k>>2]=(s[k>>2]|0)+m,k=p+8|0,k=p+(k&7|0?0-k&7:0)|0,o=u+8|0,o=u+(o&7|0?0-o&7:0)|0,E=k+O|0,A=o-k-O|0,s[k+4>>2]=O|3;t:do if((_|0)==(o|0))q=(s[5415]|0)+A|0,s[5415]=q,s[5418]=E,s[E+4>>2]=q|1;else{if((s[5417]|0)==(o|0)){q=(s[5414]|0)+A|0,s[5414]=q,s[5417]=E,s[E+4>>2]=q|1,s[E+q>>2]=q;break}if(r=s[o+4>>2]|0,(r&3|0)==1){m=r&-8,c=r>>>3;n:do if(r>>>0<256)if(r=s[o+8>>2]|0,u=s[o+12>>2]|0,(u|0)==(r|0)){s[5412]=s[5412]&~(1<<c);break}else{s[r+12>>2]=u,s[u+8>>2]=r;break}else{p=s[o+24>>2]|0,r=s[o+12>>2]|0;do if((r|0)==(o|0)){if(u=o+16|0,c=u+4|0,r=s[c>>2]|0,r)u=c;else if(r=s[u>>2]|0,!r){r=0;break}for(;;)if(h=r+20|0,c=s[h>>2]|0,c)r=c,u=h;else if(h=r+16|0,c=s[h>>2]|0,c)r=c,u=h;else break;s[u>>2]=0}else q=s[o+8>>2]|0,s[q+12>>2]=r,s[r+8>>2]=q;while(0);if(!p)break;u=s[o+28>>2]|0,c=21952+(u<<2)|0;do if((s[c>>2]|0)!=(o|0)){if(q=p+16|0,s[((s[q>>2]|0)==(o|0)?q:p+20|0)>>2]=r,!r)break n}else{if(s[c>>2]=r,r|0)break;s[5413]=s[5413]&~(1<<u);break n}while(0);if(s[r+24>>2]=p,u=o+16|0,c=s[u>>2]|0,c|0&&(s[r+16>>2]=c,s[c+24>>2]=r),u=s[u+4>>2]|0,!u)break;s[r+20>>2]=u,s[u+24>>2]=r}while(0);o=o+m|0,h=m+A|0}else h=A;if(o=o+4|0,s[o>>2]=s[o>>2]&-2,s[E+4>>2]=h|1,s[E+h>>2]=h,o=h>>>3,h>>>0<256){u=21688+(o<<1<<2)|0,r=s[5412]|0,o=1<<o,r&o?(r=u+8|0,o=s[r>>2]|0):(s[5412]=r|o,o=u,r=u+8|0),s[r>>2]=E,s[o+12>>2]=E,s[E+8>>2]=o,s[E+12>>2]=u;break}o=h>>>8;do if(!o)c=0;else{if(h>>>0>16777215){c=31;break}ye=(o+1048320|0)>>>16&8,q=o<<ye,re=(q+520192|0)>>>16&4,q=q<<re,c=(q+245760|0)>>>16&2,c=14-(re|ye|c)+(q<<c>>>15)|0,c=h>>>(c+7|0)&1|c<<1}while(0);if(o=21952+(c<<2)|0,s[E+28>>2]=c,r=E+16|0,s[r+4>>2]=0,s[r>>2]=0,r=s[5413]|0,u=1<<c,!(r&u)){s[5413]=r|u,s[o>>2]=E,s[E+24>>2]=o,s[E+12>>2]=E,s[E+8>>2]=E;break}o=s[o>>2]|0;n:do if((s[o+4>>2]&-8|0)!=(h|0)){for(c=h<<((c|0)==31?0:25-(c>>>1)|0);u=o+16+(c>>>31<<2)|0,r=s[u>>2]|0,!!r;)if((s[r+4>>2]&-8|0)==(h|0)){o=r;break n}else c=c<<1,o=r;s[u>>2]=E,s[E+24>>2]=o,s[E+12>>2]=E,s[E+8>>2]=E;break t}while(0);ye=o+8|0,q=s[ye>>2]|0,s[q+12>>2]=E,s[ye>>2]=E,s[E+8>>2]=q,s[E+12>>2]=o,s[E+24>>2]=0}while(0);return q=k+8|0,w=nt,q|0}for(o=22096;r=s[o>>2]|0,!(r>>>0<=_>>>0&&(q=r+(s[o+4>>2]|0)|0,q>>>0>_>>>0));)o=s[o+8>>2]|0;h=q+-47|0,r=h+8|0,r=h+(r&7|0?0-r&7:0)|0,h=_+16|0,r=r>>>0<h>>>0?_:r,o=r+8|0,u=m+-40|0,re=p+8|0,re=re&7|0?0-re&7:0,ye=p+re|0,re=u-re|0,s[5418]=ye,s[5415]=re,s[ye+4>>2]=re|1,s[p+u+4>>2]=40,s[5419]=s[5534],u=r+4|0,s[u>>2]=27,s[o>>2]=s[5524],s[o+4>>2]=s[5525],s[o+8>>2]=s[5526],s[o+12>>2]=s[5527],s[5524]=p,s[5525]=m,s[5527]=0,s[5526]=o,o=r+24|0;do ye=o,o=o+4|0,s[o>>2]=7;while((ye+8|0)>>>0<q>>>0);if((r|0)!=(_|0)){if(p=r-_|0,s[u>>2]=s[u>>2]&-2,s[_+4>>2]=p|1,s[r>>2]=p,o=p>>>3,p>>>0<256){u=21688+(o<<1<<2)|0,r=s[5412]|0,o=1<<o,r&o?(r=u+8|0,o=s[r>>2]|0):(s[5412]=r|o,o=u,r=u+8|0),s[r>>2]=_,s[o+12>>2]=_,s[_+8>>2]=o,s[_+12>>2]=u;break}if(o=p>>>8,o?p>>>0>16777215?c=31:(ye=(o+1048320|0)>>>16&8,q=o<<ye,re=(q+520192|0)>>>16&4,q=q<<re,c=(q+245760|0)>>>16&2,c=14-(re|ye|c)+(q<<c>>>15)|0,c=p>>>(c+7|0)&1|c<<1):c=0,u=21952+(c<<2)|0,s[_+28>>2]=c,s[_+20>>2]=0,s[h>>2]=0,o=s[5413]|0,r=1<<c,!(o&r)){s[5413]=o|r,s[u>>2]=_,s[_+24>>2]=u,s[_+12>>2]=_,s[_+8>>2]=_;break}o=s[u>>2]|0;t:do if((s[o+4>>2]&-8|0)!=(p|0)){for(c=p<<((c|0)==31?0:25-(c>>>1)|0);u=o+16+(c>>>31<<2)|0,r=s[u>>2]|0,!!r;)if((s[r+4>>2]&-8|0)==(p|0)){o=r;break t}else c=c<<1,o=r;s[u>>2]=_,s[_+24>>2]=o,s[_+12>>2]=_,s[_+8>>2]=_;break e}while(0);ye=o+8|0,q=s[ye>>2]|0,s[q+12>>2]=_,s[ye>>2]=_,s[_+8>>2]=q,s[_+12>>2]=o,s[_+24>>2]=0}}else q=s[5416]|0,(q|0)==0|p>>>0<q>>>0&&(s[5416]=p),s[5524]=p,s[5525]=m,s[5527]=0,s[5421]=s[5530],s[5420]=-1,s[5425]=21688,s[5424]=21688,s[5427]=21696,s[5426]=21696,s[5429]=21704,s[5428]=21704,s[5431]=21712,s[5430]=21712,s[5433]=21720,s[5432]=21720,s[5435]=21728,s[5434]=21728,s[5437]=21736,s[5436]=21736,s[5439]=21744,s[5438]=21744,s[5441]=21752,s[5440]=21752,s[5443]=21760,s[5442]=21760,s[5445]=21768,s[5444]=21768,s[5447]=21776,s[5446]=21776,s[5449]=21784,s[5448]=21784,s[5451]=21792,s[5450]=21792,s[5453]=21800,s[5452]=21800,s[5455]=21808,s[5454]=21808,s[5457]=21816,s[5456]=21816,s[5459]=21824,s[5458]=21824,s[5461]=21832,s[5460]=21832,s[5463]=21840,s[5462]=21840,s[5465]=21848,s[5464]=21848,s[5467]=21856,s[5466]=21856,s[5469]=21864,s[5468]=21864,s[5471]=21872,s[5470]=21872,s[5473]=21880,s[5472]=21880,s[5475]=21888,s[5474]=21888,s[5477]=21896,s[5476]=21896,s[5479]=21904,s[5478]=21904,s[5481]=21912,s[5480]=21912,s[5483]=21920,s[5482]=21920,s[5485]=21928,s[5484]=21928,s[5487]=21936,s[5486]=21936,q=m+-40|0,re=p+8|0,re=re&7|0?0-re&7:0,ye=p+re|0,re=q-re|0,s[5418]=ye,s[5415]=re,s[ye+4>>2]=re|1,s[p+q+4>>2]=40,s[5419]=s[5534];while(0);if(o=s[5415]|0,o>>>0>O>>>0)return re=o-O|0,s[5415]=re,q=s[5418]|0,ye=q+O|0,s[5418]=ye,s[ye+4>>2]=re|1,s[q+4>>2]=O|3,q=q+8|0,w=nt,q|0}return s[(xi()|0)>>2]=48,q=0,w=nt,q|0}function sd(r){r=r|0;var o=0,u=0,c=0,h=0,p=0,m=0,A=0,_=0;if(r){u=r+-8|0,h=s[5416]|0,r=s[r+-4>>2]|0,o=r&-8,_=u+o|0;do if(r&1)A=u,m=u;else{if(c=s[u>>2]|0,!(r&3)||(m=u+(0-c)|0,p=c+o|0,m>>>0<h>>>0))return;if((s[5417]|0)==(m|0)){if(r=_+4|0,o=s[r>>2]|0,(o&3|0)!=3){A=m,o=p;break}s[5414]=p,s[r>>2]=o&-2,s[m+4>>2]=p|1,s[m+p>>2]=p;return}if(u=c>>>3,c>>>0<256)if(r=s[m+8>>2]|0,o=s[m+12>>2]|0,(o|0)==(r|0)){s[5412]=s[5412]&~(1<<u),A=m,o=p;break}else{s[r+12>>2]=o,s[o+8>>2]=r,A=m,o=p;break}h=s[m+24>>2]|0,r=s[m+12>>2]|0;do if((r|0)==(m|0)){if(o=m+16|0,u=o+4|0,r=s[u>>2]|0,r)o=u;else if(r=s[o>>2]|0,!r){r=0;break}for(;;)if(c=r+20|0,u=s[c>>2]|0,u)r=u,o=c;else if(c=r+16|0,u=s[c>>2]|0,u)r=u,o=c;else break;s[o>>2]=0}else A=s[m+8>>2]|0,s[A+12>>2]=r,s[r+8>>2]=A;while(0);if(h){if(o=s[m+28>>2]|0,u=21952+(o<<2)|0,(s[u>>2]|0)==(m|0)){if(s[u>>2]=r,!r){s[5413]=s[5413]&~(1<<o),A=m,o=p;break}}else if(A=h+16|0,s[((s[A>>2]|0)==(m|0)?A:h+20|0)>>2]=r,!r){A=m,o=p;break}s[r+24>>2]=h,o=m+16|0,u=s[o>>2]|0,u|0&&(s[r+16>>2]=u,s[u+24>>2]=r),o=s[o+4>>2]|0,o?(s[r+20>>2]=o,s[o+24>>2]=r,A=m,o=p):(A=m,o=p)}else A=m,o=p}while(0);if(!(m>>>0>=_>>>0)&&(r=_+4|0,c=s[r>>2]|0,!!(c&1))){if(c&2)s[r>>2]=c&-2,s[A+4>>2]=o|1,s[m+o>>2]=o,h=o;else{if((s[5418]|0)==(_|0)){if(_=(s[5415]|0)+o|0,s[5415]=_,s[5418]=A,s[A+4>>2]=_|1,(A|0)!=(s[5417]|0))return;s[5417]=0,s[5414]=0;return}if((s[5417]|0)==(_|0)){_=(s[5414]|0)+o|0,s[5414]=_,s[5417]=m,s[A+4>>2]=_|1,s[m+_>>2]=_;return}h=(c&-8)+o|0,u=c>>>3;do if(c>>>0<256)if(o=s[_+8>>2]|0,r=s[_+12>>2]|0,(r|0)==(o|0)){s[5412]=s[5412]&~(1<<u);break}else{s[o+12>>2]=r,s[r+8>>2]=o;break}else{p=s[_+24>>2]|0,r=s[_+12>>2]|0;do if((r|0)==(_|0)){if(o=_+16|0,u=o+4|0,r=s[u>>2]|0,r)o=u;else if(r=s[o>>2]|0,!r){u=0;break}for(;;)if(c=r+20|0,u=s[c>>2]|0,u)r=u,o=c;else if(c=r+16|0,u=s[c>>2]|0,u)r=u,o=c;else break;s[o>>2]=0,u=r}else u=s[_+8>>2]|0,s[u+12>>2]=r,s[r+8>>2]=u,u=r;while(0);if(p|0){if(r=s[_+28>>2]|0,o=21952+(r<<2)|0,(s[o>>2]|0)==(_|0)){if(s[o>>2]=u,!u){s[5413]=s[5413]&~(1<<r);break}}else if(c=p+16|0,s[((s[c>>2]|0)==(_|0)?c:p+20|0)>>2]=u,!u)break;s[u+24>>2]=p,r=_+16|0,o=s[r>>2]|0,o|0&&(s[u+16>>2]=o,s[o+24>>2]=u),r=s[r+4>>2]|0,r|0&&(s[u+20>>2]=r,s[r+24>>2]=u)}}while(0);if(s[A+4>>2]=h|1,s[m+h>>2]=h,(A|0)==(s[5417]|0)){s[5414]=h;return}}if(r=h>>>3,h>>>0<256){u=21688+(r<<1<<2)|0,o=s[5412]|0,r=1<<r,o&r?(o=u+8|0,r=s[o>>2]|0):(s[5412]=o|r,r=u,o=u+8|0),s[o>>2]=A,s[r+12>>2]=A,s[A+8>>2]=r,s[A+12>>2]=u;return}r=h>>>8,r?h>>>0>16777215?c=31:(m=(r+1048320|0)>>>16&8,_=r<<m,p=(_+520192|0)>>>16&4,_=_<<p,c=(_+245760|0)>>>16&2,c=14-(p|m|c)+(_<<c>>>15)|0,c=h>>>(c+7|0)&1|c<<1):c=0,r=21952+(c<<2)|0,s[A+28>>2]=c,s[A+20>>2]=0,s[A+16>>2]=0,o=s[5413]|0,u=1<<c;e:do if(!(o&u))s[5413]=o|u,s[r>>2]=A,s[A+24>>2]=r,s[A+12>>2]=A,s[A+8>>2]=A;else{r=s[r>>2]|0;t:do if((s[r+4>>2]&-8|0)!=(h|0)){for(c=h<<((c|0)==31?0:25-(c>>>1)|0);u=r+16+(c>>>31<<2)|0,o=s[u>>2]|0,!!o;)if((s[o+4>>2]&-8|0)==(h|0)){r=o;break t}else c=c<<1,r=o;s[u>>2]=A,s[A+24>>2]=r,s[A+12>>2]=A,s[A+8>>2]=A;break e}while(0);m=r+8|0,_=s[m>>2]|0,s[_+12>>2]=A,s[m>>2]=A,s[A+8>>2]=_,s[A+12>>2]=r,s[A+24>>2]=0}while(0);if(_=(s[5420]|0)+-1|0,s[5420]=_,!(_|0)){for(r=22104;r=s[r>>2]|0,r;)r=r+8|0;s[5420]=-1}}}}function xo(r){r=r|0;var o=0,u=0,c=0;c=r+3&-4,r=uy()|0,o=s[r>>2]|0,u=o+c|0;do if((c|0)<1|u>>>0>o>>>0){if(u>>>0>(tR()|0)>>>0&&!(rR(u|0)|0))break;return s[r>>2]=u,c=o,c|0}while(0);return s[(xi()|0)>>2]=48,c=-1,c|0}function x6(r){r=r|0;var o=0;return o=w,w=w+r|0,w=w+15&-16,o|0}function R6(r){r=r|0,w=r}function b6(){return w|0}function k6(r,o){r=r|0,o=o|0;var u=0,c=0,h=0,p=0;return p=r&65535,h=o&65535,u=$e(h,p)|0,c=r>>>16,r=(u>>>16)+($e(h,c)|0)|0,h=o>>>16,o=$e(h,p)|0,yt((r>>>16)+($e(h,c)|0)+(((r&65535)+o|0)>>>16)|0),r+o<<16|u&65535|0|0}function od(r,o,u,c){r=r|0,o=o|0,u=u|0,c=c|0;var h=0,p=0;return h=r,p=u,u=k6(h,p)|0,r=tt()|0,yt(($e(o,p)|0)+($e(c,h)|0)+r|r&0|0),u|0|0|0}function Vr(r,o,u,c){return r=r|0,o=o|0,u=u|0,c=c|0,u=r+u>>>0,yt(o+c+(u>>>0<r>>>0|0)>>>0|0),u|0|0}function Ta(r,o,u,c){return r=r|0,o=o|0,u=u|0,c=c|0,c=o-c-(u>>>0>r>>>0|0)>>>0,yt(c|0),r-u>>>0|0|0}function oy(r){return r=r|0,(r?31-($i(r^r-1)|0)|0:32)|0}function P6(r,o,u,c,h){r=r|0,o=o|0,u=u|0,c=c|0,h=h|0;var p=0,m=0,A=0,_=0,E=0,k=0,O=0,U=0,Z=0,H=0;if(k=r,_=o,E=_,m=u,U=c,A=U,!E)return p=(h|0)!=0,A?p?(s[h>>2]=r|0,s[h+4>>2]=o&0,U=0,h=0,yt(U|0),h|0):(U=0,h=0,yt(U|0),h|0):(p&&(s[h>>2]=(k>>>0)%(m>>>0),s[h+4>>2]=0),U=0,h=(k>>>0)/(m>>>0)>>>0,yt(U|0),h|0);p=(A|0)==0;do if(m){if(!p){if(p=($i(A|0)|0)-($i(E|0)|0)|0,p>>>0<=31){O=p+1|0,A=31-p|0,o=p-31>>31,m=O,r=k>>>(O>>>0)&o|E<<A,o=E>>>(O>>>0)&o,p=0,A=k<<A;break}return h?(s[h>>2]=r|0,s[h+4>>2]=_|o&0,U=0,h=0,yt(U|0),h|0):(U=0,h=0,yt(U|0),h|0)}if(p=m-1|0,p&m|0){A=($i(m|0)|0)+33-($i(E|0)|0)|0,H=64-A|0,O=32-A|0,_=O>>31,Z=A-32|0,o=Z>>31,m=A,r=O-1>>31&E>>>(Z>>>0)|(E<<O|k>>>(A>>>0))&o,o=o&E>>>(A>>>0),p=k<<H&_,A=(E<<H|k>>>(Z>>>0))&_|k<<O&A-33>>31;break}return h|0&&(s[h>>2]=p&k,s[h+4>>2]=0),(m|0)==1?(Z=_|o&0,H=r|0|0,yt(Z|0),H|0):(H=oy(m|0)|0,Z=E>>>(H>>>0)|0,H=E<<32-H|k>>>(H>>>0)|0,yt(Z|0),H|0)}else{if(p)return h|0&&(s[h>>2]=(E>>>0)%(m>>>0),s[h+4>>2]=0),Z=0,H=(E>>>0)/(m>>>0)>>>0,yt(Z|0),H|0;if(!k)return h|0&&(s[h>>2]=0,s[h+4>>2]=(E>>>0)%(A>>>0)),Z=0,H=(E>>>0)/(A>>>0)>>>0,yt(Z|0),H|0;if(p=A-1|0,!(p&A))return h|0&&(s[h>>2]=r|0,s[h+4>>2]=p&E|o&0),Z=0,H=E>>>((oy(A|0)|0)>>>0),yt(Z|0),H|0;if(p=($i(A|0)|0)-($i(E|0)|0)|0,p>>>0<=30){o=p+1|0,A=31-p|0,m=o,r=E<<A|k>>>(o>>>0),o=E>>>(o>>>0),p=0,A=k<<A;break}return h?(s[h>>2]=r|0,s[h+4>>2]=_|o&0,Z=0,H=0,yt(Z|0),H|0):(Z=0,H=0,yt(Z|0),H|0)}while(0);if(!m)E=A,_=0,A=0;else{O=u|0|0,k=U|c&0,E=Vr(O|0,k|0,-1,-1)|0,u=tt()|0,_=A,A=0;do c=_,_=p>>>31|_<<1,p=A|p<<1,c=r<<1|c>>>31|0,U=r>>>31|o<<1|0,Ta(E|0,u|0,c|0,U|0)|0,H=tt()|0,Z=H>>31|((H|0)<0?-1:0)<<1,A=Z&1,r=Ta(c|0,U|0,Z&O|0,(((H|0)<0?-1:0)>>31|((H|0)<0?-1:0)<<1)&k|0)|0,o=tt()|0,m=m-1|0;while(m|0);E=_,_=0}return m=0,h|0&&(s[h>>2]=r,s[h+4>>2]=o),Z=(p|0)>>>31|(E|m)<<1|(m<<1|p>>>31)&0|_,H=(p<<1|0)&-2|A,yt(Z|0),H|0}function ad(r,o,u,c){return r=r|0,o=o|0,u=u|0,c=c|0,P6(r,o,u,c,0)|0}function Gc(r,o,u){return r=r|0,o=o|0,u=u|0,(u|0)<32?(yt(o>>>u|0),r>>>u|(o&(1<<u)-1)<<32-u):(yt(0),o>>>u-32|0)}function ay(r,o,u){return r=r|0,o=o|0,u=u|0,(u|0)<32?(yt(o<<u|(r&(1<<u)-1<<32-u)>>>32-u|0),r<<u):(yt(r<<u-32|0),0)}function uy(){return 22176}function ly(r){return r=r|0,(r&255)<<24|(r>>8&255)<<16|(r>>16&255)<<8|r>>>24|0}function hr(r,o,u){r=r|0,o=o|0,u=u|0;var c=0,h=0,p=0;if((u|0)>=512)return nR(r|0,o|0,u|0)|0,r|0;if(p=r|0,h=r+u|0,(r&3)==(o&3)){for(;r&3;){if(!u)return p|0;y[r>>0]=y[o>>0]|0,r=r+1|0,o=o+1|0,u=u-1|0}for(u=h&-4|0,c=u-64|0;(r|0)<=(c|0);)s[r>>2]=s[o>>2],s[r+4>>2]=s[o+4>>2],s[r+8>>2]=s[o+8>>2],s[r+12>>2]=s[o+12>>2],s[r+16>>2]=s[o+16>>2],s[r+20>>2]=s[o+20>>2],s[r+24>>2]=s[o+24>>2],s[r+28>>2]=s[o+28>>2],s[r+32>>2]=s[o+32>>2],s[r+36>>2]=s[o+36>>2],s[r+40>>2]=s[o+40>>2],s[r+44>>2]=s[o+44>>2],s[r+48>>2]=s[o+48>>2],s[r+52>>2]=s[o+52>>2],s[r+56>>2]=s[o+56>>2],s[r+60>>2]=s[o+60>>2],r=r+64|0,o=o+64|0;for(;(r|0)<(u|0);)s[r>>2]=s[o>>2],r=r+4|0,o=o+4|0}else for(u=h-4|0;(r|0)<(u|0);)y[r>>0]=y[o>>0]|0,y[r+1>>0]=y[o+1>>0]|0,y[r+2>>0]=y[o+2>>0]|0,y[r+3>>0]=y[o+3>>0]|0,r=r+4|0,o=o+4|0;for(;(r|0)<(h|0);)y[r>>0]=y[o>>0]|0,r=r+1|0,o=o+1|0;return p|0}function Ur(r,o,u){r=r|0,o=o|0,u=u|0;var c=0;if((o|0)<(r|0)&(r|0)<(o+u|0)){for(c=r,o=o+u|0,r=r+u|0;(u|0)>0;)r=r-1|0,o=o-1|0,u=u-1|0,y[r>>0]=y[o>>0]|0;r=c}else hr(r,o,u)|0;return r|0}function Ro(r,o,u){r=r|0,o=o|0,u=u|0;var c=0,h=0,p=0,m=0;if(p=r+u|0,o=o&255,(u|0)>=67){for(;r&3;)y[r>>0]=o,r=r+1|0;for(c=p&-4|0,m=o|o<<8|o<<16|o<<24,h=c-64|0;(r|0)<=(h|0);)s[r>>2]=m,s[r+4>>2]=m,s[r+8>>2]=m,s[r+12>>2]=m,s[r+16>>2]=m,s[r+20>>2]=m,s[r+24>>2]=m,s[r+28>>2]=m,s[r+32>>2]=m,s[r+36>>2]=m,s[r+40>>2]=m,s[r+44>>2]=m,s[r+48>>2]=m,s[r+52>>2]=m,s[r+56>>2]=m,s[r+60>>2]=m,r=r+64|0;for(;(r|0)<(c|0);)s[r>>2]=m,r=r+4|0}for(;(r|0)<(p|0);)y[r>>0]=o,r=r+1|0;return p-u|0}function M6(r){return r=r|0,cd[r&3]()|0}function C6(r,o){return r=r|0,o=o|0,Zc[r&15](o|0)|0}function I6(r,o,u,c,h,p,m){return r=r|0,o=o|0,u=+u,c=c|0,h=h|0,p=p|0,m=m|0,dy[r&1](o|0,+u,c|0,h|0,p|0,m|0)|0}function N6(r,o,u){return r=r|0,o=o|0,u=u|0,Zu[r&63](o|0,u|0)|0}function F6(r,o,u,c){return r=r|0,o=o|0,u=u|0,c=c|0,Ea[r&7](o|0,u|0,c|0)|0}function O6(r){r=r|0,fd[r&3]()}function L6(r,o){r=r|0,o=o|0,ht[r&255](o|0)}function V6(r,o,u){r=r|0,o=o|0,u=u|0,bs[r&15](o|0,u|0)}function U6(r,o,u,c){r=r|0,o=o|0,u=u|0,c=c|0,Xu[r&15](o|0,u|0,c|0)}function B6(r,o,u,c,h){r=r|0,o=o|0,u=u|0,c=c|0,h=h|0,Hu[r&7](o|0,u|0,c|0,h|0)}function D6(r,o,u,c,h,p){r=r|0,o=o|0,u=u|0,c=c|0,h=h|0,p=p|0,Xc[r&3](o|0,u|0,c|0,h|0,p|0)}function z6(r,o,u,c,h,p,m){r=r|0,o=o|0,u=u|0,c=c|0,h=h|0,p=p|0,m=m|0,Yu[r&3](o|0,u|0,c|0,h|0,p|0,m|0)}function cy(){return zn(0),0}function ud(r){return r=r|0,zn(1),0}function j6(r,o,u,c,h,p){return r=r|0,o=+o,u=u|0,c=c|0,h=h|0,p=p|0,zn(2),0}function Vt(r,o){return r=r|0,o=o|0,zn(3),0}function fy(r,o,u){return r=r|0,o=o|0,u=u|0,zn(4),0}function hy(){zn(5)}function ne(r){r=r|0,zn(6)}function Rs(r,o){r=r|0,o=o|0,zn(7)}function bo(r,o,u){r=r|0,o=o|0,u=u|0,zn(8)}function ld(r,o,u,c){r=r|0,o=o|0,u=u|0,c=c|0,zn(9)}function W6(r,o,u,c,h){r=r|0,o=o|0,u=u|0,c=c|0,h=h|0,zn(10)}function G6(r,o,u,c,h,p){r=r|0,o=o|0,u=u|0,c=c|0,h=h|0,p=p|0,zn(11)}var cd=[cy,MN,g8,cy],Zc=[ud,w5,nb,ub,g5,A5,J5,u6,m6,vN,lR,i8,IN,A8,ud,ud],dy=[j6,LO],Zu=[Vt,wR,kR,ab,ak,Ck,Vk,jk,Wk,Zk,sP,cP,SP,PP,OP,zP,aM,gM,wM,xM,NM,UM,GM,YM,nC,dC,vC,SC,MC,LC,HC,KC,aI,gI,xI,CI,zI,$I,rN,lN,AN,QN,Vt,Vt,Vt,Vt,Vt,Vt,Vt,Vt,Vt,Vt,Vt,Vt,Vt,Vt,Vt,Vt,Vt,Vt,Vt,Vt,Vt,Vt],Ea=[fy,XO,r5,R5,k5,c6,f6,fy],fd=[hy,S5,KO,hy],ht=[ne,jt,vR,_R,TR,RR,bR,PR,fr,HR,lb,tb,ib,sb,pb,gb,Sb,xb,Lb,Vb,Ub,qb,sk,ok,uk,kk,R1,Ik,mo,Nk,Ok,Lk,Uk,k1,zk,Fr,Gk,rP,iP,oP,V1,lP,TP,EP,xP,z1,kP,NP,FP,LP,Z1,DP,sM,oM,uM,aA,mM,vM,_M,TM,uA,RM,CM,IM,FM,lA,BM,jM,WM,ZM,dA,$M,eC,tC,rC,fC,hC,pC,AC,yC,_C,gA,xC,kC,PC,CC,mA,OC,ZC,XC,YC,yA,qC,sI,oI,uI,vA,pI,EI,SI,RI,_A,MI,BI,DI,jI,wA,YI,tN,nN,iN,TA,uN,gN,mN,yN,wa,e5,t5,n5,a5,d5,p5,Dc,m5,_5,T5,E5,x5,b5,C5,ty,$5,o6,a6,g6,sy,_6,TN,a8,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne],bs=[Rs,rb,ob,uR,fR,hR,dR,pR,VO,Rs,Rs,Rs,Rs,Rs,Rs,Rs],Xu=[bo,l6,h6,A6,y6,aR,cR,ZN,P8,O8,bo,bo,bo,bo,bo,bo],Hu=[ld,o5,c5,F5,BN,S8,ld,ld],Xc=[W6,s5,l5,N5],Yu=[G6,i5,u5,I5];return{__ZSt18uncaught_exceptionv:H5,___cxa_can_catch:G5,___cxa_is_pointer_type:Z5,___embind_register_native_and_builtin_types:kA,___errno_location:xi,___getTypeName:bO,___muldi3:od,___udivdi3:ad,_bitshift64Lshr:Gc,_bitshift64Shl:ay,_emscripten_get_sbrk_ptr:uy,_free:sd,_i64Add:Vr,_i64Subtract:Ta,_llvm_bswap_i32:ly,_malloc:Wc,_memcpy:hr,_memmove:Ur,_memset:Ro,dynCall_i:M6,dynCall_ii:C6,dynCall_iidiiii:I6,dynCall_iii:N6,dynCall_iiii:F6,dynCall_v:O6,dynCall_vi:L6,dynCall_vii:V6,dynCall_viii:U6,dynCall_viiii:B6,dynCall_viiiii:D6,dynCall_viiiiii:z6,globalCtors:iR,stackAlloc:x6,stackRestore:R6,stackSave:b6}}(Wx,Gx,Bt),ku=t.__ZSt18uncaught_exceptionv=Je.__ZSt18uncaught_exceptionv;t.___cxa_can_catch=Je.___cxa_can_catch,t.___cxa_is_pointer_type=Je.___cxa_is_pointer_type,t.___embind_register_native_and_builtin_types=Je.___embind_register_native_and_builtin_types,t.___errno_location=Je.___errno_location;var Zx=t.___getTypeName=Je.___getTypeName;t.___muldi3=Je.___muldi3,t.___udivdi3=Je.___udivdi3,t._bitshift64Lshr=Je._bitshift64Lshr,t._bitshift64Shl=Je._bitshift64Shl,t._emscripten_get_sbrk_ptr=Je._emscripten_get_sbrk_ptr;var Es=t._free=Je._free;t._i64Add=Je._i64Add,t._i64Subtract=Je._i64Subtract,t._llvm_bswap_i32=Je._llvm_bswap_i32;var Th=t._malloc=Je._malloc;t._memcpy=Je._memcpy,t._memmove=Je._memmove,t._memset=Je._memset;var Xx=t.globalCtors=Je.globalCtors;if(t.stackAlloc=Je.stackAlloc,t.stackRestore=Je.stackRestore,t.stackSave=Je.stackSave,t.dynCall_i=Je.dynCall_i,t.dynCall_ii=Je.dynCall_ii,t.dynCall_iidiiii=Je.dynCall_iidiiii,t.dynCall_iii=Je.dynCall_iii,t.dynCall_iiii=Je.dynCall_iiii,t.dynCall_v=Je.dynCall_v,t.dynCall_vi=Je.dynCall_vi,t.dynCall_vii=Je.dynCall_vii,t.dynCall_viii=Je.dynCall_viii,t.dynCall_viiii=Je.dynCall_viiii,t.dynCall_viiiii=Je.dynCall_viiiii,t.dynCall_viiiiii=Je.dynCall_viiiiii,t.asm=Je,xn)if(Wi(xn)||(xn=g(xn)),l||f){var Hx=S(xn);ct.set(Hx,j)}else{As();var Eh=function(b){b.byteLength&&(b=new Uint8Array(b)),ct.set(b,j),t.memoryInitializerRequest&&delete t.memoryInitializerRequest.response,ro()},Ym=function(){T(xn,Eh,function(){var b=new Error("could not load memory initializer "+xn);throw b})},$m=Ts(xn);if($m)Eh($m.buffer);else if(t.memoryInitializerRequest){var Jm=function(){var b=t.memoryInitializerRequest,R=b.response;if(b.status!==200&&b.status!==0){var D=Ts(t.memoryInitializerRequestURL);if(D)R=D.buffer;else{console.warn("a problem seems to have happened with Module.memoryInitializerRequest, status: "+b.status+", retrying "+xn),Ym();return}}Eh(R)};t.memoryInitializerRequest.response?setTimeout(Jm,0):t.memoryInitializerRequest.addEventListener("load",Jm)}else Ym()}var vc;function Yx(b){this.name="ExitStatus",this.message="Program terminated with exit("+b+")",this.status=b}ji=function b(){vc||Sh(),vc||(ji=b)};function Sh(b){if(kr>0||(Hn(),kr>0))return;function R(){vc||(vc=!0,t.calledRun=!0,!X&&(Sn(),zi(),t.onRuntimeInitialized&&t.onRuntimeInitialized(),Qr()))}t.setStatus?(t.setStatus("Running..."),setTimeout(function(){setTimeout(function(){t.setStatus("")},1),R()},1)):R()}if(t.run=Sh,t.preInit)for(typeof t.preInit=="function"&&(t.preInit=[t.preInit]);t.preInit.length>0;)t.preInit.pop()();return Sh(),t}let Io=null;const GS={0:t=>({position:[t.getInt32(0,!0),t.getInt32(4,!0),t.getInt32(8,!0)],intensity:t.getUint16(12,!0),classification:t.getUint8(15)}),1:t=>({position:[t.getInt32(0,!0),t.getInt32(4,!0),t.getInt32(8,!0)],intensity:t.getUint16(12,!0),classification:t.getUint8(15)}),2:t=>({position:[t.getInt32(0,!0),t.getInt32(4,!0),t.getInt32(8,!0)],intensity:t.getUint16(12,!0),classification:t.getUint8(15),color:[t.getUint16(20,!0),t.getUint16(22,!0),t.getUint16(24,!0)]}),3:t=>({position:[t.getInt32(0,!0),t.getInt32(4,!0),t.getInt32(8,!0)],intensity:t.getUint16(12,!0),classification:t.getUint8(15),color:[t.getUint16(28,!0),t.getUint16(30,!0),t.getUint16(32,!0)]})};function Ns(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;i=i===void 0||i===0?1:i;const a=t.slice(n,n+e.BYTES_PER_ELEMENT*i),l=new e(a);if(i===1)return l[0];const f=[];for(let d=0;d<i;d++)f.push(l[d]);return f}function ZS(t){let e=131;const n={pointsOffset:Ns(t,Uint32Array,32*3),pointsFormatId:Ns(t,Uint8Array,32*3+8),pointsStructSize:Ns(t,Uint16Array,32*3+8+1),pointsCount:Ns(t,Uint32Array,32*3+11),scale:Ns(t,Float64Array,e,3)};e+=24,n.offset=Ns(t,Float64Array,e,3),e+=24;const i=Ns(t,Float64Array,e,6);return e+=48,n.maxs=[i[0],i[2],i[4]],n.mins=[i[1],i[3],i[5]],n}let OJ=class{constructor(e){this.arraybuffer=void 0,this.readOffset=0,this.header={pointsOffset:0,pointsFormatId:0,pointsStructSize:0,pointsCount:0,scale:[0,0,0],offset:[0,0,0],maxs:[0],mins:[0],totalToRead:0,totalRead:0,versionAsString:"",isCompressed:!0},this.arraybuffer=e}open(){return!0}getHeader(){return this.header=ZS(this.arraybuffer),this.header}readData(e,n){const{header:i,arraybuffer:a}=this;if(!i)throw new Error("Cannot start reading data till a header request is issued");let{readOffset:l}=this,f;if(n<=1){e=Math.min(e,i.pointsCount-l),f=i.pointsOffset+l*i.pointsStructSize;const S=f+e*i.pointsStructSize;return l+=e,this.readOffset=l,{buffer:a.slice(f,S),count:e,hasMoreData:l<i.pointsCount}}const d=Math.min(e*n,i.pointsCount-l),g=Math.ceil(d/n);let v=0;const T=new Uint8Array(g*i.pointsStructSize);for(let S=0;S<d;S++){if(S%n===0){f=i.pointsOffset+l*i.pointsStructSize;const x=new Uint8Array(a,f,i.pointsStructSize);T.set(x,v*i.pointsStructSize),v++}l++}return this.readOffset=l,{buffer:T.buffer,count:v,hasMoreData:l<i.pointsCount}}close(){return this.arraybuffer=null,!0}};class LJ{constructor(e){this.arraybuffer=void 0,this.instance=null,this.header=null,this.arraybuffer=e,Io||(Io=FJ())}open(){try{const{arraybuffer:e}=this;this.instance=new Io.LASZip;const n=new Uint8Array(e),i=Io._malloc(e.byteLength);return this.instance.arraybuffer=e,this.instance.buf=i,Io.HEAPU8.set(n,i),this.instance.open(i,e.byteLength),this.instance.readOffset=0,!0}catch(e){throw new Error(`Failed to open file: ${e.message}`)}}getHeader(){if(!this.instance)throw new Error("You need to open the file before trying to read header");try{const e=ZS(this.instance.arraybuffer);return e.pointsFormatId&=63,this.header=e,e}catch(e){throw new Error(`Failed to get header: ${e.message}`)}}readData(e,n,i){if(!this.instance)throw new Error("You need to open the file before trying to read stuff");const{header:a,instance:l}=this;if(!a)throw new Error("You need to query header before reading, I maintain state that way, sorry :(");try{const f=Math.min(e*i,a.pointsCount-l.readOffset),d=Math.ceil(f/i);let g=0;const v=new Uint8Array(d*a.pointsStructSize),T=Io._malloc(a.pointsStructSize);for(let S=0;S<f;S++){if(l.getPoint(T),S%i===0){const x=new Uint8Array(Io.HEAPU8.buffer,T,a.pointsStructSize);v.set(x,g*a.pointsStructSize),g++}l.readOffset++}return{buffer:v.buffer,count:g,hasMoreData:l.readOffset<a.pointsCount}}catch(f){throw new Error(`Failed to read data: ${f.message}`)}}close(){try{return this.instance!==null&&(this.instance.delete(),this.instance=null),!0}catch(e){throw new Error(`Failed to close file: ${e.message}`)}}}class VJ{constructor(e,n,i){this.arrayb=void 0,this.decoder=void 0,this.pointsCount=void 0,this.pointSize=void 0,this.scale=void 0,this.offset=void 0,this.mins=void 0,this.maxs=void 0,this.arrayb=e,this.decoder=GS[i.pointsFormatId],this.pointsCount=n,this.pointSize=i.pointsStructSize,this.scale=i.scale,this.offset=i.offset,this.mins=i.mins,this.maxs=i.maxs}getPoint(e){if(e<0||e>=this.pointsCount)throw new Error("Point index out of range");const n=new DataView(this.arrayb,e*this.pointSize,this.pointSize);return this.decoder(n)}}class UJ{constructor(e){if(this.arraybuffer=void 0,this.formatId=0,this.loader=void 0,this.isCompressed=!0,this.isOpen=!1,this.version=0,this.versionAsString="",this.arraybuffer=e,this.determineVersion()>13)throw new Error("Only file versions <= 1.3 are supported at this time");if(this.determineFormat(),GS[this.formatId]===void 0)throw new Error("The point format ID is not supported");this.loader=this.isCompressed?new LJ(this.arraybuffer):new OJ(this.arraybuffer)}determineFormat(){const e=Ns(this.arraybuffer,Uint8Array,104),n=(e&128)>>7,i=(e&64)>>6;if(n===1&&i===1)throw new Error("Old style compression not supported");this.formatId=e&63,this.isCompressed=n===1||i===1}determineVersion(){const e=new Int8Array(this.arraybuffer,24,2);return this.version=e[0]*10+e[1],this.versionAsString=`${e[0]}.${e[1]}`,this.version}open(){this.loader.open()&&(this.isOpen=!0)}getHeader(){return this.loader.getHeader()}readData(e,n,i){return this.loader.readData(e,n,i)}close(){this.loader.close()&&(this.isOpen=!1)}getUnpacker(){return VJ}}function BJ(t,e){const n=DJ(t);return BS(e,n)}function DJ(t){const e={};return e.las_pointsOffset=t.pointsOffset.toString(10),e.las_pointsFormatId=t.pointsFormatId.toString(10),e.las_pointsStructSize=t.pointsStructSize.toString(10),e.las_pointsCount=t.pointsCount.toString(10),e.las_scale=JSON.stringify(t.scale),e.las_offset=JSON.stringify(t.offset),t.maxs!==void 0&&(e.las_maxs=JSON.stringify(t.maxs)),t.mins!==void 0&&(e.las_mins=JSON.stringify(t.mins)),e.las_totalToRead=t.totalToRead.toString(10),e.las_pointsFortotalReadmatId=t.totalRead.toString(10),t.versionAsString!==void 0&&(e.las_versionAsString=t.versionAsString),t.isCompressed!==void 0&&(e.las_isCompressed=t.isCompressed.toString()),e}function zw(t,e){return zJ(t,e)}function zJ(t){var e;let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=0,a,l,f,d,g;const v={loader:"las",loaderData:{},schema:{fields:[],metadata:{}},header:{vertexCount:0,boundingBox:[[0,0,0],[0,0,0]]},attributes:{},topology:"point-list",mode:0};return jJ(t,(e=n.las)===null||e===void 0?void 0:e.skip,function(){var T,S;let x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},M=arguments.length>1?arguments[1]:void 0;if(!g){var B;g=M;const fe=M.totalToRead,se=(B=n.las)!==null&&B!==void 0&&B.fp64?Float64Array:Float32Array;a=new se(fe*3),l=M.pointsFormatId>=2?new Uint8Array(fe*4):null,f=new Uint16Array(fe),d=new Uint8Array(fe),v.loaderData=M,v.attributes={POSITION:{value:a,size:3},intensity:{value:f,size:1},classification:{value:d,size:1}},l&&(v.attributes.COLOR_0={value:l,size:4})}const W=x.pointsCount,{scale:[N,F,V],offset:[j,X,Q]}=M,K=WJ(x,W,(T=n.las)===null||T===void 0?void 0:T.colorDepth);for(let fe=0;fe<W;fe++){const{position:se,color:_e,intensity:we,classification:qe}=x.getPoint(fe);a[i*3]=se[0]*N+j,a[i*3+1]=se[1]*F+X,a[i*3+2]=se[2]*V+Q,_e&&l&&(K?(l[i*4]=_e[0]/256,l[i*4+1]=_e[1]/256,l[i*4+2]=_e[2]/256):(l[i*4]=_e[0],l[i*4+1]=_e[1],l[i*4+2]=_e[2]),l[i*4+3]=255),f[i]=we,d[i]=qe,i++}const ae={...v,header:{vertexCount:M.totalRead},progress:M.totalRead/M.totalToRead};n==null||(S=n.onProgress)===null||S===void 0||S.call(n,ae)}),v.header={vertexCount:g.totalToRead,boundingBox:Ac((v==null?void 0:v.attributes)||{})},v&&(v.schema=BJ(v.loaderData,v.attributes)),v}function jJ(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=new UJ(t);try{i.open();const a=i.getHeader(),l=i.getUnpacker(),f=Math.ceil(a.pointsCount/Math.max(1,e));a.totalToRead=f;let d=0;for(;;){const g=i.readData(1e5,0,e);d+=g.count,a.totalRead=d,a.versionAsString=g.versionAsString,a.isCompressed=g.isCompressed;const v=new l(g.buffer,g.count,a);if(n(v,a),!g.hasMoreData||d>=f)break}}catch(a){throw a}finally{i.close()}}function WJ(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,i=!1;switch(n){case 8:i=!1;break;case 16:i=!0;break;case"auto":if(t.getPoint(0).color)for(let a=0;a<e;a++){const{color:l}=t.getPoint(a);(l[0]>255||l[1]>255||l[2]>255)&&(i=!0)}break;default:console.warn("las: illegal value for options.las.colorDepth");break}return i}const XS={...NJ,parse:async(t,e)=>zw(t,e),parseSync:(t,e)=>zw(t,e)},GJ=typeof __VERSION__<"u"?__VERSION__:"latest",ZJ={name:"PLY",id:"ply",module:"ply",version:GJ,worker:!0,extensions:["ply"],mimeTypes:["text/plain","application/octet-stream"],text:!0,binary:!0,tests:["ply"],options:{ply:{}}};function XJ(t,e){const n=HJ(t);return BS(e,n)}function HJ(t){const e={};return e.ply_comments=JSON.stringify(t.comments),e.ply_elements=JSON.stringify(t.elements),t.format!==void 0&&(e.ply_format=t.format),t.version!==void 0&&(e.ply_version=t.version),t.headerLength!==void 0&&(e.ply_headerLength=t.headerLength.toString(10)),e}function HS(t,e,n){const i=YJ(e),a=Ac(i),l=e.indices.length||e.vertices.length/3,f=e.indices&&e.indices.length>0,d=f?4:0,g=f?"triangle-list":"point-list",v=XJ(t,i),T={loader:"ply",loaderData:t,header:{vertexCount:l,boundingBox:a},schema:v,attributes:i,indices:{value:new Uint32Array(0),size:0},mode:d,topology:g};return e.indices.length>0&&(T.indices={value:new Uint32Array(e.indices),size:1}),T}function YJ(t){const e={};for(const n of Object.keys(t))switch(n){case"vertices":t.vertices.length>0&&(e.POSITION={value:new Float32Array(t.vertices),size:3});break;case"normals":t.normals.length>0&&(e.NORMAL={value:new Float32Array(t.normals),size:3});break;case"uvs":t.uvs.length>0&&(e.TEXCOORD_0={value:new Float32Array(t.uvs),size:2});break;case"colors":t.colors.length>0&&(e.COLOR_0={value:new Uint8Array(t.colors),size:3,normalized:!0});break;case"indices":break;default:t[n].length>0&&(e[n]={value:new Float32Array(t[n]),size:1});break}return e}function gp(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n,i;if(t instanceof ArrayBuffer){const a=new TextDecoder().decode(t);n=jw(a,e),i=n.format==="ascii"?Ww(a,n):KJ(t,n)}else n=jw(t,e),i=Ww(t,n);return HS(n,i)}function jw(t,e){const n=/ply([\s\S]*)end_header\s/;let i="",a=0;const l=n.exec(t);l!==null&&(i=l[1],a=l[0].length);const f=i.split(`
`);return $J(f,a,e)}function $J(t,e,n){const i={comments:[],elements:[],headerLength:e};let a,l,f=null;for(let d=0;d<t.length;d++){let g=t[d];if(g=g.trim(),g!=="")switch(l=g.split(/\s+/),a=l.shift(),g=l.join(" "),a){case"format":i.format=l[0],i.version=l[1];break;case"comment":i.comments.push(g);break;case"element":f&&i.elements.push(f),f={name:l[0],count:parseInt(l[1],10),properties:[]};break;case"property":if(f){const v=JJ(l);n!=null&&n.propertyNameMapping&&v.name in(n==null?void 0:n.propertyNameMapping)&&(v.name=n==null?void 0:n.propertyNameMapping[v.name]),f.properties.push(v)}break;default:console.log("unhandled",a,l)}}return f&&i.elements.push(f),i}function YS(t){const e={indices:[],vertices:[],normals:[],uvs:[],colors:[]};for(const n of t.elements)if(n.name==="vertex")for(const i of n.properties)switch(i.name){case"x":case"y":case"z":case"nx":case"ny":case"nz":case"s":case"t":case"red":case"green":case"blue":break;default:e[i.name]=[];break}return e}function JJ(t){const e=t[0];switch(e){case"list":return{type:e,name:t[3],countType:t[1],itemType:t[2]};default:return{type:e,name:t[1]}}}function mp(t,e){switch(e){case"char":case"uchar":case"short":case"ushort":case"int":case"uint":case"int8":case"uint8":case"int16":case"uint16":case"int32":case"uint32":return parseInt(t,10);case"float":case"double":case"float32":case"float64":return parseFloat(t);default:throw new Error(e)}}function QJ(t,e){const n=e.split(/\s+/),i={};for(let a=0;a<t.length;a++)if(t[a].type==="list"){const l=[],f=mp(n.shift(),t[a].countType);for(let d=0;d<f;d++)l.push(mp(n.shift(),t[a].itemType));i[t[a].name]=l}else i[t[a].name]=mp(n.shift(),t[a].type);return i}function Ww(t,e){const n=YS(e);let i;const a=/end_header\s([\s\S]*)$/;let l="";(i=a.exec(t))!==null&&(l=i[1]);const f=l.split(`
`);let d=0,g=0;for(let v=0;v<f.length;v++){let T=f[v];if(T=T.trim(),T!==""){g>=e.elements[d].count&&(d++,g=0);const S=QJ(e.elements[d].properties,T);$S(n,e.elements[d].name,S),g++}}return n}function $S(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(e==="vertex")for(const i of Object.keys(n))switch(i){case"x":t.vertices.push(n.x,n.y,n.z);break;case"y":case"z":break;case"nx":"nx"in n&&"ny"in n&&"nz"in n&&t.normals.push(n.nx,n.ny,n.nz);break;case"ny":case"nz":break;case"s":"s"in n&&"t"in n&&t.uvs.push(n.s,n.t);break;case"t":break;case"red":"red"in n&&"green"in n&&"blue"in n&&t.colors.push(n.red,n.green,n.blue);break;case"green":case"blue":break;default:t[i].push(n[i])}else if(e==="face"){const i=n.vertex_indices||n.vertex_index;i.length===3?t.indices.push(i[0],i[1],i[2]):i.length===4&&(t.indices.push(i[0],i[1],i[3]),t.indices.push(i[1],i[2],i[3]))}}function Ap(t,e,n,i){switch(n){case"int8":case"char":return[t.getInt8(e),1];case"uint8":case"uchar":return[t.getUint8(e),1];case"int16":case"short":return[t.getInt16(e,i),2];case"uint16":case"ushort":return[t.getUint16(e,i),2];case"int32":case"int":return[t.getInt32(e,i),4];case"uint32":case"uint":return[t.getUint32(e,i),4];case"float32":case"float":return[t.getFloat32(e,i),4];case"float64":case"double":return[t.getFloat64(e,i),8];default:throw new Error(n)}}function qJ(t,e,n,i){const a={};let l,f=0;for(let d=0;d<n.length;d++)if(n[d].type==="list"){const g=[];l=Ap(t,e+f,n[d].countType,i);const v=l[0];f+=l[1];for(let T=0;T<v;T++)l=Ap(t,e+f,n[d].itemType,i),g.push(l[0]),f+=l[1];a[n[d].name]=g}else l=Ap(t,e+f,n[d].type,i),a[n[d].name]=l[0],f+=l[1];return[a,f]}function KJ(t,e){const n=YS(e),i=e.format==="binary_little_endian",a=new DataView(t,e.headerLength);let l,f=0;for(let d=0;d<e.elements.length;d++){const g=e.elements[d].count;for(let v=0;v<g;v++){l=qJ(a,f,e.elements[d].properties,i),f+=l[1];const T=l[0];$S(n,e.elements[d].name,T)}}return n}let La;async function*eQ(t,e){const n=DY(BY(t)),i=await tQ(n,e);let a;switch(i.format){case"ascii":a=await rQ(n,i);break;default:throw new Error("Binary PLY can not yet be parsed in streaming mode")}yield HS(i,a)}async function tQ(t,e){const n={comments:[],elements:[]};return await zY(t,i=>{if(i=i.trim(),i==="end_header")return!0;if(i==="")return!1;const a=i.split(/\s+/),l=a.shift();switch(i=a.join(" "),l){case"ply":break;case"format":n.format=a[0],n.version=a[1];break;case"comment":n.comments.push(i);break;case"element":La&&n.elements.push(La),La={name:a[0],count:parseInt(a[1],10),properties:[]};break;case"property":const f=nQ(a,e.propertyNameMapping);La.properties.push(f);break;default:console.log("unhandled",l,a)}return!1}),La&&n.elements.push(La),n}function nQ(t,e){const n=t[0];switch(n){case"list":return{type:n,name:t[3],countType:t[1],itemType:t[2]};default:return{type:n,name:t[1]}}}async function rQ(t,e){const n={indices:[],vertices:[],normals:[],uvs:[],colors:[]};let i=0,a=0;for await(let l of t)if(l=l.trim(),l!==""){a>=e.elements[i].count&&(i++,a=0);const f=iQ(e.elements[i].properties,l);sQ(n,e.elements[i].name,f),a++}return n}function yp(t,e){switch(e){case"char":case"uchar":case"short":case"ushort":case"int":case"uint":case"int8":case"uint8":case"int16":case"uint16":case"int32":case"uint32":return parseInt(t,10);case"float":case"double":case"float32":case"float64":return parseFloat(t);default:throw new Error(e)}}function iQ(t,e){const n=e.split(/\s+/),i={};for(let a=0;a<t.length;a++)if(t[a].type==="list"){const l=[],f=yp(n.shift(),t[a].countType);for(let d=0;d<f;d++)l.push(yp(n.shift(),t[a].itemType));i[t[a].name]=l}else i[t[a].name]=yp(n.shift(),t[a].type);return i}function sQ(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};switch(e){case"vertex":t.vertices.push(n.x,n.y,n.z),"nx"in n&&"ny"in n&&"nz"in n&&t.normals.push(n.nx,n.ny,n.nz),"s"in n&&"t"in n&&t.uvs.push(n.s,n.t),"red"in n&&"green"in n&&"blue"in n&&t.colors.push(n.red/255,n.green/255,n.blue/255);break;case"face":const i=n.vertex_indices||n.vertex_index;i.length===3?t.indices.push(i[0],i[1],i[2]):i.length===4&&(t.indices.push(i[0],i[1],i[3]),t.indices.push(i[1],i[2],i[3]));break}}const oQ={...ZJ,parse:async(t,e)=>gp(t,e==null?void 0:e.ply),parseTextSync:(t,e)=>gp(t,e==null?void 0:e.ply),parseSync:(t,e)=>gp(t,e==null?void 0:e.ply),parseInBatches:(t,e)=>eQ(t,e==null?void 0:e.ply)};function aQ(t,e){const n=t.length,i=new Uint8Array(e);let a=0,l=0,f,d,g;do if(f=t[a++],f<32){if(f++,l+f>e)throw new Error("Output buffer is not large enough");if(a+f>n)throw new Error("Invalid compressed data");do i[l++]=t[a++];while(--f)}else{if(d=f>>5,g=l-((f&31)<<8)-1,a>=n)throw new Error("Invalid compressed data");if(d===7&&(d+=t[a++],a>=n))throw new Error("Invalid compressed data");if(g-=t[a++],l+d+2>e)throw new Error("Output buffer is not large enough");if(g<0)throw new Error("Invalid compressed data");if(g>=l)throw new Error("Invalid compressed data");do i[l++]=i[g++];while(--d+2)}while(a<n);return i}function uQ(t,e){const n=t.offset,i=[];return n.x!==void 0&&i.push({name:"POSITION",type:{type:"fixed-size-list",listSize:3,children:[{name:"xyz",type:"float32"}]}}),n.normal_x!==void 0&&i.push({name:"NORMAL",type:{type:"fixed-size-list",listSize:3,children:[{name:"xyz",type:"float32"}]}}),n.rgb!==void 0&&i.push({name:"COLOR_0",type:{type:"fixed-size-list",listSize:3,children:[{name:"rgb",type:"uint8"}]}}),{fields:i,metadata:e}}const Nn=!0;function Gw(t){const e=new TextDecoder().decode(t),n=fQ(e);let i={};switch(n.data){case"ascii":i=hQ(n,e);break;case"binary":i=dQ(n,t);break;case"binary_compressed":i=pQ(n,t);break;default:throw new Error(`PCD: ${n.data} files are not supported`)}i=cQ(i);const a=lQ(n,i),l=Object.fromEntries([["mode","0"],["boundingBox",JSON.stringify(a.boundingBox)]]),f=uQ(n,l);return{loader:"pcd",loaderData:n,header:a,schema:f,mode:0,topology:"point-list",attributes:i}}function lQ(t,e){return typeof t.width=="number"&&typeof t.height=="number"?{vertexCount:t.width*t.height,boundingBox:Ac(e)}:{vertexCount:t.vertexCount,boundingBox:t.boundingBox}}function cQ(t){const e={POSITION:{value:new Float32Array(t.position),size:3}};return t.normal&&t.normal.length>0&&(e.NORMAL={value:new Float32Array(t.normal),size:3}),t.color&&t.color.length>0&&(e.COLOR_0={value:new Uint8Array(t.color),size:3}),t.intensity&&t.intensity.length>0&&(e.COLOR_0={value:new Uint8Array(t.color),size:3}),t.label&&t.label.length>0&&(e.COLOR_0={value:new Uint8Array(t.label),size:3}),e}function fQ(t){const e=t.search(/[\r\n]DATA\s(\S*)\s/i),n=/[\r\n]DATA\s(\S*)\s/i.exec(t.substr(e-1)),i={};if(i.data=n&&n[1],n!==null&&(i.headerLen=(n&&n[0].length)+e),i.str=t.substr(0,i.headerLen),i.str=i.str.replace(/\#.*/gi,""),i.version=/VERSION (.*)/i.exec(i.str),i.fields=/FIELDS (.*)/i.exec(i.str),i.size=/SIZE (.*)/i.exec(i.str),i.type=/TYPE (.*)/i.exec(i.str),i.count=/COUNT (.*)/i.exec(i.str),i.width=/WIDTH (.*)/i.exec(i.str),i.height=/HEIGHT (.*)/i.exec(i.str),i.viewpoint=/VIEWPOINT (.*)/i.exec(i.str),i.points=/POINTS (.*)/i.exec(i.str),i.version!==null&&(i.version=parseFloat(i.version[1])),i.fields!==null&&(i.fields=i.fields[1].split(" ")),i.type!==null&&(i.type=i.type[1].split(" ")),i.width!==null&&(i.width=parseInt(i.width[1],10)),i.height!==null&&(i.height=parseInt(i.height[1],10)),i.viewpoint!==null&&(i.viewpoint=i.viewpoint[1]),i.points!==null&&(i.points=parseInt(i.points[1],10)),i.points===null&&typeof i.width=="number"&&typeof i.height=="number"&&(i.points=i.width*i.height),i.size!==null&&(i.size=i.size[1].split(" ").map(l=>parseInt(l,10))),i.count!==null)i.count=i.count[1].split(" ").map(l=>parseInt(l,10));else if(i.count=[],i.fields!==null)for(let l=0;l<i.fields.length;l++)i.count.push(1);i.offset={};let a=0;if(i.fields!==null&&i.size!==null)for(let l=0;l<i.fields.length;l++)i.data==="ascii"?i.offset[i.fields[l]]=l:(i.offset[i.fields[l]]=a,a+=i.size[l]);return i.rowSize=a,i}function hQ(t,e){const n=[],i=[],a=[],l=[],f=[],d=t.offset,v=e.substr(t.headerLen).split(`
`);for(let T=0;T<v.length;T++)if(v[T]!==""){const S=v[T].split(" ");if(d.x!==void 0&&(n.push(parseFloat(S[d.x])),n.push(parseFloat(S[d.y])),n.push(parseFloat(S[d.z]))),d.rgb!==void 0){const x=parseFloat(S[d.rgb]),M=new Float32Array([x]),B=new DataView(M.buffer,0);a.push(B.getUint8(0)),a.push(B.getUint8(1)),a.push(B.getUint8(2))}d.normal_x!==void 0&&(i.push(parseFloat(S[d.normal_x])),i.push(parseFloat(S[d.normal_y])),i.push(parseFloat(S[d.normal_z]))),d.intensity!==void 0&&l.push(parseFloat(S[d.intensity])),d.label!==void 0&&f.push(parseInt(S[d.label]))}return{position:n,normal:i,color:a}}function dQ(t,e){const n=[],i=[],a=[],l=[],f=[],d=new DataView(e,t.headerLen),g=t.offset;for(let v=0,T=0;v<t.points;v++,T+=t.rowSize)g.x!==void 0&&(n.push(d.getFloat32(T+g.x,Nn)),n.push(d.getFloat32(T+g.y,Nn)),n.push(d.getFloat32(T+g.z,Nn))),g.rgb!==void 0&&(a.push(d.getUint8(T+g.rgb+0)),a.push(d.getUint8(T+g.rgb+1)),a.push(d.getUint8(T+g.rgb+2))),g.normal_x!==void 0&&(i.push(d.getFloat32(T+g.normal_x,Nn)),i.push(d.getFloat32(T+g.normal_y,Nn)),i.push(d.getFloat32(T+g.normal_z,Nn))),g.intensity!==void 0&&l.push(d.getFloat32(T+g.intensity,Nn)),g.label!==void 0&&f.push(d.getInt32(T+g.label,Nn));return{position:n,normal:i,color:a,intensity:l,label:f}}/** Parse compressed PCD data in in binary_compressed form ( https://pointclouds.org/documentation/tutorials/pcd_file_format.html)
 * from https://github.com/mrdoob/three.js/blob/master/examples/jsm/loaders/PCDLoader.js
 * @license MIT (http://opensource.org/licenses/MIT)
 * @param pcdHeader
 * @param data
 * @returns [attributes]
 */function pQ(t,e){const n=[],i=[],a=[],l=[],f=[],d=new Uint32Array(e.slice(t.headerLen,t.headerLen+8)),g=d[0],v=d[1],T=aQ(new Uint8Array(e,t.headerLen+8,g),v),S=new DataView(T.buffer),x=t.offset;for(let M=0;M<t.points;M++){if(x.x!==void 0&&(n.push(S.getFloat32(t.points*x.x+t.size[0]*M,Nn)),n.push(S.getFloat32(t.points*x.y+t.size[1]*M,Nn)),n.push(S.getFloat32(t.points*x.z+t.size[2]*M,Nn))),x.rgb!==void 0&&(a.push(S.getUint8(t.points*x.rgb+t.size[3]*M+0)/255),a.push(S.getUint8(t.points*x.rgb+t.size[3]*M+1)/255),a.push(S.getUint8(t.points*x.rgb+t.size[3]*M+2)/255)),x.normal_x!==void 0&&(i.push(S.getFloat32(t.points*x.normal_x+t.size[4]*M,Nn)),i.push(S.getFloat32(t.points*x.normal_y+t.size[5]*M,Nn)),i.push(S.getFloat32(t.points*x.normal_z+t.size[6]*M,Nn))),x.intensity!==void 0){const B=t.fields.indexOf("intensity");l.push(S.getFloat32(t.points*x.intensity+t.size[B]*M,Nn))}if(x.label!==void 0){const B=t.fields.indexOf("label");f.push(S.getInt32(t.points*x.label+t.size[B]*M,Nn))}}return{position:n,normal:i,color:a,intensity:l,label:f}}const gQ=typeof __VERSION__<"u"?__VERSION__:"latest",mQ={name:"PCD (Point Cloud Data)",id:"pcd",module:"pcd",version:gQ,worker:!0,extensions:["pcd"],mimeTypes:["text/plain"],options:{pcd:{}}},AQ={...mQ,parse:async t=>Gw(t),parseSync:Gw},yQ=/^[og]\s*(.+)?/,vQ=/^mtllib /,_Q=/^usemtl /;class Im{constructor(e){let{index:n,name:i="",mtllib:a,smooth:l,groupStart:f}=e;this.index=n,this.name=i,this.mtllib=a,this.smooth=l,this.groupStart=f,this.groupEnd=-1,this.groupCount=-1,this.inherited=!1}clone(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.index;return new Im({index:e,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0})}}class wQ{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";this.name=e,this.geometry={vertices:[],normals:[],colors:[],uvs:[]},this.materials=[],this.smooth=!0,this.fromDeclaration=null}startMaterial(e,n){const i=this._finalize(!1);i&&(i.inherited||i.groupCount<=0)&&this.materials.splice(i.index,1);const a=new Im({index:this.materials.length,name:e,mtllib:Array.isArray(n)&&n.length>0?n[n.length-1]:"",smooth:i!==void 0?i.smooth:this.smooth,groupStart:i!==void 0?i.groupEnd:0});return this.materials.push(a),a}currentMaterial(){if(this.materials.length>0)return this.materials[this.materials.length-1]}_finalize(e){const n=this.currentMaterial();if(n&&n.groupEnd===-1&&(n.groupEnd=this.geometry.vertices.length/3,n.groupCount=n.groupEnd-n.groupStart,n.inherited=!1),e&&this.materials.length>1)for(let i=this.materials.length-1;i>=0;i--)this.materials[i].groupCount<=0&&this.materials.splice(i,1);return e&&this.materials.length===0&&this.materials.push({name:"",smooth:this.smooth}),n}}class TQ{constructor(){this.objects=[],this.object=null,this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.materialLibraries=[],this.startObject("",!1)}startObject(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(this.object&&!this.object.fromDeclaration){this.object.name=e,this.object.fromDeclaration=n;return}const i=this.object&&typeof this.object.currentMaterial=="function"?this.object.currentMaterial():void 0;if(this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0),this.object=new wQ(e),this.object.fromDeclaration=n,i&&i.name&&typeof i.clone=="function"){const a=i.clone(0);a.inherited=!0,this.object.materials.push(a)}this.objects.push(this.object)}finalize(){this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0)}parseVertexIndex(e,n){const i=parseInt(e);return(i>=0?i-1:i+n/3)*3}parseNormalIndex(e,n){const i=parseInt(e);return(i>=0?i-1:i+n/3)*3}parseUVIndex(e,n){const i=parseInt(e);return(i>=0?i-1:i+n/2)*2}addVertex(e,n,i){const a=this.vertices,l=this.object.geometry.vertices;l.push(a[e+0],a[e+1],a[e+2]),l.push(a[n+0],a[n+1],a[n+2]),l.push(a[i+0],a[i+1],a[i+2])}addVertexPoint(e){const n=this.vertices;this.object.geometry.vertices.push(n[e+0],n[e+1],n[e+2])}addVertexLine(e){const n=this.vertices;this.object.geometry.vertices.push(n[e+0],n[e+1],n[e+2])}addNormal(e,n,i){const a=this.normals,l=this.object.geometry.normals;l.push(a[e+0],a[e+1],a[e+2]),l.push(a[n+0],a[n+1],a[n+2]),l.push(a[i+0],a[i+1],a[i+2])}addColor(e,n,i){const a=this.colors,l=this.object.geometry.colors;l.push(a[e+0],a[e+1],a[e+2]),l.push(a[n+0],a[n+1],a[n+2]),l.push(a[i+0],a[i+1],a[i+2])}addUV(e,n,i){const a=this.uvs,l=this.object.geometry.uvs;l.push(a[e+0],a[e+1]),l.push(a[n+0],a[n+1]),l.push(a[i+0],a[i+1])}addUVLine(e){const n=this.uvs;this.object.geometry.uvs.push(n[e+0],n[e+1])}addFace(e,n,i,a,l,f,d,g,v){const T=this.vertices.length;let S=this.parseVertexIndex(e,T),x=this.parseVertexIndex(n,T),M=this.parseVertexIndex(i,T);if(this.addVertex(S,x,M),a!==void 0&&a!==""){const B=this.uvs.length;S=this.parseUVIndex(a,B),x=this.parseUVIndex(l,B),M=this.parseUVIndex(f,B),this.addUV(S,x,M)}if(d!==void 0&&d!==""){const B=this.normals.length;S=this.parseNormalIndex(d,B),x=d===g?S:this.parseNormalIndex(g,B),M=d===v?S:this.parseNormalIndex(v,B),this.addNormal(S,x,M)}this.colors.length>0&&this.addColor(S,x,M)}addPointGeometry(e){this.object.geometry.type="Points";const n=this.vertices.length;for(const i of e)this.addVertexPoint(this.parseVertexIndex(i,n))}addLineGeometry(e,n){this.object.geometry.type="Line";const i=this.vertices.length,a=this.uvs.length;for(const l of e)this.addVertexLine(this.parseVertexIndex(l,i));for(const l of n)this.addUVLine(this.parseUVIndex(l,a))}}function EQ(t){const e=new TQ;t.indexOf(`\r
`)!==-1&&(t=t.replace(/\r\n/g,`
`)),t.indexOf(`\\
`)!==-1&&(t=t.replace(/\\\n/g,""));const n=t.split(`
`);let i="",a="",l=0,f=[];const d=typeof"".trimLeft=="function";for(let T=0,S=n.length;T<S;T++)if(i=n[T],i=d?i.trimLeft():i.trim(),l=i.length,l!==0&&(a=i.charAt(0),a!=="#"))if(a==="v"){const x=i.split(/\s+/);switch(x[0]){case"v":e.vertices.push(parseFloat(x[1]),parseFloat(x[2]),parseFloat(x[3])),x.length>=7&&e.colors.push(parseFloat(x[4]),parseFloat(x[5]),parseFloat(x[6]));break;case"vn":e.normals.push(parseFloat(x[1]),parseFloat(x[2]),parseFloat(x[3]));break;case"vt":e.uvs.push(parseFloat(x[1]),parseFloat(x[2]));break}}else if(a==="f"){const M=i.substr(1).trim().split(/\s+/),B=[];for(let N=0,F=M.length;N<F;N++){const V=M[N];if(V.length>0){const j=V.split("/");B.push(j)}}const W=B[0];for(let N=1,F=B.length-1;N<F;N++){const V=B[N],j=B[N+1];e.addFace(W[0],V[0],j[0],W[1],V[1],j[1],W[2],V[2],j[2])}}else if(a==="l"){const x=i.substring(1).trim().split(" ");let M;const B=[];if(i.indexOf("/")===-1)M=x;else{M=[];for(let W=0,N=x.length;W<N;W++){const F=x[W].split("/");F[0]!==""&&M.push(F[0]),F[1]!==""&&B.push(F[1])}}e.addLineGeometry(M,B)}else if(a==="p"){const M=i.substr(1).trim().split(" ");e.addPointGeometry(M)}else if((f=yQ.exec(i))!==null){const x=(" "+f[0].substr(1).trim()).substr(1);e.startObject(x)}else if(_Q.test(i))e.object.startMaterial(i.substring(7).trim(),e.materialLibraries);else if(vQ.test(i))e.materialLibraries.push(i.substring(7).trim());else if(a==="s"){if(f=i.split(" "),f.length>1){const M=f[1].trim().toLowerCase();e.object.smooth=M!=="0"&&M!=="off"}else e.object.smooth=!0;const x=e.object.currentMaterial();x&&(x.smooth=e.object.smooth)}else{if(i==="\0")continue;throw new Error(`Unexpected line: "${i}"`)}e.finalize();const g=[],v=[];for(const T of e.objects){const{geometry:S}=T;if(S.vertices.length===0)continue;const x={header:{vertexCount:S.vertices.length/3},attributes:{}};switch(S.type){case"Points":x.mode=0;break;case"Line":x.mode=1;break;default:x.mode=4;break}x.attributes.POSITION={value:new Float32Array(S.vertices),size:3},S.normals.length>0&&(x.attributes.NORMAL={value:new Float32Array(S.normals),size:3}),S.colors.length>0&&(x.attributes.COLOR_0={value:new Float32Array(S.colors),size:3}),S.uvs.length>0&&(x.attributes.TEXCOORD_0={value:new Float32Array(S.uvs),size:2}),x.materials=[];for(const M of T.materials){const B={name:M.name,flatShading:!M.smooth};x.materials.push(B),v.push(B)}x.name=T.name,g.push(x)}return{meshes:g,materials:v}}function SQ(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n={};for(const a in e)a!=="value"&&(n[a]=JSON.stringify(e[a]));const i=[];for(const a in t){const l=t[a],f=xQ(a,l);i.push(f)}return{fields:i,metadata:n}}function xQ(t,e){const n={};for(const l in e)l!=="value"&&(n[l]=JSON.stringify(e[l]));let{type:i}=sJ(e.value);return e.size===1||e.size===void 0||(i={type:"fixed-size-list",listSize:e.size,children:[{name:"values",type:i}]}),{name:t,type:i,nullable:!1,metadata:n}}function Zw(t,e){const{meshes:n}=EQ(t),i=n.reduce((d,g)=>d+g.header.vertexCount,0),a=RQ(n,i),l={vertexCount:i,boundingBox:Ac(a)},f=SQ(a,{mode:4,boundingBox:l.boundingBox});return{loaderData:{header:{}},schema:f,header:l,mode:4,topology:"point-list",attributes:a}}function RQ(t,e){const n=new Float32Array(e*3);let i,a,l,f=0;for(const g of t){const{POSITION:v,NORMAL:T,COLOR_0:S,TEXCOORD_0:x}=g.attributes;n.set(v.value,f*3),T&&(i=i||new Float32Array(e*3),i.set(T.value,f*3)),S&&(a=a||new Float32Array(e*3),a.set(S.value,f*3)),x&&(l=l||new Float32Array(e*2),l.set(x.value,f*2)),f+=v.value.length/3}const d={};return d.POSITION={value:n,size:3},i&&(d.NORMAL={value:i,size:3}),a&&(d.COLOR_0={value:a,size:3}),l&&(d.TEXCOORD_0={value:l,size:2}),d}const bQ=typeof __VERSION__<"u"?__VERSION__:"latest",kQ={name:"OBJ",id:"obj",module:"obj",version:bQ,worker:!0,extensions:["obj"],mimeTypes:["text/plain"],testText:PQ,options:{obj:{}}};function PQ(t){return t[0]==="v"}const MQ={...kQ,parse:async(t,e)=>Zw(new TextDecoder().decode(t)),parseTextSync:(t,e)=>Zw(t)};var JS={exports:{}};(function(t,e){(function(n){t.exports=n(null)})(function n(i){var a=/^\0+/g,l=/[\0\r\f]/g,f=/: */g,d=/zoo|gra/,g=/([,: ])(transform)/g,v=/,+\s*(?![^(]*[)])/g,T=/ +\s*(?![^(]*[)])/g,S=/ *[\0] */g,x=/,\r+?/g,M=/([\t\r\n ])*\f?&/g,B=/:global\(((?:[^\(\)\[\]]*|\[.*\]|\([^\(\)]*\))*)\)/g,W=/\W+/g,N=/@(k\w+)\s*(\S*)\s*/,F=/::(place)/g,V=/:(read-only)/g,j=/\s+(?=[{\];=:>])/g,X=/([[}=:>])\s+/g,Q=/(\{[^{]+?);(?=\})/g,K=/\s{2,}/g,ae=/([^\(])(:+) */g,fe=/[svh]\w+-[tblr]{2}/,se=/\(\s*(.*)\s*\)/g,_e=/([\s\S]*?);/g,we=/-self|flex-/g,qe=/[^]*?(:[rp][el]a[\w-]+)[^]*/,kt=/stretch|:\s*\w+\-(?:conte|avail)/,Pe=/([^-])(image-set\()/,Ee="-webkit-",On="-moz-",mt="-ms-",Ht=59,Bt=125,En=123,ct=40,Dt=41,rr=91,ue=93,Ae=10,Ve=13,Ie=9,Ke=64,je=32,gt=38,xt=45,Yt=95,tn=42,dn=44,pn=58,nn=39,Hn=34,Sn=47,zi=62,Qr=43,$t=126,ms=0,kr=12,ji=11,As=107,ro=109,Pr=115,xn=112,io=111,so=105,Wi=99,ys=100,Eu=112,Jt=1,ir=1,sr=0,Yn=1,rn=1,oo=1,la=0,Gi=0,vs=0,pi=[],sn=[],on=0,Mr=null,Zi=-2,Su=-1,xu=0,ao=1,gi=2,uo=3,qr=0,Xe=1,Kr="",Ln="",$n="";function Vn(Ne,Re,Te,ke,he){for(var Ge,ee,Ue=0,Me=0,et=0,Fe=0,Pt=0,ot=0,ze=0,ft=0,Zt=0,Ir=0,Ft=0,Un=0,mi=0,mn=0,Be=0,bn=0,ti=0,ni=0,at=0,Bn=Te.length,Yi=Bn-1,P="",I="",z="",Y="",ie="",me="";Be<Bn;){if(ze=Te.charCodeAt(Be),Be===Yi&&Me+Fe+et+Ue!==0&&(Me!==0&&(ze=Me===Sn?Ae:Sn),Fe=et=Ue=0,Bn++,Yi++),Me+Fe+et+Ue===0){if(Be===Yi&&(bn>0&&(I=I.replace(l,"")),I.trim().length>0)){switch(ze){case je:case Ie:case Ht:case Ve:case Ae:break;default:I+=Te.charAt(Be)}ze=Ht}if(ti===1)switch(ze){case En:case Bt:case Ht:case Hn:case nn:case ct:case Dt:case dn:ti=0;case Ie:case Ve:case Ae:case je:break;default:for(ti=0,at=Be,Pt=ze,Be--,ze=Ht;at<Bn;)switch(Te.charCodeAt(at++)){case Ae:case Ve:case Ht:++Be,ze=Pt,at=Bn;break;case pn:bn>0&&(++Be,ze=Pt);case En:at=Bn}}switch(ze){case En:for(Pt=(I=I.trim()).charCodeAt(0),Ft=1,at=++Be;Be<Bn;){switch(ze=Te.charCodeAt(Be)){case En:Ft++;break;case Bt:Ft--;break;case Sn:switch(ot=Te.charCodeAt(Be+1)){case tn:case Sn:Be=Hi(ot,Be,Yi,Te)}break;case rr:ze++;case ct:ze++;case Hn:case nn:for(;Be++<Yi&&Te.charCodeAt(Be)!==ze;);}if(Ft===0)break;Be++}switch(z=Te.substring(at,Be),Pt===ms&&(Pt=(I=I.replace(a,"").trim()).charCodeAt(0)),Pt){case Ke:switch(bn>0&&(I=I.replace(l,"")),ot=I.charCodeAt(1)){case ys:case ro:case Pr:case xt:Ge=Re;break;default:Ge=pi}if(at=(z=Vn(Re,Ge,z,ot,he+1)).length,vs>0&&at===0&&(at=I.length),on>0&&(Ge=lo(pi,I,ni),ee=gn(uo,z,Ge,Re,ir,Jt,at,ot,he,ke),I=Ge.join(""),ee!==void 0&&(at=(z=ee.trim()).length)===0&&(ot=0,z="")),at>0)switch(ot){case Pr:I=I.replace(se,Xi);case ys:case ro:case xt:z=I+"{"+z+"}";break;case As:z=(I=I.replace(N,"$1 $2"+(Xe>0?Kr:"")))+"{"+z+"}",rn===1||rn===2&&ei("@"+z,3)?z="@"+Ee+z+"@"+z:z="@"+z;break;default:z=I+z,ke===Eu&&(Y+=z,z="")}else z="";break;default:z=Vn(Re,lo(Re,I,ni),z,ke,he+1)}ie+=z,Un=0,ti=0,mn=0,bn=0,ni=0,mi=0,I="",z="",ze=Te.charCodeAt(++Be);break;case Bt:case Ht:if((at=(I=(bn>0?I.replace(l,""):I).trim()).length)>1)switch(mn===0&&((Pt=I.charCodeAt(0))===xt||Pt>96&&Pt<123)&&(at=(I=I.replace(" ",":")).length),on>0&&(ee=gn(ao,I,Re,Ne,ir,Jt,Y.length,ke,he,ke))!==void 0&&(at=(I=ee.trim()).length)===0&&(I="\0\0"),Pt=I.charCodeAt(0),ot=I.charCodeAt(1),Pt){case ms:break;case Ke:if(ot===so||ot===Wi){me+=I+Te.charAt(Be);break}default:if(I.charCodeAt(at-1)===pn)break;Y+=_s(I,Pt,ot,I.charCodeAt(2))}Un=0,ti=0,mn=0,bn=0,ni=0,I="",ze=Te.charCodeAt(++Be)}}switch(ze){case Ve:case Ae:if(Me+Fe+et+Ue+Gi===0)switch(Ir){case Dt:case nn:case Hn:case Ke:case $t:case zi:case tn:case Qr:case Sn:case xt:case pn:case dn:case Ht:case En:case Bt:break;default:mn>0&&(ti=1)}Me===Sn?Me=0:Yn+Un===0&&ke!==As&&I.length>0&&(bn=1,I+="\0"),on*qr>0&&gn(xu,I,Re,Ne,ir,Jt,Y.length,ke,he,ke),Jt=1,ir++;break;case Ht:case Bt:if(Me+Fe+et+Ue===0){Jt++;break}default:switch(Jt++,P=Te.charAt(Be),ze){case Ie:case je:if(Fe+Ue+Me===0)switch(ft){case dn:case pn:case Ie:case je:P="";break;default:ze!==je&&(P=" ")}break;case ms:P="\\0";break;case kr:P="\\f";break;case ji:P="\\v";break;case gt:Fe+Me+Ue===0&&Yn>0&&(ni=1,bn=1,P="\f"+P);break;case 108:if(Fe+Me+Ue+sr===0&&mn>0)switch(Be-mn){case 2:ft===xn&&Te.charCodeAt(Be-3)===pn&&(sr=ft);case 8:Zt===io&&(sr=Zt)}break;case pn:Fe+Me+Ue===0&&(mn=Be);break;case dn:Me+et+Fe+Ue===0&&(bn=1,P+="\r");break;case Hn:case nn:Me===0&&(Fe=Fe===ze?0:Fe===0?ze:Fe);break;case rr:Fe+Me+et===0&&Ue++;break;case ue:Fe+Me+et===0&&Ue--;break;case Dt:Fe+Me+Ue===0&&et--;break;case ct:if(Fe+Me+Ue===0){if(Un===0)switch(2*ft+3*Zt){case 533:break;default:Ft=0,Un=1}et++}break;case Ke:Me+et+Fe+Ue+mn+mi===0&&(mi=1);break;case tn:case Sn:if(Fe+Ue+et>0)break;switch(Me){case 0:switch(2*ze+3*Te.charCodeAt(Be+1)){case 235:Me=Sn;break;case 220:at=Be,Me=tn}break;case tn:ze===Sn&&ft===tn&&at+2!==Be&&(Te.charCodeAt(at+2)===33&&(Y+=Te.substring(at,Be+1)),P="",Me=0)}}if(Me===0){if(Yn+Fe+Ue+mi===0&&ke!==As&&ze!==Ht)switch(ze){case dn:case $t:case zi:case Qr:case Dt:case ct:if(Un===0){switch(ft){case Ie:case je:case Ae:case Ve:P+="\0";break;default:P="\0"+P+(ze===dn?"":"\0")}bn=1}else switch(ze){case ct:mn+7===Be&&ft===108&&(mn=0),Un=++Ft;break;case Dt:(Un=--Ft)==0&&(bn=1,P+="\0")}break;case Ie:case je:switch(ft){case ms:case En:case Bt:case Ht:case dn:case kr:case Ie:case je:case Ae:case Ve:break;default:Un===0&&(bn=1,P+="\0")}}I+=P,ze!==je&&ze!==Ie&&(Ir=ze)}}Zt=ft,ft=ze,Be++}if(at=Y.length,vs>0&&at===0&&ie.length===0&&Re[0].length!==0&&(ke!==ro||Re.length===1&&(Yn>0?Ln:$n)===Re[0])&&(at=Re.join(",").length+2),at>0){if(Ge=Yn===0&&ke!==As?function(Oe){for(var ut,Ye,Mt=0,Dn=Oe.length,Ru=Array(Dn);Mt<Dn;++Mt){for(var ca=Oe[Mt].split(S),fa="",ws=0,bu=0,yc=0,ha=0,or=ca.length;ws<or;++ws)if(!((bu=(Ye=ca[ws]).length)===0&&or>1)){if(yc=fa.charCodeAt(fa.length-1),ha=Ye.charCodeAt(0),ut="",ws!==0)switch(yc){case tn:case $t:case zi:case Qr:case je:case ct:break;default:ut=" "}switch(ha){case gt:Ye=ut+Ln;case $t:case zi:case Qr:case je:case Dt:case ct:break;case rr:Ye=ut+Ye+Ln;break;case pn:switch(2*Ye.charCodeAt(1)+3*Ye.charCodeAt(2)){case 530:if(oo>0){Ye=ut+Ye.substring(8,bu-1);break}default:(ws<1||ca[ws-1].length<1)&&(Ye=ut+Ln+Ye)}break;case dn:ut="";default:bu>1&&Ye.indexOf(":")>0?Ye=ut+Ye.replace(ae,"$1"+Ln+"$2"):Ye=ut+Ye+Ln}fa+=Ye}Ru[Mt]=fa.replace(l,"").trim()}return Ru}(Re):Re,on>0&&(ee=gn(gi,Y,Ge,Ne,ir,Jt,at,ke,he,ke))!==void 0&&(Y=ee).length===0)return me+Y+ie;if(Y=Ge.join(",")+"{"+Y+"}",rn*sr!=0){switch(rn===2&&!ei(Y,2)&&(sr=0),sr){case io:Y=Y.replace(V,":"+On+"$1")+Y;break;case xn:Y=Y.replace(F,"::"+Ee+"input-$1")+Y.replace(F,"::"+On+"$1")+Y.replace(F,":"+mt+"input-$1")+Y}sr=0}}return me+Y+ie}function lo(Ne,Re,Te){var ke=Re.trim().split(x),he=ke,Ge=ke.length,ee=Ne.length;switch(ee){case 0:case 1:for(var Ue=0,Me=ee===0?"":Ne[0]+" ";Ue<Ge;++Ue)he[Ue]=co(Me,he[Ue],Te,ee).trim();break;default:Ue=0;var et=0;for(he=[];Ue<Ge;++Ue)for(var Fe=0;Fe<ee;++Fe)he[et++]=co(Ne[Fe]+" ",ke[Ue],Te,ee).trim()}return he}function co(Ne,Re,Te,ke){var he=Re,Ge=he.charCodeAt(0);switch(Ge<33&&(Ge=(he=he.trim()).charCodeAt(0)),Ge){case gt:switch(Yn+ke){case 0:case 1:if(Ne.trim().length===0)break;default:return he.replace(M,"$1"+Ne.trim())}break;case pn:switch(he.charCodeAt(1)){case 103:if(oo>0&&Yn>0)return he.replace(B,"$1").replace(M,"$1"+$n);break;default:return Ne.trim()+he.replace(M,"$1"+Ne.trim())}default:if(Te*Yn>0&&he.indexOf("\f")>0)return he.replace(M,(Ne.charCodeAt(0)===pn?"":"$1")+Ne.trim())}return Ne+he}function _s(Ne,Re,Te,ke){var he,Ge=0,ee=Ne+";",Ue=2*Re+3*Te+4*ke;if(Ue===944)return function(Me){var et=Me.length,Fe=Me.indexOf(":",9)+1,Pt=Me.substring(0,Fe).trim(),ot=Me.substring(Fe,et-1).trim();switch(Me.charCodeAt(9)*Xe){case 0:break;case xt:if(Me.charCodeAt(10)!==110)break;default:for(var ze=ot.split((ot="",v)),ft=0,Fe=0,et=ze.length;ft<et;Fe=0,++ft){for(var Zt=ze[ft],Ir=Zt.split(T);Zt=Ir[Fe];){var Ft=Zt.charCodeAt(0);if(Xe===1&&(Ft>Ke&&Ft<90||Ft>96&&Ft<123||Ft===Yt||Ft===xt&&Zt.charCodeAt(1)!==xt))switch(isNaN(parseFloat(Zt))+(Zt.indexOf("(")!==-1)){case 1:switch(Zt){case"infinite":case"alternate":case"backwards":case"running":case"normal":case"forwards":case"both":case"none":case"linear":case"ease":case"ease-in":case"ease-out":case"ease-in-out":case"paused":case"reverse":case"alternate-reverse":case"inherit":case"initial":case"unset":case"step-start":case"step-end":break;default:Zt+=Kr}}Ir[Fe++]=Zt}ot+=(ft===0?"":",")+Ir.join(" ")}}return ot=Pt+ot+";",rn===1||rn===2&&ei(ot,1)?Ee+ot+ot:ot}(ee);if(rn===0||rn===2&&!ei(ee,1))return ee;switch(Ue){case 1015:return ee.charCodeAt(10)===97?Ee+ee+ee:ee;case 951:return ee.charCodeAt(3)===116?Ee+ee+ee:ee;case 963:return ee.charCodeAt(5)===110?Ee+ee+ee:ee;case 1009:if(ee.charCodeAt(4)!==100)break;case 969:case 942:return Ee+ee+ee;case 978:return Ee+ee+On+ee+ee;case 1019:case 983:return Ee+ee+On+ee+mt+ee+ee;case 883:return ee.charCodeAt(8)===xt?Ee+ee+ee:ee.indexOf("image-set(",11)>0?ee.replace(Pe,"$1"+Ee+"$2")+ee:ee;case 932:if(ee.charCodeAt(4)===xt)switch(ee.charCodeAt(5)){case 103:return Ee+"box-"+ee.replace("-grow","")+Ee+ee+mt+ee.replace("grow","positive")+ee;case 115:return Ee+ee+mt+ee.replace("shrink","negative")+ee;case 98:return Ee+ee+mt+ee.replace("basis","preferred-size")+ee}return Ee+ee+mt+ee+ee;case 964:return Ee+ee+mt+"flex-"+ee+ee;case 1023:if(ee.charCodeAt(8)!==99)break;return he=ee.substring(ee.indexOf(":",15)).replace("flex-","").replace("space-between","justify"),Ee+"box-pack"+he+Ee+ee+mt+"flex-pack"+he+ee;case 1005:return d.test(ee)?ee.replace(f,":"+Ee)+ee.replace(f,":"+On)+ee:ee;case 1e3:switch(Ge=(he=ee.substring(13).trim()).indexOf("-")+1,he.charCodeAt(0)+he.charCodeAt(Ge)){case 226:he=ee.replace(fe,"tb");break;case 232:he=ee.replace(fe,"tb-rl");break;case 220:he=ee.replace(fe,"lr");break;default:return ee}return Ee+ee+mt+he+ee;case 1017:if(ee.indexOf("sticky",9)===-1)return ee;case 975:switch(Ge=(ee=Ne).length-10,Ue=(he=(ee.charCodeAt(Ge)===33?ee.substring(0,Ge):ee).substring(Ne.indexOf(":",7)+1).trim()).charCodeAt(0)+(0|he.charCodeAt(7))){case 203:if(he.charCodeAt(8)<111)break;case 115:ee=ee.replace(he,Ee+he)+";"+ee;break;case 207:case 102:ee=ee.replace(he,Ee+(Ue>102?"inline-":"")+"box")+";"+ee.replace(he,Ee+he)+";"+ee.replace(he,mt+he+"box")+";"+ee}return ee+";";case 938:if(ee.charCodeAt(5)===xt)switch(ee.charCodeAt(6)){case 105:return he=ee.replace("-items",""),Ee+ee+Ee+"box-"+he+mt+"flex-"+he+ee;case 115:return Ee+ee+mt+"flex-item-"+ee.replace(we,"")+ee;default:return Ee+ee+mt+"flex-line-pack"+ee.replace("align-content","").replace(we,"")+ee}break;case 973:case 989:if(ee.charCodeAt(3)!==xt||ee.charCodeAt(4)===122)break;case 931:case 953:if(kt.test(Ne)===!0)return(he=Ne.substring(Ne.indexOf(":")+1)).charCodeAt(0)===115?_s(Ne.replace("stretch","fill-available"),Re,Te,ke).replace(":fill-available",":stretch"):ee.replace(he,Ee+he)+ee.replace(he,On+he.replace("fill-",""))+ee;break;case 962:if(ee=Ee+ee+(ee.charCodeAt(5)===102?mt+ee:"")+ee,Te+ke===211&&ee.charCodeAt(13)===105&&ee.indexOf("transform",10)>0)return ee.substring(0,ee.indexOf(";",27)+1).replace(g,"$1"+Ee+"$2")+ee}return ee}function ei(Ne,Re){var Te=Ne.indexOf(Re===1?":":"{"),ke=Ne.substring(0,Re!==3?Te:10),he=Ne.substring(Te+1,Ne.length-1);return Mr(Re!==2?ke:ke.replace(qe,"$1"),he,Re)}function Xi(Ne,Re){var Te=_s(Re,Re.charCodeAt(0),Re.charCodeAt(1),Re.charCodeAt(2));return Te!==Re+";"?Te.replace(_e," or ($1)").substring(4):"("+Re+")"}function gn(Ne,Re,Te,ke,he,Ge,ee,Ue,Me,et){for(var Fe,Pt=0,ot=Re;Pt<on;++Pt)switch(Fe=sn[Pt].call(Rn,Ne,ot,Te,ke,he,Ge,ee,Ue,Me,et)){case void 0:case!1:case!0:case null:break;default:ot=Fe}if(ot!==Re)return ot}function Hi(Ne,Re,Te,ke){for(var he=Re+1;he<Te;++he)switch(ke.charCodeAt(he)){case Sn:if(Ne===tn&&ke.charCodeAt(he-1)===tn&&Re+2!==he)return he+1;break;case Ae:if(Ne===Sn)return he+1}return he}function Cr(Ne){for(var Re in Ne){var Te=Ne[Re];switch(Re){case"keyframe":Xe=0|Te;break;case"global":oo=0|Te;break;case"cascade":Yn=0|Te;break;case"compress":la=0|Te;break;case"semicolon":Gi=0|Te;break;case"preserve":vs=0|Te;break;case"prefix":Mr=null,Te?typeof Te!="function"?rn=1:(rn=2,Mr=Te):rn=0}}return Cr}function Rn(Ne,Re){if(this!==void 0&&this.constructor===Rn)return n(Ne);var Te=Ne,ke=Te.charCodeAt(0);ke<33&&(ke=(Te=Te.trim()).charCodeAt(0)),Xe>0&&(Kr=Te.replace(W,ke===rr?"":"-")),ke=1,Yn===1?$n=Te:Ln=Te;var he,Ge=[$n];on>0&&(he=gn(Su,Re,Ge,Ge,ir,Jt,0,0,0,0))!==void 0&&typeof he=="string"&&(Re=he);var ee=Vn(pi,Ge,Re,0,0);return on>0&&(he=gn(Zi,ee,Ge,Ge,ir,Jt,ee.length,0,0,0))!==void 0&&typeof(ee=he)!="string"&&(ke=0),Kr="",$n="",Ln="",sr=0,ir=1,Jt=1,la*ke==0?ee:ee.replace(l,"").replace(j,"").replace(X,"$1").replace(Q,"$1").replace(K," ")}return Rn.use=function Ne(Re){switch(Re){case void 0:case null:on=sn.length=0;break;default:if(typeof Re=="function")sn[on++]=Re;else if(typeof Re=="object")for(var Te=0,ke=Re.length;Te<ke;++Te)Ne(Re[Te]);else qr=0|!!Re}return Ne},Rn.set=Cr,i!==void 0&&Cr(i),Rn})})(JS);var CQ=JS.exports;const QS=Yl(CQ);var qS={exports:{}};(function(t,e){(function(n){t.exports=n()})(function(){return function(n){var i="/*|*/",a=i+"}";function l(f){if(f)try{n(f+"}")}catch{}}return function(d,g,v,T,S,x,M,B,W,N){switch(d){case 1:if(W===0&&g.charCodeAt(0)===64)return n(g+";"),"";break;case 2:if(B===0)return g+i;break;case 3:switch(B){case 102:case 112:return n(v[0]+g),"";default:return g+(N===0?i:"")}case-2:g.split(a).forEach(l)}}}})})(qS);var IQ=qS.exports;const NQ=Yl(IQ);var FQ={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},KS={exports:{}},pt={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hn=typeof Symbol=="function"&&Symbol.for,Nm=hn?Symbol.for("react.element"):60103,Fm=hn?Symbol.for("react.portal"):60106,uh=hn?Symbol.for("react.fragment"):60107,lh=hn?Symbol.for("react.strict_mode"):60108,ch=hn?Symbol.for("react.profiler"):60114,fh=hn?Symbol.for("react.provider"):60109,hh=hn?Symbol.for("react.context"):60110,Om=hn?Symbol.for("react.async_mode"):60111,dh=hn?Symbol.for("react.concurrent_mode"):60111,ph=hn?Symbol.for("react.forward_ref"):60112,gh=hn?Symbol.for("react.suspense"):60113,OQ=hn?Symbol.for("react.suspense_list"):60120,mh=hn?Symbol.for("react.memo"):60115,Ah=hn?Symbol.for("react.lazy"):60116,LQ=hn?Symbol.for("react.block"):60121,VQ=hn?Symbol.for("react.fundamental"):60117,UQ=hn?Symbol.for("react.responder"):60118,BQ=hn?Symbol.for("react.scope"):60119;function br(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case Nm:switch(t=t.type,t){case Om:case dh:case uh:case ch:case lh:case gh:return t;default:switch(t=t&&t.$$typeof,t){case hh:case ph:case Ah:case mh:case fh:return t;default:return e}}case Fm:return e}}}function ex(t){return br(t)===dh}pt.AsyncMode=Om;pt.ConcurrentMode=dh;pt.ContextConsumer=hh;pt.ContextProvider=fh;pt.Element=Nm;pt.ForwardRef=ph;pt.Fragment=uh;pt.Lazy=Ah;pt.Memo=mh;pt.Portal=Fm;pt.Profiler=ch;pt.StrictMode=lh;pt.Suspense=gh;pt.isAsyncMode=function(t){return ex(t)||br(t)===Om};pt.isConcurrentMode=ex;pt.isContextConsumer=function(t){return br(t)===hh};pt.isContextProvider=function(t){return br(t)===fh};pt.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===Nm};pt.isForwardRef=function(t){return br(t)===ph};pt.isFragment=function(t){return br(t)===uh};pt.isLazy=function(t){return br(t)===Ah};pt.isMemo=function(t){return br(t)===mh};pt.isPortal=function(t){return br(t)===Fm};pt.isProfiler=function(t){return br(t)===ch};pt.isStrictMode=function(t){return br(t)===lh};pt.isSuspense=function(t){return br(t)===gh};pt.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===uh||t===dh||t===ch||t===lh||t===gh||t===OQ||typeof t=="object"&&t!==null&&(t.$$typeof===Ah||t.$$typeof===mh||t.$$typeof===fh||t.$$typeof===hh||t.$$typeof===ph||t.$$typeof===VQ||t.$$typeof===UQ||t.$$typeof===BQ||t.$$typeof===LQ)};pt.typeOf=br;KS.exports=pt;var tx=KS.exports,Xw=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function DQ(t,e){return!!(t===e||Xw(t)&&Xw(e))}function zQ(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!DQ(t[n],e[n]))return!1;return!0}function nx(t,e){e===void 0&&(e=zQ);var n,i=[],a,l=!1;function f(){for(var d=[],g=0;g<arguments.length;g++)d[g]=arguments[g];return l&&n===this&&e(d,i)||(a=t.apply(this,d),l=!0,n=this,i=d),a}return f}var rx={exports:{}},jQ="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",WQ=jQ,GQ=WQ;function ix(){}function sx(){}sx.resetWarningCache=ix;var ZQ=function(){function t(i,a,l,f,d,g){if(g!==GQ){var v=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw v.name="Invariant Violation",v}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:sx,resetWarningCache:ix};return n.PropTypes=n,n};rx.exports=ZQ();var XQ=rx.exports;const g0=Yl(XQ);function HQ(t){var e={};return function(n){return e[n]===void 0&&(e[n]=t(n)),e[n]}}var YQ=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|inert|itemProp|itemScope|itemType|itemID|itemRef|on|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,$Q=HQ(function(t){return YQ.test(t)||t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)<91});function Lm(t){return Object.prototype.toString.call(t).slice(8,-1)}function gl(t){return Lm(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function Hw(t){return Lm(t)==="Array"}function Yw(t){return Lm(t)==="Symbol"}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function $w(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var i=Array(t),a=0,e=0;e<n;e++)for(var l=arguments[e],f=0,d=l.length;f<d;f++,a++)i[a]=l[f];return i}function Jw(t,e,n,i){var a=i.propertyIsEnumerable(e)?"enumerable":"nonenumerable";a==="enumerable"&&(t[e]=n),a==="nonenumerable"&&Object.defineProperty(t,e,{value:n,enumerable:!1,writable:!0,configurable:!0})}function ox(t,e,n){if(!gl(e))return n&&Hw(n)&&n.forEach(function(v){e=v(t,e)}),e;var i={};if(gl(t)){var a=Object.getOwnPropertyNames(t),l=Object.getOwnPropertySymbols(t);i=$w(a,l).reduce(function(v,T){var S=t[T];return(!Yw(T)&&!Object.getOwnPropertyNames(e).includes(T)||Yw(T)&&!Object.getOwnPropertySymbols(e).includes(T))&&Jw(v,T,S,t),v},{})}var f=Object.getOwnPropertyNames(e),d=Object.getOwnPropertySymbols(e),g=$w(f,d).reduce(function(v,T){var S=e[T],x=gl(t)?t[T]:void 0;return n&&Hw(n)&&n.forEach(function(M){S=M(x,S)}),x!==void 0&&gl(S)&&(S=ox(x,S,n)),Jw(v,T,S,e),v},i);return g}function JQ(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var i=null,a=t;return gl(t)&&t.extensions&&Object.keys(t).length===1&&(a={},i=t.extensions),e.reduce(function(l,f){return ox(l,f,i)},a)}var Qw=function(t,e){for(var n=[t[0]],i=0,a=e.length;i<a;i+=1)n.push(e[i],t[i+1]);return n},ax=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ua=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},QQ=function(){function t(e,n){for(var i=0;i<n.length;i++){var a=n[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),Yr=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},yh=function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},qQ=function(t,e){var n={};for(var i in t)e.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n},Zl=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t},Vm=function(t){return(typeof t>"u"?"undefined":ax(t))==="object"&&t.constructor===Object},Yg=Object.freeze([]),kl=Object.freeze({});function ds(t){return typeof t=="function"}function ux(t){return t.displayName||t.name||"Component"}function KQ(t){return typeof t=="function"&&!(t.prototype&&t.prototype.isReactComponent)}function vh(t){return t&&typeof t.styledComponentId=="string"}var Xl=typeof process<"u"&&({}.REACT_APP_SC_ATTR||{}.SC_ATTR)||"data-styled",_h="data-styled-version",eq="data-styled-streamed",vu=typeof window<"u"&&"HTMLElement"in window,lx=typeof SC_DISABLE_SPEEDY=="boolean"&&SC_DISABLE_SPEEDY||typeof process<"u"&&({}.REACT_APP_SC_DISABLE_SPEEDY||{}.SC_DISABLE_SPEEDY)||!1,no=function(t){yh(e,t);function e(n){ua(this,e);for(var i=arguments.length,a=Array(i>1?i-1:0),l=1;l<i;l++)a[l-1]=arguments[l];var f,f=Zl(this,t.call(this,"An error occurred. See https://github.com/styled-components/styled-components/blob/master/packages/styled-components/src/utils/errors.md#"+n+" for more information."+(a.length>0?" Additional arguments: "+a.join(", "):"")));return Zl(f)}return e}(Error),tq=/^[^\S\n]*?\/\* sc-component-id:\s*(\S+)\s+\*\//gm,nq=function(t){var e=""+(t||""),n=[];return e.replace(tq,function(i,a,l){return n.push({componentId:a,matchIndex:l}),i}),n.map(function(i,a){var l=i.componentId,f=i.matchIndex,d=n[a+1],g=d?e.slice(f,d.matchIndex):e.slice(f);return{componentId:l,cssFromDOM:g}})},rq=/^\s*\/\/.*$/gm,cx=new QS({global:!1,cascade:!0,keyframe:!1,prefix:!1,compress:!1,semicolon:!0}),fx=new QS({global:!1,cascade:!0,keyframe:!1,prefix:!0,compress:!1,semicolon:!1}),$g=[],hx=function(e){if(e===-2){var n=$g;return $g=[],n}},dx=NQ(function(t){$g.push(t)}),px=void 0,ru=void 0,gx=void 0,iq=function(e,n,i){return n>0&&i.slice(0,n).indexOf(ru)!==-1&&i.slice(n-ru.length,n)!==ru?"."+px:e},sq=function(e,n,i){e===2&&i.length&&i[0].lastIndexOf(ru)>0&&(i[0]=i[0].replace(gx,iq))};fx.use([sq,dx,hx]);cx.use([dx,hx]);var oq=function(e){return cx("",e)};function aq(t,e,n){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"&",a=t.join("").replace(rq,""),l=e&&n?n+" "+e+" { "+a+" }":a;return px=i,ru=e,gx=new RegExp("\\"+ru+"\\b","g"),fx(n||!e?"":e,l)}var Um=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null},Bm=function(e,n,i){if(i){var a=e[n]||(e[n]=Object.create(null));a[i]=!0}},Nf=function(e,n){e[n]=Object.create(null)},Dm=function(e){return function(n,i){return e[n]!==void 0&&e[n][i]}},mx=function(e){var n="";for(var i in e)n+=Object.keys(e[i]).join(" ")+" ";return n.trim()},uq=function(e){var n=Object.create(null);for(var i in e)n[i]=Yr({},e[i]);return n},vp=function(e){if(e.sheet)return e.sheet;for(var n=e.ownerDocument.styleSheets.length,i=0;i<n;i+=1){var a=e.ownerDocument.styleSheets[i];if(a.ownerNode===e)return a}throw new no(10)},lq=function(e,n,i){if(!n)return!1;var a=e.cssRules.length;try{e.insertRule(n,i<=a?i:a)}catch{return!1}return!0},cq=function(e,n,i){for(var a=n-i,l=n;l>a;l-=1)e.deleteRule(l)},zm=function(e){return`
/* sc-component-id: `+e+` */
`},_p=function(e,n){for(var i=0,a=0;a<=n;a+=1)i+=e[a];return i},fq=function(e,n,i){var a=document;e?a=e.ownerDocument:n&&(a=n.ownerDocument);var l=a.createElement("style");l.setAttribute(Xl,""),l.setAttribute(_h,"4.4.1");var f=Um();if(f&&l.setAttribute("nonce",f),l.appendChild(a.createTextNode("")),e&&!n)e.appendChild(l);else{if(!n||!e||!n.parentNode)throw new no(6);n.parentNode.insertBefore(l,i?n:n.nextSibling)}return l},jm=function(e,n){return function(i){var a=Um(),l=[a&&'nonce="'+a+'"',Xl+'="'+mx(n)+'"',_h+'="4.4.1"',i],f=l.filter(Boolean).join(" ");return"<style "+f+">"+e()+"</style>"}},Wm=function(e,n){return function(){var i,a=(i={},i[Xl]=mx(n),i[_h]="4.4.1",i),l=Um();return l&&(a.nonce=l),Js.createElement("style",Yr({},a,{dangerouslySetInnerHTML:{__html:e()}}))}},Gm=function(e){return function(){return Object.keys(e)}},hq=function(e,n){var i=Object.create(null),a=Object.create(null),l=[],f=n!==void 0,d=!1,g=function(M){var B=a[M];return B!==void 0?B:(a[M]=l.length,l.push(0),Nf(i,M),a[M])},v=function(M,B,W){for(var N=g(M),F=vp(e),V=_p(l,N),j=0,X=[],Q=B.length,K=0;K<Q;K+=1){var ae=B[K],fe=f;fe&&ae.indexOf("@import")!==-1?X.push(ae):lq(F,ae,V+j)&&(fe=!1,j+=1)}f&&X.length>0&&(d=!0,n().insertRules(M+"-import",X)),l[N]+=j,Bm(i,M,W)},T=function(M){var B=a[M];if(B!==void 0&&e.isConnected!==!1){var W=l[B],N=vp(e),F=_p(l,B)-1;cq(N,F,W),l[B]=0,Nf(i,M),f&&d&&n().removeRules(M+"-import")}},S=function(){var M=vp(e),B=M.cssRules,W="";for(var N in a){W+=zm(N);for(var F=a[N],V=_p(l,F),j=l[F],X=V-j;X<V;X+=1){var Q=B[X];Q!==void 0&&(W+=Q.cssText)}}return W};return{clone:function(){throw new no(5)},css:S,getIds:Gm(a),hasNameForId:Dm(i),insertMarker:g,insertRules:v,removeRules:T,sealed:!1,styleTag:e,toElement:Wm(S,i),toHTML:jm(S,i)}},qw=function(e,n){return e.createTextNode(zm(n))},dq=function(e,n){var i=Object.create(null),a=Object.create(null),l=n!==void 0,f=!1,d=function(x){var M=a[x];return M!==void 0?M:(a[x]=qw(e.ownerDocument,x),e.appendChild(a[x]),i[x]=Object.create(null),a[x])},g=function(x,M,B){for(var W=d(x),N=[],F=M.length,V=0;V<F;V+=1){var j=M[V],X=l;if(X&&j.indexOf("@import")!==-1)N.push(j);else{X=!1;var Q=V===F-1?"":" ";W.appendData(""+j+Q)}}Bm(i,x,B),l&&N.length>0&&(f=!0,n().insertRules(x+"-import",N))},v=function(x){var M=a[x];if(M!==void 0){var B=qw(e.ownerDocument,x);e.replaceChild(B,M),a[x]=B,Nf(i,x),l&&f&&n().removeRules(x+"-import")}},T=function(){var x="";for(var M in a)x+=a[M].data;return x};return{clone:function(){throw new no(5)},css:T,getIds:Gm(a),hasNameForId:Dm(i),insertMarker:d,insertRules:g,removeRules:v,sealed:!1,styleTag:e,toElement:Wm(T,i),toHTML:jm(T,i)}},pq=function t(e,n){var i=e===void 0?Object.create(null):e,a=n===void 0?Object.create(null):n,l=function(x){var M=a[x];return M!==void 0?M:a[x]=[""]},f=function(x,M,B){var W=l(x);W[0]+=M.join(" "),Bm(i,x,B)},d=function(x){var M=a[x];M!==void 0&&(M[0]="",Nf(i,x))},g=function(){var x="";for(var M in a){var B=a[M][0];B&&(x+=zm(M)+B)}return x},v=function(){var x=uq(i),M=Object.create(null);for(var B in a)M[B]=[a[B][0]];return t(x,M)},T={clone:v,css:g,getIds:Gm(a),hasNameForId:Dm(i),insertMarker:l,insertRules:f,removeRules:d,sealed:!1,styleTag:null,toElement:Wm(g,i),toHTML:jm(g,i)};return T},Kw=function(e,n,i,a,l){if(vu&&!i){var f=fq(e,n,a);return lx?dq(f,l):hq(f,l)}return pq()},gq=function(e,n,i){for(var a=0,l=i.length;a<l;a+=1){var f=i[a],d=f.componentId,g=f.cssFromDOM,v=oq(g);e.insertRules(d,v)}for(var T=0,S=n.length;T<S;T+=1){var x=n[T];x.parentNode&&x.parentNode.removeChild(x)}},mq=/\s+/,Ff=void 0;vu?Ff=lx?40:1e3:Ff=-1;var eT=0,wp=void 0,Of=function(){function t(){var e=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:vu?document.head:null,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;ua(this,t),this.getImportRuleTag=function(){var a=e.importRuleTag;if(a!==void 0)return a;var l=e.tags[0],f=!0;return e.importRuleTag=Kw(e.target,l?l.styleTag:null,e.forceServer,f)},eT+=1,this.id=eT,this.forceServer=i,this.target=i?null:n,this.tagMap={},this.deferred={},this.rehydratedNames={},this.ignoreRehydratedNames={},this.tags=[],this.capacity=1,this.clones=[]}return t.prototype.rehydrate=function(){if(!vu||this.forceServer)return this;var n=[],i=[],a=!1,l=document.querySelectorAll("style["+Xl+"]["+_h+'="4.4.1"]'),f=l.length;if(!f)return this;for(var d=0;d<f;d+=1){var g=l[d];a||(a=!!g.getAttribute(eq));for(var v=(g.getAttribute(Xl)||"").trim().split(mq),T=v.length,S=0,x;S<T;S+=1)x=v[S],this.rehydratedNames[x]=!0;i.push.apply(i,nq(g.textContent)),n.push(g)}var M=i.length;if(!M)return this;var B=this.makeTag(null);gq(B,n,i),this.capacity=Math.max(1,Ff-M),this.tags.push(B);for(var W=0;W<M;W+=1)this.tagMap[i[W].componentId]=B;return this},t.reset=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;wp=new t(void 0,n).rehydrate()},t.prototype.clone=function(){var n=new t(this.target,this.forceServer);return this.clones.push(n),n.tags=this.tags.map(function(i){for(var a=i.getIds(),l=i.clone(),f=0;f<a.length;f+=1)n.tagMap[a[f]]=l;return l}),n.rehydratedNames=Yr({},this.rehydratedNames),n.deferred=Yr({},this.deferred),n},t.prototype.sealAllTags=function(){this.capacity=1,this.tags.forEach(function(n){n.sealed=!0})},t.prototype.makeTag=function(n){var i=n?n.styleTag:null,a=!1;return Kw(this.target,i,this.forceServer,a,this.getImportRuleTag)},t.prototype.getTagForId=function(n){var i=this.tagMap[n];if(i!==void 0&&!i.sealed)return i;var a=this.tags[this.tags.length-1];return this.capacity-=1,this.capacity===0&&(this.capacity=Ff,a=this.makeTag(a),this.tags.push(a)),this.tagMap[n]=a},t.prototype.hasId=function(n){return this.tagMap[n]!==void 0},t.prototype.hasNameForId=function(n,i){if(this.ignoreRehydratedNames[n]===void 0&&this.rehydratedNames[i])return!0;var a=this.tagMap[n];return a!==void 0&&a.hasNameForId(n,i)},t.prototype.deferredInject=function(n,i){if(this.tagMap[n]===void 0){for(var a=this.clones,l=0;l<a.length;l+=1)a[l].deferredInject(n,i);this.getTagForId(n).insertMarker(n),this.deferred[n]=i}},t.prototype.inject=function(n,i,a){for(var l=this.clones,f=0;f<l.length;f+=1)l[f].inject(n,i,a);var d=this.getTagForId(n);if(this.deferred[n]!==void 0){var g=this.deferred[n].concat(i);d.insertRules(n,g,a),this.deferred[n]=void 0}else d.insertRules(n,i,a)},t.prototype.remove=function(n){var i=this.tagMap[n];if(i!==void 0){for(var a=this.clones,l=0;l<a.length;l+=1)a[l].remove(n);i.removeRules(n),this.ignoreRehydratedNames[n]=!0,this.deferred[n]=void 0}},t.prototype.toHTML=function(){return this.tags.map(function(n){return n.toHTML()}).join("")},t.prototype.toReactElements=function(){var n=this.id;return this.tags.map(function(i,a){var l="sc-"+n+"-"+a;return it.cloneElement(i.toElement(),{key:l})})},QQ(t,null,[{key:"master",get:function(){return wp||(wp=new t().rehydrate())}},{key:"instance",get:function(){return t.master}}]),t}(),Aq=function(){function t(e,n){var i=this;ua(this,t),this.inject=function(a){a.hasNameForId(i.id,i.name)||a.inject(i.id,i.rules,i.name)},this.toString=function(){throw new no(12,String(i.name))},this.name=e,this.rules=n,this.id="sc-keyframes-"+e}return t.prototype.getName=function(){return this.name},t}(),yq=/([A-Z])/g,vq=/^ms-/;function tT(t){return t.replace(yq,"-$1").toLowerCase().replace(vq,"-ms-")}function _q(t,e){return e==null||typeof e=="boolean"||e===""?"":typeof e=="number"&&e!==0&&!(t in FQ)?e+"px":String(e).trim()}var Ax=function(e){return e==null||e===!1||e===""},wq=function t(e,n){var i=[],a=Object.keys(e);return a.forEach(function(l){if(!Ax(e[l])){if(Vm(e[l]))return i.push.apply(i,t(e[l],l)),i;if(ds(e[l]))return i.push(tT(l)+":",e[l],";"),i;i.push(tT(l)+": "+_q(l,e[l])+";")}return i}),n?[n+" {"].concat(i,["}"]):i};function Hl(t,e,n){if(Array.isArray(t)){for(var i=[],a=0,l=t.length,f;a<l;a+=1)f=Hl(t[a],e,n),f!==null&&(Array.isArray(f)?i.push.apply(i,f):i.push(f));return i}if(Ax(t))return null;if(vh(t))return"."+t.styledComponentId;if(ds(t))if(KQ(t)&&e){var d=t(e);return Hl(d,e,n)}else return t;return t instanceof Aq?n?(t.inject(n),t.getName()):t:Vm(t)?wq(t):t.toString()}function Tq(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return ds(t)||Vm(t)?Hl(Qw(Yg,[t].concat(n))):Hl(Qw(t,n))}function Jg(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:kl;if(!tx.isValidElementType(e))throw new no(1,String(e));var i=function(){return t(e,n,Tq.apply(void 0,arguments))};return i.withConfig=function(a){return Jg(t,e,Yr({},n,a))},i.attrs=function(a){return Jg(t,e,Yr({},n,{attrs:Array.prototype.concat(n.attrs,a).filter(Boolean)}))},i}function Eq(t){for(var e=t.length|0,n=e|0,i=0,a;e>=4;)a=t.charCodeAt(i)&255|(t.charCodeAt(++i)&255)<<8|(t.charCodeAt(++i)&255)<<16|(t.charCodeAt(++i)&255)<<24,a=1540483477*(a&65535)+((1540483477*(a>>>16)&65535)<<16),a^=a>>>24,a=1540483477*(a&65535)+((1540483477*(a>>>16)&65535)<<16),n=1540483477*(n&65535)+((1540483477*(n>>>16)&65535)<<16)^a,e-=4,++i;switch(e){case 3:n^=(t.charCodeAt(i+2)&255)<<16;case 2:n^=(t.charCodeAt(i+1)&255)<<8;case 1:n^=t.charCodeAt(i)&255,n=1540483477*(n&65535)+((1540483477*(n>>>16)&65535)<<16)}return n^=n>>>13,n=1540483477*(n&65535)+((1540483477*(n>>>16)&65535)<<16),(n^n>>>15)>>>0}var m0=52,nT=function(e){return String.fromCharCode(e+(e>25?39:97))};function Sq(t){var e="",n=void 0;for(n=t;n>m0;n=Math.floor(n/m0))e=nT(n%m0)+e;return nT(n%m0)+e}function xq(t){for(var e in t)if(ds(t[e]))return!0;return!1}function yx(t,e){for(var n=0;n<t.length;n+=1){var i=t[n];if(Array.isArray(i)&&!yx(i,e))return!1;if(ds(i)&&!vh(i))return!1}return!e.some(function(a){return ds(a)||xq(a)})}var rT=function(e){return Sq(Eq(e))},iT=function(){function t(e,n,i){ua(this,t),this.rules=e,this.isStatic=yx(e,n),this.componentId=i,Of.master.hasId(i)||Of.master.deferredInject(i,[])}return t.prototype.generateAndInjectStyles=function(n,i){var a=this.isStatic,l=this.componentId,f=this.lastClassName;if(vu&&a&&typeof f=="string"&&i.hasNameForId(l,f))return f;var d=Hl(this.rules,n,i),g=rT(this.componentId+d.join(""));return i.hasNameForId(l,g)||i.inject(this.componentId,aq(d,"."+g,void 0,l),g),this.lastClassName=g,g},t.generateName=function(n){return rT(n)},t}(),Rq=function(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:kl,i=n?t.theme===n.theme:!1,a=t.theme&&!i?t.theme:e||n.theme;return a},bq=/[[\].#*$><+~=|^:(),"'`-]+/g,kq=/(^-|-$)/g;function Qg(t){return t.replace(bq,"-").replace(kq,"")}function Lf(t){return typeof t=="string"&&!0}function Pq(t){return Lf(t)?"styled."+t:"Styled("+ux(t)+")"}var Tp,sT={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDerivedStateFromProps:!0,propTypes:!0,type:!0},Mq={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},oT=(Tp={},Tp[tx.ForwardRef]={$$typeof:!0,render:!0},Tp),Cq=Object.defineProperty,Iq=Object.getOwnPropertyNames,aT=Object.getOwnPropertySymbols,Nq=aT===void 0?function(){return[]}:aT,Fq=Object.getOwnPropertyDescriptor,Oq=Object.getPrototypeOf,Lq=Object.prototype,Vq=Array.prototype;function vx(t,e,n){if(typeof e!="string"){var i=Oq(e);i&&i!==Lq&&vx(t,i,n);for(var a=Vq.concat(Iq(e),Nq(e)),l=oT[t.$$typeof]||sT,f=oT[e.$$typeof]||sT,d=a.length,g=void 0,v=void 0;d--;)if(v=a[d],!Mq[v]&&!(n&&n[v])&&!(f&&f[v])&&!(l&&l[v])&&(g=Fq(e,v),g))try{Cq(t,v,g)}catch{}return t}return t}function Uq(t){return!!(t&&t.prototype&&t.prototype.isReactComponent)}var qg=it.createContext(),Bq=qg.Consumer;(function(t){yh(e,t);function e(n){ua(this,e);var i=Zl(this,t.call(this,n));return i.getContext=nx(i.getContext.bind(i)),i.renderInner=i.renderInner.bind(i),i}return e.prototype.render=function(){return this.props.children?Js.createElement(qg.Consumer,null,this.renderInner):null},e.prototype.renderInner=function(i){var a=this.getContext(this.props.theme,i);return Js.createElement(qg.Provider,{value:a},this.props.children)},e.prototype.getTheme=function(i,a){if(ds(i)){var l=i(a);return l}if(i===null||Array.isArray(i)||(typeof i>"u"?"undefined":ax(i))!=="object")throw new no(8);return Yr({},a,i)},e.prototype.getContext=function(i,a){return this.getTheme(i,a)},e})(it.Component);var _x=it.createContext(),Dq=_x.Consumer;(function(t){yh(e,t);function e(n){ua(this,e);var i=Zl(this,t.call(this,n));return i.getContext=nx(i.getContext),i}return e.prototype.getContext=function(i,a){if(i)return i;if(a)return new Of(a);throw new no(4)},e.prototype.render=function(){var i=this.props,a=i.children,l=i.sheet,f=i.target;return Js.createElement(_x.Provider,{value:this.getContext(l,f)},a)},e})(it.Component);var uT={};function zq(t,e,n){var i=typeof e!="string"?"sc":Qg(e),a=(uT[i]||0)+1;uT[i]=a;var l=i+"-"+t.generateName(i+a);return n?n+"-"+l:l}var jq=function(t){yh(e,t);function e(){ua(this,e);var n=Zl(this,t.call(this));return n.attrs={},n.renderOuter=n.renderOuter.bind(n),n.renderInner=n.renderInner.bind(n),n}return e.prototype.render=function(){return Js.createElement(Dq,null,this.renderOuter)},e.prototype.renderOuter=function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Of.master;return this.styleSheet=i,this.props.forwardedComponent.componentStyle.isStatic?this.renderInner():Js.createElement(Bq,null,this.renderInner)},e.prototype.renderInner=function(i){var a=this.props.forwardedComponent,l=a.componentStyle,f=a.defaultProps;a.displayName;var d=a.foldedComponentIds,g=a.styledComponentId,v=a.target,T=void 0;l.isStatic?T=this.generateAndInjectStyles(kl,this.props):T=this.generateAndInjectStyles(Rq(this.props,i,f)||kl,this.props);var S=this.props.as||this.attrs.as||v,x=Lf(S),M={},B=Yr({},this.props,this.attrs),W=void 0;for(W in B)W==="forwardedComponent"||W==="as"||(W==="forwardedRef"?M.ref=B[W]:W==="forwardedAs"?M.as=B[W]:(!x||$Q(W))&&(M[W]=B[W]));return this.props.style&&this.attrs.style&&(M.style=Yr({},this.attrs.style,this.props.style)),M.className=Array.prototype.concat(d,g,T!==g?T:null,this.props.className,this.attrs.className).filter(Boolean).join(" "),it.createElement(S,M)},e.prototype.buildExecutionContext=function(i,a,l){var f=this,d=Yr({},a,{theme:i});return l.length&&(this.attrs={},l.forEach(function(g){var v=g,T=!1,S=void 0,x=void 0;ds(v)&&(v=v(d),T=!0);for(x in v)S=v[x],T||ds(S)&&!Uq(S)&&!vh(S)&&(S=S(d)),f.attrs[x]=S,d[x]=S})),d},e.prototype.generateAndInjectStyles=function(i,a){var l=a.forwardedComponent,f=l.attrs,d=l.componentStyle;if(l.warnTooManyClasses,d.isStatic&&!f.length)return d.generateAndInjectStyles(kl,this.styleSheet);var g=d.generateAndInjectStyles(this.buildExecutionContext(i,a,f),this.styleSheet);return g},e}(it.Component);function wx(t,e,n){var i=vh(t),a=!Lf(t),l=e.displayName,f=l===void 0?Pq(t):l,d=e.componentId,g=d===void 0?zq(iT,e.displayName,e.parentComponentId):d,v=e.ParentComponent,T=v===void 0?jq:v,S=e.attrs,x=S===void 0?Yg:S,M=e.displayName&&e.componentId?Qg(e.displayName)+"-"+e.componentId:e.componentId||g,B=i&&t.attrs?Array.prototype.concat(t.attrs,x).filter(Boolean):x,W=new iT(i?t.componentStyle.rules.concat(n):n,B,M),N=void 0,F=function(j,X){return Js.createElement(T,Yr({},j,{forwardedComponent:N,forwardedRef:X}))};return F.displayName=f,N=Js.forwardRef(F),N.displayName=f,N.attrs=B,N.componentStyle=W,N.foldedComponentIds=i?Array.prototype.concat(t.foldedComponentIds,t.styledComponentId):Yg,N.styledComponentId=M,N.target=i?t.target:t,N.withComponent=function(j){var X=e.componentId,Q=qQ(e,["componentId"]),K=X&&X+"-"+(Lf(j)?j:Qg(ux(j))),ae=Yr({},Q,{attrs:B,componentId:K,ParentComponent:T});return wx(j,ae,n)},Object.defineProperty(N,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(j){this._foldedDefaultProps=i?JQ(t.defaultProps,j):j}}),N.toString=function(){return"."+N.styledComponentId},a&&vx(N,t,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,styledComponentId:!0,target:!0,withComponent:!0}),N}var Wq=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],Kg=function(e){return Jg(wx,e)};Wq.forEach(function(t){Kg[t]=Kg(t)});vu&&(window.scCGSHMRCache={});const Tx=Kg,Gq=Tx.div`
  display: flex;
  flex-direction: column;
  position: absolute;
  top: 0;
  right: 0;
  max-width: 320px;
  color: #121212;
  background: #fff;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
  padding: 12px 24px;
  margin: 20px;
  font-size: 13px;
  line-height: 2;
  outline: none;
  z-index: 100;
`,Zq=Tx.select`
  margin-bottom: 6px;
`,Xq={examples:g0.object,selectedCategory:g0.string,selectedExample:g0.string,onExampleChange:g0.func},Hq={examples:{},selectedCategory:null,selectedExample:null,onExampleChange:()=>{}};class Zm extends it.PureComponent{componentDidMount(){const{examples:e={},onExampleChange:n}=this.props;let i=this.props.selectedCategory,a=this.props.selectedExample;if((!i||!a)&&!this._autoSelected&&(i=Object.keys(e)[0],a=Object.keys(e[i])[0],this._autoSelected=!0),i&&a){const l=e[i][a];n({selectedCategory:i,selectedExample:a,example:l})}}_renderDropDown(){const{examples:e={},selectedCategory:n,selectedExample:i,onExampleChange:a}=this.props;if(!n||!i)return!1;const l=`${n}.${i}`;return vn.jsx(Zq,{value:l,onChange:f=>{const g=f.target.value.split("."),v=g[0],T=g[1],S=e[v][T];a({selectedCategory:v,selectedExample:T,example:S})},children:Object.keys(e).map((f,d)=>{const g=e[f];return vn.jsx("optgroup",{label:f,children:Object.keys(g).map((v,T)=>{const S=`${f}.${v}`;return vn.jsx("option",{value:S,children:`${v} (${f})`},T)})},d)})})}_renderHeader(){const{selectedCategory:e,selectedExample:n}=this.props;return!e||!n?null:vn.jsx("div",{children:vn.jsxs("h3",{children:[n," ",vn.jsx("b",{children:e})," "]})})}_renderDropped(){const{droppedFile:e}=this.props;return e?vn.jsxs("div",{children:["Dropped file: ",JSON.stringify(e.name)]}):null}_renderStats(){const{vertexCount:e,loadTimeMs:n}=this.props;let i;return e>=1e7?i=`${(e/1e6).toFixed(0)}M`:e>=1e6?i=`${(e/1e6).toFixed(1)}M`:e>=1e4?i=`${(e/1e3).toFixed(0)}K`:e>=1e3?i=`${(e/1e3).toFixed(1)}K`:i=`${e}`,vn.jsxs("div",{children:[vn.jsx("div",{children:Number.isFinite(e)?`Points: ${i}`:null}),vn.jsx("div",{children:Number.isFinite(n)?`Load time: ${(n/1e3).toFixed(1)}s`:null})]})}render(){return vn.jsx(Gq,{children:vn.jsx("input",{type:"file",onChange:this.props.onExampleChange})})}}Zm.propTypes=Xq;Zm.defaultProps=Hq;const Ep="https://raw.githubusercontent.com/visgl/deck.gl-data/master",Va="https://raw.githubusercontent.com/visgl/loaders.gl/master",Yq={PLY:{"Lucy 800K":{uri:`${Ep}/examples/point-cloud-ply/lucy800k.ply`},"Lucy 100K":{uri:`${Ep}/examples/point-cloud-ply/lucy100k.ply`},Bunny:{uri:`${Va}/modules/ply/test/data/bunny.ply`},"Bun Zipper (Text)":{uri:`${Va}/modules/ply/test/data/bun_zipper.ply`},"Richmond Azaelias":{uri:`${Va}/modules/ply/test/data/richmond-azaelias.ply`}},LAZ:{"Indoor Scan 800K":{uri:`${Ep}/examples/point-cloud-laz/indoor.0.1.laz`}},Draco:{Bunny:{uri:`${Va}/modules/draco/test/data/bunny.drc`}},OBJ:{Magnolia:{uri:`${Va}/modules/obj/test/data/magnolia.obj`},Bunny:{uri:`${Va}/modules/obj/test/data/bunny.obj`}}};I$([PJ,XS,oQ,AQ,MQ]);const lT={target:[0,0,0],rotationX:0,rotationOrbit:0,orbitAxis:"Y",fov:50,minZoom:0,maxZoom:10,zoom:1},$q=new nh(["rotationOrbit"]);function Jq(t){const e=[Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE],n=[Number.MIN_VALUE,Number.MIN_VALUE,Number.MIN_VALUE],i=t.POSITION.size,a=t.POSITION.value.length/i;for(let l=0;l<a;l+=i){const f=t.POSITION.value[l],d=t.POSITION.value[l+1],g=t.POSITION.value[l+2];f<e[0]?e[0]=f:f>n[0]&&(n[0]=f),d<e[1]?e[1]=d:d>n[1]&&(n[1]=d),g<e[2]?e[2]=g:g>n[2]&&(n[2]=g)}return{mins:e,maxs:n}}function Qq(t){const e={getPosition:t.POSITION};return t.COLOR_0&&(e.getColor=t.COLOR_0),{length:t.POSITION.value.length/t.POSITION.size,attributes:e}}class qq extends it.PureComponent{constructor(e){super(e),this.state={viewState:lT,pointData:null,selectedExample:"Richmond Azaelias",selectedCategory:"PLY"},this._onLoad=this._onLoad.bind(this),this._rotateCamera=this._rotateCamera.bind(this),this._onViewStateChange=this._onViewStateChange.bind(this),this._onExampleChange=this._onExampleChange.bind(this)}_onViewStateChange({viewState:e}){this.setState({viewState:e})}_rotateCamera(){const{viewState:e}=this.state;this.setState({viewState:{...e,rotationOrbit:e.rotationOrbit+10,transitionDuration:600,transitionInterpolator:$q,onTransitionEnd:this._rotateCamera}})}async _onExampleChange(e){var n;if((n=e.target)!=null&&n.files){const i=e.target.files[0];console.log(i),this._loadStartMs=Date.now(),this.setState({selectedCategory:i.name,selectedExample:"",pointData:null,loadTimeMs:void 0}),uJ(i,XS).then(this._onLoad.bind(this))}}_onLoad({header:e,loaderData:n,attributes:i,progress:a}){var g,v;const{maxs:l,mins:f}=(g=n.header)!=null&&g.mins&&((v=n.header)!=null&&v.maxs)?n.header:Jq(i);let{viewState:d}=this.state;d={...lT,target:[(f[0]+l[0])/2,(f[1]+l[1])/2,(f[2]+l[2])/2],zoom:Math.log2(window.innerWidth/(l[0]-f[0]))-1},this.setState({loadTimeMs:Date.now()-this._loadStartMs,pointData:Qq(i),viewState:d},this._rotateCamera)}_renderLayers(){const{pointData:e,selectedExample:n}=this.state;return[e&&new Cm({id:`point-cloud-layer-${n}`,coordinateSystem:lt.CARTESIAN,data:e,getNormal:[0,1,0],getColor:[255,255,255],opacity:.5,pointSize:.5})]}_renderControlPanel(){const{selectedExample:e,pointData:n,selectedCategory:i,loadTimeMs:a}=this.state;return vn.jsx(Zm,{examples:Yq,selectedCategory:i,selectedExample:e,onExampleChange:this._onExampleChange,vertexCount:n&&n.length,loadTimeMs:a})}render(){const{viewState:e}=this.state,{panel:n=!0}=this.props;return vn.jsxs("div",{style:{position:"relative",height:"100%"},children:[vn.jsx("div",{style:{visibility:n?"default":"hidden"},children:this._renderControlPanel()}),vn.jsx(AY,{views:new hS,viewState:e,controller:{inertia:!0},onViewStateChange:this._onViewStateChange,layers:this._renderLayers(),parameters:{clearColor:[.07,.14,.19,1]}})]})}}function Kq(t){oU.render(vn.jsx(qq,{}),t)}Kq(document.getElementById("app"))});export default eK();
